/*! For license information please see vendors-viz-02-escher.721fc398b4308b6cb53e.js.LICENSE */
(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[168],{0:function(e,t,r){"use strict";r.d(t,"b",(function(){return s}));r.d(t,"a",(function(){return l}));var n=function(e,t){n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r]};return n(e,t)};function i(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var a=function(){a=Object.assign||function e(t){for(var r,n=1,i=arguments.length;n<i;n++){r=arguments[n];for(var a in r)if(Object.prototype.hasOwnProperty.call(r,a))t[a]=r[a]}return t};return a.apply(this,arguments)};function o(e,t){var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0)r[n]=e[n];if(e!=null&&typeof Object.getOwnPropertySymbols==="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++){if(t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i]))r[n[i]]=e[n[i]]}return r}function s(e,t,r,n){var i=arguments.length,a=i<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,o;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)if(o=e[s])a=(i<3?o(a):i>3?o(t,r,a):o(t,r))||a;return i>3&&a&&Object.defineProperty(t,r,a),a}function u(e,t){return function(r,n){t(r,n,e)}}function c(e,t){if(typeof Reflect==="object"&&typeof Reflect.metadata==="function")return Reflect.metadata(e,t)}function l(e,t,r,n){return new(r||(r=Promise))((function(i,a){function o(e){try{u(n.next(e))}catch(e){a(e)}}function s(e){try{u(n["throw"](e))}catch(e){a(e)}}function u(e){e.done?i(e.value):new r((function(t){t(e.value)})).then(o,s)}u((n=n.apply(e,t||[])).next())}))}function f(e,t){var r={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,i,a,o;return o={next:s(0),throw:s(1),return:s(2)},typeof Symbol==="function"&&(o[Symbol.iterator]=function(){return this}),o;function s(e){return function(t){return u([e,t])}}function u(o){if(n)throw new TypeError("Generator is already executing.");while(r)try{if(n=1,i&&(a=o[0]&2?i["return"]:o[0]?i["throw"]||((a=i["return"])&&a.call(i),0):i.next)&&!(a=a.call(i,o[1])).done)return a;if(i=0,a)o=[o[0]&2,a.value];switch(o[0]){case 0:case 1:a=o;break;case 4:r.label++;return{value:o[1],done:false};case 5:r.label++;i=o[1];o=[0];continue;case 7:o=r.ops.pop();r.trys.pop();continue;default:if(!(a=r.trys,a=a.length>0&&a[a.length-1])&&(o[0]===6||o[0]===2)){r=0;continue}if(o[0]===3&&(!a||o[1]>a[0]&&o[1]<a[3])){r.label=o[1];break}if(o[0]===6&&r.label<a[1]){r.label=a[1];a=o;break}if(a&&r.label<a[2]){r.label=a[2];r.ops.push(o);break}if(a[2])r.ops.pop();r.trys.pop();continue}o=t.call(e,r)}catch(e){o=[6,e];i=0}finally{n=a=0}if(o[0]&5)throw o[1];return{value:o[0]?o[1]:void 0,done:true}}}function h(e,t){for(var r in e)if(!t.hasOwnProperty(r))t[r]=e[r]}function d(e){var t=typeof Symbol==="function"&&e[Symbol.iterator],r=0;if(t)return t.call(e);return{next:function(){if(e&&r>=e.length)e=void 0;return{value:e&&e[r++],done:!e}}}}function p(e,t){var r=typeof Symbol==="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),i,a=[],o;try{while((t===void 0||t-- >0)&&!(i=n.next()).done)a.push(i.value)}catch(e){o={error:e}}finally{try{if(i&&!i.done&&(r=n["return"]))r.call(n)}finally{if(o)throw o.error}}return a}function v(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(p(arguments[t]));return e}function m(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;for(var n=Array(e),i=0,t=0;t<r;t++)for(var a=arguments[t],o=0,s=a.length;o<s;o++,i++)n[i]=a[o];return n}function g(e){return this instanceof g?(this.v=e,this):new g(e)}function y(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(e,t||[]),i,a=[];return i={},o("next"),o("throw"),o("return"),i[Symbol.asyncIterator]=function(){return this},i;function o(e){if(n[e])i[e]=function(t){return new Promise((function(r,n){a.push([e,t,r,n])>1||s(e,t)}))}}function s(e,t){try{u(n[e](t))}catch(e){f(a[0][3],e)}}function u(e){e.value instanceof g?Promise.resolve(e.value.v).then(c,l):f(a[0][2],e)}function c(e){s("next",e)}function l(e){s("throw",e)}function f(e,t){if(e(t),a.shift(),a.length)s(a[0][0],a[0][1])}}function b(e){var t,r;return t={},n("next"),n("throw",(function(e){throw e})),n("return"),t[Symbol.iterator]=function(){return this},t;function n(n,i){t[n]=e[n]?function(t){return(r=!r)?{value:g(e[n](t)),done:n==="return"}:i?i(t):t}:i}}function x(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],r;return t?t.call(e):(e=typeof d==="function"?d(e):e[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(t){r[t]=e[t]&&function(r){return new Promise((function(n,a){r=e[t](r),i(n,a,r.done,r.value)}))}}function i(e,t,r,n){Promise.resolve(n).then((function(t){e({value:t,done:r})}),t)}}function w(e,t){if(Object.defineProperty){Object.defineProperty(e,"raw",{value:t})}else{e.raw=t}return e}function A(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)if(Object.hasOwnProperty.call(e,r))t[r]=e[r];t.default=e;return t}function M(e){return e&&e.__esModule?e:{default:e}}},1038:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.RenderPass=void 0;var n=r(1347);var i=r(866);function a(e){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){a=function e(t){return typeof t}}else{a=function e(t){return t&&typeof Symbol==="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t}}return a(e)}function o(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}function u(e,t,r){if(t)s(e.prototype,t);if(r)s(e,r);return e}function c(e,t){if(t&&(a(t)==="object"||typeof t==="function")){return t}return l(e)}function l(e){if(e===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}function f(e){f=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)};return f(e)}function h(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function")}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:true,configurable:true}});if(t)d(e,t)}function d(e,t){d=Object.setPrototypeOf||function e(t,r){t.__proto__=r;return t};return d(e,t)}var p=function(e){h(t,e);function t(e,r){var i;var a=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};o(this,t);i=c(this,f(t).call(this,"RenderPass",e,r));i.needsSwap=false;i.clearPass=new n.ClearPass(a);i.overrideMaterial=a.overrideMaterial!==undefined?a.overrideMaterial:null;i.clearDepth=a.clearDepth!==undefined?a.clearDepth:false;i.clear=a.clear!==undefined?a.clear:true;return i}u(t,[{key:"render",value:function e(t,r,n,i,a){var o=this.scene;var s=this.renderToScreen?null:r;var u=o.overrideMaterial;if(this.clear){this.clearPass.renderToScreen=this.renderToScreen;this.clearPass.render(t,r)}else if(this.clearDepth){t.setRenderTarget(s);t.clearDepth()}o.overrideMaterial=this.overrideMaterial;t.render(o,this.camera,s);o.overrideMaterial=u}}]);return t}(i.Pass);t.RenderPass=p},1039:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.RawImageData=void 0;function n(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}function a(e,t,r){if(t)i(e.prototype,t);if(r)i(e,r);return e}function o(e,t,r,n){var i=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");var a=i.getContext("2d");var o=a.createImageData(e,t);var s=o.data;var u,c;var l,f;for(c=0;c<t;++c){for(u=0;u<e;++u){l=(c*e+u)*4;f=(c*e+u)*n;s[l]=n>0?r[f]:0;s[l+1]=n>1?r[f+1]:0;s[l+2]=n>2?r[f+2]:0;s[l+3]=n>3?r[f+3]:255}}i.width=e;i.height=t;a.putImageData(o,0,0);return i}var s=function(){function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0;var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null;var a=arguments.length>3&&arguments[3]!==undefined?arguments[3]:4;n(this,e);this.width=t;this.height=r;this.data=i;this.channels=a}a(e,[{key:"toCanvas",value:function e(){return typeof document==="undefined"?null:o(this.width,this.height,this.data,this.channels)}}]);return e}();t.RawImageData=s},1347:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.ClearPass=void 0;var n=r(814);var i=r(866);function a(e){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){a=function e(t){return typeof t}}else{a=function e(t){return t&&typeof Symbol==="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t}}return a(e)}function o(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}function u(e,t,r){if(t)s(e.prototype,t);if(r)s(e,r);return e}function c(e,t){if(t&&(a(t)==="object"||typeof t==="function")){return t}return l(e)}function l(e){if(e===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}function f(e){f=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)};return f(e)}function h(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function")}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:true,configurable:true}});if(t)d(e,t)}function d(e,t){d=Object.setPrototypeOf||function e(t,r){t.__proto__=r;return t};return d(e,t)}var p=new n.Color;var v=function(e){h(t,e);function t(){var e;var r=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};o(this,t);e=c(this,f(t).call(this,"ClearPass",null,null));e.needsSwap=false;e.clearColor=r.clearColor!==undefined?r.clearColor:null;e.clearAlpha=r.clearAlpha!==undefined?r.clearAlpha:0;return e}u(t,[{key:"render",value:function e(t,r,n,i,a){var o=this.clearColor;var s;if(o!==null){p.copy(t.getClearColor());s=t.getClearAlpha();t.setClearColor(o,this.clearAlpha)}t.setRenderTarget(this.renderToScreen?null:r);t.clear();if(o!==null){t.setClearColor(p,s)}}}]);return t}(i.Pass);t.ClearPass=v},1348:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});Object.defineProperty(t,"BlendFunction",{enumerable:true,get:function e(){return n.BlendFunction}});Object.defineProperty(t,"BlendMode",{enumerable:true,get:function e(){return i.BlendMode}});var n=r(830);var i=r(1349)},1349:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.BlendMode=void 0;var n=r(814);var i=r(830);function a(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}function s(e,t,r){if(t)o(e.prototype,t);if(r)o(e,r);return e}var u="vec3 blend(const in vec3 x, const in vec3 y, const in float opacity) {\r\n\r\n\treturn min(x + y, 1.0) * opacity + x * (1.0 - opacity);\r\n\r\n}\r\n\r\nvec4 blend(const in vec4 x, const in vec4 y, const in float opacity) {\r\n\r\n\treturn vec4(blend(x.rgb, y.rgb, opacity), y.a);\r\n\r\n}\r\n";var c="vec3 blend(const in vec3 x, const in vec3 y, const in float opacity) {\r\n\r\n\treturn y * opacity + x * (1.0 - opacity);\r\n\r\n}\r\n\r\nvec4 blend(const in vec4 x, const in vec4 y, const in float opacity) {\r\n\r\n\treturn vec4(blend(x.rgb, y.rgb, y.a), x.a);\r\n\r\n}\r\n";var l="vec3 blend(const in vec3 x, const in vec3 y, const in float opacity) {\r\n\r\n\treturn (x + y) * 0.5 * opacity + x * (1.0 - opacity);\r\n\r\n}\r\n\r\nvec4 blend(const in vec4 x, const in vec4 y, const in float opacity) {\r\n\r\n\treturn vec4(blend(x.rgb, y.rgb, opacity), y.a);\r\n\r\n}\r\n";var f="float blend(const in float x, const in float y) {\r\n\r\n\treturn (y == 0.0) ? y : max(1.0 - (1.0 - x) / y, 0.0);\r\n\r\n}\r\n\r\nvec3 blend(const in vec3 x, const in vec3 y, const in float opacity) {\r\n\r\n\tvec3 z = vec3(blend(x.r, y.r), blend(x.g, y.g), blend(x.b, y.b));\r\n\r\n\treturn z * opacity + x * (1.0 - opacity);\r\n\r\n}\r\n\r\nvec4 blend(const in vec4 x, const in vec4 y, const in float opacity) {\r\n\r\n\treturn vec4(blend(x.rgb, y.rgb, opacity), y.a);\r\n\r\n}\r\n";var h="float blend(const in float x, const in float y) {\r\n\r\n\treturn (y == 1.0) ? y : min(x / (1.0 - y), 1.0);\r\n\r\n}\r\n\r\nvec3 blend(const in vec3 x, const in vec3 y, const in float opacity) {\r\n\r\n\tvec3 z = vec3(blend(x.r, y.r), blend(x.g, y.g), blend(x.b, y.b));\r\n\r\n\treturn z * opacity + x * (1.0 - opacity);\r\n\r\n}\r\n\r\nvec4 blend(const in vec4 x, const in vec4 y, const in float opacity) {\r\n\r\n\treturn vec4(blend(x.rgb, y.rgb, opacity), y.a);\r\n\r\n}\r\n";var d="vec3 blend(const in vec3 x, const in vec3 y, const in float opacity) {\r\n\r\n\treturn min(x, y) * opacity + x * (1.0 - opacity);\r\n\r\n}\r\n\r\nvec4 blend(const in vec4 x, const in vec4 y, const in float opacity) {\r\n\r\n\treturn vec4(blend(x.rgb, y.rgb, opacity), y.a);\r\n\r\n}\r\n";var p="vec3 blend(const in vec3 x, const in vec3 y, const in float opacity) {\r\n\r\n\treturn abs(x - y) * opacity + x * (1.0 - opacity);\r\n\r\n}\r\n\r\nvec4 blend(const in vec4 x, const in vec4 y, const in float opacity) {\r\n\r\n\treturn vec4(blend(x.rgb, y.rgb, opacity), y.a);\r\n\r\n}\r\n";var v="vec3 blend(const in vec3 x, const in vec3 y, const in float opacity) {\r\n\r\n\treturn (x + y - 2.0 * x * y) * opacity + x * (1.0 - opacity);\r\n\r\n}\r\n\r\nvec4 blend(const in vec4 x, const in vec4 y, const in float opacity) {\r\n\r\n\treturn vec4(blend(x.rgb, y.rgb, opacity), y.a);\r\n\r\n}\r\n";var m="vec3 blend(const in vec3 x, const in vec3 y, const in float opacity) {\r\n\r\n\treturn max(x, y) * opacity + x * (1.0 - opacity);\r\n\r\n}\r\n\r\nvec4 blend(const in vec4 x, const in vec4 y, const in float opacity) {\r\n\r\n\treturn vec4(blend(x.rgb, y.rgb, opacity), y.a);\r\n\r\n}\r\n";var g="vec3 blend(const in vec3 x, const in vec3 y, const in float opacity) {\r\n\r\n\treturn x * y * opacity + x * (1.0 - opacity);\r\n\r\n}\r\n\r\nvec4 blend(const in vec4 x, const in vec4 y, const in float opacity) {\r\n\r\n\treturn vec4(blend(x.rgb, y.rgb, opacity), y.a);\r\n\r\n}\r\n";var y="vec3 blend(const in vec3 x, const in vec3 y, const in float opacity) {\r\n\r\n\treturn (1.0 - abs(1.0 - x - y)) * opacity + x * (1.0 - opacity);\r\n\r\n}\r\n\r\nvec4 blend(const in vec4 x, const in vec4 y, const in float opacity) {\r\n\r\n\treturn vec4(blend(x.rgb, y.rgb, opacity), y.a);\r\n\r\n}\r\n";var b="vec3 blend(const in vec3 x, const in vec3 y, const in float opacity) {\r\n\r\n\treturn y * opacity + x * (1.0 - opacity);\r\n\r\n}\r\n\r\nvec4 blend(const in vec4 x, const in vec4 y, const in float opacity) {\r\n\r\n\treturn vec4(blend(x.rgb, y.rgb, opacity), y.a);\r\n\r\n}\r\n";var x="float blend(const in float x, const in float y) {\r\n\r\n\treturn (x < 0.5) ? (2.0 * x * y) : (1.0 - 2.0 * (1.0 - x) * (1.0 - y));\r\n\r\n}\r\n\r\nvec3 blend(const in vec3 x, const in vec3 y, const in float opacity) {\r\n\r\n\tvec3 z = vec3(blend(x.r, y.r), blend(x.g, y.g), blend(x.b, y.b));\r\n\r\n\treturn z * opacity + x * (1.0 - opacity);\r\n\r\n}\r\n\r\nvec4 blend(const in vec4 x, const in vec4 y, const in float opacity) {\r\n\r\n\treturn vec4(blend(x.rgb, y.rgb, opacity), y.a);\r\n\r\n}\r\n";var w="float blend(const in float x, const in float y) {\r\n\r\n\treturn (y == 1.0) ? y : min(x * x / (1.0 - y), 1.0);\r\n\r\n}\r\n\r\nvec3 blend(const in vec3 x, const in vec3 y, const in float opacity) {\r\n\r\n\tvec3 z = vec3(blend(x.r, y.r), blend(x.g, y.g), blend(x.b, y.b));\r\n\r\n\treturn z * opacity + x * (1.0 - opacity);\r\n\r\n}\r\n\r\nvec4 blend(const in vec4 x, const in vec4 y, const in float opacity) {\r\n\r\n\treturn vec4(blend(x.rgb, y.rgb, opacity), y.a);\r\n\r\n}\r\n";var A="vec3 blend(const in vec3 x, const in vec3 y, const in float opacity) {\r\n\r\n\treturn (1.0 - (1.0 - x) * (1.0 - y)) * opacity + x * (1.0 - opacity);\r\n\r\n}\r\n\r\nvec4 blend(const in vec4 x, const in vec4 y, const in float opacity) {\r\n\r\n\treturn vec4(blend(x.rgb, y.rgb, opacity), y.a);\r\n\r\n}\r\n";var M="float blend(const in float x, const in float y) {\r\n\r\n\treturn (y < 0.5) ?\r\n\t\t(2.0 * x * y + x * x * (1.0 - 2.0 * y)) :\r\n\t\t(sqrt(x) * (2.0 * y - 1.0) + 2.0 * x * (1.0 - y));\r\n\r\n}\r\n\r\nvec3 blend(const in vec3 x, const in vec3 y, const in float opacity) {\r\n\r\n\tvec3 z = vec3(blend(x.r, y.r), blend(x.g, y.g), blend(x.b, y.b));\r\n\r\n\treturn z * opacity + x * (1.0 - opacity);\r\n\r\n}\r\n\r\nvec4 blend(const in vec4 x, const in vec4 y, const in float opacity) {\r\n\r\n\treturn vec4(blend(x.rgb, y.rgb, opacity), y.a);\r\n\r\n}\r\n";var E="vec3 blend(const in vec3 x, const in vec3 y, const in float opacity) {\r\n\r\n\treturn max(x + y - 1.0, 0.0) * opacity + x * (1.0 - opacity);\r\n\r\n}\r\n\r\nvec4 blend(const in vec4 x, const in vec4 y, const in float opacity) {\r\n\r\n\treturn vec4(blend(x.rgb, y.rgb, opacity), y.a);\r\n\r\n}\r\n";var S=new Map([[i.BlendFunction.SKIP,null],[i.BlendFunction.ADD,u],[i.BlendFunction.ALPHA,c],[i.BlendFunction.AVERAGE,l],[i.BlendFunction.COLOR_BURN,f],[i.BlendFunction.COLOR_DODGE,h],[i.BlendFunction.DARKEN,d],[i.BlendFunction.DIFFERENCE,p],[i.BlendFunction.EXCLUSION,v],[i.BlendFunction.LIGHTEN,m],[i.BlendFunction.MULTIPLY,g],[i.BlendFunction.NEGATION,y],[i.BlendFunction.NORMAL,b],[i.BlendFunction.OVERLAY,x],[i.BlendFunction.REFLECT,w],[i.BlendFunction.SCREEN,A],[i.BlendFunction.SOFT_LIGHT,M],[i.BlendFunction.SUBTRACT,E]]);var T=function(){function e(t){var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:1;a(this,e);this.blendFunction=t;this.opacity=new n.Uniform(r)}s(e,[{key:"getShaderCode",value:function e(){return S.get(this.blendFunction)}}]);return e}();t.BlendMode=T},1777:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});Object.defineProperty(t,"Disposable",{enumerable:true,get:function e(){return n.Disposable}});Object.defineProperty(t,"Initializable",{enumerable:true,get:function e(){return n.Initializable}});Object.defineProperty(t,"EffectComposer",{enumerable:true,get:function e(){return n.EffectComposer}});Object.defineProperty(t,"Resizable",{enumerable:true,get:function e(){return n.Resizable}});Object.defineProperty(t,"BlendFunction",{enumerable:true,get:function e(){return i.BlendFunction}});Object.defineProperty(t,"BlendMode",{enumerable:true,get:function e(){return i.BlendMode}});Object.defineProperty(t,"BloomEffect",{enumerable:true,get:function e(){return i.BloomEffect}});Object.defineProperty(t,"BokehEffect",{enumerable:true,get:function e(){return i.BokehEffect}});Object.defineProperty(t,"BrightnessContrastEffect",{enumerable:true,get:function e(){return i.BrightnessContrastEffect}});Object.defineProperty(t,"ColorAverageEffect",{enumerable:true,get:function e(){return i.ColorAverageEffect}});Object.defineProperty(t,"ChromaticAberrationEffect",{enumerable:true,get:function e(){return i.ChromaticAberrationEffect}});Object.defineProperty(t,"DepthEffect",{enumerable:true,get:function e(){return i.DepthEffect}});Object.defineProperty(t,"DotScreenEffect",{enumerable:true,get:function e(){return i.DotScreenEffect}});Object.defineProperty(t,"Effect",{enumerable:true,get:function e(){return i.Effect}});Object.defineProperty(t,"EffectAttribute",{enumerable:true,get:function e(){return i.EffectAttribute}});Object.defineProperty(t,"GammaCorrectionEffect",{enumerable:true,get:function e(){return i.GammaCorrectionEffect}});Object.defineProperty(t,"GlitchEffect",{enumerable:true,get:function e(){return i.GlitchEffect}});Object.defineProperty(t,"GlitchMode",{enumerable:true,get:function e(){return i.GlitchMode}});Object.defineProperty(t,"GodRaysEffect",{enumerable:true,get:function e(){return i.GodRaysEffect}});Object.defineProperty(t,"GridEffect",{enumerable:true,get:function e(){return i.GridEffect}});Object.defineProperty(t,"HueSaturationEffect",{enumerable:true,get:function e(){return i.HueSaturationEffect}});Object.defineProperty(t,"NoiseEffect",{enumerable:true,get:function e(){return i.NoiseEffect}});Object.defineProperty(t,"OutlineEffect",{enumerable:true,get:function e(){return i.OutlineEffect}});Object.defineProperty(t,"PixelationEffect",{enumerable:true,get:function e(){return i.PixelationEffect}});Object.defineProperty(t,"RealisticBokehEffect",{enumerable:true,get:function e(){return i.RealisticBokehEffect}});Object.defineProperty(t,"ScanlineEffect",{enumerable:true,get:function e(){return i.ScanlineEffect}});Object.defineProperty(t,"ShockWaveEffect",{enumerable:true,get:function e(){return i.ShockWaveEffect}});Object.defineProperty(t,"SepiaEffect",{enumerable:true,get:function e(){return i.SepiaEffect}});Object.defineProperty(t,"SMAAEffect",{enumerable:true,get:function e(){return i.SMAAEffect}});Object.defineProperty(t,"SSAOEffect",{enumerable:true,get:function e(){return i.SSAOEffect}});Object.defineProperty(t,"TextureEffect",{enumerable:true,get:function e(){return i.TextureEffect}});Object.defineProperty(t,"ToneMappingEffect",{enumerable:true,get:function e(){return i.ToneMappingEffect}});Object.defineProperty(t,"VignetteEffect",{enumerable:true,get:function e(){return i.VignetteEffect}});Object.defineProperty(t,"RawImageData",{enumerable:true,get:function e(){return a.RawImageData}});Object.defineProperty(t,"SMAAAreaImageData",{enumerable:true,get:function e(){return a.SMAAAreaImageData}});Object.defineProperty(t,"SMAASearchImageData",{enumerable:true,get:function e(){return a.SMAASearchImageData}});Object.defineProperty(t,"AdaptiveLuminanceMaterial",{enumerable:true,get:function e(){return o.AdaptiveLuminanceMaterial}});Object.defineProperty(t,"ColorEdgesMaterial",{enumerable:true,get:function e(){return o.ColorEdgesMaterial}});Object.defineProperty(t,"ConvolutionMaterial",{enumerable:true,get:function e(){return o.ConvolutionMaterial}});Object.defineProperty(t,"CopyMaterial",{enumerable:true,get:function e(){return o.CopyMaterial}});Object.defineProperty(t,"DepthComparisonMaterial",{enumerable:true,get:function e(){return o.DepthComparisonMaterial}});Object.defineProperty(t,"EffectMaterial",{enumerable:true,get:function e(){return o.EffectMaterial}});Object.defineProperty(t,"GodRaysMaterial",{enumerable:true,get:function e(){return o.GodRaysMaterial}});Object.defineProperty(t,"KernelSize",{enumerable:true,get:function e(){return o.KernelSize}});Object.defineProperty(t,"LuminanceMaterial",{enumerable:true,get:function e(){return o.LuminanceMaterial}});Object.defineProperty(t,"OutlineEdgesMaterial",{enumerable:true,get:function e(){return o.OutlineEdgesMaterial}});Object.defineProperty(t,"SMAAWeightsMaterial",{enumerable:true,get:function e(){return o.SMAAWeightsMaterial}});Object.defineProperty(t,"BlurPass",{enumerable:true,get:function e(){return s.BlurPass}});Object.defineProperty(t,"ClearPass",{enumerable:true,get:function e(){return s.ClearPass}});Object.defineProperty(t,"ClearMaskPass",{enumerable:true,get:function e(){return s.ClearMaskPass}});Object.defineProperty(t,"DepthPass",{enumerable:true,get:function e(){return s.DepthPass}});Object.defineProperty(t,"EffectPass",{enumerable:true,get:function e(){return s.EffectPass}});Object.defineProperty(t,"MaskPass",{enumerable:true,get:function e(){return s.MaskPass}});Object.defineProperty(t,"NormalPass",{enumerable:true,get:function e(){return s.NormalPass}});Object.defineProperty(t,"Pass",{enumerable:true,get:function e(){return s.Pass}});Object.defineProperty(t,"RenderPass",{enumerable:true,get:function e(){return s.RenderPass}});Object.defineProperty(t,"SavePass",{enumerable:true,get:function e(){return s.SavePass}});Object.defineProperty(t,"ShaderPass",{enumerable:true,get:function e(){return s.ShaderPass}});var n=r(1778);var i=r(1801);var a=r(1828);var o=r(874);var s=r(896)},1778:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});Object.defineProperty(t,"Disposable",{enumerable:true,get:function e(){return n.Disposable}});Object.defineProperty(t,"Initializable",{enumerable:true,get:function e(){return i.Initializable}});Object.defineProperty(t,"EffectComposer",{enumerable:true,get:function e(){return a.EffectComposer}});Object.defineProperty(t,"Resizable",{enumerable:true,get:function e(){return o.Resizable}});var n=r(1779);var i=r(1780);var a=r(1781);var o=r(1800)},1779:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.Disposable=void 0;function n(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}function a(e,t,r){if(t)i(e.prototype,t);if(r)i(e,r);return e}var o=function(){function e(){n(this,e)}a(e,[{key:"dispose",value:function e(){}}]);return e}();t.Disposable=o},1780:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.Initializable=void 0;function n(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}function a(e,t,r){if(t)i(e.prototype,t);if(r)i(e,r);return e}var o=function(){function e(){n(this,e)}a(e,[{key:"initialize",value:function e(t,r){}}]);return e}();t.Initializable=o},1781:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.EffectComposer=void 0;var n=r(814);var i=r(896);var a=r(874);function o(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}function u(e,t,r){if(t)s(e.prototype,t);if(r)s(e,r);return e}var c=function(){function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};o(this,e);var n=Object.assign({depthBuffer:true,stencilBuffer:false},r);this.renderer=t;this.inputBuffer=null;this.outputBuffer=null;if(this.renderer!==null){this.renderer.autoClear=false;this.inputBuffer=this.createBuffer(n.depthBuffer,n.stencilBuffer);this.outputBuffer=this.inputBuffer.clone()}this.copyPass=new i.ShaderPass(new a.CopyMaterial);this.passes=[]}u(e,[{key:"replaceRenderer",value:function e(t){var r=this.renderer;var n,i,a;if(r!==null&&r!==t){this.renderer=t;this.renderer.autoClear=false;n=r.domElement.parentNode;i=r.getSize();a=t.getSize();if(n!==null){n.removeChild(r.domElement);n.appendChild(t.domElement)}if(i.width!==a.width||i.height!==a.height){this.setSize()}}return r}},{key:"getDepthTexture",value:function e(t){var r=this.passes;var n=null;var a=true;var o,s;for(o=0;o<t;++o){s=r[o];if(s.needsSwap){a=!a}else if(s instanceof i.RenderPass){n=(a?this.inputBuffer:this.outputBuffer).depthTexture}}return n}},{key:"createDepthTexture",value:function e(){var t=new n.DepthTexture;if(this.inputBuffer.stencilBuffer){t.format=n.DepthStencilFormat;t.type=n.UnsignedInt248Type}this.inputBuffer.depthTexture=t;this.outputBuffer.depthTexture=t.clone()}},{key:"createBuffer",value:function e(t,r){var i=this.renderer.getDrawingBufferSize();var a=this.renderer.context.getContextAttributes().alpha;var o=new n.WebGLRenderTarget(i.width,i.height,{minFilter:n.LinearFilter,magFilter:n.LinearFilter,format:a?n.RGBAFormat:n.RGBFormat,depthBuffer:t,stencilBuffer:r});o.texture.name="EffectComposer.Buffer";o.texture.generateMipmaps=false;return o}},{key:"addPass",value:function e(t,r){var n=this.renderer;var i=n.getDrawingBufferSize();t.setSize(i.width,i.height);t.initialize(n,n.context.getContextAttributes().alpha);if(r!==undefined){this.passes.splice(r,0,t)}else{r=this.passes.push(t)-1}if(t.needsDepthTexture){if(this.inputBuffer.depthTexture===null){this.createDepthTexture()}t.setDepthTexture(this.getDepthTexture(r))}}},{key:"removePass",value:function e(t){this.passes.splice(this.passes.indexOf(t),1)}},{key:"render",value:function e(t){var r=this.renderer;var n=this.copyPass;var a=this.inputBuffer;var o=this.outputBuffer;var s=false;var u,c,l;var f=true;var h=false;var d=undefined;try{for(var p=this.passes[Symbol.iterator](),v;!(f=(v=p.next()).done);f=true){var m=v.value;if(m.enabled){m.render(r,a,o,t,s);if(m.needsSwap){if(s){n.renderToScreen=m.renderToScreen;u=r.context;c=r.state;c.buffers.stencil.setFunc(u.NOTEQUAL,1,4294967295);n.render(r,a,o,t,s);c.buffers.stencil.setFunc(u.EQUAL,1,4294967295)}l=a;a=o;o=l}if(m instanceof i.MaskPass){s=true}else if(m instanceof i.ClearMaskPass){s=false}}}}catch(e){h=true;d=e}finally{try{if(!f&&p.return!=null){p.return()}}finally{if(h){throw d}}}}},{key:"setSize",value:function e(t,r){var n=this.renderer;var i,a;if(t===undefined||r===undefined){i=n.getSize();t=i.width;r=i.height}n.setSize(t,r);a=n.getDrawingBufferSize();this.inputBuffer.setSize(a.width,a.height);this.outputBuffer.setSize(a.width,a.height);var o=true;var s=false;var u=undefined;try{for(var c=this.passes[Symbol.iterator](),l;!(o=(l=c.next()).done);o=true){var f=l.value;f.setSize(a.width,a.height)}}catch(e){s=true;u=e}finally{try{if(!o&&c.return!=null){c.return()}}finally{if(s){throw u}}}}},{key:"reset",value:function e(){var t=this.createBuffer(this.inputBuffer.depthBuffer,this.inputBuffer.stencilBuffer);this.dispose();this.inputBuffer=t;this.outputBuffer=t.clone();this.copyPass=new i.ShaderPass(new a.CopyMaterial)}},{key:"dispose",value:function e(){var t=true;var r=false;var n=undefined;try{for(var i=this.passes[Symbol.iterator](),a;!(t=(a=i.next()).done);t=true){var o=a.value;o.dispose()}}catch(e){r=true;n=e}finally{try{if(!t&&i.return!=null){i.return()}}finally{if(r){throw n}}}this.passes=[];if(this.inputBuffer!==null){this.inputBuffer.dispose();this.inputBuffer=null}if(this.outputBuffer!==null){this.outputBuffer.dispose();this.outputBuffer=null}this.copyPass.dispose()}}]);return e}();t.EffectComposer=c},1782:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.BlurPass=void 0;var n=r(814);var i=r(874);var a=r(866);function o(e){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){o=function e(t){return typeof t}}else{o=function e(t){return t&&typeof Symbol==="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t}}return o(e)}function s(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function u(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}function c(e,t,r){if(t)u(e.prototype,t);if(r)u(e,r);return e}function l(e,t){if(t&&(o(t)==="object"||typeof t==="function")){return t}return f(e)}function f(e){if(e===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}function h(e){h=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)};return h(e)}function d(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function")}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:true,configurable:true}});if(t)p(e,t)}function p(e,t){p=Object.setPrototypeOf||function e(t,r){t.__proto__=r;return t};return p(e,t)}var v=function(e){d(t,e);function t(){var e;var r=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};s(this,t);e=l(this,h(t).call(this,"BlurPass"));e.renderTargetX=new n.WebGLRenderTarget(1,1,{minFilter:n.LinearFilter,magFilter:n.LinearFilter,stencilBuffer:false,depthBuffer:false});e.renderTargetX.texture.name="Blur.TargetX";e.renderTargetX.texture.generateMipmaps=false;e.renderTargetY=e.renderTargetX.clone();e.renderTargetY.texture.name="Blur.TargetY";e.resolution=new n.Vector2;e.resolutionScale=r.resolutionScale!==undefined?r.resolutionScale:.5;e.convolutionMaterial=new i.ConvolutionMaterial;e.ditheredConvolutionMaterial=new i.ConvolutionMaterial;e.ditheredConvolutionMaterial.dithering=true;e.dithering=false;e.kernelSize=r.kernelSize;return e}c(t,[{key:"getResolutionScale",value:function e(){return this.resolutionScale}},{key:"setResolutionScale",value:function e(t){this.resolutionScale=t;this.setSize(this.resolution.x,this.resolution.y)}},{key:"render",value:function e(t,r,n,i,a){var o=this.scene;var s=this.camera;var u=this.renderTargetX;var c=this.renderTargetY;var l=this.convolutionMaterial;var f=l.uniforms;var h=l.getKernel();var d=r;var p;var v,m;this.setFullscreenMaterial(l);for(v=0,m=h.length-1;v<m;++v){p=v%2===0?u:c;f.kernel.value=h[v];f.inputBuffer.value=d.texture;t.render(o,s,p);d=p}if(this.dithering){l=this.ditheredConvolutionMaterial;f=l.uniforms;this.setFullscreenMaterial(l)}f.kernel.value=h[v];f.inputBuffer.value=d.texture;t.render(o,s,this.renderToScreen?null:n)}},{key:"setSize",value:function e(t,r){this.resolution.set(t,r);t=Math.max(1,Math.floor(t*this.resolutionScale));r=Math.max(1,Math.floor(r*this.resolutionScale));this.renderTargetX.setSize(t,r);this.renderTargetY.setSize(t,r);this.convolutionMaterial.setTexelSize(1/t,1/r);this.ditheredConvolutionMaterial.setTexelSize(1/t,1/r)}},{key:"initialize",value:function e(t,r){if(!r){this.renderTargetX.texture.format=n.RGBFormat;this.renderTargetY.texture.format=n.RGBFormat}}},{key:"width",get:function e(){return this.renderTargetX.width}},{key:"height",get:function e(){return this.renderTargetX.height}},{key:"kernelSize",get:function e(){return this.convolutionMaterial.kernelSize},set:function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:i.KernelSize.LARGE;this.convolutionMaterial.kernelSize=t;this.ditheredConvolutionMaterial.kernelSize=t}}]);return t}(a.Pass);t.BlurPass=v},1783:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.AdaptiveLuminanceMaterial=void 0;var n=r(814);function i(e){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){i=function e(t){return typeof t}}else{i=function e(t){return t&&typeof Symbol==="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t}}return i(e)}function a(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function o(e,t){if(t&&(i(t)==="object"||typeof t==="function")){return t}return s(e)}function s(e){if(e===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}function u(e){u=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)};return u(e)}function c(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function")}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:true,configurable:true}});if(t)l(e,t)}function l(e,t){l=Object.setPrototypeOf||function e(t,r){t.__proto__=r;return t};return l(e,t)}var f="uniform sampler2D previousLuminanceBuffer;\r\nuniform sampler2D currentLuminanceBuffer;\r\nuniform float minLuminance;\r\nuniform float delta;\r\nuniform float tau;\r\n\r\nvarying vec2 vUv;\r\n\r\nvoid main() {\r\n\r\n\tfloat previousLuminance = texture2D(previousLuminanceBuffer, vUv, MIP_LEVEL_1X1).r;\r\n\tfloat currentLuminance = texture2D(currentLuminanceBuffer, vUv, MIP_LEVEL_1X1).r;\r\n\r\n\tpreviousLuminance = max(minLuminance, previousLuminance);\r\n\tcurrentLuminance = max(minLuminance, currentLuminance);\r\n\r\n\t// Adapt the luminance using Pattanaik's technique.\r\n\tfloat adaptedLum = previousLuminance + (currentLuminance - previousLuminance) * (1.0 - exp(-delta * tau));\r\n\r\n\tgl_FragColor.r = adaptedLum;\r\n\r\n}\r\n";var h="varying vec2 vUv;\r\n\r\nvoid main() {\r\n\r\n\tvUv = uv;\r\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\r\n\r\n}\r\n";var d=function(e){c(t,e);function t(){a(this,t);return o(this,u(t).call(this,{type:"AdaptiveLuminanceMaterial",defines:{MIP_LEVEL_1X1:"0.0"},uniforms:{previousLuminanceBuffer:new n.Uniform(null),currentLuminanceBuffer:new n.Uniform(null),minLuminance:new n.Uniform(.01),delta:new n.Uniform(0),tau:new n.Uniform(1)},fragmentShader:f,vertexShader:h,depthWrite:false,depthTest:false}))}return t}(n.ShaderMaterial);t.AdaptiveLuminanceMaterial=d},1784:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.ColorEdgesMaterial=void 0;var n=r(814);function i(e){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){i=function e(t){return typeof t}}else{i=function e(t){return t&&typeof Symbol==="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t}}return i(e)}function a(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}function s(e,t,r){if(t)o(e.prototype,t);if(r)o(e,r);return e}function u(e,t){if(t&&(i(t)==="object"||typeof t==="function")){return t}return c(e)}function c(e){if(e===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}function l(e){l=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)};return l(e)}function f(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function")}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:true,configurable:true}});if(t)h(e,t)}function h(e,t){h=Object.setPrototypeOf||function e(t,r){t.__proto__=r;return t};return h(e,t)}var d="uniform sampler2D inputBuffer;\r\n\r\nvarying vec2 vUv;\r\n\r\nvarying vec2 vUv0;\r\nvarying vec2 vUv1;\r\nvarying vec2 vUv2;\r\nvarying vec2 vUv3;\r\nvarying vec2 vUv4;\r\nvarying vec2 vUv5;\r\n\r\nvoid main() {\r\n\r\n\tconst vec2 threshold = vec2(EDGE_THRESHOLD);\r\n\r\n\t// Calculate color deltas.\r\n\tvec4 delta;\r\n\tvec3 c = texture2D(inputBuffer, vUv).rgb;\r\n\r\n\tvec3 cLeft = texture2D(inputBuffer, vUv0).rgb;\r\n\tvec3 t = abs(c - cLeft);\r\n\tdelta.x = max(max(t.r, t.g), t.b);\r\n\r\n\tvec3 cTop = texture2D(inputBuffer, vUv1).rgb;\r\n\tt = abs(c - cTop);\r\n\tdelta.y = max(max(t.r, t.g), t.b);\r\n\r\n\t// Use a threshold to detect significant color edges.\r\n\tvec2 edges = step(threshold, delta.xy);\r\n\r\n\t// Discard if there is no edge.\r\n\tif(dot(edges, vec2(1.0)) == 0.0) {\r\n\r\n\t\tdiscard;\r\n\r\n\t}\r\n\r\n\t// Calculate right and bottom deltas.\r\n\tvec3 cRight = texture2D(inputBuffer, vUv2).rgb;\r\n\tt = abs(c - cRight);\r\n\tdelta.z = max(max(t.r, t.g), t.b);\r\n\r\n\tvec3 cBottom = texture2D(inputBuffer, vUv3).rgb;\r\n\tt = abs(c - cBottom);\r\n\tdelta.w = max(max(t.r, t.g), t.b);\r\n\r\n\t// Calculate the maximum delta in the direct neighborhood.\r\n\tfloat maxDelta = max(max(max(delta.x, delta.y), delta.z), delta.w);\r\n\r\n\t// Calculate left-left and top-top deltas.\r\n\tvec3 cLeftLeft = texture2D(inputBuffer, vUv4).rgb;\r\n\tt = abs(c - cLeftLeft);\r\n\tdelta.z = max(max(t.r, t.g), t.b);\r\n\r\n\tvec3 cTopTop = texture2D(inputBuffer, vUv5).rgb;\r\n\tt = abs(c - cTopTop);\r\n\tdelta.w = max(max(t.r, t.g), t.b);\r\n\r\n\t// Calculate the final maximum delta.\r\n\tmaxDelta = max(max(maxDelta, delta.z), delta.w);\r\n\r\n\t// Local contrast adaptation.\r\n\tedges *= step(0.5 * maxDelta, delta.xy);\r\n\r\n\tgl_FragColor = vec4(edges, 0.0, 0.0);\r\n\r\n}\r\n";var p="uniform vec2 texelSize;\r\n\r\nvarying vec2 vUv;\r\n\r\nvarying vec2 vUv0;\r\nvarying vec2 vUv1;\r\nvarying vec2 vUv2;\r\nvarying vec2 vUv3;\r\nvarying vec2 vUv4;\r\nvarying vec2 vUv5;\r\n\r\nvoid main() {\r\n\r\n\tvUv = uv;\r\n\r\n\t// Left and top texel coordinates.\r\n\tvUv0 = uv + texelSize * vec2(-1.0, 0.0);\r\n\tvUv1 = uv + texelSize * vec2(0.0, 1.0);\r\n\r\n\t// Right and bottom texel coordinates.\r\n\tvUv2 = uv + texelSize * vec2(1.0, 0.0);\r\n\tvUv3 = uv + texelSize * vec2(0.0, -1.0);\r\n\r\n\t// Left-left and top-top texel coordinates.\r\n\tvUv4 = uv + texelSize * vec2(-2.0, 0.0);\r\n\tvUv5 = uv + texelSize * vec2(0.0, 2.0);\r\n\r\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\r\n\r\n}\r\n";var v=function(e){f(t,e);function t(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:new n.Vector2;a(this,t);return u(this,l(t).call(this,{type:"ColorEdgesMaterial",defines:{EDGE_THRESHOLD:"0.1"},uniforms:{inputBuffer:new n.Uniform(null),texelSize:new n.Uniform(e)},fragmentShader:d,vertexShader:p,depthWrite:false,depthTest:false}))}s(t,[{key:"setEdgeDetectionThreshold",value:function e(t){this.defines.EDGE_THRESHOLD=t.toFixed("2");this.needsUpdate=true}}]);return t}(n.ShaderMaterial);t.ColorEdgesMaterial=v},1785:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.KernelSize=t.ConvolutionMaterial=void 0;var n=r(814);function i(e){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){i=function e(t){return typeof t}}else{i=function e(t){return t&&typeof Symbol==="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t}}return i(e)}function a(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}function s(e,t,r){if(t)o(e.prototype,t);if(r)o(e,r);return e}function u(e,t){if(t&&(i(t)==="object"||typeof t==="function")){return t}return c(e)}function c(e){if(e===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}function l(e){l=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)};return l(e)}function f(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function")}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:true,configurable:true}});if(t)h(e,t)}function h(e,t){h=Object.setPrototypeOf||function e(t,r){t.__proto__=r;return t};return h(e,t)}var d="#include <common>\r\n#include <dithering_pars_fragment>\r\n\r\nuniform sampler2D inputBuffer;\r\n\r\nvarying vec2 vUv0;\r\nvarying vec2 vUv1;\r\nvarying vec2 vUv2;\r\nvarying vec2 vUv3;\r\n\r\nvoid main() {\r\n\r\n\t// Sample top left texel.\r\n\tvec4 sum = texture2D(inputBuffer, vUv0);\r\n\r\n\t// Sample top right texel.\r\n\tsum += texture2D(inputBuffer, vUv1);\r\n\r\n\t// Sample bottom right texel.\r\n\tsum += texture2D(inputBuffer, vUv2);\r\n\r\n\t// Sample bottom left texel.\r\n\tsum += texture2D(inputBuffer, vUv3);\r\n\r\n\t// Compute the average.\r\n\tgl_FragColor = sum * 0.25;\r\n\r\n\t#include <dithering_fragment>\r\n\r\n}\r\n";var p="uniform vec2 texelSize;\r\nuniform vec2 halfTexelSize;\r\nuniform float kernel;\r\n\r\n/* Packing multiple texture coordinates into one varying and using a swizzle to\r\nextract them in the fragment shader still causes a dependent texture read. */\r\nvarying vec2 vUv0;\r\nvarying vec2 vUv1;\r\nvarying vec2 vUv2;\r\nvarying vec2 vUv3;\r\n\r\nvoid main() {\r\n\r\n\tvec2 dUv = (texelSize * vec2(kernel)) + halfTexelSize;\r\n\r\n\tvUv0 = vec2(uv.x - dUv.x, uv.y + dUv.y);\r\n\tvUv1 = vec2(uv.x + dUv.x, uv.y + dUv.y);\r\n\tvUv2 = vec2(uv.x + dUv.x, uv.y - dUv.y);\r\n\tvUv3 = vec2(uv.x - dUv.x, uv.y - dUv.y);\r\n\r\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\r\n\r\n}\r\n";var v=function(e){f(t,e);function t(){var e;var r=arguments.length>0&&arguments[0]!==undefined?arguments[0]:new n.Vector2;a(this,t);e=u(this,l(t).call(this,{type:"ConvolutionMaterial",uniforms:{inputBuffer:new n.Uniform(null),texelSize:new n.Uniform(new n.Vector2),halfTexelSize:new n.Uniform(new n.Vector2),kernel:new n.Uniform(0)},fragmentShader:d,vertexShader:p,depthWrite:false,depthTest:false}));e.setTexelSize(r.x,r.y);e.kernelSize=g.LARGE;return e}s(t,[{key:"getKernel",value:function e(){return m[this.kernelSize]}},{key:"setTexelSize",value:function e(t,r){this.uniforms.texelSize.value.set(t,r);this.uniforms.halfTexelSize.value.set(t,r).multiplyScalar(.5)}}]);return t}(n.ShaderMaterial);t.ConvolutionMaterial=v;var m=[new Float32Array([0,0]),new Float32Array([0,1,1]),new Float32Array([0,1,1,2]),new Float32Array([0,1,2,2,3]),new Float32Array([0,1,2,3,4,4,5]),new Float32Array([0,1,2,3,4,5,7,8,9,10])];var g={VERY_SMALL:0,SMALL:1,MEDIUM:2,LARGE:3,VERY_LARGE:4,HUGE:5};t.KernelSize=g},1786:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.CopyMaterial=void 0;var n=r(814);function i(e){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){i=function e(t){return typeof t}}else{i=function e(t){return t&&typeof Symbol==="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t}}return i(e)}function a(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function o(e,t){if(t&&(i(t)==="object"||typeof t==="function")){return t}return s(e)}function s(e){if(e===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}function u(e){u=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)};return u(e)}function c(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function")}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:true,configurable:true}});if(t)l(e,t)}function l(e,t){l=Object.setPrototypeOf||function e(t,r){t.__proto__=r;return t};return l(e,t)}var f="uniform sampler2D inputBuffer;\r\nuniform float opacity;\r\n\r\nvarying vec2 vUv;\r\n\r\nvoid main() {\r\n\r\n\tvec4 texel = texture2D(inputBuffer, vUv);\r\n\tgl_FragColor = opacity * texel;\r\n\r\n}\r\n";var h="varying vec2 vUv;\r\n\r\nvoid main() {\r\n\r\n\tvUv = uv;\r\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\r\n\r\n}\r\n";var d=function(e){c(t,e);function t(){a(this,t);return o(this,u(t).call(this,{type:"CopyMaterial",uniforms:{inputBuffer:new n.Uniform(null),opacity:new n.Uniform(1)},fragmentShader:f,vertexShader:h,depthWrite:false,depthTest:false}))}return t}(n.ShaderMaterial);t.CopyMaterial=d},1787:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.DepthComparisonMaterial=void 0;var n=r(814);function i(e){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){i=function e(t){return typeof t}}else{i=function e(t){return t&&typeof Symbol==="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t}}return i(e)}function a(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}function s(e,t,r){if(t)o(e.prototype,t);if(r)o(e,r);return e}function u(e,t){if(t&&(i(t)==="object"||typeof t==="function")){return t}return c(e)}function c(e){if(e===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}function l(e){l=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)};return l(e)}function f(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function")}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:true,configurable:true}});if(t)h(e,t)}function h(e,t){h=Object.setPrototypeOf||function e(t,r){t.__proto__=r;return t};return h(e,t)}var d="#include <packing>\r\n#include <clipping_planes_pars_fragment>\r\n\r\nuniform sampler2D depthBuffer;\r\nuniform float cameraNear;\r\nuniform float cameraFar;\r\n\r\nvarying float vViewZ;\r\nvarying vec4 vProjTexCoord;\r\n\r\nvoid main() {\r\n\r\n\t#include <clipping_planes_fragment>\r\n\r\n\t// Transform into Cartesian coordinate (not mirrored).\r\n\tvec2 projTexCoord = (vProjTexCoord.xy / vProjTexCoord.w) * 0.5 + 0.5;\r\n\tprojTexCoord = clamp(projTexCoord, 0.002, 0.998);\r\n\r\n\tfloat fragCoordZ = unpackRGBAToDepth(texture2D(depthBuffer, projTexCoord));\r\n\r\n\t#ifdef PERSPECTIVE_CAMERA\r\n\r\n\t\tfloat viewZ = perspectiveDepthToViewZ(fragCoordZ, cameraNear, cameraFar);\r\n\r\n\t#else\r\n\r\n\t\tfloat viewZ = orthographicDepthToViewZ(fragCoordZ, cameraNear, cameraFar);\r\n\r\n\t#endif\r\n\r\n\tfloat depthTest = (-vViewZ > -viewZ) ? 1.0 : 0.0;\r\n\r\n\tgl_FragColor.rgb = vec3(0.0, depthTest, 1.0);\r\n\r\n}\r\n";var p="#include <common>\r\n#include <morphtarget_pars_vertex>\r\n#include <skinning_pars_vertex>\r\n#include <clipping_planes_pars_vertex>\r\n\r\nvarying float vViewZ;\r\nvarying vec4 vProjTexCoord;\r\n\r\nvoid main() {\r\n\r\n\t#include <skinbase_vertex>\r\n\r\n\t#include <begin_vertex>\r\n\t#include <morphtarget_vertex>\r\n\t#include <skinning_vertex>\r\n\t#include <project_vertex>\r\n\r\n\tvViewZ = mvPosition.z;\r\n\tvProjTexCoord = gl_Position;\r\n\r\n\t#include <clipping_planes_vertex>\r\n\r\n}\r\n";var v=function(e){f(t,e);function t(){var e;var r=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;var i=arguments.length>1?arguments[1]:undefined;a(this,t);e=u(this,l(t).call(this,{type:"DepthComparisonMaterial",uniforms:{depthBuffer:new n.Uniform(r),cameraNear:new n.Uniform(.3),cameraFar:new n.Uniform(1e3)},fragmentShader:d,vertexShader:p,depthWrite:false,depthTest:false,morphTargets:true,skinning:true}));e.adoptCameraSettings(i);return e}s(t,[{key:"adoptCameraSettings",value:function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;if(t!==null){this.uniforms.cameraNear.value=t.near;this.uniforms.cameraFar.value=t.far;if(t instanceof n.PerspectiveCamera){this.defines.PERSPECTIVE_CAMERA="1"}else{delete this.defines.PERSPECTIVE_CAMERA}}}}]);return t}(n.ShaderMaterial);t.DepthComparisonMaterial=v},1788:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.Section=t.EffectMaterial=void 0;var n=r(814);function i(e){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){i=function e(t){return typeof t}}else{i=function e(t){return t&&typeof Symbol==="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t}}return i(e)}function a(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}function s(e,t,r){if(t)o(e.prototype,t);if(r)o(e,r);return e}function u(e,t){if(t&&(i(t)==="object"||typeof t==="function")){return t}return c(e)}function c(e){if(e===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}function l(e){l=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)};return l(e)}function f(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function")}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:true,configurable:true}});if(t)h(e,t)}function h(e,t){h=Object.setPrototypeOf||function e(t,r){t.__proto__=r;return t};return h(e,t)}var d="#include <common>\r\n#include <packing>\r\n#include <dithering_pars_fragment>\r\n\r\nuniform sampler2D inputBuffer;\r\nuniform sampler2D depthBuffer;\r\n\r\nuniform vec2 resolution;\r\nuniform vec2 texelSize;\r\n\r\nuniform float cameraNear;\r\nuniform float cameraFar;\r\nuniform float aspect;\r\nuniform float time;\r\n\r\nvarying vec2 vUv;\r\n\r\nfloat readDepth(const in vec2 uv) {\r\n\r\n\t#if DEPTH_PACKING == 3201\r\n\r\n\t\treturn unpackRGBAToDepth(texture2D(depthBuffer, uv));\r\n\r\n\t#else\r\n\r\n\t\treturn texture2D(depthBuffer, uv).r;\r\n\r\n\t#endif\r\n\r\n}\r\n\r\nFRAGMENT_HEAD\r\n\r\nvoid main() {\r\n\r\n\tFRAGMENT_MAIN_UV\r\n\r\n\tvec4 color0 = texture2D(inputBuffer, UV);\r\n\tvec4 color1 = vec4(0.0);\r\n\r\n\tFRAGMENT_MAIN_IMAGE\r\n\r\n\tgl_FragColor = color0;\r\n\r\n\t#include <dithering_fragment>\r\n\r\n}\r\n";var p="uniform vec2 resolution;\r\nuniform vec2 texelSize;\r\n\r\nuniform float cameraNear;\r\nuniform float cameraFar;\r\nuniform float aspect;\r\nuniform float time;\r\n\r\nvarying vec2 vUv;\r\n\r\nVERTEX_HEAD\r\n\r\nvoid main() {\r\n\r\n\tvUv = uv;\r\n\r\n\tVERTEX_MAIN_SUPPORT\r\n\r\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\r\n\r\n}\r\n";var v=function(e){f(t,e);function t(e,r,i){var o;var s=arguments.length>3&&arguments[3]!==undefined?arguments[3]:null;var c=arguments.length>4&&arguments[4]!==undefined?arguments[4]:false;a(this,t);o=u(this,l(t).call(this,{type:"EffectMaterial",defines:{DEPTH_PACKING:"0"},uniforms:{inputBuffer:new n.Uniform(null),depthBuffer:new n.Uniform(null),resolution:new n.Uniform(new n.Vector2),texelSize:new n.Uniform(new n.Vector2),cameraNear:new n.Uniform(.3),cameraFar:new n.Uniform(1e3),aspect:new n.Uniform(1),time:new n.Uniform(0)},fragmentShader:d.replace(m.FRAGMENT_HEAD,e.get(m.FRAGMENT_HEAD)).replace(m.FRAGMENT_MAIN_UV,e.get(m.FRAGMENT_MAIN_UV)).replace(m.FRAGMENT_MAIN_IMAGE,e.get(m.FRAGMENT_MAIN_IMAGE)),vertexShader:p.replace(m.VERTEX_HEAD,e.get(m.VERTEX_HEAD)).replace(m.VERTEX_MAIN_SUPPORT,e.get(m.VERTEX_MAIN_SUPPORT)),dithering:c,depthWrite:false,depthTest:false}));if(r!==null){var f=true;var h=false;var v=undefined;try{for(var g=r.entries()[Symbol.iterator](),y;!(f=(y=g.next()).done);f=true){var b=y.value;o.defines[b[0]]=b[1]}}catch(e){h=true;v=e}finally{try{if(!f&&g.return!=null){g.return()}}finally{if(h){throw v}}}}if(i!==null){var x=true;var w=false;var A=undefined;try{for(var M=i.entries()[Symbol.iterator](),E;!(x=(E=M.next()).done);x=true){var S=E.value;o.uniforms[S[0]]=S[1]}}catch(e){w=true;A=e}finally{try{if(!x&&M.return!=null){M.return()}}finally{if(w){throw A}}}}o.adoptCameraSettings(s);return o}s(t,[{key:"setSize",value:function e(t,r){t=Math.max(t,1);r=Math.max(r,1);this.uniforms.resolution.value.set(t,r);this.uniforms.texelSize.value.set(1/t,1/r);this.uniforms.aspect.value=t/r}},{key:"adoptCameraSettings",value:function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;if(t!==null){this.uniforms.cameraNear.value=t.near;this.uniforms.cameraFar.value=t.far;if(t instanceof n.PerspectiveCamera){this.defines.PERSPECTIVE_CAMERA="1"}else{delete this.defines.PERSPECTIVE_CAMERA}}}},{key:"depthPacking",get:function e(){return Number.parseInt(this.defines.DEPTH_PACKING)},set:function e(t){this.defines.DEPTH_PACKING=t.toFixed(0)}}]);return t}(n.ShaderMaterial);t.EffectMaterial=v;var m={FRAGMENT_HEAD:"FRAGMENT_HEAD",FRAGMENT_MAIN_UV:"FRAGMENT_MAIN_UV",FRAGMENT_MAIN_IMAGE:"FRAGMENT_MAIN_IMAGE",VERTEX_HEAD:"VERTEX_HEAD",VERTEX_MAIN_SUPPORT:"VERTEX_MAIN_SUPPORT"};t.Section=m},1789:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.GodRaysMaterial=void 0;var n=r(814);function i(e){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){i=function e(t){return typeof t}}else{i=function e(t){return t&&typeof Symbol==="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t}}return i(e)}function a(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}function s(e,t,r){if(t)o(e.prototype,t);if(r)o(e,r);return e}function u(e,t){if(t&&(i(t)==="object"||typeof t==="function")){return t}return c(e)}function c(e){if(e===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}function l(e){l=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)};return l(e)}function f(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function")}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:true,configurable:true}});if(t)h(e,t)}function h(e,t){h=Object.setPrototypeOf||function e(t,r){t.__proto__=r;return t};return h(e,t)}var d="#include <common>\r\n#include <dithering_pars_fragment>\r\n\r\nuniform sampler2D inputBuffer;\r\nuniform vec2 lightPosition;\r\nuniform float exposure;\r\nuniform float decay;\r\nuniform float density;\r\nuniform float weight;\r\nuniform float clampMax;\r\n\r\nvarying vec2 vUv;\r\n\r\nvoid main() {\r\n\r\n\tvec2 coord = vUv;\r\n\r\n\t// Calculate the vector from this pixel to the light position in screen space.\r\n\tvec2 delta = coord - lightPosition;\r\n\tdelta *= 1.0 / SAMPLES_FLOAT * density;\r\n\r\n\t// A decreasing illumination factor.\r\n\tfloat illuminationDecay = 1.0;\r\n\r\n\tvec4 sample;\r\n\tvec4 color = vec4(0.0);\r\n\r\n\t/* Estimate the probability of occlusion at each pixel by summing samples\r\n\talong a ray to the light position. */\r\n\tfor(int i = 0; i < SAMPLES_INT; ++i) {\r\n\r\n\t\tcoord -= delta;\r\n\t\tsample = texture2D(inputBuffer, coord);\r\n\r\n\t\t// Apply the sample attenuation scale/decay factors.\r\n\t\tsample *= illuminationDecay * weight;\r\n\t\tcolor += sample;\r\n\r\n\t\t// Update the exponential decay factor.\r\n\t\tilluminationDecay *= decay;\r\n\r\n\t}\r\n\r\n\tgl_FragColor = clamp(color * exposure, 0.0, clampMax);\r\n\r\n\t#include <dithering_fragment>\r\n\r\n}\r\n";var p="varying vec2 vUv;\r\n\r\nvoid main() {\r\n\r\n\tvUv = uv;\r\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\r\n\r\n}\r\n";var v=function(e){f(t,e);function t(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:new n.Vector2;var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};a(this,t);var i=Object.assign({exposure:.6,density:.93,decay:.96,weight:.4,clampMax:1},r);return u(this,l(t).call(this,{type:"GodRaysMaterial",defines:{SAMPLES_INT:"60",SAMPLES_FLOAT:"60.0"},uniforms:{inputBuffer:new n.Uniform(null),lightPosition:new n.Uniform(e),exposure:new n.Uniform(i.exposure),decay:new n.Uniform(i.decay),density:new n.Uniform(i.density),weight:new n.Uniform(i.weight),clampMax:new n.Uniform(i.clampMax)},fragmentShader:d,vertexShader:p,depthWrite:false,depthTest:false}))}s(t,[{key:"samples",get:function e(){return Number.parseInt(this.defines.SAMPLES_INT)},set:function e(t){t=Math.floor(t);this.defines.SAMPLES_INT=t.toFixed(0);this.defines.SAMPLES_FLOAT=t.toFixed(1);this.needsUpdate=true}}]);return t}(n.ShaderMaterial);t.GodRaysMaterial=v},1790:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.LuminanceMaterial=void 0;var n=r(814);function i(e){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){i=function e(t){return typeof t}}else{i=function e(t){return t&&typeof Symbol==="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t}}return i(e)}function a(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}function s(e,t,r){if(t)o(e.prototype,t);if(r)o(e,r);return e}function u(e,t){if(t&&(i(t)==="object"||typeof t==="function")){return t}return c(e)}function c(e){if(e===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}function l(e){l=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)};return l(e)}function f(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function")}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:true,configurable:true}});if(t)h(e,t)}function h(e,t){h=Object.setPrototypeOf||function e(t,r){t.__proto__=r;return t};return h(e,t)}var d="#include <common>\r\n\r\nuniform sampler2D inputBuffer;\r\nuniform float distinction;\r\nuniform vec2 range;\r\n\r\nvarying vec2 vUv;\r\n\r\nvoid main() {\r\n\r\n\tvec4 texel = texture2D(inputBuffer, vUv);\r\n\tfloat l = linearToRelativeLuminance(texel.rgb);\r\n\r\n\t#ifdef RANGE\r\n\r\n\t\tfloat low = step(range.x, l);\r\n\t\tfloat high = step(l, range.y);\r\n\r\n\t\t// Apply the mask.\r\n\t\tl *= low * high;\r\n\r\n\t#endif\r\n\r\n\tl = pow(abs(l), distinction);\r\n\r\n\t#ifdef COLOR\r\n\r\n\t\tgl_FragColor = vec4(texel.rgb * l, texel.a);\r\n\r\n\t#else\r\n\r\n\t\tgl_FragColor = vec4(l, l, l, texel.a);\r\n\r\n\t#endif\r\n\r\n}\r\n";var p="varying vec2 vUv;\r\n\r\nvoid main() {\r\n\r\n\tvUv = uv;\r\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\r\n\r\n}\r\n";var v=function(e){f(t,e);function t(){var e;var r=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;var i=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;a(this,t);var o=i!==null;e=u(this,l(t).call(this,{type:"LuminanceMaterial",uniforms:{inputBuffer:new n.Uniform(null),distinction:new n.Uniform(1),range:new n.Uniform(o?i:new n.Vector2)},fragmentShader:d,vertexShader:p}));e.setColorOutputEnabled(r);e.setLuminanceRangeEnabled(o);return e}s(t,[{key:"setColorOutputEnabled",value:function e(t){if(t){this.defines.COLOR="1"}else{delete this.defines.COLOR}this.needsUpdate=true}},{key:"setLuminanceRangeEnabled",value:function e(t){if(t){this.defines.RANGE="1"}else{delete this.defines.RANGE}this.needsUpdate=true}}]);return t}(n.ShaderMaterial);t.LuminanceMaterial=v},1791:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.OutlineEdgesMaterial=void 0;var n=r(814);function i(e){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){i=function e(t){return typeof t}}else{i=function e(t){return t&&typeof Symbol==="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t}}return i(e)}function a(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}function s(e,t,r){if(t)o(e.prototype,t);if(r)o(e,r);return e}function u(e,t){if(t&&(i(t)==="object"||typeof t==="function")){return t}return c(e)}function c(e){if(e===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}function l(e){l=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)};return l(e)}function f(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function")}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:true,configurable:true}});if(t)h(e,t)}function h(e,t){h=Object.setPrototypeOf||function e(t,r){t.__proto__=r;return t};return h(e,t)}var d="uniform sampler2D maskTexture;\r\n\r\nvarying vec2 vUv0;\r\nvarying vec2 vUv1;\r\nvarying vec2 vUv2;\r\nvarying vec2 vUv3;\r\n\r\nvoid main() {\r\n\r\n\tvec2 c0 = texture2D(maskTexture, vUv0).rg;\r\n\tvec2 c1 = texture2D(maskTexture, vUv1).rg;\r\n\tvec2 c2 = texture2D(maskTexture, vUv2).rg;\r\n\tvec2 c3 = texture2D(maskTexture, vUv3).rg;\r\n\r\n\tfloat d0 = (c0.x - c1.x) * 0.5;\r\n\tfloat d1 = (c2.x - c3.x) * 0.5;\r\n\tfloat d = length(vec2(d0, d1));\r\n\r\n\tfloat a0 = min(c0.y, c1.y);\r\n\tfloat a1 = min(c2.y, c3.y);\r\n\tfloat visibilityFactor = min(a0, a1);\r\n\r\n\tgl_FragColor.rg = (1.0 - visibilityFactor > 0.001) ? vec2(d, 0.0) : vec2(0.0, d);\r\n\r\n}\r\n";var p="uniform vec2 texelSize;\r\n\r\nvarying vec2 vUv0;\r\nvarying vec2 vUv1;\r\nvarying vec2 vUv2;\r\nvarying vec2 vUv3;\r\n\r\nvoid main() {\r\n\r\n\tvUv0 = vec2(uv.x + texelSize.x, uv.y);\r\n\tvUv1 = vec2(uv.x - texelSize.x, uv.y);\r\n\tvUv2 = vec2(uv.x, uv.y + texelSize.y);\r\n\tvUv3 = vec2(uv.x, uv.y - texelSize.y);\r\n\r\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\r\n\r\n}\r\n";var v=function(e){f(t,e);function t(){var e;var r=arguments.length>0&&arguments[0]!==undefined?arguments[0]:new n.Vector2;a(this,t);e=u(this,l(t).call(this,{type:"OutlineEdgesMaterial",uniforms:{maskTexture:new n.Uniform(null),texelSize:new n.Uniform(new n.Vector2)},fragmentShader:d,vertexShader:p,depthWrite:false,depthTest:false}));e.setTexelSize(r.x,r.y);return e}s(t,[{key:"setTexelSize",value:function e(t,r){this.uniforms.texelSize.value.set(t,r)}}]);return t}(n.ShaderMaterial);t.OutlineEdgesMaterial=v},1792:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.SMAAWeightsMaterial=void 0;var n=r(814);function i(e){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){i=function e(t){return typeof t}}else{i=function e(t){return t&&typeof Symbol==="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t}}return i(e)}function a(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}function s(e,t,r){if(t)o(e.prototype,t);if(r)o(e,r);return e}function u(e,t){if(t&&(i(t)==="object"||typeof t==="function")){return t}return c(e)}function c(e){if(e===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}function l(e){l=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)};return l(e)}function f(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function")}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:true,configurable:true}});if(t)h(e,t)}function h(e,t){h=Object.setPrototypeOf||function e(t,r){t.__proto__=r;return t};return h(e,t)}var d="#define sampleLevelZeroOffset(t, coord, offset) texture2D(t, coord + float(offset) * texelSize, 0.0)\r\n\r\nuniform sampler2D inputBuffer;\r\nuniform sampler2D areaTexture;\r\nuniform sampler2D searchTexture;\r\n\r\nuniform vec2 texelSize;\r\n\r\nvarying vec2 vUv;\r\nvarying vec4 vOffset[3];\r\nvarying vec2 vPixCoord;\r\n\r\nvec2 round(vec2 x) {\r\n\r\n\treturn sign(x) * floor(abs(x) + 0.5);\r\n\r\n}\r\n\r\nfloat searchLength(vec2 e, float bias, float scale) {\r\n\r\n\t// Not required if searchTexture accesses are set to point.\r\n\t// const vec2 SEARCH_TEX_PIXEL_SIZE = 1.0 / vec2(66.0, 33.0);\r\n\t// e = vec2(bias, 0.0) + 0.5 * SEARCH_TEX_PIXEL_SIZE + e * vec2(scale, 1.0) * vec2(64.0, 32.0) * SEARCH_TEX_PIXEL_SIZE;\r\n\r\n\te.r = bias + e.r * scale;\r\n\r\n\treturn 255.0 * texture2D(searchTexture, e, 0.0).r;\r\n\r\n}\r\n\r\nfloat searchXLeft(vec2 texCoord, float end) {\r\n\r\n\t/* @PSEUDO_GATHER4\r\n\t * This texCoord has been offset by (-0.25, -0.125) in the vertex shader to\r\n\t * sample between edge, thus fetching four edges in a row.\r\n\t * Sampling with different offsets in each direction allows to disambiguate\r\n\t * which edges are active from the four fetched ones.\r\n\t */\r\n\r\n\tvec2 e = vec2(0.0, 1.0);\r\n\r\n\tfor(int i = 0; i < MAX_SEARCH_STEPS_INT; ++i) {\r\n\r\n\t\te = texture2D(inputBuffer, texCoord, 0.0).rg;\r\n\t\ttexCoord -= vec2(2.0, 0.0) * texelSize;\r\n\r\n\t\tif(!(texCoord.x > end && e.g > 0.8281 && e.r == 0.0)) { break; }\r\n\r\n\t}\r\n\r\n\t// Correct the previously applied offset (-0.25, -0.125).\r\n\ttexCoord.x += 0.25 * texelSize.x;\r\n\r\n\t// The searches are biased by 1, so adjust the coords accordingly.\r\n\ttexCoord.x += texelSize.x;\r\n\r\n\t// Disambiguate the length added by the last step.\r\n\ttexCoord.x += 2.0 * texelSize.x; // Undo last step.\r\n\ttexCoord.x -= texelSize.x * searchLength(e, 0.0, 0.5);\r\n\r\n\treturn texCoord.x;\r\n\r\n}\r\n\r\nfloat searchXRight(vec2 texCoord, float end) {\r\n\r\n\tvec2 e = vec2(0.0, 1.0);\r\n\r\n\tfor(int i = 0; i < MAX_SEARCH_STEPS_INT; ++i) {\r\n\r\n\t\te = texture2D(inputBuffer, texCoord, 0.0).rg;\r\n\t\ttexCoord += vec2(2.0, 0.0) * texelSize;\r\n\r\n\t\tif(!(texCoord.x < end && e.g > 0.8281 && e.r == 0.0)) { break; }\r\n\r\n\t}\r\n\r\n\ttexCoord.x -= 0.25 * texelSize.x;\r\n\ttexCoord.x -= texelSize.x;\r\n\ttexCoord.x -= 2.0 * texelSize.x;\r\n\ttexCoord.x += texelSize.x * searchLength(e, 0.5, 0.5);\r\n\r\n\treturn texCoord.x;\r\n\r\n}\r\n\r\nfloat searchYUp(vec2 texCoord, float end) {\r\n\r\n\tvec2 e = vec2(1.0, 0.0);\r\n\r\n\tfor(int i = 0; i < MAX_SEARCH_STEPS_INT; ++i) {\r\n\r\n\t\te = texture2D(inputBuffer, texCoord, 0.0).rg;\r\n\t\ttexCoord += vec2(0.0, 2.0) * texelSize; // Changed sign.\r\n\r\n\t\tif(!(texCoord.y > end && e.r > 0.8281 && e.g == 0.0)) { break; }\r\n\r\n\t}\r\n\r\n\ttexCoord.y -= 0.25 * texelSize.y; // Changed sign.\r\n\ttexCoord.y -= texelSize.y; // Changed sign.\r\n\ttexCoord.y -= 2.0 * texelSize.y; // Changed sign.\r\n\ttexCoord.y += texelSize.y * searchLength(e.gr, 0.0, 0.5); // Changed sign.\r\n\r\n\treturn texCoord.y;\r\n\r\n}\r\n\r\nfloat searchYDown(vec2 texCoord, float end) {\r\n\r\n\tvec2 e = vec2(1.0, 0.0);\r\n\r\n\tfor(int i = 0; i < MAX_SEARCH_STEPS_INT; ++i ) {\r\n\r\n\t\te = texture2D(inputBuffer, texCoord, 0.0).rg;\r\n\t\ttexCoord -= vec2(0.0, 2.0) * texelSize; // Changed sign.\r\n\r\n\t\tif(!(texCoord.y < end && e.r > 0.8281 && e.g == 0.0)) { break; }\r\n\r\n\t}\r\n\r\n\ttexCoord.y += 0.25 * texelSize.y; // Changed sign.\r\n\ttexCoord.y += texelSize.y; // Changed sign.\r\n\ttexCoord.y += 2.0 * texelSize.y; // Changed sign.\r\n\ttexCoord.y -= texelSize.y * searchLength(e.gr, 0.5, 0.5); // Changed sign.\r\n\r\n\treturn texCoord.y;\r\n\r\n}\r\n\r\nvec2 area(vec2 dist, float e1, float e2, float offset) {\r\n\r\n\t// Rounding prevents precision errors of bilinear filtering.\r\n\tvec2 texCoord = AREATEX_MAX_DISTANCE * round(4.0 * vec2(e1, e2)) + dist;\r\n\r\n\t// Scale and bias for texel space translation.\r\n\ttexCoord = AREATEX_PIXEL_SIZE * texCoord + (0.5 * AREATEX_PIXEL_SIZE);\r\n\r\n\t// Move to proper place, according to the subpixel offset.\r\n\ttexCoord.y += AREATEX_SUBTEX_SIZE * offset;\r\n\r\n\treturn texture2D(areaTexture, texCoord, 0.0).rg;\r\n\r\n}\r\n\r\nvoid main() {\r\n\r\n\tvec4 weights = vec4(0.0);\r\n\tvec4 subsampleIndices = vec4(0.0);\r\n\tvec2 e = texture2D(inputBuffer, vUv).rg;\r\n\r\n\tif(e.g > 0.0) {\r\n\r\n\t\t// Edge at north.\r\n\t\tvec2 d;\r\n\r\n\t\t// Find the distance to the left.\r\n\t\tvec2 coords;\r\n\t\tcoords.x = searchXLeft(vOffset[0].xy, vOffset[2].x);\r\n\t\tcoords.y = vOffset[1].y; // vOffset[1].y = vUv.y - 0.25 * texelSize.y (@CROSSING_OFFSET)\r\n\t\td.x = coords.x;\r\n\r\n\t\t/* Now fetch the left crossing edges, two at a time using bilinear\r\n\t\tfiltering. Sampling at -0.25 (see @CROSSING_OFFSET) enables to discern what\r\n\t\tvalue each edge has. */\r\n\t\tfloat e1 = texture2D(inputBuffer, coords, 0.0).r;\r\n\r\n\t\t// Find the distance to the right.\r\n\t\tcoords.x = searchXRight(vOffset[0].zw, vOffset[2].y);\r\n\t\td.y = coords.x;\r\n\r\n\t\t/* Translate distances to pixel units for better interleave arithmetic and\r\n\t\tmemory accesses. */\r\n\t\td = d / texelSize.x - vPixCoord.x;\r\n\r\n\t\t// The area texture is compressed quadratically.\r\n\t\tvec2 sqrtD = sqrt(abs(d));\r\n\r\n\t\t// Fetch the right crossing edges.\r\n\t\tcoords.y -= texelSize.y; // WebGL port note: Added.\r\n\t\tfloat e2 = sampleLevelZeroOffset(inputBuffer, coords, ivec2(1, 0)).r;\r\n\r\n\t\t// Pattern recognised, now get the actual area.\r\n\t\tweights.rg = area(sqrtD, e1, e2, subsampleIndices.y);\r\n\r\n\t}\r\n\r\n\tif(e.r > 0.0) {\r\n\r\n\t\t// Edge at west.\r\n\t\tvec2 d;\r\n\r\n\t\t// Find the distance to the top.\r\n\t\tvec2 coords;\r\n\t\tcoords.y = searchYUp(vOffset[1].xy, vOffset[2].z);\r\n\t\tcoords.x = vOffset[0].x; // vOffset[1].x = vUv.x - 0.25 * texelSize.x;\r\n\t\td.x = coords.y;\r\n\r\n\t\t// Fetch the top crossing edges.\r\n\t\tfloat e1 = texture2D(inputBuffer, coords, 0.0).g;\r\n\r\n\t\t// Find the distance to the bottom.\r\n\t\tcoords.y = searchYDown(vOffset[1].zw, vOffset[2].w);\r\n\t\td.y = coords.y;\r\n\r\n\t\t// Distances in pixel units.\r\n\t\td = d / texelSize.y - vPixCoord.y;\r\n\r\n\t\t// The area texture is compressed quadratically.\r\n\t\tvec2 sqrtD = sqrt(abs(d));\r\n\r\n\t\t// Fetch the bottom crossing edges.\r\n\t\tcoords.y -= texelSize.y; // WebGL port note: Added.\r\n\t\tfloat e2 = sampleLevelZeroOffset(inputBuffer, coords, ivec2(0, 1)).g;\r\n\r\n\t\t// Get the area for this direction.\r\n\t\tweights.ba = area(sqrtD, e1, e2, subsampleIndices.x);\r\n\r\n\t}\r\n\r\n\tgl_FragColor = weights;\r\n\r\n}\r\n";var p="uniform vec2 texelSize;\r\n\r\nvarying vec2 vUv;\r\nvarying vec4 vOffset[3];\r\nvarying vec2 vPixCoord;\r\n\r\nvoid main() {\r\n\r\n\tvUv = uv;\r\n\r\n\tvPixCoord = uv / texelSize;\r\n\r\n\t// Offsets for the searches (see @PSEUDO_GATHER4).\r\n\tvOffset[0] = uv.xyxy + texelSize.xyxy * vec4(-0.25, 0.125, 1.25, 0.125); // Changed sign in Y and W components.\r\n\tvOffset[1] = uv.xyxy + texelSize.xyxy * vec4(-0.125, 0.25, -0.125, -1.25); //Changed sign in Y and W components.\r\n\r\n\t// This indicates the ends of the loops.\r\n\tvOffset[2] = vec4(vOffset[0].xz, vOffset[1].yw) + vec4(-2.0, 2.0, -2.0, 2.0) * texelSize.xxyy * MAX_SEARCH_STEPS_FLOAT;\r\n\r\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\r\n\r\n}\r\n";var v=function(e){f(t,e);function t(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:new n.Vector2;a(this,t);return u(this,l(t).call(this,{type:"SMAAWeightsMaterial",defines:{MAX_SEARCH_STEPS_INT:"8",MAX_SEARCH_STEPS_FLOAT:"8.0",AREATEX_MAX_DISTANCE:"16.0",AREATEX_PIXEL_SIZE:"(1.0 / vec2(160.0, 560.0))",AREATEX_SUBTEX_SIZE:"(1.0 / 7.0)",SEARCHTEX_SIZE:"vec2(66.0, 33.0)",SEARCHTEX_PACKED_SIZE:"vec2(64.0, 16.0)"},uniforms:{inputBuffer:new n.Uniform(null),areaTexture:new n.Uniform(null),searchTexture:new n.Uniform(null),texelSize:new n.Uniform(e)},fragmentShader:d,vertexShader:p,depthWrite:false,depthTest:false}))}s(t,[{key:"setOrthogonalSearchSteps",value:function e(t){this.defines.MAX_SEARCH_STEPS_INT=t.toFixed("0");this.defines.MAX_SEARCH_STEPS_FLOAT=t.toFixed("1");this.needsUpdate=true}}]);return t}(n.ShaderMaterial);t.SMAAWeightsMaterial=v},1793:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.ClearMaskPass=void 0;var n=r(866);function i(e){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){i=function e(t){return typeof t}}else{i=function e(t){return t&&typeof Symbol==="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t}}return i(e)}function a(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}function s(e,t,r){if(t)o(e.prototype,t);if(r)o(e,r);return e}function u(e,t){if(t&&(i(t)==="object"||typeof t==="function")){return t}return c(e)}function c(e){if(e===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}function l(e){l=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)};return l(e)}function f(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function")}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:true,configurable:true}});if(t)h(e,t)}function h(e,t){h=Object.setPrototypeOf||function e(t,r){t.__proto__=r;return t};return h(e,t)}var d=function(e){f(t,e);function t(){var e;a(this,t);e=u(this,l(t).call(this,"ClearMaskPass",null,null));e.needsSwap=false;return e}s(t,[{key:"render",value:function e(t,r,n,i,a){t.state.buffers.stencil.setTest(false)}}]);return t}(n.Pass);t.ClearMaskPass=d},1794:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.DepthPass=void 0;var n=r(814);var i=r(866);var a=r(1038);function o(e){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){o=function e(t){return typeof t}}else{o=function e(t){return t&&typeof Symbol==="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t}}return o(e)}function s(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function u(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}function c(e,t,r){if(t)u(e.prototype,t);if(r)u(e,r);return e}function l(e,t){if(t&&(o(t)==="object"||typeof t==="function")){return t}return f(e)}function f(e){if(e===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}function h(e){h=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)};return h(e)}function d(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function")}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:true,configurable:true}});if(t)p(e,t)}function p(e,t){p=Object.setPrototypeOf||function e(t,r){t.__proto__=r;return t};return p(e,t)}var v=function(e){d(t,e);function t(e,r){var i;var o=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};s(this,t);i=l(this,h(t).call(this,"DepthPass"));i.needsSwap=false;i.renderPass=new a.RenderPass(e,r,{overrideMaterial:new n.MeshDepthMaterial({depthPacking:n.RGBADepthPacking,morphTargets:true,skinning:true}),clearColor:new n.Color(16777215),clearAlpha:1});i.renderTarget=o.renderTarget;if(i.renderTarget===undefined){i.renderTarget=new n.WebGLRenderTarget(1,1,{minFilter:n.LinearFilter,magFilter:n.LinearFilter});i.renderTarget.texture.name="DepthPass.Target";i.renderTarget.texture.generateMipmaps=false}i.resolution=new n.Vector2;i.resolutionScale=o.resolutionScale!==undefined?o.resolutionScale:.5;return i}c(t,[{key:"getResolutionScale",value:function e(){return this.resolutionScale}},{key:"setResolutionScale",value:function e(t){this.resolutionScale=t;this.setSize(this.resolution.x,this.resolution.y)}},{key:"render",value:function e(t,r,n,i,a){var o=this.renderToScreen?null:this.renderTarget;this.renderPass.render(t,o,o)}},{key:"setSize",value:function e(t,r){this.resolution.set(t,r);this.renderTarget.setSize(Math.max(1,Math.floor(t*this.resolutionScale)),Math.max(1,Math.floor(r*this.resolutionScale)))}}]);return t}(i.Pass);t.DepthPass=v},1795:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.EffectPass=void 0;var n=r(1348);var i=r(828);var a=r(874);var o=r(866);function s(e){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){s=function e(t){return typeof t}}else{s=function e(t){return t&&typeof Symbol==="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t}}return s(e)}function u(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function c(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}function l(e,t,r){if(t)c(e.prototype,t);if(r)c(e,r);return e}function f(e,t){if(t&&(s(t)==="object"||typeof t==="function")){return t}return h(e)}function h(e){if(e===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}function d(e,t,r){if(typeof Reflect!=="undefined"&&Reflect.get){d=Reflect.get}else{d=function e(t,r,n){var i=p(t,r);if(!i)return;var a=Object.getOwnPropertyDescriptor(i,r);if(a.get){return a.get.call(n)}return a.value}}return d(e,t,r||e)}function p(e,t){while(!Object.prototype.hasOwnProperty.call(e,t)){e=v(e);if(e===null)break}return e}function v(e){v=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)};return v(e)}function m(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function")}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:true,configurable:true}});if(t)g(e,t)}function g(e,t){g=Object.setPrototypeOf||function e(t,r){t.__proto__=r;return t};return g(e,t)}function y(e,t){var r=[];var n;while((n=e.exec(t))!==null){r.push(n[1])}return r}function b(e,t,r){var n,i;var a=true;var o=false;var s=undefined;try{for(var u=t[Symbol.iterator](),c;!(a=(c=u.next()).done);a=true){var l=c.value;n="$1"+e+l.charAt(0).toUpperCase()+l.slice(1);i=new RegExp("([^\\.])(\\b"+l+"\\b)","g");var f=true;var h=false;var d=undefined;try{for(var p=r.entries()[Symbol.iterator](),v;!(f=(v=p.next()).done);f=true){var m=v.value;if(m[1]!==null){r.set(m[0],m[1].replace(i,n))}}}catch(e){h=true;d=e}finally{try{if(!f&&p.return!=null){p.return()}}finally{if(h){throw d}}}}}catch(e){o=true;s=e}finally{try{if(!a&&u.return!=null){u.return()}}finally{if(o){throw s}}}}function x(e,t,r,n,o,s,u){var c=/(?:\w+\s+(\w+)\([\w\s,]*\)\s*{[^}]+})/g;var l=/(?:varying\s+\w+\s+(\w*))/g;var f=t.blendMode;var h=new Map([["fragment",t.fragmentShader],["vertex",t.vertexShader]]);var d=h.get("fragment")!==undefined&&h.get("fragment").indexOf("mainImage")>=0;var p=h.get("fragment")!==undefined&&h.get("fragment").indexOf("mainUv")>=0;var v=[],m=[];var g=false;var x=false;if(h.get("fragment")===undefined){console.error("Missing fragment shader",t)}else if(p&&(u&i.EffectAttribute.CONVOLUTION)!==0){console.error("Effects that transform UV coordinates are incompatible with convolution effects",t)}else if(!d&&!p){console.error("The fragment shader contains neither a mainImage nor a mainUv function",t)}else{if(p){r.set(a.Section.FRAGMENT_MAIN_UV,r.get(a.Section.FRAGMENT_MAIN_UV)+"\t"+e+"MainUv(UV);\n");g=true}if(h.get("vertex")!==null&&h.get("vertex").indexOf("mainSupport")>=0){r.set(a.Section.VERTEX_MAIN_SUPPORT,r.get(a.Section.VERTEX_MAIN_SUPPORT)+"\t"+e+"MainSupport();\n");v=v.concat(y(l,h.get("vertex")));m=m.concat(v).concat(y(c,h.get("vertex")))}m=m.concat(y(c,h.get("fragment"))).concat(Array.from(t.uniforms.keys())).concat(Array.from(t.defines.keys()));t.uniforms.forEach((function(t,r){return s.set(e+r.charAt(0).toUpperCase()+r.slice(1),t)}));t.defines.forEach((function(t,r){return o.set(e+r.charAt(0).toUpperCase()+r.slice(1),t)}));b(e,m,o);b(e,m,h);n.set(f.blendFunction,f);if(d){var w=e+"MainImage(color0, UV, ";if((u&i.EffectAttribute.DEPTH)!==0&&h.get("fragment").indexOf("depth")>=0){w+="depth, ";x=true}w+="color1);\n\t";var A=e+"BlendOpacity";s.set(A,f.opacity);w+="color0 = blend"+f.blendFunction+"(color0, color1, "+A+");\n\n\t";r.set(a.Section.FRAGMENT_MAIN_IMAGE,r.get(a.Section.FRAGMENT_MAIN_IMAGE)+w);r.set(a.Section.FRAGMENT_HEAD,r.get(a.Section.FRAGMENT_HEAD)+"uniform float "+A+";\n\n")}r.set(a.Section.FRAGMENT_HEAD,r.get(a.Section.FRAGMENT_HEAD)+h.get("fragment")+"\n");if(h.get("vertex")!==null){r.set(a.Section.VERTEX_HEAD,r.get(a.Section.VERTEX_HEAD)+h.get("vertex")+"\n")}}return{varyings:v,transformedUv:g,readDepth:x}}var w=function(e){m(t,e);function t(e){var r;u(this,t);r=f(this,v(t).call(this,"EffectPass"));r.mainCamera=e;for(var n=arguments.length,i=new Array(n>1?n-1:0),a=1;a<n;a++){i[a-1]=arguments[a]}r.effects=i.sort((function(e,t){return t.attributes-e.attributes}));r.quantize=false;r.uniforms=0;r.varyings=0;r.minTime=1;r.maxTime=1e3;r.setFullscreenMaterial(r.createMaterial());return r}l(t,[{key:"createMaterial",value:function e(){var t=/\bblend\b/g;var r=new Map([[a.Section.FRAGMENT_HEAD,""],[a.Section.FRAGMENT_MAIN_UV,""],[a.Section.FRAGMENT_MAIN_IMAGE,""],[a.Section.VERTEX_HEAD,""],[a.Section.VERTEX_MAIN_SUPPORT,""]]);var o=new Map;var s=new Map;var u=new Map;var c=0,l=0,f=0;var h=false;var d=false;var p;var v=true;var m=false;var g=undefined;try{for(var y=this.effects[Symbol.iterator](),b;!(v=(b=y.next()).done);v=true){var w=b.value;if(w.blendMode.blendFunction!==n.BlendFunction.SKIP){if((f&i.EffectAttribute.CONVOLUTION)!==0&&(w.attributes&i.EffectAttribute.CONVOLUTION)!==0){console.error("Convolution effects cannot be merged",w)}else{f|=w.attributes;p=x("e"+c++,w,r,o,s,u,f);l+=p.varyings.length;h=h||p.transformedUv;d=d||p.readDepth}}}}catch(e){m=true;g=e}finally{try{if(!v&&y.return!=null){y.return()}}finally{if(m){throw g}}}var A=true;var M=false;var E=undefined;try{for(var S=o.values()[Symbol.iterator](),T;!(A=(T=S.next()).done);A=true){var _=T.value;r.set(a.Section.FRAGMENT_HEAD,r.get(a.Section.FRAGMENT_HEAD)+_.getShaderCode().replace(t,"blend"+_.blendFunction)+"\n")}}catch(e){M=true;E=e}finally{try{if(!A&&S.return!=null){S.return()}}finally{if(M){throw E}}}if((f&i.EffectAttribute.DEPTH)!==0){if(d){r.set(a.Section.FRAGMENT_MAIN_IMAGE,"float depth = readDepth(UV);\n\n\t"+r.get(a.Section.FRAGMENT_MAIN_IMAGE))}this.needsDepthTexture=true}if(h){r.set(a.Section.FRAGMENT_MAIN_UV,"vec2 transformedUv = vUv;\n"+r.get(a.Section.FRAGMENT_MAIN_UV));s.set("UV","transformedUv")}else{s.set("UV","vUv")}r.forEach((function(e,t,r){return r.set(t,e.trim())}));this.uniforms=u.size;this.varyings=l;return new a.EffectMaterial(r,s,u,this.mainCamera,this.dithering)}},{key:"recompile",value:function e(){var t=this.getFullscreenMaterial();var r=0,n=0;var i=null;var a=0;if(t!==null){var o=t.uniforms.resolution.value;r=o.x;n=o.y;i=t.uniforms.depthBuffer.value;a=t.depthPacking;t.dispose();this.uniforms=0;this.varyings=0}t=this.createMaterial();t.setSize(r,n);this.setFullscreenMaterial(t);this.setDepthTexture(i,a)}},{key:"getDepthTexture",value:function e(){var t=this.getFullscreenMaterial();return t!==null?t.uniforms.depthBuffer.value:null}},{key:"setDepthTexture",value:function e(t){var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;var n=this.getFullscreenMaterial();n.uniforms.depthBuffer.value=t;n.depthPacking=r;n.needsUpdate=true;var i=true;var a=false;var o=undefined;try{for(var s=this.effects[Symbol.iterator](),u;!(i=(u=s.next()).done);i=true){var c=u.value;c.setDepthTexture(t,r)}}catch(e){a=true;o=e}finally{try{if(!i&&s.return!=null){s.return()}}finally{if(a){throw o}}}this.needsDepthTexture=t===null}},{key:"render",value:function e(t,r,n,i,a){var o=this.getFullscreenMaterial();var s=o.uniforms.time.value+i;var u=true;var c=false;var l=undefined;try{for(var f=this.effects[Symbol.iterator](),h;!(u=(h=f.next()).done);u=true){var d=h.value;d.update(t,r,i)}}catch(e){c=true;l=e}finally{try{if(!u&&f.return!=null){f.return()}}finally{if(c){throw l}}}o.uniforms.inputBuffer.value=r.texture;o.uniforms.time.value=s<=this.maxTime?s:this.minTime;t.render(this.scene,this.camera,this.renderToScreen?null:n)}},{key:"setSize",value:function e(t,r){this.getFullscreenMaterial().setSize(t,r);var n=true;var i=false;var a=undefined;try{for(var o=this.effects[Symbol.iterator](),s;!(n=(s=o.next()).done);n=true){var u=s.value;u.setSize(t,r)}}catch(e){i=true;a=e}finally{try{if(!n&&o.return!=null){o.return()}}finally{if(i){throw a}}}}},{key:"initialize",value:function e(t,r){var n=t.capabilities;var i=Math.min(n.maxFragmentUniforms,n.maxVertexUniforms);if(this.uniforms>i){console.warn("The current rendering context doesn't support more than "+i+" uniforms, but "+this.uniforms+" were defined")}i=n.maxVaryings;if(this.varyings>i){console.warn("The current rendering context doesn't support more than "+i+" varyings, but "+this.varyings+" were defined")}var a=true;var o=false;var s=undefined;try{for(var u=this.effects[Symbol.iterator](),c;!(a=(c=u.next()).done);a=true){var l=c.value;l.initialize(t,r)}}catch(e){o=true;s=e}finally{try{if(!a&&u.return!=null){u.return()}}finally{if(o){throw s}}}}},{key:"dispose",value:function e(){d(v(t.prototype),"dispose",this).call(this);var r=true;var n=false;var i=undefined;try{for(var a=this.effects[Symbol.iterator](),o;!(r=(o=a.next()).done);r=true){var s=o.value;s.dispose()}}catch(e){n=true;i=e}finally{try{if(!r&&a.return!=null){a.return()}}finally{if(n){throw i}}}}},{key:"dithering",get:function e(){return this.quantize},set:function e(t){if(this.quantize!==t){var r=this.getFullscreenMaterial();if(r!==null){r.dithering=t;r.needsUpdate=true}this.quantize=t}}}]);return t}(o.Pass);t.EffectPass=w},1796:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.MaskPass=void 0;var n=r(866);function i(e){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){i=function e(t){return typeof t}}else{i=function e(t){return t&&typeof Symbol==="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t}}return i(e)}function a(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}function s(e,t,r){if(t)o(e.prototype,t);if(r)o(e,r);return e}function u(e,t){if(t&&(i(t)==="object"||typeof t==="function")){return t}return c(e)}function c(e){if(e===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}function l(e){l=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)};return l(e)}function f(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function")}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:true,configurable:true}});if(t)h(e,t)}function h(e,t){h=Object.setPrototypeOf||function e(t,r){t.__proto__=r;return t};return h(e,t)}var d=function(e){f(t,e);function t(e,r){var n;a(this,t);n=u(this,l(t).call(this,"MaskPass",e,r));n.needsSwap=false;n.inverse=false;n.clearStencil=true;return n}s(t,[{key:"render",value:function e(t,r,n,i,a){var o=t.context;var s=t.state;var u=this.scene;var c=this.camera;var l=this.inverse?0:1;var f=1-l;s.buffers.color.setMask(false);s.buffers.depth.setMask(false);s.buffers.color.setLocked(true);s.buffers.depth.setLocked(true);s.buffers.stencil.setTest(true);s.buffers.stencil.setOp(o.REPLACE,o.REPLACE,o.REPLACE);s.buffers.stencil.setFunc(o.ALWAYS,l,4294967295);s.buffers.stencil.setClear(f);if(this.clearStencil){if(this.renderToScreen){t.setRenderTarget(null);t.clearStencil()}else{t.setRenderTarget(r);t.clearStencil();t.setRenderTarget(n);t.clearStencil()}}if(this.renderToScreen){t.render(u,c,null)}else{t.render(u,c,r);t.render(u,c,n)}s.buffers.color.setLocked(false);s.buffers.depth.setLocked(false);s.buffers.stencil.setFunc(o.EQUAL,1,4294967295);s.buffers.stencil.setOp(o.KEEP,o.KEEP,o.KEEP)}}]);return t}(n.Pass);t.MaskPass=d},1797:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.NormalPass=void 0;var n=r(814);var i=r(866);var a=r(1038);function o(e){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){o=function e(t){return typeof t}}else{o=function e(t){return t&&typeof Symbol==="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t}}return o(e)}function s(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function u(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}function c(e,t,r){if(t)u(e.prototype,t);if(r)u(e,r);return e}function l(e,t){if(t&&(o(t)==="object"||typeof t==="function")){return t}return f(e)}function f(e){if(e===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}function h(e){h=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)};return h(e)}function d(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function")}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:true,configurable:true}});if(t)p(e,t)}function p(e,t){p=Object.setPrototypeOf||function e(t,r){t.__proto__=r;return t};return p(e,t)}var v=function(e){d(t,e);function t(e,r){var i;var o=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};s(this,t);i=l(this,h(t).call(this,"NormalPass"));i.needsSwap=false;i.renderPass=new a.RenderPass(e,r,{overrideMaterial:new n.MeshNormalMaterial({morphTargets:true,skinning:true}),clearColor:new n.Color(7829503),clearAlpha:1});i.renderTarget=o.renderTarget;if(i.renderTarget===undefined){i.renderTarget=new n.WebGLRenderTarget(1,1,{minFilter:n.LinearFilter,magFilter:n.LinearFilter,format:n.RGBFormat});i.renderTarget.texture.name="NormalPass.Target";i.renderTarget.texture.generateMipmaps=false}i.resolution=new n.Vector2;i.resolutionScale=o.resolutionScale!==undefined?o.resolutionScale:.5;return i}c(t,[{key:"getResolutionScale",value:function e(){return this.resolutionScale}},{key:"setResolutionScale",value:function e(t){this.resolutionScale=t;this.setSize(this.resolution.x,this.resolution.y)}},{key:"render",value:function e(t,r,n,i,a){var o=this.renderToScreen?null:this.renderTarget;this.renderPass.render(t,o,o)}},{key:"setSize",value:function e(t,r){this.resolution.set(t,r);this.renderTarget.setSize(Math.max(1,Math.floor(t*this.resolutionScale)),Math.max(1,Math.floor(r*this.resolutionScale)))}}]);return t}(i.Pass);t.NormalPass=v},1798:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.SavePass=void 0;var n=r(814);var i=r(874);var a=r(866);function o(e){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){o=function e(t){return typeof t}}else{o=function e(t){return t&&typeof Symbol==="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t}}return o(e)}function s(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function u(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}function c(e,t,r){if(t)u(e.prototype,t);if(r)u(e,r);return e}function l(e,t){if(t&&(o(t)==="object"||typeof t==="function")){return t}return f(e)}function f(e){if(e===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}function h(e){h=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)};return h(e)}function d(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function")}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:true,configurable:true}});if(t)p(e,t)}function p(e,t){p=Object.setPrototypeOf||function e(t,r){t.__proto__=r;return t};return p(e,t)}var v=function(e){d(t,e);function t(e){var r;var a=arguments.length>1&&arguments[1]!==undefined?arguments[1]:true;s(this,t);r=l(this,h(t).call(this,"SavePass"));r.setFullscreenMaterial(new i.CopyMaterial);r.needsSwap=false;r.renderTarget=e;if(e===undefined){r.renderTarget=new n.WebGLRenderTarget(1,1,{minFilter:n.LinearFilter,magFilter:n.LinearFilter,stencilBuffer:false,depthBuffer:false});r.renderTarget.texture.name="SavePass.Target";r.renderTarget.texture.generateMipmaps=false}r.resize=a;return r}c(t,[{key:"render",value:function e(t,r,n,i,a){this.getFullscreenMaterial().uniforms.inputBuffer.value=r.texture;t.render(this.scene,this.camera,this.renderToScreen?null:this.renderTarget)}},{key:"setSize",value:function e(t,r){if(this.resize){t=Math.max(1,t);r=Math.max(1,r);this.renderTarget.setSize(t,r)}}}]);return t}(a.Pass);t.SavePass=v},1799:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.ShaderPass=void 0;var n=r(866);function i(e){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){i=function e(t){return typeof t}}else{i=function e(t){return t&&typeof Symbol==="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t}}return i(e)}function a(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}function s(e,t,r){if(t)o(e.prototype,t);if(r)o(e,r);return e}function u(e,t){if(t&&(i(t)==="object"||typeof t==="function")){return t}return c(e)}function c(e){if(e===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}function l(e){l=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)};return l(e)}function f(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function")}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:true,configurable:true}});if(t)h(e,t)}function h(e,t){h=Object.setPrototypeOf||function e(t,r){t.__proto__=r;return t};return h(e,t)}var d=function(e){f(t,e);function t(e){var r;var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"inputBuffer";a(this,t);r=u(this,l(t).call(this,"ShaderPass"));r.setFullscreenMaterial(e);r.uniform=null;r.setInput(n);return r}s(t,[{key:"setInput",value:function e(t){var r=this.getFullscreenMaterial();this.uniform=null;if(r!==null){var n=r.uniforms;if(n[t]!==undefined){this.uniform=n[t]}}}},{key:"render",value:function e(t,r,n,i,a){if(this.uniform!==null){this.uniform.value=r.texture}t.render(this.scene,this.camera,this.renderToScreen?null:n)}}]);return t}(n.Pass);t.ShaderPass=d},1800:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.Resizable=void 0;function n(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}function a(e,t,r){if(t)i(e.prototype,t);if(r)i(e,r);return e}var o=function(){function e(){n(this,e)}a(e,[{key:"setSize",value:function e(t,r){}}]);return e}();t.Resizable=o},1801:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});Object.defineProperty(t,"BlendFunction",{enumerable:true,get:function e(){return n.BlendFunction}});Object.defineProperty(t,"BlendMode",{enumerable:true,get:function e(){return n.BlendMode}});Object.defineProperty(t,"BloomEffect",{enumerable:true,get:function e(){return i.BloomEffect}});Object.defineProperty(t,"BokehEffect",{enumerable:true,get:function e(){return a.BokehEffect}});Object.defineProperty(t,"BrightnessContrastEffect",{enumerable:true,get:function e(){return o.BrightnessContrastEffect}});Object.defineProperty(t,"ColorAverageEffect",{enumerable:true,get:function e(){return s.ColorAverageEffect}});Object.defineProperty(t,"ChromaticAberrationEffect",{enumerable:true,get:function e(){return u.ChromaticAberrationEffect}});Object.defineProperty(t,"DepthEffect",{enumerable:true,get:function e(){return c.DepthEffect}});Object.defineProperty(t,"DotScreenEffect",{enumerable:true,get:function e(){return l.DotScreenEffect}});Object.defineProperty(t,"Effect",{enumerable:true,get:function e(){return f.Effect}});Object.defineProperty(t,"EffectAttribute",{enumerable:true,get:function e(){return f.EffectAttribute}});Object.defineProperty(t,"GammaCorrectionEffect",{enumerable:true,get:function e(){return h.GammaCorrectionEffect}});Object.defineProperty(t,"GlitchEffect",{enumerable:true,get:function e(){return d.GlitchEffect}});Object.defineProperty(t,"GlitchMode",{enumerable:true,get:function e(){return d.GlitchMode}});Object.defineProperty(t,"GodRaysEffect",{enumerable:true,get:function e(){return p.GodRaysEffect}});Object.defineProperty(t,"GridEffect",{enumerable:true,get:function e(){return v.GridEffect}});Object.defineProperty(t,"HueSaturationEffect",{enumerable:true,get:function e(){return m.HueSaturationEffect}});Object.defineProperty(t,"NoiseEffect",{enumerable:true,get:function e(){return g.NoiseEffect}});Object.defineProperty(t,"OutlineEffect",{enumerable:true,get:function e(){return y.OutlineEffect}});Object.defineProperty(t,"PixelationEffect",{enumerable:true,get:function e(){return b.PixelationEffect}});Object.defineProperty(t,"RealisticBokehEffect",{enumerable:true,get:function e(){return x.RealisticBokehEffect}});Object.defineProperty(t,"ScanlineEffect",{enumerable:true,get:function e(){return w.ScanlineEffect}});Object.defineProperty(t,"ShockWaveEffect",{enumerable:true,get:function e(){return A.ShockWaveEffect}});Object.defineProperty(t,"SepiaEffect",{enumerable:true,get:function e(){return M.SepiaEffect}});Object.defineProperty(t,"SMAAEffect",{enumerable:true,get:function e(){return E.SMAAEffect}});Object.defineProperty(t,"SSAOEffect",{enumerable:true,get:function e(){return S.SSAOEffect}});Object.defineProperty(t,"TextureEffect",{enumerable:true,get:function e(){return T.TextureEffect}});Object.defineProperty(t,"ToneMappingEffect",{enumerable:true,get:function e(){return _.ToneMappingEffect}});Object.defineProperty(t,"VignetteEffect",{enumerable:true,get:function e(){return P.VignetteEffect}});var n=r(1348);var i=r(1802);var a=r(1803);var o=r(1804);var s=r(1805);var u=r(1806);var c=r(1807);var l=r(1808);var f=r(828);var h=r(1809);var d=r(1810);var p=r(1811);var v=r(1812);var m=r(1813);var g=r(1814);var y=r(1815);var b=r(1816);var x=r(1817);var w=r(1818);var A=r(1819);var M=r(1820);var E=r(1821);var S=r(1824);var T=r(1825);var _=r(1826);var P=r(1827)},1802:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.BloomEffect=void 0;var n=r(814);var i=r(874);var a=r(896);var o=r(830);var s=r(828);function u(e){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){u=function e(t){return typeof t}}else{u=function e(t){return t&&typeof Symbol==="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t}}return u(e)}function c(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function l(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}function f(e,t,r){if(t)l(e.prototype,t);if(r)l(e,r);return e}function h(e,t){if(t&&(u(t)==="object"||typeof t==="function")){return t}return d(e)}function d(e){if(e===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}function p(e){p=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)};return p(e)}function v(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function")}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:true,configurable:true}});if(t)m(e,t)}function m(e,t){m=Object.setPrototypeOf||function e(t,r){t.__proto__=r;return t};return m(e,t)}var g="uniform sampler2D texture;\r\n\r\n#ifdef ASPECT_CORRECTION\r\n\r\n\tvarying vec2 vUv2;\r\n\r\n#endif\r\n\r\nvoid mainImage(const in vec4 inputColor, const in vec2 uv, out vec4 outputColor) {\r\n\r\n\t#ifdef ASPECT_CORRECTION\r\n\r\n\t\toutputColor = texture2D(texture, vUv2);\r\n\r\n\t#else\r\n\r\n\t\toutputColor = texture2D(texture, uv);\r\n\r\n\t#endif\r\n\r\n}\r\n";var y=function(e){v(t,e);function t(){var e;var r=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};c(this,t);var s=Object.assign({blendFunction:o.BlendFunction.SCREEN,resolutionScale:.5,kernelSize:i.KernelSize.LARGE,distinction:1},r);e=h(this,p(t).call(this,"BloomEffect",g,{blendFunction:s.blendFunction,uniforms:new Map([["texture",new n.Uniform(null)]])}));e.renderTarget=new n.WebGLRenderTarget(1,1,{minFilter:n.LinearFilter,magFilter:n.LinearFilter,stencilBuffer:false,depthBuffer:false});e.renderTarget.texture.name="Bloom.Target";e.renderTarget.texture.generateMipmaps=false;e.uniforms.get("texture").value=e.renderTarget.texture;e.resolution=new n.Vector2;e.blurPass=new a.BlurPass(s);e.luminancePass=new a.ShaderPass(new i.LuminanceMaterial(true));e.distinction=s.distinction;e.kernelSize=s.kernelSize;return e}f(t,[{key:"getResolutionScale",value:function e(){return this.blurPass.getResolutionScale()}},{key:"setResolutionScale",value:function e(t){this.blurPass.setResolutionScale(t);this.setSize(this.resolution.x,this.resolution.y)}},{key:"update",value:function e(t,r,n){var i=this.renderTarget;this.luminancePass.render(t,r,i);this.blurPass.render(t,i,i)}},{key:"setSize",value:function e(t,r){this.resolution.set(t,r);this.blurPass.setSize(t,r);t=this.blurPass.width;r=this.blurPass.height;this.renderTarget.setSize(t,r)}},{key:"initialize",value:function e(t,r){this.blurPass.initialize(t,r);if(!r){this.renderTarget.texture.format=n.RGBFormat}}},{key:"texture",get:function e(){return this.renderTarget.texture}},{key:"dithering",get:function e(){return this.blurPass.dithering},set:function e(t){this.blurPass.dithering=t}},{key:"kernelSize",get:function e(){return this.blurPass.kernelSize},set:function e(t){this.blurPass.kernelSize=t}},{key:"distinction",get:function e(){return this.luminancePass.getFullscreenMaterial().uniforms.distinction.value},set:function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:1;this.luminancePass.getFullscreenMaterial().uniforms.distinction.value=t}}]);return t}(s.Effect);t.BloomEffect=y},1803:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.BokehEffect=void 0;var n=r(814);var i=r(830);var a=r(828);function o(e){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){o=function e(t){return typeof t}}else{o=function e(t){return t&&typeof Symbol==="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t}}return o(e)}function s(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function u(e,t){if(t&&(o(t)==="object"||typeof t==="function")){return t}return c(e)}function c(e){if(e===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}function l(e){l=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)};return l(e)}function f(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function")}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:true,configurable:true}});if(t)h(e,t)}function h(e,t){h=Object.setPrototypeOf||function e(t,r){t.__proto__=r;return t};return h(e,t)}var d="uniform float focus;\r\nuniform float dof;\r\nuniform float aperture;\r\nuniform float maxBlur;\r\n\r\nvoid mainImage(const in vec4 inputColor, const in vec2 uv, const in float depth, out vec4 outputColor) {\r\n\r\n\tvec2 aspectCorrection = vec2(1.0, aspect);\r\n\r\n\tfloat focusNear = clamp(focus - dof, 0.0, 1.0);\r\n\tfloat focusFar = clamp(focus + dof, 0.0, 1.0);\r\n\r\n\t// Calculate a DoF mask.\r\n\tfloat low = step(depth, focusNear);\r\n\tfloat high = step(focusFar, depth);\r\n\r\n\tfloat factor = (depth - focusNear) * low + (depth - focusFar) * high;\r\n\tvec2 dofBlur = vec2(clamp(factor * aperture, -maxBlur, maxBlur));\r\n\r\n\tvec2 dofblur9 = dofBlur * 0.9;\r\n\tvec2 dofblur7 = dofBlur * 0.7;\r\n\tvec2 dofblur4 = dofBlur * 0.4;\r\n\r\n\tvec4 color = inputColor;\r\n\tcolor += texture2D(inputBuffer, uv + (vec2( 0.0,   0.4 ) * aspectCorrection) * dofBlur);\r\n\tcolor += texture2D(inputBuffer, uv + (vec2( 0.15,  0.37) * aspectCorrection) * dofBlur);\r\n\tcolor += texture2D(inputBuffer, uv + (vec2( 0.29,  0.29) * aspectCorrection) * dofBlur);\r\n\tcolor += texture2D(inputBuffer, uv + (vec2(-0.37,  0.15) * aspectCorrection) * dofBlur);\r\n\tcolor += texture2D(inputBuffer, uv + (vec2( 0.40,  0.0 ) * aspectCorrection) * dofBlur);\r\n\tcolor += texture2D(inputBuffer, uv + (vec2( 0.37, -0.15) * aspectCorrection) * dofBlur);\r\n\tcolor += texture2D(inputBuffer, uv + (vec2( 0.29, -0.29) * aspectCorrection) * dofBlur);\r\n\tcolor += texture2D(inputBuffer, uv + (vec2(-0.15, -0.37) * aspectCorrection) * dofBlur);\r\n\tcolor += texture2D(inputBuffer, uv + (vec2( 0.0,  -0.4 ) * aspectCorrection) * dofBlur);\r\n\tcolor += texture2D(inputBuffer, uv + (vec2(-0.15,  0.37) * aspectCorrection) * dofBlur);\r\n\tcolor += texture2D(inputBuffer, uv + (vec2(-0.29,  0.29) * aspectCorrection) * dofBlur);\r\n\tcolor += texture2D(inputBuffer, uv + (vec2( 0.37,  0.15) * aspectCorrection) * dofBlur);\r\n\tcolor += texture2D(inputBuffer, uv + (vec2(-0.4,   0.0 ) * aspectCorrection) * dofBlur);\r\n\tcolor += texture2D(inputBuffer, uv + (vec2(-0.37, -0.15) * aspectCorrection) * dofBlur);\r\n\tcolor += texture2D(inputBuffer, uv + (vec2(-0.29, -0.29) * aspectCorrection) * dofBlur);\r\n\tcolor += texture2D(inputBuffer, uv + (vec2( 0.15, -0.37) * aspectCorrection) * dofBlur);\r\n\r\n\tcolor += texture2D(inputBuffer, uv + (vec2( 0.15,  0.37) * aspectCorrection) * dofblur9);\r\n\tcolor += texture2D(inputBuffer, uv + (vec2(-0.37,  0.15) * aspectCorrection) * dofblur9);\r\n\tcolor += texture2D(inputBuffer, uv + (vec2( 0.37, -0.15) * aspectCorrection) * dofblur9);\r\n\tcolor += texture2D(inputBuffer, uv + (vec2(-0.15, -0.37) * aspectCorrection) * dofblur9);\r\n\tcolor += texture2D(inputBuffer, uv + (vec2(-0.15,  0.37) * aspectCorrection) * dofblur9);\r\n\tcolor += texture2D(inputBuffer, uv + (vec2( 0.37,  0.15) * aspectCorrection) * dofblur9);\r\n\tcolor += texture2D(inputBuffer, uv + (vec2(-0.37, -0.15) * aspectCorrection) * dofblur9);\r\n\tcolor += texture2D(inputBuffer, uv + (vec2( 0.15, -0.37) * aspectCorrection) * dofblur9);\r\n\r\n\tcolor += texture2D(inputBuffer, uv + (vec2( 0.29,  0.29) * aspectCorrection) * dofblur7);\r\n\tcolor += texture2D(inputBuffer, uv + (vec2( 0.40,  0.0 ) * aspectCorrection) * dofblur7);\r\n\tcolor += texture2D(inputBuffer, uv + (vec2( 0.29, -0.29) * aspectCorrection) * dofblur7);\r\n\tcolor += texture2D(inputBuffer, uv + (vec2( 0.0,  -0.4 ) * aspectCorrection) * dofblur7);\r\n\tcolor += texture2D(inputBuffer, uv + (vec2(-0.29,  0.29) * aspectCorrection) * dofblur7);\r\n\tcolor += texture2D(inputBuffer, uv + (vec2(-0.4,   0.0 ) * aspectCorrection) * dofblur7);\r\n\tcolor += texture2D(inputBuffer, uv + (vec2(-0.29, -0.29) * aspectCorrection) * dofblur7);\r\n\tcolor += texture2D(inputBuffer, uv + (vec2( 0.0,   0.4 ) * aspectCorrection) * dofblur7);\r\n\r\n\tcolor += texture2D(inputBuffer, uv + (vec2( 0.29,  0.29) * aspectCorrection) * dofblur4);\r\n\tcolor += texture2D(inputBuffer, uv + (vec2( 0.4,   0.0 ) * aspectCorrection) * dofblur4);\r\n\tcolor += texture2D(inputBuffer, uv + (vec2( 0.29, -0.29) * aspectCorrection) * dofblur4);\r\n\tcolor += texture2D(inputBuffer, uv + (vec2( 0.0,  -0.4 ) * aspectCorrection) * dofblur4);\r\n\tcolor += texture2D(inputBuffer, uv + (vec2(-0.29,  0.29) * aspectCorrection) * dofblur4);\r\n\tcolor += texture2D(inputBuffer, uv + (vec2(-0.4,   0.0 ) * aspectCorrection) * dofblur4);\r\n\tcolor += texture2D(inputBuffer, uv + (vec2(-0.29, -0.29) * aspectCorrection) * dofblur4);\r\n\tcolor += texture2D(inputBuffer, uv + (vec2( 0.0,   0.4 ) * aspectCorrection) * dofblur4);\r\n\r\n\toutputColor = color / 41.0;\r\n\r\n}\r\n";var p=function(e){f(t,e);function t(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};s(this,t);var r=Object.assign({blendFunction:i.BlendFunction.NORMAL,focus:.5,dof:.02,aperture:.015,maxBlur:1},e);return u(this,l(t).call(this,"BokehEffect",d,{attributes:a.EffectAttribute.CONVOLUTION|a.EffectAttribute.DEPTH,blendFunction:r.blendFunction,uniforms:new Map([["focus",new n.Uniform(r.focus)],["dof",new n.Uniform(r.dof)],["aperture",new n.Uniform(r.aperture)],["maxBlur",new n.Uniform(r.maxBlur)]])}))}return t}(a.Effect);t.BokehEffect=p},1804:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.BrightnessContrastEffect=void 0;var n=r(814);var i=r(830);var a=r(828);function o(e){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){o=function e(t){return typeof t}}else{o=function e(t){return t&&typeof Symbol==="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t}}return o(e)}function s(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function u(e,t){if(t&&(o(t)==="object"||typeof t==="function")){return t}return c(e)}function c(e){if(e===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}function l(e){l=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)};return l(e)}function f(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function")}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:true,configurable:true}});if(t)h(e,t)}function h(e,t){h=Object.setPrototypeOf||function e(t,r){t.__proto__=r;return t};return h(e,t)}var d="uniform float brightness;\r\nuniform float contrast;\r\n\r\nvoid mainImage(const in vec4 inputColor, const in vec2 uv, out vec4 outputColor) {\r\n\r\n\tvec3 color = inputColor.rgb + vec3(brightness - 0.5);\r\n\r\n\tif(contrast > 0.0) {\r\n\r\n\t\tcolor /= vec3(1.0 - contrast);\r\n\r\n\t} else {\r\n\r\n\t\tcolor *= vec3(1.0 + contrast);\r\n\r\n\t}\r\n\r\n\toutputColor = vec4(min(color + vec3(0.5), 1.0), inputColor.a);\r\n\r\n}\r\n";var p=function(e){f(t,e);function t(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};s(this,t);var r=Object.assign({blendFunction:i.BlendFunction.NORMAL,brightness:0,contrast:0},e);return u(this,l(t).call(this,"BrightnessContrastEffect",d,{blendFunction:r.blendFunction,uniforms:new Map([["brightness",new n.Uniform(r.brightness)],["contrast",new n.Uniform(r.contrast)]])}))}return t}(a.Effect);t.BrightnessContrastEffect=p},1805:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.ColorAverageEffect=void 0;var n=r(830);var i=r(828);function a(e){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){a=function e(t){return typeof t}}else{a=function e(t){return t&&typeof Symbol==="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t}}return a(e)}function o(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function s(e,t){if(t&&(a(t)==="object"||typeof t==="function")){return t}return u(e)}function u(e){if(e===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}function c(e){c=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)};return c(e)}function l(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function")}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:true,configurable:true}});if(t)f(e,t)}function f(e,t){f=Object.setPrototypeOf||function e(t,r){t.__proto__=r;return t};return f(e,t)}var h="void mainImage(const in vec4 inputColor, const in vec2 uv, out vec4 outputColor) {\r\n\r\n\tfloat sum = inputColor.r + inputColor.g + inputColor.b;\r\n\r\n\toutputColor = vec4(vec3(sum / 3.0), inputColor.a);\r\n\r\n}\r\n";var d=function(e){l(t,e);function t(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:n.BlendFunction.NORMAL;o(this,t);return s(this,c(t).call(this,"ColorAverageEffect",h,{blendFunction:e}))}return t}(i.Effect);t.ColorAverageEffect=d},1806:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.ChromaticAberrationEffect=void 0;var n=r(814);var i=r(830);var a=r(828);function o(e){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){o=function e(t){return typeof t}}else{o=function e(t){return t&&typeof Symbol==="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t}}return o(e)}function s(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function u(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}function c(e,t,r){if(t)u(e.prototype,t);if(r)u(e,r);return e}function l(e,t){if(t&&(o(t)==="object"||typeof t==="function")){return t}return f(e)}function f(e){if(e===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}function h(e){h=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)};return h(e)}function d(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function")}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:true,configurable:true}});if(t)p(e,t)}function p(e,t){p=Object.setPrototypeOf||function e(t,r){t.__proto__=r;return t};return p(e,t)}var v="varying vec2 vUvR;\r\nvarying vec2 vUvB;\r\n\r\nvoid mainImage(const in vec4 inputColor, const in vec2 uv, out vec4 outputColor) {\r\n\r\n\tvec4 color = inputColor;\r\n\r\n\tcolor.r = texture2D(inputBuffer, vUvR).r;\r\n\tcolor.b = texture2D(inputBuffer, vUvB).b;\r\n\r\n\toutputColor = color;\r\n\r\n}\r\n";var m="uniform vec2 offset;\r\n\r\nvarying vec2 vUvR;\r\nvarying vec2 vUvB;\r\n\r\nvoid mainSupport() {\r\n\r\n\tvUvR = uv + offset;\r\n\tvUvB = uv - offset;\r\n\r\n}\r\n";var g=function(e){d(t,e);function t(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};s(this,t);var r=Object.assign({blendFunction:i.BlendFunction.NORMAL,offset:new n.Vector2(.001,5e-4)},e);return l(this,h(t).call(this,"ChromaticAberrationEffect",v,{attributes:a.EffectAttribute.CONVOLUTION,blendFunction:r.blendFunction,uniforms:new Map([["offset",new n.Uniform(r.offset)]]),vertexShader:m}))}c(t,[{key:"offset",get:function e(){return this.uniforms.get("offset").value},set:function e(t){this.uniforms.get("offset").value=t}}]);return t}(a.Effect);t.ChromaticAberrationEffect=g},1807:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.DepthEffect=void 0;var n=r(830);var i=r(828);function a(e){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){a=function e(t){return typeof t}}else{a=function e(t){return t&&typeof Symbol==="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t}}return a(e)}function o(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}function u(e,t,r){if(t)s(e.prototype,t);if(r)s(e,r);return e}function c(e,t){if(t&&(a(t)==="object"||typeof t==="function")){return t}return l(e)}function l(e){if(e===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}function f(e){f=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)};return f(e)}function h(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function")}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:true,configurable:true}});if(t)d(e,t)}function d(e,t){d=Object.setPrototypeOf||function e(t,r){t.__proto__=r;return t};return d(e,t)}var p="void mainImage(const in vec4 inputColor, const in vec2 uv, const in float depth, out vec4 outputColor) {\r\n\r\n\t#ifdef INVERTED\r\n\r\n\t\tvec3 color = vec3(1.0 - depth);\r\n\r\n\t#else\r\n\r\n\t\tvec3 color = vec3(depth);\r\n\r\n\t#endif\r\n\r\n\toutputColor = vec4(color, inputColor.a);\r\n\r\n}\r\n";var v=function(e){h(t,e);function t(){var e;var r=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};o(this,t);var a=Object.assign({blendFunction:n.BlendFunction.NORMAL,inverted:false},r);e=c(this,f(t).call(this,"DepthEffect",p,{attributes:i.EffectAttribute.DEPTH,blendFunction:a.blendFunction}));e.inverted=a.inverted;return e}u(t,[{key:"inverted",get:function e(){return this.defines.has("INVERTED")},set:function e(t){t?this.defines.set("INVERTED","1"):this.defines.delete("INVERTED")}}]);return t}(i.Effect);t.DepthEffect=v},1808:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.DotScreenEffect=void 0;var n=r(814);var i=r(830);var a=r(828);function o(e){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){o=function e(t){return typeof t}}else{o=function e(t){return t&&typeof Symbol==="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t}}return o(e)}function s(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function u(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}function c(e,t,r){if(t)u(e.prototype,t);if(r)u(e,r);return e}function l(e,t){if(t&&(o(t)==="object"||typeof t==="function")){return t}return f(e)}function f(e){if(e===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}function h(e){h=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)};return h(e)}function d(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function")}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:true,configurable:true}});if(t)p(e,t)}function p(e,t){p=Object.setPrototypeOf||function e(t,r){t.__proto__=r;return t};return p(e,t)}var v="uniform vec2 angle;\r\nuniform float scale;\r\n\r\nfloat pattern(const in vec2 uv) {\r\n\r\n\tvec2 point = scale * vec2(\r\n\t\tdot(angle.yx, vec2(uv.x, -uv.y)),\r\n\t\tdot(angle, uv)\r\n\t);\r\n\r\n\treturn (sin(point.x) * sin(point.y)) * 4.0;\r\n\r\n}\r\n\r\nvoid mainImage(const in vec4 inputColor, const in vec2 uv, out vec4 outputColor) {\r\n\r\n\tvec3 color = vec3(inputColor.rgb * 10.0 - 5.0 + pattern(uv * resolution));\r\n\toutputColor = vec4(color, inputColor.a);\r\n\r\n}\r\n";var m=function(e){d(t,e);function t(){var e;var r=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};s(this,t);var a=Object.assign({blendFunction:i.BlendFunction.NORMAL,angle:Math.PI*.5,scale:1},r);e=l(this,h(t).call(this,"DotScreenEffect",v,{blendFunction:a.blendFunction,uniforms:new Map([["angle",new n.Uniform(new n.Vector2)],["scale",new n.Uniform(a.scale)]])}));e.setAngle(a.angle);return e}c(t,[{key:"setAngle",value:function e(t){this.uniforms.get("angle").value.set(Math.sin(t),Math.cos(t))}}]);return t}(a.Effect);t.DotScreenEffect=m},1809:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.GammaCorrectionEffect=void 0;var n=r(814);var i=r(830);var a=r(828);function o(e){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){o=function e(t){return typeof t}}else{o=function e(t){return t&&typeof Symbol==="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t}}return o(e)}function s(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function u(e,t){if(t&&(o(t)==="object"||typeof t==="function")){return t}return c(e)}function c(e){if(e===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}function l(e){l=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)};return l(e)}function f(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function")}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:true,configurable:true}});if(t)h(e,t)}function h(e,t){h=Object.setPrototypeOf||function e(t,r){t.__proto__=r;return t};return h(e,t)}var d="uniform float gamma;\r\n\r\nvoid mainImage(const in vec4 inputColor, const in vec2 uv, out vec4 outputColor) {\r\n\r\n\toutputColor = LinearToGamma(max(inputColor, 0.0), gamma);\r\n\r\n}\r\n";var p=function(e){f(t,e);function t(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};s(this,t);var r=Object.assign({blendFunction:i.BlendFunction.NORMAL,gamma:2},e);return u(this,l(t).call(this,"GammaCorrectionEffect",d,{blendFunction:r.blendFunction,uniforms:new Map([["gamma",new n.Uniform(r.gamma)]])}))}return t}(a.Effect);t.GammaCorrectionEffect=p},1810:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.GlitchMode=t.GlitchEffect=void 0;var n=r(814);var i=r(830);var a=r(828);function o(e){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){o=function e(t){return typeof t}}else{o=function e(t){return t&&typeof Symbol==="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t}}return o(e)}function s(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function u(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}function c(e,t,r){if(t)u(e.prototype,t);if(r)u(e,r);return e}function l(e,t){if(t&&(o(t)==="object"||typeof t==="function")){return t}return f(e)}function f(e){if(e===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}function h(e){h=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)};return h(e)}function d(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function")}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:true,configurable:true}});if(t)p(e,t)}function p(e,t){p=Object.setPrototypeOf||function e(t,r){t.__proto__=r;return t};return p(e,t)}var v="uniform sampler2D perturbationMap;\r\n\r\nuniform bool active;\r\nuniform float columns;\r\nuniform float random;\r\nuniform vec2 seed;\r\nuniform vec2 distortion;\r\n\r\nvoid mainUv(inout vec2 uv) {\r\n\r\n\tif(active) {\r\n\r\n\t\tvec4 normal = texture2D(perturbationMap, uv * random * random);\r\n\r\n\t\tif(uv.y < distortion.x + columns && uv.y > distortion.x - columns * random) {\r\n\r\n\t\t\tfloat sx = clamp(ceil(seed.x), 0.0, 1.0);\r\n\t\t\tuv.y = sx * (1.0 - (uv.y + distortion.y)) + (1.0 - sx) * distortion.y;\r\n\r\n\t\t}\r\n\r\n\t\tif(uv.x < distortion.y + columns && uv.x > distortion.y - columns * random) {\r\n\r\n\t\t\tfloat sy = clamp(ceil(seed.y), 0.0, 1.0);\r\n\t\t\tuv.x = sy * distortion.x + (1.0 - sy) * (1.0 - (uv.x + distortion.x));\r\n\r\n\t\t}\r\n\r\n\t\tuv.x += normal.x * seed.x * (random * 0.2);\r\n\t\tuv.y += normal.y * seed.y * (random * 0.2);\r\n\r\n\t}\r\n\r\n}\r\n";var m="Glitch.Generated";function g(e,t){return e+Math.random()*(t-e)}var y=function(e){d(t,e);function t(){var e;var r=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};s(this,t);var a=Object.assign({blendFunction:i.BlendFunction.NORMAL,chromaticAberrationOffset:null,delay:new n.Vector2(1.5,3.5),duration:new n.Vector2(.6,1),strength:new n.Vector2(.3,1),columns:.05,ratio:.85,perturbationMap:null,dtSize:64},r);e=l(this,h(t).call(this,"GlitchEffect",v,{blendFunction:a.blendFunction,uniforms:new Map([["perturbationMap",new n.Uniform(null)],["columns",new n.Uniform(a.columns)],["active",new n.Uniform(false)],["random",new n.Uniform(.02)],["seed",new n.Uniform(new n.Vector2)],["distortion",new n.Uniform(new n.Vector2)]])}));e.perturbationMap=null;e.setPerturbationMap(a.perturbationMap===null?e.generatePerturbationMap(a.dtSize):a.perturbationMap);e.perturbationMap.generateMipmaps=false;e.delay=a.delay;e.duration=a.duration;e.breakPoint=new n.Vector2(g(e.delay.x,e.delay.y),g(e.duration.x,e.duration.y));e.time=0;e.seed=e.uniforms.get("seed").value;e.distortion=e.uniforms.get("distortion").value;e.mode=b.SPORADIC;e.strength=a.strength;e.ratio=a.ratio;e.chromaticAberrationOffset=a.chromaticAberrationOffset;return e}c(t,[{key:"getPerturbationMap",value:function e(){return this.perturbationMap}},{key:"setPerturbationMap",value:function e(t){if(this.perturbationMap!==null&&this.perturbationMap.name===m){this.perturbationMap.dispose()}t.wrapS=t.wrapT=n.RepeatWrapping;t.magFilter=t.minFilter=n.NearestFilter;this.perturbationMap=t;this.uniforms.get("perturbationMap").value=t}},{key:"generatePerturbationMap",value:function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:64;var r=t*t;var i=new Float32Array(r*3);var a,o;for(a=0;a<r;++a){o=Math.random();i[a*3]=o;i[a*3+1]=o;i[a*3+2]=o}var s=new n.DataTexture(i,t,t,n.RGBFormat,n.FloatType);s.name=m;s.needsUpdate=true;return s}},{key:"update",value:function e(t,r,n){var i=this.mode;var a=this.breakPoint;var o=this.chromaticAberrationOffset;var s=this.strength;var u=this.time;var c=false;var l=0,f=0;var h;if(i!==b.DISABLED){if(i===b.SPORADIC){u+=n;h=u>a.x;if(u>=a.x+a.y){a.set(g(this.delay.x,this.delay.y),g(this.duration.x,this.duration.y));u=0}}l=Math.random();this.uniforms.get("random").value=l;if(h&&l>this.ratio||i===b.CONSTANT_WILD){c=true;l*=s.y*.03;f=g(-Math.PI,Math.PI);this.seed.set(g(-s.y,s.y),g(-s.y,s.y));this.distortion.set(g(0,1),g(0,1))}else if(h||i===b.CONSTANT_MILD){c=true;l*=s.x*.03;f=g(-Math.PI,Math.PI);this.seed.set(g(-s.x,s.x),g(-s.x,s.x));this.distortion.set(g(0,1),g(0,1))}this.time=u}if(o!==null){if(c){o.set(Math.cos(f),Math.sin(f)).multiplyScalar(l)}else{o.set(0,0)}}this.uniforms.get("active").value=c}},{key:"active",get:function e(){return this.uniforms.get("active").value}}]);return t}(a.Effect);t.GlitchEffect=y;var b={DISABLED:0,SPORADIC:1,CONSTANT_MILD:2,CONSTANT_WILD:3};t.GlitchMode=b},1811:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.GodRaysEffect=void 0;var n=r(814);var i=r(874);var a=r(896);var o=r(830);var s=r(828);function u(e){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){u=function e(t){return typeof t}}else{u=function e(t){return t&&typeof Symbol==="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t}}return u(e)}function c(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function l(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}function f(e,t,r){if(t)l(e.prototype,t);if(r)l(e,r);return e}function h(e,t){if(t&&(u(t)==="object"||typeof t==="function")){return t}return d(e)}function d(e){if(e===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}function p(e){p=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)};return p(e)}function v(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function")}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:true,configurable:true}});if(t)m(e,t)}function m(e,t){m=Object.setPrototypeOf||function e(t,r){t.__proto__=r;return t};return m(e,t)}var g="uniform sampler2D texture;\r\n\r\n#ifdef ASPECT_CORRECTION\r\n\r\n\tvarying vec2 vUv2;\r\n\r\n#endif\r\n\r\nvoid mainImage(const in vec4 inputColor, const in vec2 uv, out vec4 outputColor) {\r\n\r\n\t#ifdef ASPECT_CORRECTION\r\n\r\n\t\toutputColor = texture2D(texture, vUv2);\r\n\r\n\t#else\r\n\r\n\t\toutputColor = texture2D(texture, uv);\r\n\r\n\t#endif\r\n\r\n}\r\n";var y=new n.Vector3;var b=function(e){v(t,e);function t(e,r,s){var u;var l=arguments.length>3&&arguments[3]!==undefined?arguments[3]:{};c(this,t);var f=Object.assign({blendFunction:o.BlendFunction.SCREEN,resolutionScale:.5,samples:60,blur:true,kernelSize:i.KernelSize.SMALL},l);u=h(this,p(t).call(this,"GodRaysEffect",g,{blendFunction:f.blendFunction,uniforms:new Map([["texture",new n.Uniform(null)]])}));u.scene=e;u.camera=r;u.lightSource=s;u.lightScene=new n.Scene;u.screenPosition=new n.Vector2;u.resolution=new n.Vector2;u.renderTargetX=new n.WebGLRenderTarget(1,1,{minFilter:n.LinearFilter,magFilter:n.LinearFilter,stencilBuffer:false,depthBuffer:false});u.renderTargetX.texture.name="GodRays.TargetX";u.renderTargetX.texture.generateMipmaps=false;u.uniforms.get("texture").value=u.renderTargetX.texture;u.renderTargetY=u.renderTargetX.clone();u.renderTargetY.texture.name="GodRays.TargetY";u.renderTargetMask=new n.WebGLRenderTarget(1,1,{minFilter:n.LinearFilter,magFilter:n.LinearFilter,stencilBuffer:false});u.renderTargetMask.texture.name="GodRays.Mask";u.renderTargetMask.texture.generateMipmaps=false;u.renderPassLight=new a.RenderPass(u.lightScene,r,{clearColor:new n.Color(0)});u.renderPassMask=new a.RenderPass(e,r,{overrideMaterial:new n.MeshBasicMaterial({color:0,morphTargets:true,skinning:true})});u.renderPassMask.clear=false;u.blurPass=new a.BlurPass(f);u.godRaysPass=new a.ShaderPass(new i.GodRaysMaterial(u.screenPosition,f));u.blur=f.blur;u.kernelSize=f.kernelSize;u.samples=f.samples;return u}f(t,[{key:"getResolutionScale",value:function e(){return this.blurPass.getResolutionScale()}},{key:"setResolutionScale",value:function e(t){this.blurPass.setResolutionScale(t);this.setSize(this.resolution.x,this.resolution.y)}},{key:"update",value:function e(t,r,n){var i=this.scene;var a=this.lightSource;var o=this.renderTargetMask;var s=this.renderTargetY;var u,c;y.copy(a.position).project(this.camera);this.screenPosition.set(Math.max(0,Math.min(1,(y.x+1)*.5)),Math.max(0,Math.min(1,(y.y+1)*.5)));c=a.parent;u=i.background;i.background=null;this.lightScene.add(a);this.renderPassLight.render(t,o);this.renderPassMask.render(t,o);if(c!==null){c.add(a)}i.background=u;r=o;if(this.blur){this.blurPass.render(t,r,s);r=s}this.godRaysPass.render(t,r,this.renderTargetX)}},{key:"setSize",value:function e(t,r){this.resolution.set(t,r);this.renderPassLight.setSize(t,r);this.renderPassMask.setSize(t,r);this.blurPass.setSize(t,r);this.godRaysPass.setSize(t,r);t=this.blurPass.width;r=this.blurPass.height;this.renderTargetMask.setSize(t,r);this.renderTargetX.setSize(t,r);this.renderTargetY.setSize(t,r)}},{key:"initialize",value:function e(t,r){this.renderPassLight.initialize(t,r);this.renderPassMask.initialize(t,r);this.blurPass.initialize(t,r);this.godRaysPass.initialize(t,r);if(!r){this.renderTargetMask.texture.format=n.RGBFormat;this.renderTargetX.texture.format=n.RGBFormat;this.renderTargetY.texture.format=n.RGBFormat}}},{key:"texture",get:function e(){return this.renderTargetX.texture}},{key:"godRaysMaterial",get:function e(){return this.godRaysPass.getFullscreenMaterial()}},{key:"dithering",get:function e(){return this.godRaysMaterial.dithering},set:function e(t){var r=this.godRaysMaterial;r.dithering=t;r.needsUpdate=true}},{key:"blur",get:function e(){return this.blurPass.enabled},set:function e(t){this.blurPass.enabled=t}},{key:"kernelSize",get:function e(){return this.blurPass.kernelSize},set:function e(t){this.blurPass.kernelSize=t}},{key:"samples",get:function e(){return this.godRaysMaterial.samples},set:function e(t){this.godRaysMaterial.samples=t}}]);return t}(s.Effect);t.GodRaysEffect=b},1812:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.GridEffect=void 0;var n=r(814);var i=r(830);var a=r(828);function o(e){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){o=function e(t){return typeof t}}else{o=function e(t){return t&&typeof Symbol==="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t}}return o(e)}function s(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function u(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}function c(e,t,r){if(t)u(e.prototype,t);if(r)u(e,r);return e}function l(e,t){if(t&&(o(t)==="object"||typeof t==="function")){return t}return f(e)}function f(e){if(e===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}function h(e){h=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)};return h(e)}function d(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function")}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:true,configurable:true}});if(t)p(e,t)}function p(e,t){p=Object.setPrototypeOf||function e(t,r){t.__proto__=r;return t};return p(e,t)}var v="uniform vec2 scale;\r\nuniform float lineWidth;\r\n\r\nvoid mainImage(const in vec4 inputColor, const in vec2 uv, out vec4 outputColor) {\r\n\r\n\tfloat grid = 0.5 - max(abs(mod(uv.x * scale.x, 1.0) - 0.5), abs(mod(uv.y * scale.y, 1.0) - 0.5));\r\n\toutputColor = vec4(vec3(smoothstep(0.0, lineWidth, grid)), inputColor.a);\r\n\r\n}\r\n";var m=function(e){d(t,e);function t(){var e;var r=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};s(this,t);var a=Object.assign({blendFunction:i.BlendFunction.OVERLAY,scale:1,lineWidth:0},r);e=l(this,h(t).call(this,"GridEffect",v,{blendFunction:a.blendFunction,uniforms:new Map([["scale",new n.Uniform(new n.Vector2)],["lineWidth",new n.Uniform(a.lineWidth)]])}));e.resolution=new n.Vector2;e.scale=Math.max(a.scale,1e-6);e.lineWidth=Math.max(a.lineWidth,0);return e}c(t,[{key:"getScale",value:function e(){return this.scale}},{key:"setScale",value:function e(t){this.scale=t;this.setSize(this.resolution.x,this.resolution.y)}},{key:"getLineWidth",value:function e(){return this.lineWidth}},{key:"setLineWidth",value:function e(t){this.lineWidth=t;this.setSize(this.resolution.x,this.resolution.y)}},{key:"setSize",value:function e(t,r){this.resolution.set(t,r);var n=t/r;var i=this.scale*(r*.125);this.uniforms.get("scale").value.set(n*i,i);this.uniforms.get("lineWidth").value=i/r+this.lineWidth}}]);return t}(a.Effect);t.GridEffect=m},1813:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.HueSaturationEffect=void 0;var n=r(814);var i=r(830);var a=r(828);function o(e){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){o=function e(t){return typeof t}}else{o=function e(t){return t&&typeof Symbol==="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t}}return o(e)}function s(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function u(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}function c(e,t,r){if(t)u(e.prototype,t);if(r)u(e,r);return e}function l(e,t){if(t&&(o(t)==="object"||typeof t==="function")){return t}return f(e)}function f(e){if(e===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}function h(e){h=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)};return h(e)}function d(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function")}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:true,configurable:true}});if(t)p(e,t)}function p(e,t){p=Object.setPrototypeOf||function e(t,r){t.__proto__=r;return t};return p(e,t)}var v="uniform vec3 hue;\r\nuniform float saturation;\r\n\r\nvoid mainImage(const in vec4 inputColor, const in vec2 uv, out vec4 outputColor) {\r\n\r\n\t// Hue.\r\n\tvec3 color = vec3(\r\n\t\tdot(inputColor.rgb, hue.xyz),\r\n\t\tdot(inputColor.rgb, hue.zxy),\r\n\t\tdot(inputColor.rgb, hue.yzx)\r\n\t);\r\n\r\n\t// Saturation.\r\n\tfloat average = (color.r + color.g + color.b) / 3.0;\r\n\tvec3 diff = average - color;\r\n\r\n\tif(saturation > 0.0) {\r\n\r\n\t\tcolor += diff * (1.0 - 1.0 / (1.001 - saturation));\r\n\r\n\t} else {\r\n\r\n\t\tcolor += diff * -saturation;\r\n\r\n\t}\r\n\r\n\toutputColor = vec4(min(color, 1.0), inputColor.a);\r\n\r\n}\r\n";var m=function(e){d(t,e);function t(){var e;var r=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};s(this,t);var a=Object.assign({blendFunction:i.BlendFunction.NORMAL,hue:0,saturation:0},r);e=l(this,h(t).call(this,"HueSaturationEffect",v,{blendFunction:a.blendFunction,uniforms:new Map([["hue",new n.Uniform(new n.Vector3)],["saturation",new n.Uniform(a.saturation)]])}));e.setHue(a.hue);return e}c(t,[{key:"setHue",value:function e(t){var r=Math.sin(t),n=Math.cos(t);this.uniforms.get("hue").value.set(2*n,-Math.sqrt(3)*r-n,Math.sqrt(3)*r-n).addScalar(1).divideScalar(3)}}]);return t}(a.Effect);t.HueSaturationEffect=m},1814:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.NoiseEffect=void 0;var n=r(830);var i=r(828);function a(e){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){a=function e(t){return typeof t}}else{a=function e(t){return t&&typeof Symbol==="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t}}return a(e)}function o(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}function u(e,t,r){if(t)s(e.prototype,t);if(r)s(e,r);return e}function c(e,t){if(t&&(a(t)==="object"||typeof t==="function")){return t}return l(e)}function l(e){if(e===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}function f(e){f=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)};return f(e)}function h(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function")}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:true,configurable:true}});if(t)d(e,t)}function d(e,t){d=Object.setPrototypeOf||function e(t,r){t.__proto__=r;return t};return d(e,t)}var p="void mainImage(const in vec4 inputColor, const in vec2 uv, out vec4 outputColor) {\r\n\r\n\tvec3 noise = vec3(rand(uv * time));\r\n\r\n\t#ifdef PREMULTIPLY\r\n\r\n\t\toutputColor = vec4(inputColor.rgb * noise, inputColor.a);\r\n\r\n\t#else\r\n\r\n\t\toutputColor = vec4(noise, inputColor.a);\r\n\r\n\t#endif\r\n\r\n}\r\n";var v=function(e){h(t,e);function t(){var e;var r=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};o(this,t);var i=Object.assign({blendFunction:n.BlendFunction.SCREEN,premultiply:false},r);e=c(this,f(t).call(this,"NoiseEffect",p,{blendFunction:i.blendFunction}));e.premultiply=i.premultiply;return e}u(t,[{key:"premultiply",get:function e(){return this.defines.has("PREMULTIPLY")},set:function e(t){t?this.defines.set("PREMULTIPLY","1"):this.defines.delete("PREMULTIPLY")}}]);return t}(i.Effect);t.NoiseEffect=v},1815:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.OutlineEffect=void 0;var n=r(814);var i=r(874);var a=r(896);var o=r(830);var s=r(828);function u(e){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){u=function e(t){return typeof t}}else{u=function e(t){return t&&typeof Symbol==="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t}}return u(e)}function c(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function l(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}function f(e,t,r){if(t)l(e.prototype,t);if(r)l(e,r);return e}function h(e,t){if(t&&(u(t)==="object"||typeof t==="function")){return t}return d(e)}function d(e){if(e===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}function p(e){p=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)};return p(e)}function v(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function")}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:true,configurable:true}});if(t)m(e,t)}function m(e,t){m=Object.setPrototypeOf||function e(t,r){t.__proto__=r;return t};return m(e,t)}var g="uniform sampler2D edgeTexture;\r\nuniform sampler2D maskTexture;\r\n\r\nuniform vec3 visibleEdgeColor;\r\nuniform vec3 hiddenEdgeColor;\r\nuniform float pulse;\r\nuniform float edgeStrength;\r\n\r\n#ifdef USE_PATTERN\r\n\r\n\tuniform sampler2D patternTexture;\r\n\tvarying vec2 vUvPattern;\r\n\r\n#endif\r\n\r\nvoid mainImage(const in vec4 inputColor, const in vec2 uv, out vec4 outputColor) {\r\n\r\n\tvec2 edge = texture2D(edgeTexture, uv).rg;\r\n\tvec2 mask = texture2D(maskTexture, uv).rg;\r\n\r\n\t#ifndef X_RAY\r\n\r\n\t\tedge.y = 0.0;\r\n\r\n\t#endif\r\n\r\n\tedge *= (edgeStrength * mask.x * pulse);\r\n\tvec3 color = edge.x * visibleEdgeColor + edge.y * hiddenEdgeColor;\r\n\r\n\tfloat visibilityFactor = 0.0;\r\n\r\n\t#ifdef USE_PATTERN\r\n\r\n\t\tvec4 patternColor = texture2D(patternTexture, vUvPattern);\r\n\r\n\t\t#ifdef X_RAY\r\n\r\n\t\t\tfloat hiddenFactor = 0.5;\r\n\r\n\t\t#else\r\n\r\n\t\t\tfloat hiddenFactor = 0.0;\r\n\r\n\t\t#endif\r\n\r\n\t\tvisibilityFactor = (1.0 - mask.y > 0.0) ? 1.0 : hiddenFactor;\r\n\t\tvisibilityFactor *= (1.0 - mask.x) * patternColor.a;\r\n\t\tcolor += visibilityFactor * patternColor.rgb;\r\n\r\n\t#endif\r\n\r\n\toutputColor = vec4(color, max(max(edge.x, edge.y), visibilityFactor));\r\n\r\n}\r\n";var y="uniform float patternScale;\r\n\r\nvarying vec2 vUvPattern;\r\n\r\nvoid mainSupport() {\r\n\r\n\tvUvPattern = uv * vec2(aspect, 1.0) * patternScale;\r\n\r\n}\r\n";var b=function(e){v(t,e);function t(e,r){var s;var u=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};c(this,t);var l=Object.assign({blendFunction:o.BlendFunction.SCREEN,patternTexture:null,edgeStrength:1,pulseSpeed:0,visibleEdgeColor:16777215,hiddenEdgeColor:2230538,blur:false,xRay:true},u);s=h(this,p(t).call(this,"OutlineEffect",g,{blendFunction:l.blendFunction,uniforms:new Map([["maskTexture",new n.Uniform(null)],["edgeTexture",new n.Uniform(null)],["edgeStrength",new n.Uniform(l.edgeStrength)],["visibleEdgeColor",new n.Uniform(new n.Color(l.visibleEdgeColor))],["hiddenEdgeColor",new n.Uniform(new n.Color(l.hiddenEdgeColor))],["pulse",new n.Uniform(1)]])}));s.setPatternTexture(l.patternTexture);s.xRay=l.xRay;s.mainScene=e;s.mainCamera=r;s.renderTargetDepth=new n.WebGLRenderTarget(1,1,{minFilter:n.LinearFilter,magFilter:n.LinearFilter});s.renderTargetDepth.texture.name="Outline.Depth";s.renderTargetDepth.texture.generateMipmaps=false;s.renderTargetMask=s.renderTargetDepth.clone();s.renderTargetMask.texture.format=n.RGBFormat;s.renderTargetMask.texture.name="Outline.Mask";s.uniforms.get("maskTexture").value=s.renderTargetMask.texture;s.renderTargetEdges=new n.WebGLRenderTarget(1,1,{minFilter:n.LinearFilter,magFilter:n.LinearFilter,stencilBuffer:false,depthBuffer:false,format:n.RGBFormat});s.renderTargetEdges.texture.name="Outline.Edges";s.renderTargetEdges.texture.generateMipmaps=false;s.renderTargetBlurredEdges=s.renderTargetEdges.clone();s.renderTargetBlurredEdges.texture.name="Outline.BlurredEdges";s.clearPass=new a.ClearPass({clearColor:new n.Color(16777215),clearAlpha:1});s.depthPass=new a.DepthPass(s.mainScene,s.mainCamera);s.maskPass=new a.RenderPass(s.mainScene,s.mainCamera,{overrideMaterial:new i.DepthComparisonMaterial(s.depthPass.renderTarget.texture,s.mainCamera),clearColor:new n.Color(16777215),clearAlpha:1});s.blurPass=new a.BlurPass(l);s.kernelSize=l.kernelSize;s.blur=l.blur;s.resolution=new n.Vector2;s.outlineEdgesPass=new a.ShaderPass(new i.OutlineEdgesMaterial(l));s.outlineEdgesPass.getFullscreenMaterial().uniforms.maskTexture.value=s.renderTargetMask.texture;s.selection=[];s.time=0;s.pulseSpeed=l.pulseSpeed;s.selectionLayer=10;s.clear=false;return s}f(t,[{key:"setPatternTexture",value:function e(t){if(t!==null){t.wrapS=t.wrapT=n.RepeatWrapping;this.defines.set("USE_PATTERN","1");this.uniforms.set("patternScale",new n.Uniform(1));this.uniforms.set("patternTexture",new n.Uniform(t));this.vertexShader=y}else{this.defines.delete("USE_PATTERN");this.uniforms.delete("patternScale");this.uniforms.delete("patternTexture");this.vertexShader=null}}},{key:"getResolutionScale",value:function e(){return this.blurPass.getResolutionScale()}},{key:"setResolutionScale",value:function e(t){this.blurPass.setResolutionScale(t);this.setSize(this.resolution.x,this.resolution.y)}},{key:"setSelection",value:function e(t){var r=t.slice(0);var n=this.selectionLayer;var i,a;this.clearSelection();for(i=0,a=r.length;i<a;++i){r[i].layers.enable(n)}this.selection=r;return this}},{key:"clearSelection",value:function e(){var t=this.selection;var r=this.selectionLayer;var n,i;for(n=0,i=t.length;n<i;++n){t[n].layers.disable(r)}this.selection=[];this.time=0;this.clear=true;return this}},{key:"selectObject",value:function e(t){t.layers.enable(this.selectionLayer);this.selection.push(t);return this}},{key:"deselectObject",value:function e(t){var r=this.selection;var n=r.indexOf(t);if(n>=0){r[n].layers.disable(this.selectionLayer);r.splice(n,1);if(r.length===0){this.time=0;this.clear=true}}return this}},{key:"setSelectionVisible",value:function e(t){var r=this.selection;var n,i;for(n=0,i=r.length;n<i;++n){if(t){r[n].layers.enable(0)}else{r[n].layers.disable(0)}}}},{key:"update",value:function e(t,r,n){var i=this.mainScene;var a=this.mainCamera;var o=this.uniforms.get("pulse");var s=i.background;var u=a.layers.mask;if(this.selection.length>0){i.background=null;o.value=1;if(this.pulseSpeed>0){o.value=.625+Math.cos(this.time*this.pulseSpeed*10)*.375;this.time+=n}this.setSelectionVisible(false);this.depthPass.render(t);this.setSelectionVisible(true);a.layers.mask=1<<this.selectionLayer;this.maskPass.render(t,this.renderTargetMask);a.layers.mask=u;i.background=s;this.outlineEdgesPass.render(t,null,this.renderTargetEdges);if(this.blur){this.blurPass.render(t,this.renderTargetEdges,this.renderTargetBlurredEdges)}}else if(this.clear){this.clearPass.render(t,this.renderTargetMask);this.clearPass.render(t,this.renderTargetEdges);this.clear=false}}},{key:"setSize",value:function e(t,r){this.resolution.set(t,r);this.renderTargetMask.setSize(t,r);this.blurPass.setSize(t,r);this.maskPass.setSize(t,r);this.depthPass.setSize(t,r);t=this.blurPass.width;r=this.blurPass.height;this.renderTargetEdges.setSize(t,r);this.renderTargetBlurredEdges.setSize(t,r);this.outlineEdgesPass.getFullscreenMaterial().setTexelSize(1/t,1/r)}},{key:"initialize",value:function e(t,r){this.depthPass.initialize(t,r);this.maskPass.initialize(t,r);this.blurPass.initialize(t,r)}},{key:"dithering",get:function e(){return this.blurPass.dithering},set:function e(t){this.blurPass.dithering=t}},{key:"kernelSize",get:function e(){return this.blurPass.kernelSize},set:function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:i.KernelSize.VERY_SMALL;this.blurPass.kernelSize=t}},{key:"blur",get:function e(){return this.blurPass.enabled},set:function e(t){this.blurPass.enabled=t;this.uniforms.get("edgeTexture").value=t?this.renderTargetBlurredEdges.texture:this.renderTargetEdges.texture}},{key:"xRay",get:function e(){return this.defines.has("X_RAY")},set:function e(t){t?this.defines.set("X_RAY","1"):this.defines.delete("X_RAY")}}]);return t}(s.Effect);t.OutlineEffect=b},1816:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.PixelationEffect=void 0;var n=r(814);var i=r(828);function a(e){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){a=function e(t){return typeof t}}else{a=function e(t){return t&&typeof Symbol==="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t}}return a(e)}function o(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}function u(e,t,r){if(t)s(e.prototype,t);if(r)s(e,r);return e}function c(e,t){if(t&&(a(t)==="object"||typeof t==="function")){return t}return l(e)}function l(e){if(e===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}function f(e){f=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)};return f(e)}function h(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function")}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:true,configurable:true}});if(t)d(e,t)}function d(e,t){d=Object.setPrototypeOf||function e(t,r){t.__proto__=r;return t};return d(e,t)}var p="uniform bool active;\r\nuniform vec2 d;\r\n\r\nvoid mainUv(inout vec2 uv) {\r\n\r\n\tif(active) {\r\n\r\n\t\tuv = vec2(\r\n\t\t\td.x * (floor(uv.x / d.x) + 0.5),\r\n\t\t\td.y * (floor(uv.y / d.y) + 0.5)\r\n\t\t);\r\n\r\n\t}\r\n\r\n}\r\n";var v=function(e){h(t,e);function t(){var e;var r=arguments.length>0&&arguments[0]!==undefined?arguments[0]:30;o(this,t);e=c(this,f(t).call(this,"PixelationEffect",p,{uniforms:new Map([["active",new n.Uniform(false)],["d",new n.Uniform(new n.Vector2)]])}));e.resolution=new n.Vector2;e.granularity=r;return e}u(t,[{key:"getGranularity",value:function e(){return this.granularity}},{key:"setGranularity",value:function e(t){t=Math.floor(t);if(t%2>0){t+=1}var r=this.uniforms;r.get("active").value=t>0;r.get("d").value.set(t,t).divide(this.resolution);this.granularity=t}},{key:"setSize",value:function e(t,r){this.resolution.set(t,r);this.setGranularity(this.granularity)}}]);return t}(i.Effect);t.PixelationEffect=v},1817:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.RealisticBokehEffect=void 0;var n=r(814);var i=r(830);var a=r(828);function o(e){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){o=function e(t){return typeof t}}else{o=function e(t){return t&&typeof Symbol==="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t}}return o(e)}function s(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function u(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}function c(e,t,r){if(t)u(e.prototype,t);if(r)u(e,r);return e}function l(e,t){if(t&&(o(t)==="object"||typeof t==="function")){return t}return f(e)}function f(e){if(e===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}function h(e){h=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)};return h(e)}function d(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function")}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:true,configurable:true}});if(t)p(e,t)}function p(e,t){p=Object.setPrototypeOf||function e(t,r){t.__proto__=r;return t};return p(e,t)}var v="uniform float focus;\r\nuniform float focalLength;\r\nuniform float maxBlur;\r\nuniform float luminanceThreshold;\r\nuniform float luminanceGain;\r\nuniform float bias;\r\nuniform float fringe;\r\n\r\n#ifdef MANUAL_DOF\r\n\r\n\tuniform vec4 dof;\r\n\r\n#endif\r\n\r\n#ifdef PENTAGON\r\n\r\n\tfloat pentagon(const in vec2 coords) {\r\n\r\n\t\tconst vec4 HS0 = vec4( 1.0,          0.0,         0.0, 1.0);\r\n\t\tconst vec4 HS1 = vec4( 0.309016994,  0.951056516, 0.0, 1.0);\r\n\t\tconst vec4 HS2 = vec4(-0.809016994,  0.587785252, 0.0, 1.0);\r\n\t\tconst vec4 HS3 = vec4(-0.809016994, -0.587785252, 0.0, 1.0);\r\n\t\tconst vec4 HS4 = vec4( 0.309016994, -0.951056516, 0.0, 1.0);\r\n\t\tconst vec4 HS5 = vec4( 0.0,          0.0,         1.0, 1.0);\r\n\r\n\t\tconst vec4 ONE = vec4(1.0);\r\n\r\n\t\tconst float P_FEATHER = 0.4;\r\n\t\tconst float N_FEATHER = -P_FEATHER;\r\n\r\n\t\tfloat inOrOut = -4.0;\r\n\r\n\t\tvec4 P = vec4(coords, vec2(RINGS_FLOAT - 1.3));\r\n\r\n\t\tvec4 dist = vec4(\r\n\t\t\tdot(P, HS0),\r\n\t\t\tdot(P, HS1),\r\n\t\t\tdot(P, HS2),\r\n\t\t\tdot(P, HS3)\r\n\t\t);\r\n\r\n\t\tdist = smoothstep(N_FEATHER, P_FEATHER, dist);\r\n\r\n\t\tinOrOut += dot(dist, ONE);\r\n\r\n\t\tdist.x = dot(P, HS4);\r\n\t\tdist.y = HS5.w - abs(P.z);\r\n\r\n\t\tdist = smoothstep(N_FEATHER, P_FEATHER, dist);\r\n\t\tinOrOut += dist.x;\r\n\r\n\t\treturn clamp(inOrOut, 0.0, 1.0);\r\n\r\n\t}\r\n\r\n#endif\r\n\r\nvec3 processTexel(const in vec2 coords, const in float blur) {\r\n\r\n\tvec3 c = vec3(\r\n\t\ttexture2D(inputBuffer, coords + vec2(0.0, 1.0) * texelSize * fringe * blur).r,\r\n\t\ttexture2D(inputBuffer, coords + vec2(-0.866, -0.5) * texelSize * fringe * blur).g,\r\n\t\ttexture2D(inputBuffer, coords + vec2(0.866, -0.5) * texelSize * fringe * blur).b\r\n\t);\r\n\r\n\t// Calculate the luminance of the constructed color.\r\n\tfloat luminance = linearToRelativeLuminance(c);\r\n\tfloat threshold = max((luminance - luminanceThreshold) * luminanceGain, 0.0);\r\n\r\n\treturn c + mix(vec3(0.0), c, threshold * blur);\r\n\r\n}\r\n\r\nfloat gather(const in float i, const in float j, const in float ringSamples,\r\n\tconst in vec2 uv, const in vec2 blurFactor, const in float blur, inout vec3 color) {\r\n\r\n\tfloat step = PI2 / ringSamples;\r\n\tvec2 wh = vec2(cos(j * step) * i, sin(j * step) * i);\r\n\r\n\t#ifdef PENTAGON\r\n\r\n\t\tfloat p = pentagon(wh);\r\n\r\n\t#else\r\n\r\n\t\tfloat p = 1.0;\r\n\r\n\t#endif\r\n\r\n\tcolor += processTexel(wh * blurFactor + uv, blur) * mix(1.0, i / RINGS_FLOAT, bias) * p;\r\n\r\n\treturn mix(1.0, i / RINGS_FLOAT, bias) * p;\r\n\r\n}\r\n\r\nvoid mainImage(const in vec4 inputColor, const in vec2 uv, const in float depth, out vec4 outputColor) {\r\n\r\n\t// Translate depth into world space units.\r\n\tfloat linearDepth = (-cameraFar * cameraNear / (depth * (cameraFar - cameraNear) - cameraFar));\r\n\r\n\t#ifdef MANUAL_DOF\r\n\r\n\t\tfloat focalPlane = linearDepth - focus;\r\n\t\tfloat farDoF = (focalPlane - dof.z) / dof.w;\r\n\t\tfloat nearDoF = (-focalPlane - dof.x) / dof.y;\r\n\r\n\t\tfloat blur = (focalPlane > 0.0) ? farDoF : nearDoF;\r\n\r\n\t#else\r\n\r\n\t\tconst float CIRCLE_OF_CONFUSION = 0.03; // 35mm film = 0.03mm CoC.\r\n\r\n\t\tfloat focalPlaneMM = focus * 1000.0;\r\n\t\tfloat depthMM = linearDepth * 1000.0;\r\n\r\n\t\tfloat focalPlane = (depthMM * focalLength) / (depthMM - focalLength);\r\n\t\tfloat farDoF = (focalPlaneMM * focalLength) / (focalPlaneMM - focalLength);\r\n\t\tfloat nearDoF = (focalPlaneMM - focalLength) / (focalPlaneMM * focus * CIRCLE_OF_CONFUSION);\r\n\r\n\t\tfloat blur = abs(focalPlane - farDoF) * nearDoF;\r\n\r\n\t#endif\r\n\r\n\tblur = clamp(blur, 0.0, 1.0);\r\n\r\n\tvec2 blurFactor = vec2(\r\n\t\ttexelSize.x * blur * maxBlur,\r\n\t\ttexelSize.y * blur * maxBlur\r\n\t);\r\n\r\n\tconst int MAX_RING_SAMPLES = RINGS_INT * SAMPLES_INT;\r\n\r\n\tvec3 color = inputColor.rgb;\r\n\r\n\tif(blur >= 0.05) {\r\n\r\n\t\tfloat s = 1.0;\r\n\t\tint ringSamples;\r\n\r\n\t\tfor(int i = 1; i <= RINGS_INT; i++) {\r\n\r\n\t\t\tringSamples = i * SAMPLES_INT;\r\n\r\n\t\t\tfor(int j = 0; j < MAX_RING_SAMPLES; j++) {\r\n\r\n\t\t\t\tif(j >= ringSamples) {\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\ts += gather(float(i), float(j), float(ringSamples), uv, blurFactor, blur, color);\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tcolor /= s;\r\n\r\n\t}\r\n\r\n\t#ifdef SHOW_FOCUS\r\n\r\n\t\tfloat edge = 0.002 * linearDepth;\r\n\t\tfloat m = clamp(smoothstep(0.0, edge, blur), 0.0, 1.0);\r\n\t\tfloat e = clamp(smoothstep(1.0 - edge, 1.0, blur), 0.0, 1.0);\r\n\r\n\t\tcolor = mix(color, vec3(1.0, 0.5, 0.0), (1.0 - m) * 0.6);\r\n\t\tcolor = mix(color, vec3(0.0, 0.5, 1.0), ((1.0 - e) - (1.0 - m)) * 0.2);\r\n\r\n\t#endif\r\n\r\n\toutputColor = vec4(color, inputColor.a);\r\n\r\n}\r\n";var m=function(e){d(t,e);function t(){var e;var r=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};s(this,t);var o=Object.assign({blendFunction:i.BlendFunction.NORMAL,focus:.5,focalLength:24,luminanceThreshold:.5,luminanceGain:2,bias:.5,fringe:.7,maxBlur:1,rings:3,samples:2,showFocus:false,manualDoF:false,pentagon:false},r);e=l(this,h(t).call(this,"RealisticBokehEffect",v,{attributes:a.EffectAttribute.CONVOLUTION|a.EffectAttribute.DEPTH,blendFunction:o.blendFunction,uniforms:new Map([["focus",new n.Uniform(o.focus)],["focalLength",new n.Uniform(o.focalLength)],["luminanceThreshold",new n.Uniform(o.luminanceThreshold)],["luminanceGain",new n.Uniform(o.luminanceGain)],["bias",new n.Uniform(o.bias)],["fringe",new n.Uniform(o.fringe)],["maxBlur",new n.Uniform(o.maxBlur)]])}));e.rings=o.rings;e.samples=o.samples;e.showFocus=o.showFocus;e.manualDoF=o.manualDoF;e.pentagon=o.pentagon;return e}c(t,[{key:"rings",get:function e(){return Number.parseInt(this.defines.get("RINGS_INT"))},set:function e(t){t=Math.floor(t);this.defines.set("RINGS_INT",t.toFixed(0));this.defines.set("RINGS_FLOAT",t.toFixed(1))}},{key:"samples",get:function e(){return Number.parseInt(this.defines.get("SAMPLES_INT"))},set:function e(t){t=Math.floor(t);this.defines.set("SAMPLES_INT",t.toFixed(0));this.defines.set("SAMPLES_FLOAT",t.toFixed(1))}},{key:"showFocus",get:function e(){return this.defines.has("SHOW_FOCUS")},set:function e(t){t?this.defines.set("SHOW_FOCUS","1"):this.defines.delete("SHOW_FOCUS")}},{key:"manualDoF",get:function e(){return this.defines.has("MANUAL_DOF")},set:function e(t){if(t){this.defines.set("MANUAL_DOF","1");this.uniforms.set("dof",new n.Uniform(new n.Vector4(.2,1,.2,2)))}else{this.defines.delete("MANUAL_DOF");this.uniforms.delete("dof")}}},{key:"pentagon",get:function e(){return this.defines.has("PENTAGON")},set:function e(t){t?this.defines.set("PENTAGON","1"):this.defines.delete("PENTAGON")}}]);return t}(a.Effect);t.RealisticBokehEffect=m},1818:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.ScanlineEffect=void 0;var n=r(814);var i=r(830);var a=r(828);function o(e){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){o=function e(t){return typeof t}}else{o=function e(t){return t&&typeof Symbol==="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t}}return o(e)}function s(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function u(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}function c(e,t,r){if(t)u(e.prototype,t);if(r)u(e,r);return e}function l(e,t){if(t&&(o(t)==="object"||typeof t==="function")){return t}return f(e)}function f(e){if(e===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}function h(e){h=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)};return h(e)}function d(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function")}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:true,configurable:true}});if(t)p(e,t)}function p(e,t){p=Object.setPrototypeOf||function e(t,r){t.__proto__=r;return t};return p(e,t)}var v="uniform float count;\r\n\r\nvoid mainImage(const in vec4 inputColor, const in vec2 uv, out vec4 outputColor) {\r\n\r\n\tvec2 sl = vec2(sin(uv.y * count), cos(uv.y * count));\r\n\tvec3 scanlines = vec3(sl.x, sl.y, sl.x);\r\n\r\n\toutputColor = vec4(scanlines, inputColor.a);\r\n\r\n}\r\n";var m=function(e){d(t,e);function t(){var e;var r=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};s(this,t);var a=Object.assign({blendFunction:i.BlendFunction.OVERLAY,density:1.25},r);e=l(this,h(t).call(this,"ScanlineEffect",v,{blendFunction:a.blendFunction,uniforms:new Map([["count",new n.Uniform(0)]])}));e.resolution=new n.Vector2;e.density=a.density;return e}c(t,[{key:"getDensity",value:function e(){return this.density}},{key:"setDensity",value:function e(t){this.density=t;this.setSize(this.resolution.x,this.resolution.y)}},{key:"setSize",value:function e(t,r){this.resolution.set(t,r);this.uniforms.get("count").value=Math.round(r*this.density)}}]);return t}(a.Effect);t.ScanlineEffect=m},1819:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.ShockWaveEffect=void 0;var n=r(814);var i=r(828);function a(e){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){a=function e(t){return typeof t}}else{a=function e(t){return t&&typeof Symbol==="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t}}return a(e)}function o(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}function u(e,t,r){if(t)s(e.prototype,t);if(r)s(e,r);return e}function c(e,t){if(t&&(a(t)==="object"||typeof t==="function")){return t}return l(e)}function l(e){if(e===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}function f(e){f=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)};return f(e)}function h(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function")}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:true,configurable:true}});if(t)d(e,t)}function d(e,t){d=Object.setPrototypeOf||function e(t,r){t.__proto__=r;return t};return d(e,t)}var p="uniform bool active;\r\nuniform vec2 center;\r\nuniform float waveSize;\r\nuniform float radius;\r\nuniform float maxRadius;\r\nuniform float amplitude;\r\n\r\nvarying float vSize;\r\n\r\nvoid mainUv(inout vec2 uv) {\r\n\r\n\tif(active) {\r\n\r\n\t\tvec2 aspectCorrection = vec2(aspect, 1.0);\r\n\t\tvec2 difference = uv * aspectCorrection - center * aspectCorrection;\r\n\t\tfloat distance = sqrt(dot(difference, difference)) * vSize;\r\n\r\n\t\tif(distance > radius) {\r\n\r\n\t\t\tif(distance < radius + waveSize) {\r\n\r\n\t\t\t\tfloat angle = (distance - radius) * PI2 / waveSize;\r\n\t\t\t\tfloat cosSin = (1.0 - cos(angle)) * 0.5;\r\n\r\n\t\t\t\tfloat extent = maxRadius + waveSize;\r\n\t\t\t\tfloat decay = max(extent - distance * distance, 0.0) / extent;\r\n\r\n\t\t\t\tuv -= ((cosSin * amplitude * difference) / distance) * decay;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n}\r\n";var v="uniform float size;\r\nuniform float cameraDistance;\r\n\r\nvarying float vSize;\r\n\r\nvoid mainSupport() {\r\n\r\n\tvSize = (0.1 * cameraDistance) / size;\r\n\r\n}\r\n";var m=Math.PI*.5;var g=new n.Vector3;var y=new n.Vector3;var b=function(e){h(t,e);function t(e){var r;var i=arguments.length>1&&arguments[1]!==undefined?arguments[1]:new n.Vector3;var a=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};o(this,t);var s=Object.assign({speed:2,maxRadius:1,waveSize:.2,amplitude:.05},a);r=c(this,f(t).call(this,"ShockWaveEffect",p,{uniforms:new Map([["active",new n.Uniform(false)],["center",new n.Uniform(new n.Vector2(.5,.5))],["cameraDistance",new n.Uniform(1)],["size",new n.Uniform(1)],["radius",new n.Uniform(-s.waveSize)],["maxRadius",new n.Uniform(s.maxRadius)],["waveSize",new n.Uniform(s.waveSize)],["amplitude",new n.Uniform(s.amplitude)]]),vertexShader:v}));r.camera=e;r.epicenter=i;r.screenPosition=r.uniforms.get("center").value;r.speed=s.speed;r.time=0;r.active=false;return r}u(t,[{key:"explode",value:function e(){this.time=0;this.active=true;this.uniforms.get("active").value=true}},{key:"update",value:function e(t,r,n){var i=this.epicenter;var a=this.camera;var o=this.uniforms;var s;if(this.active){var u=o.get("waveSize").value;a.getWorldDirection(g);y.copy(a.position).sub(i);if(g.angleTo(y)>m){o.get("cameraDistance").value=a.position.distanceTo(i);g.copy(i).project(a);this.screenPosition.set((g.x+1)*.5,(g.y+1)*.5)}this.time+=n*this.speed;s=this.time-u;o.get("radius").value=s;if(s>=(o.get("maxRadius").value+u)*2){this.active=false;o.get("active").value=false}}}}]);return t}(i.Effect);t.ShockWaveEffect=b},1820:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.SepiaEffect=void 0;var n=r(814);var i=r(830);var a=r(828);function o(e){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){o=function e(t){return typeof t}}else{o=function e(t){return t&&typeof Symbol==="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t}}return o(e)}function s(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function u(e,t){if(t&&(o(t)==="object"||typeof t==="function")){return t}return c(e)}function c(e){if(e===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}function l(e){l=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)};return l(e)}function f(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function")}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:true,configurable:true}});if(t)h(e,t)}function h(e,t){h=Object.setPrototypeOf||function e(t,r){t.__proto__=r;return t};return h(e,t)}var d="uniform float intensity;\r\n\r\nvoid mainImage(const in vec4 inputColor, const in vec2 uv, out vec4 outputColor) {\r\n\r\n\tvec3 color = vec3(\r\n\t\tdot(inputColor.rgb, vec3(1.0 - 0.607 * intensity, 0.769 * intensity, 0.189 * intensity)),\r\n\t\tdot(inputColor.rgb, vec3(0.349 * intensity, 1.0 - 0.314 * intensity, 0.168 * intensity)),\r\n\t\tdot(inputColor.rgb, vec3(0.272 * intensity, 0.534 * intensity, 1.0 - 0.869 * intensity))\r\n\t);\r\n\r\n\toutputColor = vec4(color, inputColor.a);\r\n\r\n}\r\n";var p=function(e){f(t,e);function t(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};s(this,t);var r=Object.assign({blendFunction:i.BlendFunction.NORMAL,intensity:1},e);return u(this,l(t).call(this,"SepiaEffect",d,{blendFunction:r.blendFunction,uniforms:new Map([["intensity",new n.Uniform(r.intensity)]])}))}return t}(a.Effect);t.SepiaEffect=p},1821:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.SMAAEffect=void 0;var n=r(814);var i=r(874);var a=r(896);var o=r(830);var s=r(828);var u=l(r(1822));var c=l(r(1823));function l(e){return e&&e.__esModule?e:{default:e}}function f(e){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){f=function e(t){return typeof t}}else{f=function e(t){return t&&typeof Symbol==="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t}}return f(e)}function h(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function d(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}function p(e,t,r){if(t)d(e.prototype,t);if(r)d(e,r);return e}function v(e,t){if(t&&(f(t)==="object"||typeof t==="function")){return t}return m(e)}function m(e){if(e===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}function g(e){g=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)};return g(e)}function y(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function")}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:true,configurable:true}});if(t)b(e,t)}function b(e,t){b=Object.setPrototypeOf||function e(t,r){t.__proto__=r;return t};return b(e,t)}var x="uniform sampler2D weightMap;\r\n\r\nvarying vec2 vOffset0;\r\nvarying vec2 vOffset1;\r\n\r\nvoid mainImage(const in vec4 inputColor, const in vec2 uv, out vec4 outputColor) {\r\n\r\n\t// Fetch the blending weights for the current pixel.\r\n\tvec4 a;\r\n\ta.rb = texture2D(weightMap, uv).rb;\r\n\ta.g = texture2D(weightMap, vOffset1).g;\r\n\ta.a = texture2D(weightMap, vOffset0).a;\r\n\r\n\tvec4 color = inputColor;\r\n\r\n\t// Ignore tiny blending weights.\r\n\tif(dot(a, vec4(1.0)) >= 1e-5) {\r\n\r\n\t\t/* Up to four lines can be crossing a pixel (one through each edge).\r\n\t\t * The line with the maximum weight for each direction is favoured.\r\n\t\t */\r\n\r\n\t\tvec2 offset = vec2(\r\n\t\t\ta.a > a.b ? a.a : -a.b,\t// Left vs. right.\r\n\t\t\ta.g > a.r ? -a.g : a.r\t// Top vs. bottom (changed signs).\r\n\t\t);\r\n\r\n\t\t// Go in the direction with the maximum weight (horizontal vs. vertical).\r\n\t\tif(abs(offset.x) > abs(offset.y)) {\r\n\r\n\t\t\toffset.y = 0.0;\r\n\r\n\t\t} else {\r\n\r\n\t\t\toffset.x = 0.0;\r\n\r\n\t\t}\r\n\r\n\t\t// Fetch the opposite color and lerp by hand.\r\n\t\tvec4 oppositeColor = texture2D(inputBuffer, uv + sign(offset) * texelSize);\r\n\t\tfloat s = abs(offset.x) > abs(offset.y) ? abs(offset.x) : abs(offset.y);\r\n\r\n\t\t// Gamma correction.\r\n\t\tcolor.rgb = pow(abs(color.rgb), vec3(2.2));\r\n\t\toppositeColor.rgb = pow(abs(oppositeColor.rgb), vec3(2.2));\r\n\t\tcolor = mix(color, oppositeColor, s);\r\n\t\tcolor.rgb = pow(abs(color.rgb), vec3(1.0 / 2.2));\r\n\r\n\t}\r\n\r\n\toutputColor = color;\r\n\r\n}\r\n";var w="varying vec2 vOffset0;\r\nvarying vec2 vOffset1;\r\n\r\nvoid mainSupport() {\r\n\r\n\tvOffset0 = uv + texelSize * vec2(1.0, 0.0);\r\n\tvOffset1 = uv + texelSize * vec2(0.0, -1.0); // Changed sign in Y component.\r\n\r\n}\r\n";var A=function(e){y(t,e);function t(e,r){var u;h(this,t);u=v(this,g(t).call(this,"SMAAEffect",x,{attributes:s.EffectAttribute.CONVOLUTION,blendFunction:o.BlendFunction.NORMAL,uniforms:new Map([["weightMap",new n.Uniform(null)]]),vertexShader:w}));u.renderTargetColorEdges=new n.WebGLRenderTarget(1,1,{minFilter:n.LinearFilter,format:n.RGBFormat,stencilBuffer:false,depthBuffer:false});u.renderTargetColorEdges.texture.name="SMAA.ColorEdges";u.renderTargetColorEdges.texture.generateMipmaps=false;u.renderTargetWeights=u.renderTargetColorEdges.clone();u.renderTargetWeights.texture.name="SMAA.Weights";u.renderTargetWeights.texture.format=n.RGBAFormat;u.uniforms.get("weightMap").value=u.renderTargetWeights.texture;u.clearPass=new a.ClearPass({clearColor:new n.Color(0),clearAlpha:1});u.colorEdgesPass=new a.ShaderPass(new i.ColorEdgesMaterial);u.weightsPass=new a.ShaderPass(new i.SMAAWeightsMaterial);u.weightsPass.getFullscreenMaterial().uniforms.searchTexture.value=function(){var t=new n.Texture(e);t.name="SMAA.Search";t.magFilter=n.NearestFilter;t.minFilter=n.NearestFilter;t.format=n.RGBAFormat;t.generateMipmaps=false;t.needsUpdate=true;t.flipY=false;return t}();u.weightsPass.getFullscreenMaterial().uniforms.areaTexture.value=function(){var e=new n.Texture(r);e.name="SMAA.Area";e.minFilter=n.LinearFilter;e.format=n.RGBAFormat;e.generateMipmaps=false;e.needsUpdate=true;e.flipY=false;return e}();return u}p(t,[{key:"setEdgeDetectionThreshold",value:function e(t){this.colorEdgesPass.getFullscreenMaterial().setEdgeDetectionThreshold(t)}},{key:"setOrthogonalSearchSteps",value:function e(t){this.weightsPass.getFullscreenMaterial().setOrthogonalSearchSteps(t)}},{key:"update",value:function e(t,r,n){this.clearPass.render(t,this.renderTargetColorEdges);this.colorEdgesPass.render(t,r,this.renderTargetColorEdges);this.weightsPass.render(t,this.renderTargetColorEdges,this.renderTargetWeights)}},{key:"setSize",value:function e(t,r){this.renderTargetColorEdges.setSize(t,r);this.renderTargetWeights.setSize(t,r);this.colorEdgesPass.getFullscreenMaterial().uniforms.texelSize.value.copy(this.weightsPass.getFullscreenMaterial().uniforms.texelSize.value.set(1/t,1/r))}}],[{key:"searchImageDataURL",get:function e(){return u.default}},{key:"areaImageDataURL",get:function e(){return c.default}}]);return t}(s.Effect);t.SMAAEffect=A},1822:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var n="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEIAAAAhCAAAAABIXyLAAAAAOElEQVRIx2NgGAWjYBSMglEwEICREYRgFBZBqDCSLA2MGPUIVQETE9iNUAqLR5gIeoQKRgwXjwAAGn4AtaFeYLEAAAAASUVORK5CYII";t.default=n},1823:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var n="data:image/png;base64,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";t.default=n},1824:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.SSAOEffect=void 0;var n=r(814);var i=r(830);var a=r(828);function o(e){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){o=function e(t){return typeof t}}else{o=function e(t){return t&&typeof Symbol==="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t}}return o(e)}function s(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function u(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}function c(e,t,r){if(t)u(e.prototype,t);if(r)u(e,r);return e}function l(e,t){if(t&&(o(t)==="object"||typeof t==="function")){return t}return f(e)}function f(e){if(e===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}function h(e){h=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)};return h(e)}function d(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function")}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:true,configurable:true}});if(t)p(e,t)}function p(e,t){p=Object.setPrototypeOf||function e(t,r){t.__proto__=r;return t};return p(e,t)}var v="uniform sampler2D normalBuffer;\r\n\r\nuniform mat4 cameraProjectionMatrix;\r\nuniform mat4 cameraInverseProjectionMatrix;\r\n\r\nuniform vec2 radiusStep;\r\nuniform vec2 distanceCutoff;\r\nuniform vec2 proximityCutoff;\r\nuniform float seed;\r\nuniform float luminanceInfluence;\r\nuniform float scale;\r\nuniform float bias;\r\n\r\nfloat getViewZ(const in float depth) {\r\n\r\n\t#ifdef PERSPECTIVE_CAMERA\r\n\r\n\t\treturn perspectiveDepthToViewZ(depth, cameraNear, cameraFar);\r\n\r\n\t#else\r\n\r\n\t\treturn orthographicDepthToViewZ(depth, cameraNear, cameraFar);\r\n\r\n\t#endif\r\n\r\n}\r\n\r\nvec3 getViewPosition(const in vec2 screenPosition, const in float depth, const in float viewZ) {\r\n\r\n\tfloat clipW = cameraProjectionMatrix[2][3] * viewZ + cameraProjectionMatrix[3][3];\r\n\tvec4 clipPosition = vec4((vec3(screenPosition, depth) - 0.5) * 2.0, 1.0);\r\n\tclipPosition *= clipW; // Unproject.\r\n\r\n\treturn (cameraInverseProjectionMatrix * clipPosition).xyz;\r\n\r\n}\r\n\r\nfloat getOcclusion(const in vec3 p, const in vec3 n, const in vec3 sampleViewPosition) {\r\n\r\n\tvec3 viewDelta = sampleViewPosition - p;\r\n\tfloat d = length(viewDelta) * scale;\r\n\r\n\treturn max(0.0, dot(n, viewDelta) / d - bias) / (1.0 + pow2(d));\r\n\r\n}\r\n\r\nfloat getAmbientOcclusion(const in vec3 p, const in vec3 n, const in float depth, const in vec2 uv) {\r\n\r\n\tvec2 radius = radiusStep;\r\n\tfloat angle = rand(uv + seed) * PI2;\r\n\tfloat occlusionSum = 0.0;\r\n\r\n\t// Collect samples along a discrete spiral pattern.\r\n\tfor(int i = 0; i < SAMPLES_INT; ++i) {\r\n\r\n\t\tvec2 coord = uv + vec2(cos(angle), sin(angle)) * radius;\r\n\t\tradius += radiusStep;\r\n\t\tangle += ANGLE_STEP;\r\n\r\n\t\tfloat sampleDepth = readDepth(coord);\r\n\t\tfloat proximity = abs(depth - sampleDepth);\r\n\r\n\t\tif(sampleDepth < distanceCutoff.y && proximity < proximityCutoff.y) {\r\n\r\n\t\t\tfloat falloff = 1.0 - smoothstep(proximityCutoff.x, proximityCutoff.y, proximity);\r\n\t\t\tvec3 sampleViewPosition = getViewPosition(coord, sampleDepth, getViewZ(sampleDepth));\r\n\t\t\tocclusionSum += getOcclusion(p, n, sampleViewPosition) * falloff;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\treturn occlusionSum / SAMPLES_FLOAT;\r\n\r\n}\r\n\r\nvoid mainImage(const in vec4 inputColor, const in vec2 uv, const in float depth, out vec4 outputColor) {\r\n\r\n\tfloat ao = 1.0;\r\n\r\n\t// Skip fragments of objects that are too far away.\r\n\tif(depth < distanceCutoff.y) {\r\n\r\n\t\tvec3 viewPosition = getViewPosition(uv, depth, getViewZ(depth));\r\n\t\tvec3 viewNormal = unpackRGBToNormal(texture2D(normalBuffer, uv).xyz);\r\n\t\tao -= getAmbientOcclusion(viewPosition, viewNormal, depth, uv);\r\n\r\n\t\t// Fade AO based on luminance and depth.\r\n\t\tfloat l = linearToRelativeLuminance(inputColor.rgb);\r\n\t\tao = mix(ao, 1.0, max(l * luminanceInfluence, smoothstep(distanceCutoff.x, distanceCutoff.y, depth)));\r\n\r\n\t}\r\n\r\n\toutputColor = vec4(vec3(ao), inputColor.a);\r\n\r\n}\r\n";var m=function(e){d(t,e);function t(e,r){var o;var u=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};s(this,t);var c=Object.assign({blendFunction:i.BlendFunction.MULTIPLY,samples:11,rings:4,distanceThreshold:.65,distanceFalloff:.1,rangeThreshold:.0015,rangeFalloff:.01,luminanceInfluence:.7,radius:18.25,scale:1,bias:.5},u);o=l(this,h(t).call(this,"SSAOEffect",v,{attributes:a.EffectAttribute.DEPTH,blendFunction:c.blendFunction,defines:new Map([["RINGS_INT","0"],["SAMPLES_INT","0"],["SAMPLES_FLOAT","0.0"]]),uniforms:new Map([["normalBuffer",new n.Uniform(r)],["cameraInverseProjectionMatrix",new n.Uniform(new n.Matrix4)],["cameraProjectionMatrix",new n.Uniform(new n.Matrix4)],["radiusStep",new n.Uniform(new n.Vector2)],["distanceCutoff",new n.Uniform(new n.Vector2)],["proximityCutoff",new n.Uniform(new n.Vector2)],["seed",new n.Uniform(Math.random())],["luminanceInfluence",new n.Uniform(c.luminanceInfluence)],["scale",new n.Uniform(c.scale)],["bias",new n.Uniform(c.bias)]])}));o.r=0;o.resolution=new n.Vector2(1,1);o.camera=e;o.samples=c.samples;o.rings=c.rings;o.radius=c.radius;o.setDistanceCutoff(c.distanceThreshold,c.distanceFalloff);o.setProximityCutoff(c.rangeThreshold,c.rangeFalloff);return o}c(t,[{key:"updateAngleStep",value:function e(){this.defines.set("ANGLE_STEP",(Math.PI*2*this.rings/this.samples).toFixed(11))}},{key:"updateRadiusStep",value:function e(){var t=this.r/this.samples;this.uniforms.get("radiusStep").value.set(t,t).divide(this.resolution)}},{key:"setDistanceCutoff",value:function e(t,r){this.uniforms.get("distanceCutoff").value.set(t,Math.min(t+r,1-1e-6))}},{key:"setProximityCutoff",value:function e(t,r){this.uniforms.get("proximityCutoff").value.set(t,Math.min(t+r,1-1e-6))}},{key:"setSize",value:function e(t,r){this.resolution.set(t,r);this.updateRadiusStep();this.uniforms.get("cameraInverseProjectionMatrix").value.getInverse(this.camera.projectionMatrix);this.uniforms.get("cameraProjectionMatrix").value.copy(this.camera.projectionMatrix)}},{key:"samples",get:function e(){return Number.parseInt(this.defines.get("SAMPLES_INT"))},set:function e(t){t=Math.floor(t);this.defines.set("SAMPLES_INT",t.toFixed(0));this.defines.set("SAMPLES_FLOAT",t.toFixed(1));this.updateAngleStep();this.updateRadiusStep()}},{key:"rings",get:function e(){return Number.parseInt(this.defines.get("RINGS_INT"))},set:function e(t){t=Math.floor(t);this.defines.set("RINGS_INT",t.toFixed(0));this.updateAngleStep()}},{key:"radius",get:function e(){return this.r},set:function e(t){this.r=t;this.updateRadiusStep()}}]);return t}(a.Effect);t.SSAOEffect=m},1825:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.TextureEffect=void 0;var n=r(814);var i=r(830);var a=r(828);function o(e){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){o=function e(t){return typeof t}}else{o=function e(t){return t&&typeof Symbol==="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t}}return o(e)}function s(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function u(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}function c(e,t,r){if(t)u(e.prototype,t);if(r)u(e,r);return e}function l(e,t){if(t&&(o(t)==="object"||typeof t==="function")){return t}return f(e)}function f(e){if(e===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}function h(e){h=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)};return h(e)}function d(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function")}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:true,configurable:true}});if(t)p(e,t)}function p(e,t){p=Object.setPrototypeOf||function e(t,r){t.__proto__=r;return t};return p(e,t)}var v="uniform sampler2D texture;\r\n\r\n#ifdef ASPECT_CORRECTION\r\n\r\n\tvarying vec2 vUv2;\r\n\r\n#endif\r\n\r\nvoid mainImage(const in vec4 inputColor, const in vec2 uv, out vec4 outputColor) {\r\n\r\n\t#ifdef ASPECT_CORRECTION\r\n\r\n\t\toutputColor = texture2D(texture, vUv2);\r\n\r\n\t#else\r\n\r\n\t\toutputColor = texture2D(texture, uv);\r\n\r\n\t#endif\r\n\r\n}\r\n";var m="uniform float scale;\r\n\r\nvarying vec2 vUv2;\r\n\r\nvoid mainSupport() {\r\n\r\n\tvUv2 = uv * vec2(aspect, 1.0) * scale;\r\n\r\n}\r\n";var g=function(e){d(t,e);function t(){var e;var r=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};s(this,t);var a=Object.assign({blendFunction:i.BlendFunction.NORMAL,texture:null,aspectCorrection:false},r);e=l(this,h(t).call(this,"TextureEffect",v,{blendFunction:a.blendFunction,uniforms:new Map([["texture",new n.Uniform(a.texture)]])}));e.aspectCorrection=a.aspectCorrection;return e}c(t,[{key:"aspectCorrection",get:function e(){return this.defines.has("ASPECT_CORRECTION")},set:function e(t){if(t){this.defines.set("ASPECT_CORRECTION","1");this.uniforms.set("scale",new n.Uniform(1));this.vertexShader=m}else{this.defines.delete("ASPECT_CORRECTION");this.uniforms.delete("scale");this.vertexShader=null}}}]);return t}(a.Effect);t.TextureEffect=g},1826:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.ToneMappingEffect=void 0;var n=r(814);var i=r(874);var a=r(896);var o=r(830);var s=r(828);function u(e){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){u=function e(t){return typeof t}}else{u=function e(t){return t&&typeof Symbol==="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t}}return u(e)}function c(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function l(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}function f(e,t,r){if(t)l(e.prototype,t);if(r)l(e,r);return e}function h(e,t){if(t&&(u(t)==="object"||typeof t==="function")){return t}return d(e)}function d(e){if(e===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}function p(e){p=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)};return p(e)}function v(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function")}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:true,configurable:true}});if(t)m(e,t)}function m(e,t){m=Object.setPrototypeOf||function e(t,r){t.__proto__=r;return t};return m(e,t)}var g="uniform sampler2D luminanceMap;\r\nuniform float middleGrey;\r\nuniform float maxLuminance;\r\nuniform float averageLuminance;\r\n\r\nvec3 toneMap(vec3 c) {\r\n\r\n\t#ifdef ADAPTED_LUMINANCE\r\n\r\n\t\t// Get the calculated average luminance by sampling the center.\r\n\t\tfloat lumAvg = texture2D(luminanceMap, vec2(0.5)).r;\r\n\r\n\t#else\r\n\r\n\t\tfloat lumAvg = averageLuminance;\r\n\r\n\t#endif\r\n\r\n\t// Calculate the luminance of the current pixel.\r\n\tfloat lumPixel = linearToRelativeLuminance(c);\r\n\r\n\t// Apply the modified operator (Reinhard Eq. 4).\r\n\tfloat lumScaled = (lumPixel * middleGrey) / lumAvg;\r\n\r\n\tfloat lumCompressed = (lumScaled * (1.0 + (lumScaled / (maxLuminance * maxLuminance)))) / (1.0 + lumScaled);\r\n\r\n\treturn lumCompressed * c;\r\n\r\n}\r\n\r\nvoid mainImage(const in vec4 inputColor, const in vec2 uv, out vec4 outputColor) {\r\n\r\n\toutputColor = vec4(toneMap(inputColor.rgb), inputColor.a);\r\n\r\n}\r\n";var y=function(e){v(t,e);function t(){var e;var r=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};c(this,t);var s=Object.assign({blendFunction:o.BlendFunction.NORMAL,adaptive:true,resolution:256,distinction:1,middleGrey:.6,maxLuminance:16,averageLuminance:1,adaptationRate:2},r);e=h(this,p(t).call(this,"ToneMappingEffect",g,{blendFunction:s.blendFunction,uniforms:new Map([["luminanceMap",new n.Uniform(null)],["middleGrey",new n.Uniform(s.middleGrey)],["maxLuminance",new n.Uniform(s.maxLuminance)],["averageLuminance",new n.Uniform(s.averageLuminance)]])}));e.renderTargetLuminance=new n.WebGLRenderTarget(1,1,{minFilter:n.LinearMipMapLinearFilter,magFilter:n.LinearFilter,format:n.RGBFormat,stencilBuffer:false,depthBuffer:false});e.renderTargetLuminance.texture.name="ToneMapping.Luminance";e.renderTargetLuminance.texture.generateMipmaps=true;e.renderTargetAdapted=e.renderTargetLuminance.clone();e.renderTargetAdapted.texture.name="ToneMapping.AdaptedLuminance";e.renderTargetAdapted.texture.generateMipmaps=false;e.renderTargetAdapted.texture.minFilter=n.LinearFilter;e.renderTargetPrevious=e.renderTargetAdapted.clone();e.renderTargetPrevious.texture.name="ToneMapping.PreviousLuminance";e.savePass=new a.SavePass(e.renderTargetPrevious,false);e.luminancePass=new a.ShaderPass(new i.LuminanceMaterial);e.adaptiveLuminancePass=new a.ShaderPass(new i.AdaptiveLuminanceMaterial);e.adaptationRate=s.adaptationRate;e.distinction=s.distinction;e.resolution=s.resolution;e.adaptive=s.adaptive;return e}f(t,[{key:"update",value:function e(t,r,n){if(this.adaptive){this.luminancePass.render(t,r,this.renderTargetLuminance);var i=this.adaptiveLuminancePass.getFullscreenMaterial().uniforms;i.previousLuminanceBuffer.value=this.renderTargetPrevious.texture;i.currentLuminanceBuffer.value=this.renderTargetLuminance.texture;i.delta.value=n;this.adaptiveLuminancePass.render(t,null,this.renderTargetAdapted);this.savePass.render(t,this.renderTargetAdapted)}}},{key:"setSize",value:function e(t,r){this.savePass.setSize(t,r)}},{key:"initialize",value:function e(t,r){var i=new a.ClearPass({clearColor:new n.Color(8388607)});i.render(t,this.renderTargetPrevious);i.dispose()}},{key:"resolution",get:function e(){return this.renderTargetLuminance.width},set:function e(t){var r=Math.max(0,Math.ceil(Math.log2(t)));t=Math.pow(2,r);this.renderTargetLuminance.setSize(t,t);this.renderTargetPrevious.setSize(t,t);this.renderTargetAdapted.setSize(t,t);this.adaptiveLuminancePass.getFullscreenMaterial().defines.MIP_LEVEL_1X1=r.toFixed(1)}},{key:"adaptive",get:function e(){return this.defines.has("ADAPTED_LUMINANCE")},set:function e(t){if(t){this.defines.set("ADAPTED_LUMINANCE","1");this.uniforms.get("luminanceMap").value=this.renderTargetAdapted.texture}else{this.defines.delete("ADAPTED_LUMINANCE");this.uniforms.get("luminanceMap").value=null}}},{key:"adaptationRate",get:function e(){return this.adaptiveLuminancePass.getFullscreenMaterial().uniforms.tau.value},set:function e(t){this.adaptiveLuminancePass.getFullscreenMaterial().uniforms.tau.value=t}},{key:"distinction",get:function e(){return this.luminancePass.getFullscreenMaterial().uniforms.distinction.value},set:function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:1;this.luminancePass.getFullscreenMaterial().uniforms.distinction.value=t}}]);return t}(s.Effect);t.ToneMappingEffect=y},1827:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.VignetteEffect=void 0;var n=r(814);var i=r(830);var a=r(828);function o(e){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){o=function e(t){return typeof t}}else{o=function e(t){return t&&typeof Symbol==="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t}}return o(e)}function s(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function u(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}function c(e,t,r){if(t)u(e.prototype,t);if(r)u(e,r);return e}function l(e,t){if(t&&(o(t)==="object"||typeof t==="function")){return t}return f(e)}function f(e){if(e===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}function h(e){h=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)};return h(e)}function d(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function")}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:true,configurable:true}});if(t)p(e,t)}function p(e,t){p=Object.setPrototypeOf||function e(t,r){t.__proto__=r;return t};return p(e,t)}var v="uniform float offset;\r\nuniform float darkness;\r\n\r\nvoid mainImage(const in vec4 inputColor, const in vec2 uv, out vec4 outputColor) {\r\n\r\n\tconst vec2 center = vec2(0.5);\r\n\tvec3 color = inputColor.rgb;\r\n\r\n\t#ifdef ESKIL\r\n\r\n\t\tvec2 coord = (uv - center) * vec2(offset);\r\n\t\tcolor = mix(color, vec3(1.0 - darkness), dot(coord, coord));\r\n\r\n\t#else\r\n\r\n\t\tfloat d = distance(uv, center);\r\n\t\tcolor *= smoothstep(0.8, offset * 0.799, d * (darkness + offset));\r\n\r\n\t#endif\r\n\r\n\toutputColor = vec4(color, inputColor.a);\r\n\r\n}\r\n";var m=function(e){d(t,e);function t(){var e;var r=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};s(this,t);var a=Object.assign({blendFunction:i.BlendFunction.NORMAL,eskil:false,offset:.5,darkness:.5},r);e=l(this,h(t).call(this,"VignetteEffect",v,{blendFunction:a.blendFunction,uniforms:new Map([["offset",new n.Uniform(a.offset)],["darkness",new n.Uniform(a.darkness)]])}));e.eskil=a.eskil;return e}c(t,[{key:"eskil",get:function e(){return this.defines.has("ESKIL")},set:function e(t){t?this.defines.set("ESKIL","1"):this.defines.delete("ESKIL")}}]);return t}(a.Effect);t.VignetteEffect=m},1828:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});Object.defineProperty(t,"SMAAAreaImageData",{enumerable:true,get:function e(){return n.SMAAAreaImageData}});Object.defineProperty(t,"SMAASearchImageData",{enumerable:true,get:function e(){return i.SMAASearchImageData}});Object.defineProperty(t,"RawImageData",{enumerable:true,get:function e(){return a.RawImageData}});var n=r(1829);var i=r(1830);var a=r(1039)},1829:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.SMAAAreaImageData=void 0;var n=r(814);var i=r(1039);function a(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}function s(e,t,r){if(t)o(e.prototype,t);if(r)o(e,r);return e}var u=new n.Box2;var c=new n.Box2;var l=16;var f=20;var h=30;var d=32;var p=new Float32Array([0,-.25,.25,-.125,.125,-.375,.375]);var v=[new Float32Array([0,0]),new Float32Array([.25,-.25]),new Float32Array([-.25,.25]),new Float32Array([.125,-.125]),new Float32Array([-.125,.125])];var m=[new Uint8Array([0,0]),new Uint8Array([3,0]),new Uint8Array([0,3]),new Uint8Array([3,3]),new Uint8Array([1,0]),new Uint8Array([4,0]),new Uint8Array([1,3]),new Uint8Array([4,3]),new Uint8Array([0,1]),new Uint8Array([3,1]),new Uint8Array([0,4]),new Uint8Array([3,4]),new Uint8Array([1,1]),new Uint8Array([4,1]),new Uint8Array([1,4]),new Uint8Array([4,4])];var g=[new Uint8Array([0,0]),new Uint8Array([1,0]),new Uint8Array([0,2]),new Uint8Array([1,2]),new Uint8Array([2,0]),new Uint8Array([3,0]),new Uint8Array([2,2]),new Uint8Array([3,2]),new Uint8Array([0,1]),new Uint8Array([1,1]),new Uint8Array([0,3]),new Uint8Array([1,3]),new Uint8Array([2,1]),new Uint8Array([3,1]),new Uint8Array([2,3]),new Uint8Array([3,3])];function y(e,t,r){return e+(t-e)*r}function b(e){return Math.min(Math.max(e,0),1)}function x(e,t){var r=t.min;var n=t.max;var i=Math.sqrt(r.x*2)*.5;var a=Math.sqrt(r.y*2)*.5;var o=Math.sqrt(n.x*2)*.5;var s=Math.sqrt(n.y*2)*.5;var u=b(e/d);r.set(y(i,r.x,u),y(a,r.y,u));n.set(y(o,n.x,u),y(s,n.y,u));return t}function w(e,t,r,n){var i=t.x-e.x;var a=t.y-e.y;var o=r;var s=r+1;var u=e.y+a*(o-e.x)/i;var c=e.y+a*(s-e.x)/i;var l,f,h,d;if(o>=e.x&&o<t.x||s>e.x&&s<=t.x){if(Math.sign(u)===Math.sign(c)||Math.abs(u)<1e-4||Math.abs(c)<1e-4){l=(u+c)/2;if(l<0){n.set(Math.abs(l),0)}else{n.set(0,Math.abs(l))}}else{d=-e.y*i/a+e.x;f=d>e.x?u*(d-Math.trunc(d))/2:0;h=d<t.x?c*(1-(d-Math.trunc(d)))/2:0;l=Math.abs(f)>Math.abs(h)?f:-h;if(l<0){n.set(Math.abs(f),Math.abs(h))}else{n.set(Math.abs(h),Math.abs(f))}}}else{n.set(0,0)}return n}function A(e,t,r,n,i){var a=u.min;var o=u.max;var s=c.min;var l=c.max;var f=c;var h=.5+n;var d=.5+n-1;var p=t+r+1;switch(e){case 0:{i.set(0,0);break}case 1:{if(t<=r){w(a.set(0,d),o.set(p/2,0),t,i)}else{i.set(0,0)}break}case 2:{if(t>=r){w(a.set(p/2,0),o.set(p,d),t,i)}else{i.set(0,0)}break}case 3:{w(a.set(0,d),o.set(p/2,0),t,s);w(a.set(p/2,0),o.set(p,d),t,l);x(p,f);i.addVectors(s,l);break}case 4:{if(t<=r){w(a.set(0,h),o.set(p/2,0),t,i)}else{i.set(0,0)}break}case 5:{i.set(0,0);break}case 6:{if(Math.abs(n)>0){w(a.set(0,h),o.set(p,d),t,s);w(a.set(0,h),o.set(p/2,0),t,l);l.add(w(a.set(p/2,0),o.set(p,d),t,i));i.addVectors(s,l).divideScalar(2)}else{w(a.set(0,h),o.set(p,d),t,i)}break}case 7:{w(a.set(0,h),o.set(p,d),t,i);break}case 8:{if(t>=r){w(a.set(p/2,0),o.set(p,h),t,i)}else{i.set(0,0)}break}case 9:{if(Math.abs(n)>0){w(a.set(0,d),o.set(p,h),t,s);w(a.set(0,d),o.set(p/2,0),t,l);l.add(w(a.set(p/2,0),o.set(p,h),t,i));i.addVectors(s,l).divideScalar(2)}else{w(a.set(0,d),o.set(p,h),t,i)}break}case 10:{i.set(0,0);break}case 11:{w(a.set(0,d),o.set(p,h),t,i);break}case 12:{w(a.set(0,h),o.set(p/2,0),t,s);w(a.set(p/2,0),o.set(p,h),t,l);x(p,f);i.addVectors(s,l);break}case 13:{w(a.set(0,d),o.set(p,h),t,i);break}case 14:{w(a.set(0,h),o.set(p,d),t,i);break}case 15:{i.set(0,0);break}}return i}function M(e,t,r,n){var i=e.equals(t);var a,o;var s,u,c;if(!i){a=(e.x+t.x)/2;o=(e.y+t.y)/2;s=t.y-e.y;u=e.x-t.x;c=s*(r-a)+u*(n-o);i=c>0}return i}function E(e,t,r,n){var i;var a,o;var s,u;for(i=0,o=0;o<h;++o){for(a=0;a<h;++a){s=a/(h-1);u=o/(h-1);if(M(e,t,r+s,n+u)){++i}}}return i/(h*h)}function S(e,t,r,n,i,a){var o=g[e];var s=o[0];var u=o[1];if(s>0){t.x+=i[0];t.y+=i[1]}if(u>0){r.x+=i[0];r.y+=i[1]}return a.set(1-E(t,r,1+n,0+n),E(t,r,1+n,1+n))}function T(e,t,r,n,i){var a=u.min;var o=u.max;var s=c.min;var l=c.max;var f=t+r+1;switch(e){case 0:{S(e,a.set(1,1),o.set(1+f,1+f),t,n,s);S(e,a.set(1,0),o.set(1+f,0+f),t,n,l);i.addVectors(s,l).divideScalar(2);break}case 1:{S(e,a.set(1,0),o.set(0+f,0+f),t,n,s);S(e,a.set(1,0),o.set(1+f,0+f),t,n,l);i.addVectors(s,l).divideScalar(2);break}case 2:{S(e,a.set(0,0),o.set(1+f,0+f),t,n,s);S(e,a.set(1,0),o.set(1+f,0+f),t,n,l);i.addVectors(s,l).divideScalar(2);break}case 3:{S(e,a.set(1,0),o.set(1+f,0+f),t,n,i);break}case 4:{S(e,a.set(1,1),o.set(0+f,0+f),t,n,s);S(e,a.set(1,1),o.set(1+f,0+f),t,n,l);i.addVectors(s,l).divideScalar(2);break}case 5:{S(e,a.set(1,1),o.set(0+f,0+f),t,n,s);S(e,a.set(1,0),o.set(1+f,0+f),t,n,l);i.addVectors(s,l).divideScalar(2);break}case 6:{S(e,a.set(1,1),o.set(1+f,0+f),t,n,i);break}case 7:{S(e,a.set(1,1),o.set(1+f,0+f),t,n,s);S(e,a.set(1,0),o.set(1+f,0+f),t,n,l);i.addVectors(s,l).divideScalar(2);break}case 8:{S(e,a.set(0,0),o.set(1+f,1+f),t,n,s);S(e,a.set(1,0),o.set(1+f,1+f),t,n,l);i.addVectors(s,l).divideScalar(2);break}case 9:{S(e,a.set(1,0),o.set(1+f,1+f),t,n,i);break}case 10:{S(e,a.set(0,0),o.set(1+f,1+f),t,n,s);S(e,a.set(1,0),o.set(1+f,0+f),t,n,l);i.addVectors(s,l).divideScalar(2);break}case 11:{S(e,a.set(1,0),o.set(1+f,1+f),t,n,s);S(e,a.set(1,0),o.set(1+f,0+f),t,n,l);i.addVectors(s,l).divideScalar(2);break}case 12:{S(e,a.set(1,1),o.set(1+f,1+f),t,n,i);break}case 13:{S(e,a.set(1,1),o.set(1+f,1+f),t,n,s);S(e,a.set(1,0),o.set(1+f,1+f),t,n,l);i.addVectors(s,l).divideScalar(2);break}case 14:{S(e,a.set(1,1),o.set(1+f,1+f),t,n,s);S(e,a.set(1,1),o.set(1+f,0+f),t,n,l);i.addVectors(s,l).divideScalar(2);break}case 15:{S(e,a.set(1,1),o.set(1+f,1+f),t,n,s);S(e,a.set(1,0),o.set(1+f,0+f),t,n,l);i.addVectors(s,l).divideScalar(2);break}}return i}function _(e,t,r){var i=new n.Vector2;var a,o;var s,u;var c;var l;var f,h;for(a=0,o=e.length;a<o;++a){l=e[a];f=l.data;h=l.width;for(u=0;u<h;++u){for(s=0;s<h;++s){if(r){A(a,s,u,t,i)}else{T(a,s,u,t,i)}c=(u*h+s)*2;f[c]=i.x*255;f[c+1]=i.y*255}}}}function P(e,t,r,i,a,o){var s=new n.Vector2;var u=o.data;var c=o.width;var l,f;var h,d;var p,v;var m;var g;var y,b;for(l=0,f=t.length;l<f;++l){m=r[l];g=t[l];y=g.data;b=g.width;for(d=0;d<i;++d){for(h=0;h<i;++h){s.fromArray(m).multiplyScalar(i);s.add(e);s.x+=h;s.y+=d;p=(s.y*c+s.x)*2;v=a?(d*d*b+h*h)*2:(d*b+h)*2;u[p]=y[v];u[p+1]=y[v+1]}}}}var C=function(){function e(){a(this,e)}s(e,null,[{key:"generate",value:function e(){var t=2*5*l;var r=p.length*5*l;var a=new Uint8ClampedArray(t*r*2);var o=new i.RawImageData(t,r,a,2);var s=Math.pow(l-1,2)+1;var u=f;var c=[];var h=[];var d=new n.Vector2;var y,b;for(y=0;y<16;++y){c.push(new i.RawImageData(s,s,new Uint8ClampedArray(s*s*2),2));h.push(new i.RawImageData(u,u,new Uint8ClampedArray(u*u*2),2))}for(y=0,b=p.length;y<b;++y){_(c,p[y],true);d.set(0,5*l*y);P(d,c,m,l,true,o)}for(y=0,b=v.length;y<b;++y){_(h,v[y],false);d.set(5*l,4*f*y);P(d,h,g,f,false,o)}return o}}]);return e}();t.SMAAAreaImageData=C},1830:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.SMAASearchImageData=void 0;var n=r(1039);function i(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}function o(e,t,r){if(t)a(e.prototype,t);if(r)a(e,r);return e}var s=new Map([[c([0,0,0,0]),[0,0,0,0]],[c([0,0,0,1]),[0,0,0,1]],[c([0,0,1,0]),[0,0,1,0]],[c([0,0,1,1]),[0,0,1,1]],[c([0,1,0,0]),[0,1,0,0]],[c([0,1,0,1]),[0,1,0,1]],[c([0,1,1,0]),[0,1,1,0]],[c([0,1,1,1]),[0,1,1,1]],[c([1,0,0,0]),[1,0,0,0]],[c([1,0,0,1]),[1,0,0,1]],[c([1,0,1,0]),[1,0,1,0]],[c([1,0,1,1]),[1,0,1,1]],[c([1,1,0,0]),[1,1,0,0]],[c([1,1,0,1]),[1,1,0,1]],[c([1,1,1,0]),[1,1,1,0]],[c([1,1,1,1]),[1,1,1,1]]]);function u(e,t,r){return e+(t-e)*r}function c(e){var t=u(e[0],e[1],1-.25);var r=u(e[2],e[3],1-.25);return u(t,r,1-.125)}function l(e,t){var r=0;if(t[3]===1){r+=1}if(r===1&&t[2]===1&&e[1]!==1&&e[3]!==1){r+=1}return r}function f(e,t){var r=0;if(t[3]===1&&e[1]!==1&&e[3]!==1){r+=1}if(r===1&&t[2]===1&&e[0]!==1&&e[2]!==1){r+=1}return r}var h=function(){function e(){i(this,e)}o(e,null,[{key:"generate",value:function e(){var t=66;var r=33;var i=64;var a=16;var o=new Uint8ClampedArray(t*r);var u=new Uint8ClampedArray(i*a);var c,h;var d,p,v;var m,g;for(h=0;h<r;++h){for(c=0;c<t;++c){d=.03125*c;p=.03125*h;if(s.has(d)&&s.has(p)){m=s.get(d);g=s.get(p);o[h*t+c]=127*l(m,g);o[h*t+c+t/2]=127*f(m,g)}}}for(v=0,h=r-a;h<r;++h){for(c=0;c<i;++c,++v){u[v]=o[h*t+c]}}return new n.RawImageData(i,a,u,1)}}]);return e}();t.SMAASearchImageData=h},814:function(e,t,r){"use strict";r.r(t);r.d(t,"WebGLRenderTargetCube",(function(){return Kt}));r.d(t,"WebGLRenderTarget",(function(){return Jt}));r.d(t,"WebGLRenderer",(function(){return Ko}));r.d(t,"ShaderLib",(function(){return Ai}));r.d(t,"UniformsLib",(function(){return wi}));r.d(t,"UniformsUtils",(function(){return yi}));r.d(t,"ShaderChunk",(function(){return vi}));r.d(t,"FogExp2",(function(){return Zo}));r.d(t,"Fog",(function(){return $o}));r.d(t,"Scene",(function(){return es}));r.d(t,"Sprite",(function(){return as}));r.d(t,"LOD",(function(){return os}));r.d(t,"SkinnedMesh",(function(){return ss}));r.d(t,"Skeleton",(function(){return us}));r.d(t,"Bone",(function(){return cs}));r.d(t,"Mesh",(function(){return ra}));r.d(t,"LineSegments",(function(){return hs}));r.d(t,"LineLoop",(function(){return ds}));r.d(t,"Line",(function(){return fs}));r.d(t,"Points",(function(){return vs}));r.d(t,"Group",(function(){return ko}));r.d(t,"VideoTexture",(function(){return ms}));r.d(t,"DataTexture",(function(){return Zt}));r.d(t,"DataTexture3D",(function(){return va}));r.d(t,"CompressedTexture",(function(){return gs}));r.d(t,"CubeTexture",(function(){return pa}));r.d(t,"CanvasTexture",(function(){return ys}));r.d(t,"DepthTexture",(function(){return bs}));r.d(t,"Texture",(function(){return Qt}));r.d(t,"AnimationLoader",(function(){return yc}));r.d(t,"CompressedTextureLoader",(function(){return bc}));r.d(t,"DataTextureLoader",(function(){return xc}));r.d(t,"CubeTextureLoader",(function(){return Ac}));r.d(t,"TextureLoader",(function(){return Mc}));r.d(t,"ObjectLoader",(function(){return vl}));r.d(t,"MaterialLoader",(function(){return fl}));r.d(t,"BufferGeometryLoader",(function(){return dl}));r.d(t,"DefaultLoadingManager",(function(){return vc}));r.d(t,"LoadingManager",(function(){return pc}));r.d(t,"ImageLoader",(function(){return wc}));r.d(t,"ImageBitmapLoader",(function(){return bl}));r.d(t,"FontLoader",(function(){return El}));r.d(t,"FileLoader",(function(){return gc}));r.d(t,"Loader",(function(){return Sl}));r.d(t,"LoaderUtils",(function(){return hl}));r.d(t,"Cache",(function(){return dc}));r.d(t,"AudioLoader",(function(){return Pl}));r.d(t,"SpotLightShadow",(function(){return nl}));r.d(t,"SpotLight",(function(){return il}));r.d(t,"PointLight",(function(){return al}));r.d(t,"RectAreaLight",(function(){return ll}));r.d(t,"HemisphereLight",(function(){return tl}));r.d(t,"DirectionalLightShadow",(function(){return sl}));r.d(t,"DirectionalLight",(function(){return ul}));r.d(t,"AmbientLight",(function(){return cl}));r.d(t,"LightShadow",(function(){return rl}));r.d(t,"Light",(function(){return el}));r.d(t,"StereoCamera",(function(){return Cl}));r.d(t,"PerspectiveCamera",(function(){return Vo}));r.d(t,"OrthographicCamera",(function(){return ol}));r.d(t,"CubeCamera",(function(){return Ol}));r.d(t,"ArrayCamera",(function(){return Wo}));r.d(t,"Camera",(function(){return Ho}));r.d(t,"AudioListener",(function(){return Rl}));r.d(t,"PositionalAudio",(function(){return Dl}));r.d(t,"AudioContext",(function(){return _l}));r.d(t,"AudioAnalyser",(function(){return Il}));r.d(t,"Audio",(function(){return Bl}));r.d(t,"VectorKeyframeTrack",(function(){return cc}));r.d(t,"StringKeyframeTrack",(function(){return uc}));r.d(t,"QuaternionKeyframeTrack",(function(){return sc}));r.d(t,"NumberKeyframeTrack",(function(){return ac}));r.d(t,"ColorKeyframeTrack",(function(){return ic}));r.d(t,"BooleanKeyframeTrack",(function(){return nc}));r.d(t,"PropertyMixer",(function(){return Fl}));r.d(t,"PropertyBinding",(function(){return jl}));r.d(t,"KeyframeTrack",(function(){return rc}));r.d(t,"AnimationUtils",(function(){return Ku}));r.d(t,"AnimationObjectGroup",(function(){return zl}));r.d(t,"AnimationMixer",(function(){return kl}));r.d(t,"AnimationClip",(function(){return lc}));r.d(t,"Uniform",(function(){return Hl}));r.d(t,"InstancedBufferGeometry",(function(){return Vl}));r.d(t,"BufferGeometry",(function(){return Wi}));r.d(t,"Geometry",(function(){return Li}));r.d(t,"InterleavedBufferAttribute",(function(){return rs}));r.d(t,"InstancedInterleavedBuffer",(function(){return Wl}));r.d(t,"InterleavedBuffer",(function(){return ts}));r.d(t,"InstancedBufferAttribute",(function(){return Yl}));r.d(t,"Face3",(function(){return Si}));r.d(t,"Object3D",(function(){return Ci}));r.d(t,"Raycaster",(function(){return Xl}));r.d(t,"Layers",(function(){return _i}));r.d(t,"EventDispatcher",(function(){return n}));r.d(t,"Clock",(function(){return Ll}));r.d(t,"QuaternionLinearInterpolant",(function(){return oc}));r.d(t,"LinearInterpolant",(function(){return ec}));r.d(t,"DiscreteInterpolant",(function(){return tc}));r.d(t,"CubicInterpolant",(function(){return $u}));r.d(t,"Interpolant",(function(){return Zu}));r.d(t,"Triangle",(function(){return ea}));r.d(t,"Math",(function(){return jt}));r.d(t,"Spherical",(function(){return Jl}));r.d(t,"Cylindrical",(function(){return Kl}));r.d(t,"Plane",(function(){return tr}));r.d(t,"Frustum",(function(){return rr}));r.d(t,"Sphere",(function(){return er}));r.d(t,"Ray",(function(){return $i}));r.d(t,"Matrix4",(function(){return Nt}));r.d(t,"Matrix3",(function(){return Vt}));r.d(t,"Box3",(function(){return $t}));r.d(t,"Box2",(function(){return Zl}));r.d(t,"Line3",(function(){return $l}));r.d(t,"Euler",(function(){return Ti}));r.d(t,"Vector4",(function(){return qt}));r.d(t,"Vector3",(function(){return Ht}));r.d(t,"Vector2",(function(){return zt}));r.d(t,"Quaternion",(function(){return kt}));r.d(t,"Color",(function(){return xi}));r.d(t,"ImmediateRenderObject",(function(){return ef}));r.d(t,"VertexNormalsHelper",(function(){return tf}));r.d(t,"SpotLightHelper",(function(){return rf}));r.d(t,"SkeletonHelper",(function(){return af}));r.d(t,"PointLightHelper",(function(){return of}));r.d(t,"RectAreaLightHelper",(function(){return sf}));r.d(t,"HemisphereLightHelper",(function(){return uf}));r.d(t,"GridHelper",(function(){return cf}));r.d(t,"PolarGridHelper",(function(){return lf}));r.d(t,"FaceNormalsHelper",(function(){return ff}));r.d(t,"DirectionalLightHelper",(function(){return hf}));r.d(t,"CameraHelper",(function(){return df}));r.d(t,"BoxHelper",(function(){return pf}));r.d(t,"Box3Helper",(function(){return vf}));r.d(t,"PlaneHelper",(function(){return mf}));r.d(t,"ArrowHelper",(function(){return bf}));r.d(t,"AxesHelper",(function(){return xf}));r.d(t,"Shape",(function(){return $c}));r.d(t,"Path",(function(){return Zc}));r.d(t,"ShapePath",(function(){return xl}));r.d(t,"Font",(function(){return wl}));r.d(t,"CurvePath",(function(){return Kc}));r.d(t,"Curve",(function(){return Ec}));r.d(t,"ImageUtils",(function(){return Yt}));r.d(t,"ShapeUtils",(function(){return pu}));r.d(t,"WebGLUtils",(function(){return No}));r.d(t,"WireframeGeometry",(function(){return xs}));r.d(t,"ParametricGeometry",(function(){return ws}));r.d(t,"ParametricBufferGeometry",(function(){return As}));r.d(t,"TetrahedronGeometry",(function(){return Ss}));r.d(t,"TetrahedronBufferGeometry",(function(){return Ts}));r.d(t,"OctahedronGeometry",(function(){return _s}));r.d(t,"OctahedronBufferGeometry",(function(){return Ps}));r.d(t,"IcosahedronGeometry",(function(){return Cs}));r.d(t,"IcosahedronBufferGeometry",(function(){return Os}));r.d(t,"DodecahedronGeometry",(function(){return Ls}));r.d(t,"DodecahedronBufferGeometry",(function(){return Rs}));r.d(t,"PolyhedronGeometry",(function(){return Ms}));r.d(t,"PolyhedronBufferGeometry",(function(){return Es}));r.d(t,"TubeGeometry",(function(){return Bs}));r.d(t,"TubeBufferGeometry",(function(){return Ds}));r.d(t,"TorusKnotGeometry",(function(){return Is}));r.d(t,"TorusKnotBufferGeometry",(function(){return Fs}));r.d(t,"TorusGeometry",(function(){return Us}));r.d(t,"TorusBufferGeometry",(function(){return Gs}));r.d(t,"TextGeometry",(function(){return wu}));r.d(t,"TextBufferGeometry",(function(){return Au}));r.d(t,"SphereGeometry",(function(){return Mu}));r.d(t,"SphereBufferGeometry",(function(){return Eu}));r.d(t,"RingGeometry",(function(){return Su}));r.d(t,"RingBufferGeometry",(function(){return Tu}));r.d(t,"PlaneGeometry",(function(){return Qi}));r.d(t,"PlaneBufferGeometry",(function(){return qi}));r.d(t,"LatheGeometry",(function(){return _u}));r.d(t,"LatheBufferGeometry",(function(){return Pu}));r.d(t,"ShapeGeometry",(function(){return Cu}));r.d(t,"ShapeBufferGeometry",(function(){return Ou}));r.d(t,"ExtrudeGeometry",(function(){return gu}));r.d(t,"ExtrudeBufferGeometry",(function(){return yu}));r.d(t,"EdgesGeometry",(function(){return Ru}));r.d(t,"ConeGeometry",(function(){return Iu}));r.d(t,"ConeBufferGeometry",(function(){return Fu}));r.d(t,"CylinderGeometry",(function(){return Bu}));r.d(t,"CylinderBufferGeometry",(function(){return Du}));r.d(t,"CircleGeometry",(function(){return Uu}));r.d(t,"CircleBufferGeometry",(function(){return Gu}));r.d(t,"BoxGeometry",(function(){return Yi}));r.d(t,"BoxBufferGeometry",(function(){return Xi}));r.d(t,"ShadowMaterial",(function(){return zu}));r.d(t,"SpriteMaterial",(function(){return ns}));r.d(t,"RawShaderMaterial",(function(){return Nu}));r.d(t,"ShaderMaterial",(function(){return Zi}));r.d(t,"PointsMaterial",(function(){return ps}));r.d(t,"MeshPhysicalMaterial",(function(){return Hu}));r.d(t,"MeshStandardMaterial",(function(){return ku}));r.d(t,"MeshPhongMaterial",(function(){return Vu}));r.d(t,"MeshToonMaterial",(function(){return Wu}));r.d(t,"MeshNormalMaterial",(function(){return Yu}));r.d(t,"MeshLambertMaterial",(function(){return Xu}));r.d(t,"MeshDepthMaterial",(function(){return Fo}));r.d(t,"MeshDistanceMaterial",(function(){return Uo}));r.d(t,"MeshBasicMaterial",(function(){return ta}));r.d(t,"MeshMatcapMaterial",(function(){return Qu}));r.d(t,"LineDashedMaterial",(function(){return qu}));r.d(t,"LineBasicMaterial",(function(){return ls}));r.d(t,"Material",(function(){return Ki}));r.d(t,"Float64BufferAttribute",(function(){return Ni}));r.d(t,"Float32BufferAttribute",(function(){return zi}));r.d(t,"Uint32BufferAttribute",(function(){return ji}));r.d(t,"Int32BufferAttribute",(function(){return Gi}));r.d(t,"Uint16BufferAttribute",(function(){return Ui}));r.d(t,"Int16BufferAttribute",(function(){return Fi}));r.d(t,"Uint8ClampedBufferAttribute",(function(){return Ii}));r.d(t,"Uint8BufferAttribute",(function(){return Di}));r.d(t,"Int8BufferAttribute",(function(){return Bi}));r.d(t,"BufferAttribute",(function(){return Ri}));r.d(t,"ArcCurve",(function(){return Tc}));r.d(t,"CatmullRomCurve3",(function(){return Rc}));r.d(t,"CubicBezierCurve",(function(){return Hc}));r.d(t,"CubicBezierCurve3",(function(){return Vc}));r.d(t,"EllipseCurve",(function(){return Sc}));r.d(t,"LineCurve",(function(){return Wc}));r.d(t,"LineCurve3",(function(){return Yc}));r.d(t,"QuadraticBezierCurve",(function(){return Xc}));r.d(t,"QuadraticBezierCurve3",(function(){return Qc}));r.d(t,"SplineCurve",(function(){return qc}));r.d(t,"REVISION",(function(){return i}));r.d(t,"MOUSE",(function(){return a}));r.d(t,"CullFaceNone",(function(){return o}));r.d(t,"CullFaceBack",(function(){return s}));r.d(t,"CullFaceFront",(function(){return u}));r.d(t,"CullFaceFrontBack",(function(){return c}));r.d(t,"FrontFaceDirectionCW",(function(){return l}));r.d(t,"FrontFaceDirectionCCW",(function(){return f}));r.d(t,"BasicShadowMap",(function(){return h}));r.d(t,"PCFShadowMap",(function(){return d}));r.d(t,"PCFSoftShadowMap",(function(){return p}));r.d(t,"FrontSide",(function(){return v}));r.d(t,"BackSide",(function(){return m}));r.d(t,"DoubleSide",(function(){return g}));r.d(t,"FlatShading",(function(){return y}));r.d(t,"SmoothShading",(function(){return b}));r.d(t,"NoColors",(function(){return x}));r.d(t,"FaceColors",(function(){return w}));r.d(t,"VertexColors",(function(){return A}));r.d(t,"NoBlending",(function(){return M}));r.d(t,"NormalBlending",(function(){return E}));r.d(t,"AdditiveBlending",(function(){return S}));r.d(t,"SubtractiveBlending",(function(){return T}));r.d(t,"MultiplyBlending",(function(){return _}));r.d(t,"CustomBlending",(function(){return P}));r.d(t,"AddEquation",(function(){return C}));r.d(t,"SubtractEquation",(function(){return O}));r.d(t,"ReverseSubtractEquation",(function(){return L}));r.d(t,"MinEquation",(function(){return R}));r.d(t,"MaxEquation",(function(){return B}));r.d(t,"ZeroFactor",(function(){return D}));r.d(t,"OneFactor",(function(){return I}));r.d(t,"SrcColorFactor",(function(){return F}));r.d(t,"OneMinusSrcColorFactor",(function(){return U}));r.d(t,"SrcAlphaFactor",(function(){return G}));r.d(t,"OneMinusSrcAlphaFactor",(function(){return j}));r.d(t,"DstAlphaFactor",(function(){return z}));r.d(t,"OneMinusDstAlphaFactor",(function(){return N}));r.d(t,"DstColorFactor",(function(){return k}));r.d(t,"OneMinusDstColorFactor",(function(){return H}));r.d(t,"SrcAlphaSaturateFactor",(function(){return V}));r.d(t,"NeverDepth",(function(){return W}));r.d(t,"AlwaysDepth",(function(){return Y}));r.d(t,"LessDepth",(function(){return X}));r.d(t,"LessEqualDepth",(function(){return Q}));r.d(t,"EqualDepth",(function(){return q}));r.d(t,"GreaterEqualDepth",(function(){return J}));r.d(t,"GreaterDepth",(function(){return K}));r.d(t,"NotEqualDepth",(function(){return Z}));r.d(t,"MultiplyOperation",(function(){return $}));r.d(t,"MixOperation",(function(){return ee}));r.d(t,"AddOperation",(function(){return te}));r.d(t,"NoToneMapping",(function(){return re}));r.d(t,"LinearToneMapping",(function(){return ne}));r.d(t,"ReinhardToneMapping",(function(){return ie}));r.d(t,"Uncharted2ToneMapping",(function(){return ae}));r.d(t,"CineonToneMapping",(function(){return oe}));r.d(t,"ACESFilmicToneMapping",(function(){return se}));r.d(t,"UVMapping",(function(){return ue}));r.d(t,"CubeReflectionMapping",(function(){return ce}));r.d(t,"CubeRefractionMapping",(function(){return le}));r.d(t,"EquirectangularReflectionMapping",(function(){return fe}));r.d(t,"EquirectangularRefractionMapping",(function(){return he}));r.d(t,"SphericalReflectionMapping",(function(){return de}));r.d(t,"CubeUVReflectionMapping",(function(){return pe}));r.d(t,"CubeUVRefractionMapping",(function(){return ve}));r.d(t,"RepeatWrapping",(function(){return me}));r.d(t,"ClampToEdgeWrapping",(function(){return ge}));r.d(t,"MirroredRepeatWrapping",(function(){return ye}));r.d(t,"NearestFilter",(function(){return be}));r.d(t,"NearestMipMapNearestFilter",(function(){return xe}));r.d(t,"NearestMipMapLinearFilter",(function(){return we}));r.d(t,"LinearFilter",(function(){return Ae}));r.d(t,"LinearMipMapNearestFilter",(function(){return Me}));r.d(t,"LinearMipMapLinearFilter",(function(){return Ee}));r.d(t,"UnsignedByteType",(function(){return Se}));r.d(t,"ByteType",(function(){return Te}));r.d(t,"ShortType",(function(){return _e}));r.d(t,"UnsignedShortType",(function(){return Pe}));r.d(t,"IntType",(function(){return Ce}));r.d(t,"UnsignedIntType",(function(){return Oe}));r.d(t,"FloatType",(function(){return Le}));r.d(t,"HalfFloatType",(function(){return Re}));r.d(t,"UnsignedShort4444Type",(function(){return Be}));r.d(t,"UnsignedShort5551Type",(function(){return De}));r.d(t,"UnsignedShort565Type",(function(){return Ie}));r.d(t,"UnsignedInt248Type",(function(){return Fe}));r.d(t,"AlphaFormat",(function(){return Ue}));r.d(t,"RGBFormat",(function(){return Ge}));r.d(t,"RGBAFormat",(function(){return je}));r.d(t,"LuminanceFormat",(function(){return ze}));r.d(t,"LuminanceAlphaFormat",(function(){return Ne}));r.d(t,"RGBEFormat",(function(){return ke}));r.d(t,"DepthFormat",(function(){return He}));r.d(t,"DepthStencilFormat",(function(){return Ve}));r.d(t,"RedFormat",(function(){return We}));r.d(t,"RGB_S3TC_DXT1_Format",(function(){return Ye}));r.d(t,"RGBA_S3TC_DXT1_Format",(function(){return Xe}));r.d(t,"RGBA_S3TC_DXT3_Format",(function(){return Qe}));r.d(t,"RGBA_S3TC_DXT5_Format",(function(){return qe}));r.d(t,"RGB_PVRTC_4BPPV1_Format",(function(){return Je}));r.d(t,"RGB_PVRTC_2BPPV1_Format",(function(){return Ke}));r.d(t,"RGBA_PVRTC_4BPPV1_Format",(function(){return Ze}));r.d(t,"RGBA_PVRTC_2BPPV1_Format",(function(){return $e}));r.d(t,"RGB_ETC1_Format",(function(){return et}));r.d(t,"RGBA_ASTC_4x4_Format",(function(){return tt}));r.d(t,"RGBA_ASTC_5x4_Format",(function(){return rt}));r.d(t,"RGBA_ASTC_5x5_Format",(function(){return nt}));r.d(t,"RGBA_ASTC_6x5_Format",(function(){return it}));r.d(t,"RGBA_ASTC_6x6_Format",(function(){return at}));r.d(t,"RGBA_ASTC_8x5_Format",(function(){return ot}));r.d(t,"RGBA_ASTC_8x6_Format",(function(){return st}));r.d(t,"RGBA_ASTC_8x8_Format",(function(){return ut}));r.d(t,"RGBA_ASTC_10x5_Format",(function(){return ct}));r.d(t,"RGBA_ASTC_10x6_Format",(function(){return lt}));r.d(t,"RGBA_ASTC_10x8_Format",(function(){return ft}));r.d(t,"RGBA_ASTC_10x10_Format",(function(){return ht}));r.d(t,"RGBA_ASTC_12x10_Format",(function(){return dt}));r.d(t,"RGBA_ASTC_12x12_Format",(function(){return pt}));r.d(t,"LoopOnce",(function(){return vt}));r.d(t,"LoopRepeat",(function(){return mt}));r.d(t,"LoopPingPong",(function(){return gt}));r.d(t,"InterpolateDiscrete",(function(){return yt}));r.d(t,"InterpolateLinear",(function(){return bt}));r.d(t,"InterpolateSmooth",(function(){return xt}));r.d(t,"ZeroCurvatureEnding",(function(){return wt}));r.d(t,"ZeroSlopeEnding",(function(){return At}));r.d(t,"WrapAroundEnding",(function(){return Mt}));r.d(t,"TrianglesDrawMode",(function(){return Et}));r.d(t,"TriangleStripDrawMode",(function(){return St}));r.d(t,"TriangleFanDrawMode",(function(){return Tt}));r.d(t,"LinearEncoding",(function(){return _t}));r.d(t,"sRGBEncoding",(function(){return Pt}));r.d(t,"GammaEncoding",(function(){return Ct}));r.d(t,"RGBEEncoding",(function(){return Ot}));r.d(t,"LogLuvEncoding",(function(){return Lt}));r.d(t,"RGBM7Encoding",(function(){return Rt}));r.d(t,"RGBM16Encoding",(function(){return Bt}));r.d(t,"RGBDEncoding",(function(){return Dt}));r.d(t,"BasicDepthPacking",(function(){return It}));r.d(t,"RGBADepthPacking",(function(){return Ft}));r.d(t,"TangentSpaceNormalMap",(function(){return Ut}));r.d(t,"ObjectSpaceNormalMap",(function(){return Gt}));r.d(t,"CubeGeometry",(function(){return Yi}));r.d(t,"Face4",(function(){return wf}));r.d(t,"LineStrip",(function(){return Af}));r.d(t,"LinePieces",(function(){return Mf}));r.d(t,"MeshFaceMaterial",(function(){return Ef}));r.d(t,"MultiMaterial",(function(){return Sf}));r.d(t,"PointCloud",(function(){return Tf}));r.d(t,"Particle",(function(){return _f}));r.d(t,"ParticleSystem",(function(){return Pf}));r.d(t,"PointCloudMaterial",(function(){return Cf}));r.d(t,"ParticleBasicMaterial",(function(){return Of}));r.d(t,"ParticleSystemMaterial",(function(){return Lf}));r.d(t,"Vertex",(function(){return Rf}));r.d(t,"DynamicBufferAttribute",(function(){return Bf}));r.d(t,"Int8Attribute",(function(){return Df}));r.d(t,"Uint8Attribute",(function(){return If}));r.d(t,"Uint8ClampedAttribute",(function(){return Ff}));r.d(t,"Int16Attribute",(function(){return Uf}));r.d(t,"Uint16Attribute",(function(){return Gf}));r.d(t,"Int32Attribute",(function(){return jf}));r.d(t,"Uint32Attribute",(function(){return zf}));r.d(t,"Float32Attribute",(function(){return Nf}));r.d(t,"Float64Attribute",(function(){return kf}));r.d(t,"ClosedSplineCurve3",(function(){return Hf}));r.d(t,"SplineCurve3",(function(){return Vf}));r.d(t,"Spline",(function(){return Wf}));r.d(t,"AxisHelper",(function(){return Yf}));r.d(t,"BoundingBoxHelper",(function(){return Xf}));r.d(t,"EdgesHelper",(function(){return Qf}));r.d(t,"WireframeHelper",(function(){return qf}));r.d(t,"XHRLoader",(function(){return Jf}));r.d(t,"BinaryTextureLoader",(function(){return Kf}));r.d(t,"GeometryUtils",(function(){return Zf}));r.d(t,"Projector",(function(){return $f}));r.d(t,"CanvasRenderer",(function(){return eh}));r.d(t,"JSONLoader",(function(){return th}));r.d(t,"SceneUtils",(function(){return rh}));r.d(t,"LensFlare",(function(){return nh}));if(Number.EPSILON===undefined){Number.EPSILON=Math.pow(2,-52)}if(Number.isInteger===undefined){Number.isInteger=function(e){return typeof e==="number"&&isFinite(e)&&Math.floor(e)===e}}if(Math.sign===undefined){Math.sign=function(e){return e<0?-1:e>0?1:+e}}if("name"in Function.prototype===false){Object.defineProperty(Function.prototype,"name",{get:function(){return this.toString().match(/^\s*function\s*([^\(\s]*)/)[1]}})}if(Object.assign===undefined){(function(){Object.assign=function(e){if(e===undefined||e===null){throw new TypeError("Cannot convert undefined or null to object")}var t=Object(e);for(var r=1;r<arguments.length;r++){var n=arguments[r];if(n!==undefined&&n!==null){for(var i in n){if(Object.prototype.hasOwnProperty.call(n,i)){t[i]=n[i]}}}}return t}})()}function n(){}Object.assign(n.prototype,{addEventListener:function(e,t){if(this._listeners===undefined)this._listeners={};var r=this._listeners;if(r[e]===undefined){r[e]=[]}if(r[e].indexOf(t)===-1){r[e].push(t)}},hasEventListener:function(e,t){if(this._listeners===undefined)return false;var r=this._listeners;return r[e]!==undefined&&r[e].indexOf(t)!==-1},removeEventListener:function(e,t){if(this._listeners===undefined)return;var r=this._listeners;var n=r[e];if(n!==undefined){var i=n.indexOf(t);if(i!==-1){n.splice(i,1)}}},dispatchEvent:function(e){if(this._listeners===undefined)return;var t=this._listeners;var r=t[e.type];if(r!==undefined){e.target=this;var n=r.slice(0);for(var i=0,a=n.length;i<a;i++){n[i].call(this,e)}}}});var i="99";var a={LEFT:0,MIDDLE:1,RIGHT:2};var o=0;var s=1;var u=2;var c=3;var l=0;var f=1;var h=0;var d=1;var p=2;var v=0;var m=1;var g=2;var y=1;var b=2;var x=0;var w=1;var A=2;var M=0;var E=1;var S=2;var T=3;var _=4;var P=5;var C=100;var O=101;var L=102;var R=103;var B=104;var D=200;var I=201;var F=202;var U=203;var G=204;var j=205;var z=206;var N=207;var k=208;var H=209;var V=210;var W=0;var Y=1;var X=2;var Q=3;var q=4;var J=5;var K=6;var Z=7;var $=0;var ee=1;var te=2;var re=0;var ne=1;var ie=2;var ae=3;var oe=4;var se=5;var ue=300;var ce=301;var le=302;var fe=303;var he=304;var de=305;var pe=306;var ve=307;var me=1e3;var ge=1001;var ye=1002;var be=1003;var xe=1004;var we=1005;var Ae=1006;var Me=1007;var Ee=1008;var Se=1009;var Te=1010;var _e=1011;var Pe=1012;var Ce=1013;var Oe=1014;var Le=1015;var Re=1016;var Be=1017;var De=1018;var Ie=1019;var Fe=1020;var Ue=1021;var Ge=1022;var je=1023;var ze=1024;var Ne=1025;var ke=je;var He=1026;var Ve=1027;var We=1028;var Ye=33776;var Xe=33777;var Qe=33778;var qe=33779;var Je=35840;var Ke=35841;var Ze=35842;var $e=35843;var et=36196;var tt=37808;var rt=37809;var nt=37810;var it=37811;var at=37812;var ot=37813;var st=37814;var ut=37815;var ct=37816;var lt=37817;var ft=37818;var ht=37819;var dt=37820;var pt=37821;var vt=2200;var mt=2201;var gt=2202;var yt=2300;var bt=2301;var xt=2302;var wt=2400;var At=2401;var Mt=2402;var Et=0;var St=1;var Tt=2;var _t=3e3;var Pt=3001;var Ct=3007;var Ot=3002;var Lt=3003;var Rt=3004;var Bt=3005;var Dt=3006;var It=3200;var Ft=3201;var Ut=0;var Gt=1;var jt={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,generateUUID:function(){var e=[];for(var t=0;t<256;t++){e[t]=(t<16?"0":"")+t.toString(16)}return function t(){var r=Math.random()*4294967295|0;var n=Math.random()*4294967295|0;var i=Math.random()*4294967295|0;var a=Math.random()*4294967295|0;var o=e[r&255]+e[r>>8&255]+e[r>>16&255]+e[r>>24&255]+"-"+e[n&255]+e[n>>8&255]+"-"+e[n>>16&15|64]+e[n>>24&255]+"-"+e[i&63|128]+e[i>>8&255]+"-"+e[i>>16&255]+e[i>>24&255]+e[a&255]+e[a>>8&255]+e[a>>16&255]+e[a>>24&255];return o.toUpperCase()}}(),clamp:function(e,t,r){return Math.max(t,Math.min(r,e))},euclideanModulo:function(e,t){return(e%t+t)%t},mapLinear:function(e,t,r,n,i){return n+(e-t)*(i-n)/(r-t)},lerp:function(e,t,r){return(1-r)*e+r*t},smoothstep:function(e,t,r){if(e<=t)return 0;if(e>=r)return 1;e=(e-t)/(r-t);return e*e*(3-2*e)},smootherstep:function(e,t,r){if(e<=t)return 0;if(e>=r)return 1;e=(e-t)/(r-t);return e*e*e*(e*(e*6-15)+10)},randInt:function(e,t){return e+Math.floor(Math.random()*(t-e+1))},randFloat:function(e,t){return e+Math.random()*(t-e)},randFloatSpread:function(e){return e*(.5-Math.random())},degToRad:function(e){return e*jt.DEG2RAD},radToDeg:function(e){return e*jt.RAD2DEG},isPowerOfTwo:function(e){return(e&e-1)===0&&e!==0},ceilPowerOfTwo:function(e){return Math.pow(2,Math.ceil(Math.log(e)/Math.LN2))},floorPowerOfTwo:function(e){return Math.pow(2,Math.floor(Math.log(e)/Math.LN2))}};function zt(e,t){this.x=e||0;this.y=t||0}Object.defineProperties(zt.prototype,{width:{get:function(){return this.x},set:function(e){this.x=e}},height:{get:function(){return this.y},set:function(e){this.y=e}}});Object.assign(zt.prototype,{isVector2:true,set:function(e,t){this.x=e;this.y=t;return this},setScalar:function(e){this.x=e;this.y=e;return this},setX:function(e){this.x=e;return this},setY:function(e){this.y=e;return this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}},clone:function(){return new this.constructor(this.x,this.y)},copy:function(e){this.x=e.x;this.y=e.y;return this},add:function(e,t){if(t!==undefined){console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead.");return this.addVectors(e,t)}this.x+=e.x;this.y+=e.y;return this},addScalar:function(e){this.x+=e;this.y+=e;return this},addVectors:function(e,t){this.x=e.x+t.x;this.y=e.y+t.y;return this},addScaledVector:function(e,t){this.x+=e.x*t;this.y+=e.y*t;return this},sub:function(e,t){if(t!==undefined){console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead.");return this.subVectors(e,t)}this.x-=e.x;this.y-=e.y;return this},subScalar:function(e){this.x-=e;this.y-=e;return this},subVectors:function(e,t){this.x=e.x-t.x;this.y=e.y-t.y;return this},multiply:function(e){this.x*=e.x;this.y*=e.y;return this},multiplyScalar:function(e){this.x*=e;this.y*=e;return this},divide:function(e){this.x/=e.x;this.y/=e.y;return this},divideScalar:function(e){return this.multiplyScalar(1/e)},applyMatrix3:function(e){var t=this.x,r=this.y;var n=e.elements;this.x=n[0]*t+n[3]*r+n[6];this.y=n[1]*t+n[4]*r+n[7];return this},min:function(e){this.x=Math.min(this.x,e.x);this.y=Math.min(this.y,e.y);return this},max:function(e){this.x=Math.max(this.x,e.x);this.y=Math.max(this.y,e.y);return this},clamp:function(e,t){this.x=Math.max(e.x,Math.min(t.x,this.x));this.y=Math.max(e.y,Math.min(t.y,this.y));return this},clampScalar:function(){var e=new zt;var t=new zt;return function r(n,i){e.set(n,n);t.set(i,i);return this.clamp(e,t)}}(),clampLength:function(e,t){var r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))},floor:function(){this.x=Math.floor(this.x);this.y=Math.floor(this.y);return this},ceil:function(){this.x=Math.ceil(this.x);this.y=Math.ceil(this.y);return this},round:function(){this.x=Math.round(this.x);this.y=Math.round(this.y);return this},roundToZero:function(){this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x);this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y);return this},negate:function(){this.x=-this.x;this.y=-this.y;return this},dot:function(e){return this.x*e.x+this.y*e.y},cross:function(e){return this.x*e.y-this.y*e.x},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)},normalize:function(){return this.divideScalar(this.length()||1)},angle:function(){var e=Math.atan2(this.y,this.x);if(e<0)e+=2*Math.PI;return e},distanceTo:function(e){return Math.sqrt(this.distanceToSquared(e))},distanceToSquared:function(e){var t=this.x-e.x,r=this.y-e.y;return t*t+r*r},manhattanDistanceTo:function(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)},setLength:function(e){return this.normalize().multiplyScalar(e)},lerp:function(e,t){this.x+=(e.x-this.x)*t;this.y+=(e.y-this.y)*t;return this},lerpVectors:function(e,t,r){return this.subVectors(t,e).multiplyScalar(r).add(e)},equals:function(e){return e.x===this.x&&e.y===this.y},fromArray:function(e,t){if(t===undefined)t=0;this.x=e[t];this.y=e[t+1];return this},toArray:function(e,t){if(e===undefined)e=[];if(t===undefined)t=0;e[t]=this.x;e[t+1]=this.y;return e},fromBufferAttribute:function(e,t,r){if(r!==undefined){console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute().")}this.x=e.getX(t);this.y=e.getY(t);return this},rotateAround:function(e,t){var r=Math.cos(t),n=Math.sin(t);var i=this.x-e.x;var a=this.y-e.y;this.x=i*r-a*n+e.x;this.y=i*n+a*r+e.y;return this}});function Nt(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];if(arguments.length>0){console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}}Object.assign(Nt.prototype,{isMatrix4:true,set:function(e,t,r,n,i,a,o,s,u,c,l,f,h,d,p,v){var m=this.elements;m[0]=e;m[4]=t;m[8]=r;m[12]=n;m[1]=i;m[5]=a;m[9]=o;m[13]=s;m[2]=u;m[6]=c;m[10]=l;m[14]=f;m[3]=h;m[7]=d;m[11]=p;m[15]=v;return this},identity:function(){this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1);return this},clone:function(){return(new Nt).fromArray(this.elements)},copy:function(e){var t=this.elements;var r=e.elements;t[0]=r[0];t[1]=r[1];t[2]=r[2];t[3]=r[3];t[4]=r[4];t[5]=r[5];t[6]=r[6];t[7]=r[7];t[8]=r[8];t[9]=r[9];t[10]=r[10];t[11]=r[11];t[12]=r[12];t[13]=r[13];t[14]=r[14];t[15]=r[15];return this},copyPosition:function(e){var t=this.elements,r=e.elements;t[12]=r[12];t[13]=r[13];t[14]=r[14];return this},extractBasis:function(e,t,r){e.setFromMatrixColumn(this,0);t.setFromMatrixColumn(this,1);r.setFromMatrixColumn(this,2);return this},makeBasis:function(e,t,r){this.set(e.x,t.x,r.x,0,e.y,t.y,r.y,0,e.z,t.z,r.z,0,0,0,0,1);return this},extractRotation:function(){var e=new Ht;return function t(r){var n=this.elements;var i=r.elements;var a=1/e.setFromMatrixColumn(r,0).length();var o=1/e.setFromMatrixColumn(r,1).length();var s=1/e.setFromMatrixColumn(r,2).length();n[0]=i[0]*a;n[1]=i[1]*a;n[2]=i[2]*a;n[3]=0;n[4]=i[4]*o;n[5]=i[5]*o;n[6]=i[6]*o;n[7]=0;n[8]=i[8]*s;n[9]=i[9]*s;n[10]=i[10]*s;n[11]=0;n[12]=0;n[13]=0;n[14]=0;n[15]=1;return this}}(),makeRotationFromEuler:function(e){if(!(e&&e.isEuler)){console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.")}var t=this.elements;var r=e.x,n=e.y,i=e.z;var a=Math.cos(r),o=Math.sin(r);var s=Math.cos(n),u=Math.sin(n);var c=Math.cos(i),l=Math.sin(i);if(e.order==="XYZ"){var f=a*c,h=a*l,d=o*c,p=o*l;t[0]=s*c;t[4]=-s*l;t[8]=u;t[1]=h+d*u;t[5]=f-p*u;t[9]=-o*s;t[2]=p-f*u;t[6]=d+h*u;t[10]=a*s}else if(e.order==="YXZ"){var v=s*c,m=s*l,g=u*c,y=u*l;t[0]=v+y*o;t[4]=g*o-m;t[8]=a*u;t[1]=a*l;t[5]=a*c;t[9]=-o;t[2]=m*o-g;t[6]=y+v*o;t[10]=a*s}else if(e.order==="ZXY"){var v=s*c,m=s*l,g=u*c,y=u*l;t[0]=v-y*o;t[4]=-a*l;t[8]=g+m*o;t[1]=m+g*o;t[5]=a*c;t[9]=y-v*o;t[2]=-a*u;t[6]=o;t[10]=a*s}else if(e.order==="ZYX"){var f=a*c,h=a*l,d=o*c,p=o*l;t[0]=s*c;t[4]=d*u-h;t[8]=f*u+p;t[1]=s*l;t[5]=p*u+f;t[9]=h*u-d;t[2]=-u;t[6]=o*s;t[10]=a*s}else if(e.order==="YZX"){var b=a*s,x=a*u,w=o*s,A=o*u;t[0]=s*c;t[4]=A-b*l;t[8]=w*l+x;t[1]=l;t[5]=a*c;t[9]=-o*c;t[2]=-u*c;t[6]=x*l+w;t[10]=b-A*l}else if(e.order==="XZY"){var b=a*s,x=a*u,w=o*s,A=o*u;t[0]=s*c;t[4]=-l;t[8]=u*c;t[1]=b*l+A;t[5]=a*c;t[9]=x*l-w;t[2]=w*l-x;t[6]=o*c;t[10]=A*l+b}t[3]=0;t[7]=0;t[11]=0;t[12]=0;t[13]=0;t[14]=0;t[15]=1;return this},makeRotationFromQuaternion:function(){var e=new Ht(0,0,0);var t=new Ht(1,1,1);return function r(n){return this.compose(e,n,t)}}(),lookAt:function(){var e=new Ht;var t=new Ht;var r=new Ht;return function n(i,a,o){var s=this.elements;r.subVectors(i,a);if(r.lengthSq()===0){r.z=1}r.normalize();e.crossVectors(o,r);if(e.lengthSq()===0){if(Math.abs(o.z)===1){r.x+=1e-4}else{r.z+=1e-4}r.normalize();e.crossVectors(o,r)}e.normalize();t.crossVectors(r,e);s[0]=e.x;s[4]=t.x;s[8]=r.x;s[1]=e.y;s[5]=t.y;s[9]=r.y;s[2]=e.z;s[6]=t.z;s[10]=r.z;return this}}(),multiply:function(e,t){if(t!==undefined){console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead.");return this.multiplyMatrices(e,t)}return this.multiplyMatrices(this,e)},premultiply:function(e){return this.multiplyMatrices(e,this)},multiplyMatrices:function(e,t){var r=e.elements;var n=t.elements;var i=this.elements;var a=r[0],o=r[4],s=r[8],u=r[12];var c=r[1],l=r[5],f=r[9],h=r[13];var d=r[2],p=r[6],v=r[10],m=r[14];var g=r[3],y=r[7],b=r[11],x=r[15];var w=n[0],A=n[4],M=n[8],E=n[12];var S=n[1],T=n[5],_=n[9],P=n[13];var C=n[2],O=n[6],L=n[10],R=n[14];var B=n[3],D=n[7],I=n[11],F=n[15];i[0]=a*w+o*S+s*C+u*B;i[4]=a*A+o*T+s*O+u*D;i[8]=a*M+o*_+s*L+u*I;i[12]=a*E+o*P+s*R+u*F;i[1]=c*w+l*S+f*C+h*B;i[5]=c*A+l*T+f*O+h*D;i[9]=c*M+l*_+f*L+h*I;i[13]=c*E+l*P+f*R+h*F;i[2]=d*w+p*S+v*C+m*B;i[6]=d*A+p*T+v*O+m*D;i[10]=d*M+p*_+v*L+m*I;i[14]=d*E+p*P+v*R+m*F;i[3]=g*w+y*S+b*C+x*B;i[7]=g*A+y*T+b*O+x*D;i[11]=g*M+y*_+b*L+x*I;i[15]=g*E+y*P+b*R+x*F;return this},multiplyScalar:function(e){var t=this.elements;t[0]*=e;t[4]*=e;t[8]*=e;t[12]*=e;t[1]*=e;t[5]*=e;t[9]*=e;t[13]*=e;t[2]*=e;t[6]*=e;t[10]*=e;t[14]*=e;t[3]*=e;t[7]*=e;t[11]*=e;t[15]*=e;return this},applyToBufferAttribute:function(){var e=new Ht;return function t(r){for(var n=0,i=r.count;n<i;n++){e.x=r.getX(n);e.y=r.getY(n);e.z=r.getZ(n);e.applyMatrix4(this);r.setXYZ(n,e.x,e.y,e.z)}return r}}(),determinant:function(){var e=this.elements;var t=e[0],r=e[4],n=e[8],i=e[12];var a=e[1],o=e[5],s=e[9],u=e[13];var c=e[2],l=e[6],f=e[10],h=e[14];var d=e[3],p=e[7],v=e[11],m=e[15];return d*(+i*s*l-n*u*l-i*o*f+r*u*f+n*o*h-r*s*h)+p*(+t*s*h-t*u*f+i*a*f-n*a*h+n*u*c-i*s*c)+v*(+t*u*l-t*o*h-i*a*l+r*a*h+i*o*c-r*u*c)+m*(-n*o*c-t*s*l+t*o*f+n*a*l-r*a*f+r*s*c)},transpose:function(){var e=this.elements;var t;t=e[1];e[1]=e[4];e[4]=t;t=e[2];e[2]=e[8];e[8]=t;t=e[6];e[6]=e[9];e[9]=t;t=e[3];e[3]=e[12];e[12]=t;t=e[7];e[7]=e[13];e[13]=t;t=e[11];e[11]=e[14];e[14]=t;return this},setPosition:function(e){var t=this.elements;t[12]=e.x;t[13]=e.y;t[14]=e.z;return this},getInverse:function(e,t){var r=this.elements,n=e.elements,i=n[0],a=n[1],o=n[2],s=n[3],u=n[4],c=n[5],l=n[6],f=n[7],h=n[8],d=n[9],p=n[10],v=n[11],m=n[12],g=n[13],y=n[14],b=n[15],x=d*y*f-g*p*f+g*l*v-c*y*v-d*l*b+c*p*b,w=m*p*f-h*y*f-m*l*v+u*y*v+h*l*b-u*p*b,A=h*g*f-m*d*f+m*c*v-u*g*v-h*c*b+u*d*b,M=m*d*l-h*g*l-m*c*p+u*g*p+h*c*y-u*d*y;var E=i*x+a*w+o*A+s*M;if(E===0){var S="THREE.Matrix4: .getInverse() can't invert matrix, determinant is 0";if(t===true){throw new Error(S)}else{console.warn(S)}return this.identity()}var T=1/E;r[0]=x*T;r[1]=(g*p*s-d*y*s-g*o*v+a*y*v+d*o*b-a*p*b)*T;r[2]=(c*y*s-g*l*s+g*o*f-a*y*f-c*o*b+a*l*b)*T;r[3]=(d*l*s-c*p*s-d*o*f+a*p*f+c*o*v-a*l*v)*T;r[4]=w*T;r[5]=(h*y*s-m*p*s+m*o*v-i*y*v-h*o*b+i*p*b)*T;r[6]=(m*l*s-u*y*s-m*o*f+i*y*f+u*o*b-i*l*b)*T;r[7]=(u*p*s-h*l*s+h*o*f-i*p*f-u*o*v+i*l*v)*T;r[8]=A*T;r[9]=(m*d*s-h*g*s-m*a*v+i*g*v+h*a*b-i*d*b)*T;r[10]=(u*g*s-m*c*s+m*a*f-i*g*f-u*a*b+i*c*b)*T;r[11]=(h*c*s-u*d*s-h*a*f+i*d*f+u*a*v-i*c*v)*T;r[12]=M*T;r[13]=(h*g*o-m*d*o+m*a*p-i*g*p-h*a*y+i*d*y)*T;r[14]=(m*c*o-u*g*o-m*a*l+i*g*l+u*a*y-i*c*y)*T;r[15]=(u*d*o-h*c*o+h*a*l-i*d*l-u*a*p+i*c*p)*T;return this},scale:function(e){var t=this.elements;var r=e.x,n=e.y,i=e.z;t[0]*=r;t[4]*=n;t[8]*=i;t[1]*=r;t[5]*=n;t[9]*=i;t[2]*=r;t[6]*=n;t[10]*=i;t[3]*=r;t[7]*=n;t[11]*=i;return this},getMaxScaleOnAxis:function(){var e=this.elements;var t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2];var r=e[4]*e[4]+e[5]*e[5]+e[6]*e[6];var n=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,r,n))},makeTranslation:function(e,t,r){this.set(1,0,0,e,0,1,0,t,0,0,1,r,0,0,0,1);return this},makeRotationX:function(e){var t=Math.cos(e),r=Math.sin(e);this.set(1,0,0,0,0,t,-r,0,0,r,t,0,0,0,0,1);return this},makeRotationY:function(e){var t=Math.cos(e),r=Math.sin(e);this.set(t,0,r,0,0,1,0,0,-r,0,t,0,0,0,0,1);return this},makeRotationZ:function(e){var t=Math.cos(e),r=Math.sin(e);this.set(t,-r,0,0,r,t,0,0,0,0,1,0,0,0,0,1);return this},makeRotationAxis:function(e,t){var r=Math.cos(t);var n=Math.sin(t);var i=1-r;var a=e.x,o=e.y,s=e.z;var u=i*a,c=i*o;this.set(u*a+r,u*o-n*s,u*s+n*o,0,u*o+n*s,c*o+r,c*s-n*a,0,u*s-n*o,c*s+n*a,i*s*s+r,0,0,0,0,1);return this},makeScale:function(e,t,r){this.set(e,0,0,0,0,t,0,0,0,0,r,0,0,0,0,1);return this},makeShear:function(e,t,r){this.set(1,t,r,0,e,1,r,0,e,t,1,0,0,0,0,1);return this},compose:function(e,t,r){var n=this.elements;var i=t._x,a=t._y,o=t._z,s=t._w;var u=i+i,c=a+a,l=o+o;var f=i*u,h=i*c,d=i*l;var p=a*c,v=a*l,m=o*l;var g=s*u,y=s*c,b=s*l;var x=r.x,w=r.y,A=r.z;n[0]=(1-(p+m))*x;n[1]=(h+b)*x;n[2]=(d-y)*x;n[3]=0;n[4]=(h-b)*w;n[5]=(1-(f+m))*w;n[6]=(v+g)*w;n[7]=0;n[8]=(d+y)*A;n[9]=(v-g)*A;n[10]=(1-(f+p))*A;n[11]=0;n[12]=e.x;n[13]=e.y;n[14]=e.z;n[15]=1;return this},decompose:function(){var e=new Ht;var t=new Nt;return function r(n,i,a){var o=this.elements;var s=e.set(o[0],o[1],o[2]).length();var u=e.set(o[4],o[5],o[6]).length();var c=e.set(o[8],o[9],o[10]).length();var l=this.determinant();if(l<0)s=-s;n.x=o[12];n.y=o[13];n.z=o[14];t.copy(this);var f=1/s;var h=1/u;var d=1/c;t.elements[0]*=f;t.elements[1]*=f;t.elements[2]*=f;t.elements[4]*=h;t.elements[5]*=h;t.elements[6]*=h;t.elements[8]*=d;t.elements[9]*=d;t.elements[10]*=d;i.setFromRotationMatrix(t);a.x=s;a.y=u;a.z=c;return this}}(),makePerspective:function(e,t,r,n,i,a){if(a===undefined){console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.")}var o=this.elements;var s=2*i/(t-e);var u=2*i/(r-n);var c=(t+e)/(t-e);var l=(r+n)/(r-n);var f=-(a+i)/(a-i);var h=-2*a*i/(a-i);o[0]=s;o[4]=0;o[8]=c;o[12]=0;o[1]=0;o[5]=u;o[9]=l;o[13]=0;o[2]=0;o[6]=0;o[10]=f;o[14]=h;o[3]=0;o[7]=0;o[11]=-1;o[15]=0;return this},makeOrthographic:function(e,t,r,n,i,a){var o=this.elements;var s=1/(t-e);var u=1/(r-n);var c=1/(a-i);var l=(t+e)*s;var f=(r+n)*u;var h=(a+i)*c;o[0]=2*s;o[4]=0;o[8]=0;o[12]=-l;o[1]=0;o[5]=2*u;o[9]=0;o[13]=-f;o[2]=0;o[6]=0;o[10]=-2*c;o[14]=-h;o[3]=0;o[7]=0;o[11]=0;o[15]=1;return this},equals:function(e){var t=this.elements;var r=e.elements;for(var n=0;n<16;n++){if(t[n]!==r[n])return false}return true},fromArray:function(e,t){if(t===undefined)t=0;for(var r=0;r<16;r++){this.elements[r]=e[r+t]}return this},toArray:function(e,t){if(e===undefined)e=[];if(t===undefined)t=0;var r=this.elements;e[t]=r[0];e[t+1]=r[1];e[t+2]=r[2];e[t+3]=r[3];e[t+4]=r[4];e[t+5]=r[5];e[t+6]=r[6];e[t+7]=r[7];e[t+8]=r[8];e[t+9]=r[9];e[t+10]=r[10];e[t+11]=r[11];e[t+12]=r[12];e[t+13]=r[13];e[t+14]=r[14];e[t+15]=r[15];return e}});function kt(e,t,r,n){this._x=e||0;this._y=t||0;this._z=r||0;this._w=n!==undefined?n:1}Object.assign(kt,{slerp:function(e,t,r,n){return r.copy(e).slerp(t,n)},slerpFlat:function(e,t,r,n,i,a,o){var s=r[n+0],u=r[n+1],c=r[n+2],l=r[n+3],f=i[a+0],h=i[a+1],d=i[a+2],p=i[a+3];if(l!==p||s!==f||u!==h||c!==d){var v=1-o,m=s*f+u*h+c*d+l*p,g=m>=0?1:-1,y=1-m*m;if(y>Number.EPSILON){var b=Math.sqrt(y),x=Math.atan2(b,m*g);v=Math.sin(v*x)/b;o=Math.sin(o*x)/b}var w=o*g;s=s*v+f*w;u=u*v+h*w;c=c*v+d*w;l=l*v+p*w;if(v===1-o){var A=1/Math.sqrt(s*s+u*u+c*c+l*l);s*=A;u*=A;c*=A;l*=A}}e[t]=s;e[t+1]=u;e[t+2]=c;e[t+3]=l}});Object.defineProperties(kt.prototype,{x:{get:function(){return this._x},set:function(e){this._x=e;this.onChangeCallback()}},y:{get:function(){return this._y},set:function(e){this._y=e;this.onChangeCallback()}},z:{get:function(){return this._z},set:function(e){this._z=e;this.onChangeCallback()}},w:{get:function(){return this._w},set:function(e){this._w=e;this.onChangeCallback()}}});Object.assign(kt.prototype,{isQuaternion:true,set:function(e,t,r,n){this._x=e;this._y=t;this._z=r;this._w=n;this.onChangeCallback();return this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._w)},copy:function(e){this._x=e.x;this._y=e.y;this._z=e.z;this._w=e.w;this.onChangeCallback();return this},setFromEuler:function(e,t){if(!(e&&e.isEuler)){throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.")}var r=e._x,n=e._y,i=e._z,a=e.order;var o=Math.cos;var s=Math.sin;var u=o(r/2);var c=o(n/2);var l=o(i/2);var f=s(r/2);var h=s(n/2);var d=s(i/2);if(a==="XYZ"){this._x=f*c*l+u*h*d;this._y=u*h*l-f*c*d;this._z=u*c*d+f*h*l;this._w=u*c*l-f*h*d}else if(a==="YXZ"){this._x=f*c*l+u*h*d;this._y=u*h*l-f*c*d;this._z=u*c*d-f*h*l;this._w=u*c*l+f*h*d}else if(a==="ZXY"){this._x=f*c*l-u*h*d;this._y=u*h*l+f*c*d;this._z=u*c*d+f*h*l;this._w=u*c*l-f*h*d}else if(a==="ZYX"){this._x=f*c*l-u*h*d;this._y=u*h*l+f*c*d;this._z=u*c*d-f*h*l;this._w=u*c*l+f*h*d}else if(a==="YZX"){this._x=f*c*l+u*h*d;this._y=u*h*l+f*c*d;this._z=u*c*d-f*h*l;this._w=u*c*l-f*h*d}else if(a==="XZY"){this._x=f*c*l-u*h*d;this._y=u*h*l-f*c*d;this._z=u*c*d+f*h*l;this._w=u*c*l+f*h*d}if(t!==false)this.onChangeCallback();return this},setFromAxisAngle:function(e,t){var r=t/2,n=Math.sin(r);this._x=e.x*n;this._y=e.y*n;this._z=e.z*n;this._w=Math.cos(r);this.onChangeCallback();return this},setFromRotationMatrix:function(e){var t=e.elements,r=t[0],n=t[4],i=t[8],a=t[1],o=t[5],s=t[9],u=t[2],c=t[6],l=t[10],f=r+o+l,h;if(f>0){h=.5/Math.sqrt(f+1);this._w=.25/h;this._x=(c-s)*h;this._y=(i-u)*h;this._z=(a-n)*h}else if(r>o&&r>l){h=2*Math.sqrt(1+r-o-l);this._w=(c-s)/h;this._x=.25*h;this._y=(n+a)/h;this._z=(i+u)/h}else if(o>l){h=2*Math.sqrt(1+o-r-l);this._w=(i-u)/h;this._x=(n+a)/h;this._y=.25*h;this._z=(s+c)/h}else{h=2*Math.sqrt(1+l-r-o);this._w=(a-n)/h;this._x=(i+u)/h;this._y=(s+c)/h;this._z=.25*h}this.onChangeCallback();return this},setFromUnitVectors:function(){var e=new Ht;var t;var r=1e-6;return function n(i,a){if(e===undefined)e=new Ht;t=i.dot(a)+1;if(t<r){t=0;if(Math.abs(i.x)>Math.abs(i.z)){e.set(-i.y,i.x,0)}else{e.set(0,-i.z,i.y)}}else{e.crossVectors(i,a)}this._x=e.x;this._y=e.y;this._z=e.z;this._w=t;return this.normalize()}}(),angleTo:function(e){return 2*Math.acos(Math.abs(jt.clamp(this.dot(e),-1,1)))},rotateTowards:function(e,t){var r=this.angleTo(e);if(r===0)return this;var n=Math.min(1,t/r);this.slerp(e,n);return this},inverse:function(){return this.conjugate()},conjugate:function(){this._x*=-1;this._y*=-1;this._z*=-1;this.onChangeCallback();return this},dot:function(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function(){var e=this.length();if(e===0){this._x=0;this._y=0;this._z=0;this._w=1}else{e=1/e;this._x=this._x*e;this._y=this._y*e;this._z=this._z*e;this._w=this._w*e}this.onChangeCallback();return this},multiply:function(e,t){if(t!==undefined){console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead.");return this.multiplyQuaternions(e,t)}return this.multiplyQuaternions(this,e)},premultiply:function(e){return this.multiplyQuaternions(e,this)},multiplyQuaternions:function(e,t){var r=e._x,n=e._y,i=e._z,a=e._w;var o=t._x,s=t._y,u=t._z,c=t._w;this._x=r*c+a*o+n*u-i*s;this._y=n*c+a*s+i*o-r*u;this._z=i*c+a*u+r*s-n*o;this._w=a*c-r*o-n*s-i*u;this.onChangeCallback();return this},slerp:function(e,t){if(t===0)return this;if(t===1)return this.copy(e);var r=this._x,n=this._y,i=this._z,a=this._w;var o=a*e._w+r*e._x+n*e._y+i*e._z;if(o<0){this._w=-e._w;this._x=-e._x;this._y=-e._y;this._z=-e._z;o=-o}else{this.copy(e)}if(o>=1){this._w=a;this._x=r;this._y=n;this._z=i;return this}var s=1-o*o;if(s<=Number.EPSILON){var u=1-t;this._w=u*a+t*this._w;this._x=u*r+t*this._x;this._y=u*n+t*this._y;this._z=u*i+t*this._z;return this.normalize()}var c=Math.sqrt(s);var l=Math.atan2(c,o);var f=Math.sin((1-t)*l)/c,h=Math.sin(t*l)/c;this._w=a*f+this._w*h;this._x=r*f+this._x*h;this._y=n*f+this._y*h;this._z=i*f+this._z*h;this.onChangeCallback();return this},equals:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w},fromArray:function(e,t){if(t===undefined)t=0;this._x=e[t];this._y=e[t+1];this._z=e[t+2];this._w=e[t+3];this.onChangeCallback();return this},toArray:function(e,t){if(e===undefined)e=[];if(t===undefined)t=0;e[t]=this._x;e[t+1]=this._y;e[t+2]=this._z;e[t+3]=this._w;return e},onChange:function(e){this.onChangeCallback=e;return this},onChangeCallback:function(){}});function Ht(e,t,r){this.x=e||0;this.y=t||0;this.z=r||0}Object.assign(Ht.prototype,{isVector3:true,set:function(e,t,r){this.x=e;this.y=t;this.z=r;return this},setScalar:function(e){this.x=e;this.y=e;this.z=e;return this},setX:function(e){this.x=e;return this},setY:function(e){this.y=e;return this},setZ:function(e){this.z=e;return this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}},clone:function(){return new this.constructor(this.x,this.y,this.z)},copy:function(e){this.x=e.x;this.y=e.y;this.z=e.z;return this},add:function(e,t){if(t!==undefined){console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead.");return this.addVectors(e,t)}this.x+=e.x;this.y+=e.y;this.z+=e.z;return this},addScalar:function(e){this.x+=e;this.y+=e;this.z+=e;return this},addVectors:function(e,t){this.x=e.x+t.x;this.y=e.y+t.y;this.z=e.z+t.z;return this},addScaledVector:function(e,t){this.x+=e.x*t;this.y+=e.y*t;this.z+=e.z*t;return this},sub:function(e,t){if(t!==undefined){console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead.");return this.subVectors(e,t)}this.x-=e.x;this.y-=e.y;this.z-=e.z;return this},subScalar:function(e){this.x-=e;this.y-=e;this.z-=e;return this},subVectors:function(e,t){this.x=e.x-t.x;this.y=e.y-t.y;this.z=e.z-t.z;return this},multiply:function(e,t){if(t!==undefined){console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead.");return this.multiplyVectors(e,t)}this.x*=e.x;this.y*=e.y;this.z*=e.z;return this},multiplyScalar:function(e){this.x*=e;this.y*=e;this.z*=e;return this},multiplyVectors:function(e,t){this.x=e.x*t.x;this.y=e.y*t.y;this.z=e.z*t.z;return this},applyEuler:function(){var e=new kt;return function t(r){if(!(r&&r.isEuler)){console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order.")}return this.applyQuaternion(e.setFromEuler(r))}}(),applyAxisAngle:function(){var e=new kt;return function t(r,n){return this.applyQuaternion(e.setFromAxisAngle(r,n))}}(),applyMatrix3:function(e){var t=this.x,r=this.y,n=this.z;var i=e.elements;this.x=i[0]*t+i[3]*r+i[6]*n;this.y=i[1]*t+i[4]*r+i[7]*n;this.z=i[2]*t+i[5]*r+i[8]*n;return this},applyMatrix4:function(e){var t=this.x,r=this.y,n=this.z;var i=e.elements;var a=1/(i[3]*t+i[7]*r+i[11]*n+i[15]);this.x=(i[0]*t+i[4]*r+i[8]*n+i[12])*a;this.y=(i[1]*t+i[5]*r+i[9]*n+i[13])*a;this.z=(i[2]*t+i[6]*r+i[10]*n+i[14])*a;return this},applyQuaternion:function(e){var t=this.x,r=this.y,n=this.z;var i=e.x,a=e.y,o=e.z,s=e.w;var u=s*t+a*n-o*r;var c=s*r+o*t-i*n;var l=s*n+i*r-a*t;var f=-i*t-a*r-o*n;this.x=u*s+f*-i+c*-o-l*-a;this.y=c*s+f*-a+l*-i-u*-o;this.z=l*s+f*-o+u*-a-c*-i;return this},project:function(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)},unproject:function(){var e=new Nt;return function t(r){return this.applyMatrix4(e.getInverse(r.projectionMatrix)).applyMatrix4(r.matrixWorld)}}(),transformDirection:function(e){var t=this.x,r=this.y,n=this.z;var i=e.elements;this.x=i[0]*t+i[4]*r+i[8]*n;this.y=i[1]*t+i[5]*r+i[9]*n;this.z=i[2]*t+i[6]*r+i[10]*n;return this.normalize()},divide:function(e){this.x/=e.x;this.y/=e.y;this.z/=e.z;return this},divideScalar:function(e){return this.multiplyScalar(1/e)},min:function(e){this.x=Math.min(this.x,e.x);this.y=Math.min(this.y,e.y);this.z=Math.min(this.z,e.z);return this},max:function(e){this.x=Math.max(this.x,e.x);this.y=Math.max(this.y,e.y);this.z=Math.max(this.z,e.z);return this},clamp:function(e,t){this.x=Math.max(e.x,Math.min(t.x,this.x));this.y=Math.max(e.y,Math.min(t.y,this.y));this.z=Math.max(e.z,Math.min(t.z,this.z));return this},clampScalar:function(){var e=new Ht;var t=new Ht;return function r(n,i){e.set(n,n,n);t.set(i,i,i);return this.clamp(e,t)}}(),clampLength:function(e,t){var r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))},floor:function(){this.x=Math.floor(this.x);this.y=Math.floor(this.y);this.z=Math.floor(this.z);return this},ceil:function(){this.x=Math.ceil(this.x);this.y=Math.ceil(this.y);this.z=Math.ceil(this.z);return this},round:function(){this.x=Math.round(this.x);this.y=Math.round(this.y);this.z=Math.round(this.z);return this},roundToZero:function(){this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x);this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y);this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z);return this},negate:function(){this.x=-this.x;this.y=-this.y;this.z=-this.z;return this},dot:function(e){return this.x*e.x+this.y*e.y+this.z*e.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(e){return this.normalize().multiplyScalar(e)},lerp:function(e,t){this.x+=(e.x-this.x)*t;this.y+=(e.y-this.y)*t;this.z+=(e.z-this.z)*t;return this},lerpVectors:function(e,t,r){return this.subVectors(t,e).multiplyScalar(r).add(e)},cross:function(e,t){if(t!==undefined){console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead.");return this.crossVectors(e,t)}return this.crossVectors(this,e)},crossVectors:function(e,t){var r=e.x,n=e.y,i=e.z;var a=t.x,o=t.y,s=t.z;this.x=n*s-i*o;this.y=i*a-r*s;this.z=r*o-n*a;return this},projectOnVector:function(e){var t=e.dot(this)/e.lengthSq();return this.copy(e).multiplyScalar(t)},projectOnPlane:function(){var e=new Ht;return function t(r){e.copy(this).projectOnVector(r);return this.sub(e)}}(),reflect:function(){var e=new Ht;return function t(r){return this.sub(e.copy(r).multiplyScalar(2*this.dot(r)))}}(),angleTo:function(e){var t=this.dot(e)/Math.sqrt(this.lengthSq()*e.lengthSq());return Math.acos(jt.clamp(t,-1,1))},distanceTo:function(e){return Math.sqrt(this.distanceToSquared(e))},distanceToSquared:function(e){var t=this.x-e.x,r=this.y-e.y,n=this.z-e.z;return t*t+r*r+n*n},manhattanDistanceTo:function(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)},setFromSpherical:function(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)},setFromSphericalCoords:function(e,t,r){var n=Math.sin(t)*e;this.x=n*Math.sin(r);this.y=Math.cos(t)*e;this.z=n*Math.cos(r);return this},setFromCylindrical:function(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)},setFromCylindricalCoords:function(e,t,r){this.x=e*Math.sin(t);this.y=r;this.z=e*Math.cos(t);return this},setFromMatrixPosition:function(e){var t=e.elements;this.x=t[12];this.y=t[13];this.z=t[14];return this},setFromMatrixScale:function(e){var t=this.setFromMatrixColumn(e,0).length();var r=this.setFromMatrixColumn(e,1).length();var n=this.setFromMatrixColumn(e,2).length();this.x=t;this.y=r;this.z=n;return this},setFromMatrixColumn:function(e,t){return this.fromArray(e.elements,t*4)},equals:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z},fromArray:function(e,t){if(t===undefined)t=0;this.x=e[t];this.y=e[t+1];this.z=e[t+2];return this},toArray:function(e,t){if(e===undefined)e=[];if(t===undefined)t=0;e[t]=this.x;e[t+1]=this.y;e[t+2]=this.z;return e},fromBufferAttribute:function(e,t,r){if(r!==undefined){console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute().")}this.x=e.getX(t);this.y=e.getY(t);this.z=e.getZ(t);return this}});function Vt(){this.elements=[1,0,0,0,1,0,0,0,1];if(arguments.length>0){console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}}Object.assign(Vt.prototype,{isMatrix3:true,set:function(e,t,r,n,i,a,o,s,u){var c=this.elements;c[0]=e;c[1]=n;c[2]=o;c[3]=t;c[4]=i;c[5]=s;c[6]=r;c[7]=a;c[8]=u;return this},identity:function(){this.set(1,0,0,0,1,0,0,0,1);return this},clone:function(){return(new this.constructor).fromArray(this.elements)},copy:function(e){var t=this.elements;var r=e.elements;t[0]=r[0];t[1]=r[1];t[2]=r[2];t[3]=r[3];t[4]=r[4];t[5]=r[5];t[6]=r[6];t[7]=r[7];t[8]=r[8];return this},setFromMatrix4:function(e){var t=e.elements;this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]);return this},applyToBufferAttribute:function(){var e=new Ht;return function t(r){for(var n=0,i=r.count;n<i;n++){e.x=r.getX(n);e.y=r.getY(n);e.z=r.getZ(n);e.applyMatrix3(this);r.setXYZ(n,e.x,e.y,e.z)}return r}}(),multiply:function(e){return this.multiplyMatrices(this,e)},premultiply:function(e){return this.multiplyMatrices(e,this)},multiplyMatrices:function(e,t){var r=e.elements;var n=t.elements;var i=this.elements;var a=r[0],o=r[3],s=r[6];var u=r[1],c=r[4],l=r[7];var f=r[2],h=r[5],d=r[8];var p=n[0],v=n[3],m=n[6];var g=n[1],y=n[4],b=n[7];var x=n[2],w=n[5],A=n[8];i[0]=a*p+o*g+s*x;i[3]=a*v+o*y+s*w;i[6]=a*m+o*b+s*A;i[1]=u*p+c*g+l*x;i[4]=u*v+c*y+l*w;i[7]=u*m+c*b+l*A;i[2]=f*p+h*g+d*x;i[5]=f*v+h*y+d*w;i[8]=f*m+h*b+d*A;return this},multiplyScalar:function(e){var t=this.elements;t[0]*=e;t[3]*=e;t[6]*=e;t[1]*=e;t[4]*=e;t[7]*=e;t[2]*=e;t[5]*=e;t[8]*=e;return this},determinant:function(){var e=this.elements;var t=e[0],r=e[1],n=e[2],i=e[3],a=e[4],o=e[5],s=e[6],u=e[7],c=e[8];return t*a*c-t*o*u-r*i*c+r*o*s+n*i*u-n*a*s},getInverse:function(e,t){if(e&&e.isMatrix4){console.error("THREE.Matrix3: .getInverse() no longer takes a Matrix4 argument.")}var r=e.elements,n=this.elements,i=r[0],a=r[1],o=r[2],s=r[3],u=r[4],c=r[5],l=r[6],f=r[7],h=r[8],d=h*u-c*f,p=c*l-h*s,v=f*s-u*l,m=i*d+a*p+o*v;if(m===0){var g="THREE.Matrix3: .getInverse() can't invert matrix, determinant is 0";if(t===true){throw new Error(g)}else{console.warn(g)}return this.identity()}var y=1/m;n[0]=d*y;n[1]=(o*f-h*a)*y;n[2]=(c*a-o*u)*y;n[3]=p*y;n[4]=(h*i-o*l)*y;n[5]=(o*s-c*i)*y;n[6]=v*y;n[7]=(a*l-f*i)*y;n[8]=(u*i-a*s)*y;return this},transpose:function(){var e,t=this.elements;e=t[1];t[1]=t[3];t[3]=e;e=t[2];t[2]=t[6];t[6]=e;e=t[5];t[5]=t[7];t[7]=e;return this},getNormalMatrix:function(e){return this.setFromMatrix4(e).getInverse(this).transpose()},transposeIntoArray:function(e){var t=this.elements;e[0]=t[0];e[1]=t[3];e[2]=t[6];e[3]=t[1];e[4]=t[4];e[5]=t[7];e[6]=t[2];e[7]=t[5];e[8]=t[8];return this},setUvTransform:function(e,t,r,n,i,a,o){var s=Math.cos(i);var u=Math.sin(i);this.set(r*s,r*u,-r*(s*a+u*o)+a+e,-n*u,n*s,-n*(-u*a+s*o)+o+t,0,0,1)},scale:function(e,t){var r=this.elements;r[0]*=e;r[3]*=e;r[6]*=e;r[1]*=t;r[4]*=t;r[7]*=t;return this},rotate:function(e){var t=Math.cos(e);var r=Math.sin(e);var n=this.elements;var i=n[0],a=n[3],o=n[6];var s=n[1],u=n[4],c=n[7];n[0]=t*i+r*s;n[3]=t*a+r*u;n[6]=t*o+r*c;n[1]=-r*i+t*s;n[4]=-r*a+t*u;n[7]=-r*o+t*c;return this},translate:function(e,t){var r=this.elements;r[0]+=e*r[2];r[3]+=e*r[5];r[6]+=e*r[8];r[1]+=t*r[2];r[4]+=t*r[5];r[7]+=t*r[8];return this},equals:function(e){var t=this.elements;var r=e.elements;for(var n=0;n<9;n++){if(t[n]!==r[n])return false}return true},fromArray:function(e,t){if(t===undefined)t=0;for(var r=0;r<9;r++){this.elements[r]=e[r+t]}return this},toArray:function(e,t){if(e===undefined)e=[];if(t===undefined)t=0;var r=this.elements;e[t]=r[0];e[t+1]=r[1];e[t+2]=r[2];e[t+3]=r[3];e[t+4]=r[4];e[t+5]=r[5];e[t+6]=r[6];e[t+7]=r[7];e[t+8]=r[8];return e}});var Wt;var Yt={getDataURL:function(e){var t;if(typeof HTMLCanvasElement=="undefined"){return e.src}else if(e instanceof HTMLCanvasElement){t=e}else{if(Wt===undefined)Wt=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");Wt.width=e.width;Wt.height=e.height;var r=Wt.getContext("2d");if(e instanceof ImageData){r.putImageData(e,0,0)}else{r.drawImage(e,0,0,e.width,e.height)}t=Wt}if(t.width>2048||t.height>2048){return t.toDataURL("image/jpeg",.6)}else{return t.toDataURL("image/png")}}};var Xt=0;function Qt(e,t,r,n,i,a,o,s,u,c){Object.defineProperty(this,"id",{value:Xt++});this.uuid=jt.generateUUID();this.name="";this.image=e!==undefined?e:Qt.DEFAULT_IMAGE;this.mipmaps=[];this.mapping=t!==undefined?t:Qt.DEFAULT_MAPPING;this.wrapS=r!==undefined?r:ge;this.wrapT=n!==undefined?n:ge;this.magFilter=i!==undefined?i:Ae;this.minFilter=a!==undefined?a:Ee;this.anisotropy=u!==undefined?u:1;this.format=o!==undefined?o:je;this.type=s!==undefined?s:Se;this.offset=new zt(0,0);this.repeat=new zt(1,1);this.center=new zt(0,0);this.rotation=0;this.matrixAutoUpdate=true;this.matrix=new Vt;this.generateMipmaps=true;this.premultiplyAlpha=false;this.flipY=true;this.unpackAlignment=4;this.encoding=c!==undefined?c:_t;this.version=0;this.onUpdate=null}Qt.DEFAULT_IMAGE=undefined;Qt.DEFAULT_MAPPING=ue;Qt.prototype=Object.assign(Object.create(n.prototype),{constructor:Qt,isTexture:true,updateMatrix:function(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)},clone:function(){return(new this.constructor).copy(this)},copy:function(e){this.name=e.name;this.image=e.image;this.mipmaps=e.mipmaps.slice(0);this.mapping=e.mapping;this.wrapS=e.wrapS;this.wrapT=e.wrapT;this.magFilter=e.magFilter;this.minFilter=e.minFilter;this.anisotropy=e.anisotropy;this.format=e.format;this.type=e.type;this.offset.copy(e.offset);this.repeat.copy(e.repeat);this.center.copy(e.center);this.rotation=e.rotation;this.matrixAutoUpdate=e.matrixAutoUpdate;this.matrix.copy(e.matrix);this.generateMipmaps=e.generateMipmaps;this.premultiplyAlpha=e.premultiplyAlpha;this.flipY=e.flipY;this.unpackAlignment=e.unpackAlignment;this.encoding=e.encoding;return this},toJSON:function(e){var t=e===undefined||typeof e==="string";if(!t&&e.textures[this.uuid]!==undefined){return e.textures[this.uuid]}var r={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY};if(this.image!==undefined){var n=this.image;if(n.uuid===undefined){n.uuid=jt.generateUUID()}if(!t&&e.images[n.uuid]===undefined){var i;if(Array.isArray(n)){i=[];for(var a=0,o=n.length;a<o;a++){i.push(Yt.getDataURL(n[a]))}}else{i=Yt.getDataURL(n)}e.images[n.uuid]={uuid:n.uuid,url:i}}r.image=n.uuid}if(!t){e.textures[this.uuid]=r}return r},dispose:function(){this.dispatchEvent({type:"dispose"})},transformUv:function(e){if(this.mapping!==ue)return e;e.applyMatrix3(this.matrix);if(e.x<0||e.x>1){switch(this.wrapS){case me:e.x=e.x-Math.floor(e.x);break;case ge:e.x=e.x<0?0:1;break;case ye:if(Math.abs(Math.floor(e.x)%2)===1){e.x=Math.ceil(e.x)-e.x}else{e.x=e.x-Math.floor(e.x)}break}}if(e.y<0||e.y>1){switch(this.wrapT){case me:e.y=e.y-Math.floor(e.y);break;case ge:e.y=e.y<0?0:1;break;case ye:if(Math.abs(Math.floor(e.y)%2)===1){e.y=Math.ceil(e.y)-e.y}else{e.y=e.y-Math.floor(e.y)}break}}if(this.flipY){e.y=1-e.y}return e}});Object.defineProperty(Qt.prototype,"needsUpdate",{set:function(e){if(e===true)this.version++}});function qt(e,t,r,n){this.x=e||0;this.y=t||0;this.z=r||0;this.w=n!==undefined?n:1}Object.assign(qt.prototype,{isVector4:true,set:function(e,t,r,n){this.x=e;this.y=t;this.z=r;this.w=n;return this},setScalar:function(e){this.x=e;this.y=e;this.z=e;this.w=e;return this},setX:function(e){this.x=e;return this},setY:function(e){this.y=e;return this},setZ:function(e){this.z=e;return this},setW:function(e){this.w=e;return this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}},clone:function(){return new this.constructor(this.x,this.y,this.z,this.w)},copy:function(e){this.x=e.x;this.y=e.y;this.z=e.z;this.w=e.w!==undefined?e.w:1;return this},add:function(e,t){if(t!==undefined){console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead.");return this.addVectors(e,t)}this.x+=e.x;this.y+=e.y;this.z+=e.z;this.w+=e.w;return this},addScalar:function(e){this.x+=e;this.y+=e;this.z+=e;this.w+=e;return this},addVectors:function(e,t){this.x=e.x+t.x;this.y=e.y+t.y;this.z=e.z+t.z;this.w=e.w+t.w;return this},addScaledVector:function(e,t){this.x+=e.x*t;this.y+=e.y*t;this.z+=e.z*t;this.w+=e.w*t;return this},sub:function(e,t){if(t!==undefined){console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead.");return this.subVectors(e,t)}this.x-=e.x;this.y-=e.y;this.z-=e.z;this.w-=e.w;return this},subScalar:function(e){this.x-=e;this.y-=e;this.z-=e;this.w-=e;return this},subVectors:function(e,t){this.x=e.x-t.x;this.y=e.y-t.y;this.z=e.z-t.z;this.w=e.w-t.w;return this},multiplyScalar:function(e){this.x*=e;this.y*=e;this.z*=e;this.w*=e;return this},applyMatrix4:function(e){var t=this.x,r=this.y,n=this.z,i=this.w;var a=e.elements;this.x=a[0]*t+a[4]*r+a[8]*n+a[12]*i;this.y=a[1]*t+a[5]*r+a[9]*n+a[13]*i;this.z=a[2]*t+a[6]*r+a[10]*n+a[14]*i;this.w=a[3]*t+a[7]*r+a[11]*n+a[15]*i;return this},divideScalar:function(e){return this.multiplyScalar(1/e)},setAxisAngleFromQuaternion:function(e){this.w=2*Math.acos(e.w);var t=Math.sqrt(1-e.w*e.w);if(t<1e-4){this.x=1;this.y=0;this.z=0}else{this.x=e.x/t;this.y=e.y/t;this.z=e.z/t}return this},setAxisAngleFromRotationMatrix:function(e){var t,r,n,i,a=.01,o=.1,s=e.elements,u=s[0],c=s[4],l=s[8],f=s[1],h=s[5],d=s[9],p=s[2],v=s[6],m=s[10];if(Math.abs(c-f)<a&&Math.abs(l-p)<a&&Math.abs(d-v)<a){if(Math.abs(c+f)<o&&Math.abs(l+p)<o&&Math.abs(d+v)<o&&Math.abs(u+h+m-3)<o){this.set(1,0,0,0);return this}t=Math.PI;var g=(u+1)/2;var y=(h+1)/2;var b=(m+1)/2;var x=(c+f)/4;var w=(l+p)/4;var A=(d+v)/4;if(g>y&&g>b){if(g<a){r=0;n=.707106781;i=.707106781}else{r=Math.sqrt(g);n=x/r;i=w/r}}else if(y>b){if(y<a){r=.707106781;n=0;i=.707106781}else{n=Math.sqrt(y);r=x/n;i=A/n}}else{if(b<a){r=.707106781;n=.707106781;i=0}else{i=Math.sqrt(b);r=w/i;n=A/i}}this.set(r,n,i,t);return this}var M=Math.sqrt((v-d)*(v-d)+(l-p)*(l-p)+(f-c)*(f-c));if(Math.abs(M)<.001)M=1;this.x=(v-d)/M;this.y=(l-p)/M;this.z=(f-c)/M;this.w=Math.acos((u+h+m-1)/2);return this},min:function(e){this.x=Math.min(this.x,e.x);this.y=Math.min(this.y,e.y);this.z=Math.min(this.z,e.z);this.w=Math.min(this.w,e.w);return this},max:function(e){this.x=Math.max(this.x,e.x);this.y=Math.max(this.y,e.y);this.z=Math.max(this.z,e.z);this.w=Math.max(this.w,e.w);return this},clamp:function(e,t){this.x=Math.max(e.x,Math.min(t.x,this.x));this.y=Math.max(e.y,Math.min(t.y,this.y));this.z=Math.max(e.z,Math.min(t.z,this.z));this.w=Math.max(e.w,Math.min(t.w,this.w));return this},clampScalar:function(){var e,t;return function r(n,i){if(e===undefined){e=new qt;t=new qt}e.set(n,n,n,n);t.set(i,i,i,i);return this.clamp(e,t)}}(),clampLength:function(e,t){var r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))},floor:function(){this.x=Math.floor(this.x);this.y=Math.floor(this.y);this.z=Math.floor(this.z);this.w=Math.floor(this.w);return this},ceil:function(){this.x=Math.ceil(this.x);this.y=Math.ceil(this.y);this.z=Math.ceil(this.z);this.w=Math.ceil(this.w);return this},round:function(){this.x=Math.round(this.x);this.y=Math.round(this.y);this.z=Math.round(this.z);this.w=Math.round(this.w);return this},roundToZero:function(){this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x);this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y);this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z);this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w);return this},negate:function(){this.x=-this.x;this.y=-this.y;this.z=-this.z;this.w=-this.w;return this},dot:function(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(e){return this.normalize().multiplyScalar(e)},lerp:function(e,t){this.x+=(e.x-this.x)*t;this.y+=(e.y-this.y)*t;this.z+=(e.z-this.z)*t;this.w+=(e.w-this.w)*t;return this},lerpVectors:function(e,t,r){return this.subVectors(t,e).multiplyScalar(r).add(e)},equals:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w},fromArray:function(e,t){if(t===undefined)t=0;this.x=e[t];this.y=e[t+1];this.z=e[t+2];this.w=e[t+3];return this},toArray:function(e,t){if(e===undefined)e=[];if(t===undefined)t=0;e[t]=this.x;e[t+1]=this.y;e[t+2]=this.z;e[t+3]=this.w;return e},fromBufferAttribute:function(e,t,r){if(r!==undefined){console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute().")}this.x=e.getX(t);this.y=e.getY(t);this.z=e.getZ(t);this.w=e.getW(t);return this}});function Jt(e,t,r){this.width=e;this.height=t;this.scissor=new qt(0,0,e,t);this.scissorTest=false;this.viewport=new qt(0,0,e,t);r=r||{};this.texture=new Qt(undefined,undefined,r.wrapS,r.wrapT,r.magFilter,r.minFilter,r.format,r.type,r.anisotropy,r.encoding);this.texture.generateMipmaps=r.generateMipmaps!==undefined?r.generateMipmaps:false;this.texture.minFilter=r.minFilter!==undefined?r.minFilter:Ae;this.depthBuffer=r.depthBuffer!==undefined?r.depthBuffer:true;this.stencilBuffer=r.stencilBuffer!==undefined?r.stencilBuffer:true;this.depthTexture=r.depthTexture!==undefined?r.depthTexture:null}Jt.prototype=Object.assign(Object.create(n.prototype),{constructor:Jt,isWebGLRenderTarget:true,setSize:function(e,t){if(this.width!==e||this.height!==t){this.width=e;this.height=t;this.dispose()}this.viewport.set(0,0,e,t);this.scissor.set(0,0,e,t)},clone:function(){return(new this.constructor).copy(this)},copy:function(e){this.width=e.width;this.height=e.height;this.viewport.copy(e.viewport);this.texture=e.texture.clone();this.depthBuffer=e.depthBuffer;this.stencilBuffer=e.stencilBuffer;this.depthTexture=e.depthTexture;return this},dispose:function(){this.dispatchEvent({type:"dispose"})}});function Kt(e,t,r){Jt.call(this,e,t,r);this.activeCubeFace=0;this.activeMipMapLevel=0}Kt.prototype=Object.create(Jt.prototype);Kt.prototype.constructor=Kt;Kt.prototype.isWebGLRenderTargetCube=true;function Zt(e,t,r,n,i,a,o,s,u,c,l,f){Qt.call(this,null,a,o,s,u,c,n,i,l,f);this.image={data:e,width:t,height:r};this.magFilter=u!==undefined?u:be;this.minFilter=c!==undefined?c:be;this.generateMipmaps=false;this.flipY=false;this.unpackAlignment=1}Zt.prototype=Object.create(Qt.prototype);Zt.prototype.constructor=Zt;Zt.prototype.isDataTexture=true;function $t(e,t){this.min=e!==undefined?e:new Ht(+Infinity,+Infinity,+Infinity);this.max=t!==undefined?t:new Ht(-Infinity,-Infinity,-Infinity)}Object.assign($t.prototype,{isBox3:true,set:function(e,t){this.min.copy(e);this.max.copy(t);return this},setFromArray:function(e){var t=+Infinity;var r=+Infinity;var n=+Infinity;var i=-Infinity;var a=-Infinity;var o=-Infinity;for(var s=0,u=e.length;s<u;s+=3){var c=e[s];var l=e[s+1];var f=e[s+2];if(c<t)t=c;if(l<r)r=l;if(f<n)n=f;if(c>i)i=c;if(l>a)a=l;if(f>o)o=f}this.min.set(t,r,n);this.max.set(i,a,o);return this},setFromBufferAttribute:function(e){var t=+Infinity;var r=+Infinity;var n=+Infinity;var i=-Infinity;var a=-Infinity;var o=-Infinity;for(var s=0,u=e.count;s<u;s++){var c=e.getX(s);var l=e.getY(s);var f=e.getZ(s);if(c<t)t=c;if(l<r)r=l;if(f<n)n=f;if(c>i)i=c;if(l>a)a=l;if(f>o)o=f}this.min.set(t,r,n);this.max.set(i,a,o);return this},setFromPoints:function(e){this.makeEmpty();for(var t=0,r=e.length;t<r;t++){this.expandByPoint(e[t])}return this},setFromCenterAndSize:function(){var e=new Ht;return function t(r,n){var i=e.copy(n).multiplyScalar(.5);this.min.copy(r).sub(i);this.max.copy(r).add(i);return this}}(),setFromObject:function(e){this.makeEmpty();return this.expandByObject(e)},clone:function(){return(new this.constructor).copy(this)},copy:function(e){this.min.copy(e.min);this.max.copy(e.max);return this},makeEmpty:function(){this.min.x=this.min.y=this.min.z=+Infinity;this.max.x=this.max.y=this.max.z=-Infinity;return this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z},getCenter:function(e){if(e===undefined){console.warn("THREE.Box3: .getCenter() target is now required");e=new Ht}return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(e){if(e===undefined){console.warn("THREE.Box3: .getSize() target is now required");e=new Ht}return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)},expandByPoint:function(e){this.min.min(e);this.max.max(e);return this},expandByVector:function(e){this.min.sub(e);this.max.add(e);return this},expandByScalar:function(e){this.min.addScalar(-e);this.max.addScalar(e);return this},expandByObject:function(){var e,t,r;var n=new Ht;function i(i){var a=i.geometry;if(a!==undefined){if(a.isGeometry){var o=a.vertices;for(t=0,r=o.length;t<r;t++){n.copy(o[t]);n.applyMatrix4(i.matrixWorld);e.expandByPoint(n)}}else if(a.isBufferGeometry){var s=a.attributes.position;if(s!==undefined){for(t=0,r=s.count;t<r;t++){n.fromBufferAttribute(s,t).applyMatrix4(i.matrixWorld);e.expandByPoint(n)}}}}}return function t(r){e=this;r.updateMatrixWorld(true);r.traverse(i);return this}}(),containsPoint:function(e){return e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z?false:true},containsBox:function(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z},getParameter:function(e,t){if(t===undefined){console.warn("THREE.Box3: .getParameter() target is now required");t=new Ht}return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))},intersectsBox:function(e){return e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z?false:true},intersectsSphere:function(){var e=new Ht;return function t(r){this.clampPoint(r.center,e);return e.distanceToSquared(r.center)<=r.radius*r.radius}}(),intersectsPlane:function(e){var t,r;if(e.normal.x>0){t=e.normal.x*this.min.x;r=e.normal.x*this.max.x}else{t=e.normal.x*this.max.x;r=e.normal.x*this.min.x}if(e.normal.y>0){t+=e.normal.y*this.min.y;r+=e.normal.y*this.max.y}else{t+=e.normal.y*this.max.y;r+=e.normal.y*this.min.y}if(e.normal.z>0){t+=e.normal.z*this.min.z;r+=e.normal.z*this.max.z}else{t+=e.normal.z*this.max.z;r+=e.normal.z*this.min.z}return t<=-e.constant&&r>=-e.constant},intersectsTriangle:function(){var e=new Ht;var t=new Ht;var r=new Ht;var n=new Ht;var i=new Ht;var a=new Ht;var o=new Ht;var s=new Ht;var u=new Ht;var c=new Ht;function l(n){var i,a;for(i=0,a=n.length-3;i<=a;i+=3){o.fromArray(n,i);var s=u.x*Math.abs(o.x)+u.y*Math.abs(o.y)+u.z*Math.abs(o.z);var c=e.dot(o);var l=t.dot(o);var f=r.dot(o);if(Math.max(-Math.max(c,l,f),Math.min(c,l,f))>s){return false}}return true}return function o(f){if(this.isEmpty()){return false}this.getCenter(s);u.subVectors(this.max,s);e.subVectors(f.a,s);t.subVectors(f.b,s);r.subVectors(f.c,s);n.subVectors(t,e);i.subVectors(r,t);a.subVectors(e,r);var h=[0,-n.z,n.y,0,-i.z,i.y,0,-a.z,a.y,n.z,0,-n.x,i.z,0,-i.x,a.z,0,-a.x,-n.y,n.x,0,-i.y,i.x,0,-a.y,a.x,0];if(!l(h)){return false}h=[1,0,0,0,1,0,0,0,1];if(!l(h)){return false}c.crossVectors(n,i);h=[c.x,c.y,c.z];return l(h)}}(),clampPoint:function(e,t){if(t===undefined){console.warn("THREE.Box3: .clampPoint() target is now required");t=new Ht}return t.copy(e).clamp(this.min,this.max)},distanceToPoint:function(){var e=new Ht;return function t(r){var n=e.copy(r).clamp(this.min,this.max);return n.sub(r).length()}}(),getBoundingSphere:function(){var e=new Ht;return function t(r){if(r===undefined){console.warn("THREE.Box3: .getBoundingSphere() target is now required");r=new er}this.getCenter(r.center);r.radius=this.getSize(e).length()*.5;return r}}(),intersect:function(e){this.min.max(e.min);this.max.min(e.max);if(this.isEmpty())this.makeEmpty();return this},union:function(e){this.min.min(e.min);this.max.max(e.max);return this},applyMatrix4:function(){var e=[new Ht,new Ht,new Ht,new Ht,new Ht,new Ht,new Ht,new Ht];return function t(r){if(this.isEmpty())return this;e[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(r);e[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(r);e[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(r);e[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(r);e[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(r);e[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(r);e[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(r);e[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(r);this.setFromPoints(e);return this}}(),translate:function(e){this.min.add(e);this.max.add(e);return this},equals:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)}});function er(e,t){this.center=e!==undefined?e:new Ht;this.radius=t!==undefined?t:0}Object.assign(er.prototype,{set:function(e,t){this.center.copy(e);this.radius=t;return this},setFromPoints:function(){var e=new $t;return function t(r,n){var i=this.center;if(n!==undefined){i.copy(n)}else{e.setFromPoints(r).getCenter(i)}var a=0;for(var o=0,s=r.length;o<s;o++){a=Math.max(a,i.distanceToSquared(r[o]))}this.radius=Math.sqrt(a);return this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(e){this.center.copy(e.center);this.radius=e.radius;return this},empty:function(){return this.radius<=0},containsPoint:function(e){return e.distanceToSquared(this.center)<=this.radius*this.radius},distanceToPoint:function(e){return e.distanceTo(this.center)-this.radius},intersectsSphere:function(e){var t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t},intersectsBox:function(e){return e.intersectsSphere(this)},intersectsPlane:function(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius},clampPoint:function(e,t){var r=this.center.distanceToSquared(e);if(t===undefined){console.warn("THREE.Sphere: .clampPoint() target is now required");t=new Ht}t.copy(e);if(r>this.radius*this.radius){t.sub(this.center).normalize();t.multiplyScalar(this.radius).add(this.center)}return t},getBoundingBox:function(e){if(e===undefined){console.warn("THREE.Sphere: .getBoundingBox() target is now required");e=new $t}e.set(this.center,this.center);e.expandByScalar(this.radius);return e},applyMatrix4:function(e){this.center.applyMatrix4(e);this.radius=this.radius*e.getMaxScaleOnAxis();return this},translate:function(e){this.center.add(e);return this},equals:function(e){return e.center.equals(this.center)&&e.radius===this.radius}});function tr(e,t){this.normal=e!==undefined?e:new Ht(1,0,0);this.constant=t!==undefined?t:0}Object.assign(tr.prototype,{set:function(e,t){this.normal.copy(e);this.constant=t;return this},setComponents:function(e,t,r,n){this.normal.set(e,t,r);this.constant=n;return this},setFromNormalAndCoplanarPoint:function(e,t){this.normal.copy(e);this.constant=-t.dot(this.normal);return this},setFromCoplanarPoints:function(){var e=new Ht;var t=new Ht;return function r(n,i,a){var o=e.subVectors(a,i).cross(t.subVectors(n,i)).normalize();this.setFromNormalAndCoplanarPoint(o,n);return this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(e){this.normal.copy(e.normal);this.constant=e.constant;return this},normalize:function(){var e=1/this.normal.length();this.normal.multiplyScalar(e);this.constant*=e;return this},negate:function(){this.constant*=-1;this.normal.negate();return this},distanceToPoint:function(e){return this.normal.dot(e)+this.constant},distanceToSphere:function(e){return this.distanceToPoint(e.center)-e.radius},projectPoint:function(e,t){if(t===undefined){console.warn("THREE.Plane: .projectPoint() target is now required");t=new Ht}return t.copy(this.normal).multiplyScalar(-this.distanceToPoint(e)).add(e)},intersectLine:function(){var e=new Ht;return function t(r,n){if(n===undefined){console.warn("THREE.Plane: .intersectLine() target is now required");n=new Ht}var i=r.delta(e);var a=this.normal.dot(i);if(a===0){if(this.distanceToPoint(r.start)===0){return n.copy(r.start)}return undefined}var o=-(r.start.dot(this.normal)+this.constant)/a;if(o<0||o>1){return undefined}return n.copy(i).multiplyScalar(o).add(r.start)}}(),intersectsLine:function(e){var t=this.distanceToPoint(e.start);var r=this.distanceToPoint(e.end);return t<0&&r>0||r<0&&t>0},intersectsBox:function(e){return e.intersectsPlane(this)},intersectsSphere:function(e){return e.intersectsPlane(this)},coplanarPoint:function(e){if(e===undefined){console.warn("THREE.Plane: .coplanarPoint() target is now required");e=new Ht}return e.copy(this.normal).multiplyScalar(-this.constant)},applyMatrix4:function(){var e=new Ht;var t=new Vt;return function r(n,i){var a=i||t.getNormalMatrix(n);var o=this.coplanarPoint(e).applyMatrix4(n);var s=this.normal.applyMatrix3(a).normalize();this.constant=-o.dot(s);return this}}(),translate:function(e){this.constant-=e.dot(this.normal);return this},equals:function(e){return e.normal.equals(this.normal)&&e.constant===this.constant}});function rr(e,t,r,n,i,a){this.planes=[e!==undefined?e:new tr,t!==undefined?t:new tr,r!==undefined?r:new tr,n!==undefined?n:new tr,i!==undefined?i:new tr,a!==undefined?a:new tr]}Object.assign(rr.prototype,{set:function(e,t,r,n,i,a){var o=this.planes;o[0].copy(e);o[1].copy(t);o[2].copy(r);o[3].copy(n);o[4].copy(i);o[5].copy(a);return this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){var t=this.planes;for(var r=0;r<6;r++){t[r].copy(e.planes[r])}return this},setFromMatrix:function(e){var t=this.planes;var r=e.elements;var n=r[0],i=r[1],a=r[2],o=r[3];var s=r[4],u=r[5],c=r[6],l=r[7];var f=r[8],h=r[9],d=r[10],p=r[11];var v=r[12],m=r[13],g=r[14],y=r[15];t[0].setComponents(o-n,l-s,p-f,y-v).normalize();t[1].setComponents(o+n,l+s,p+f,y+v).normalize();t[2].setComponents(o+i,l+u,p+h,y+m).normalize();t[3].setComponents(o-i,l-u,p-h,y-m).normalize();t[4].setComponents(o-a,l-c,p-d,y-g).normalize();t[5].setComponents(o+a,l+c,p+d,y+g).normalize();return this},intersectsObject:function(){var e=new er;return function t(r){var n=r.geometry;if(n.boundingSphere===null)n.computeBoundingSphere();e.copy(n.boundingSphere).applyMatrix4(r.matrixWorld);return this.intersectsSphere(e)}}(),intersectsSprite:function(){var e=new er;return function t(r){e.center.set(0,0,0);e.radius=.7071067811865476;e.applyMatrix4(r.matrixWorld);return this.intersectsSphere(e)}}(),intersectsSphere:function(e){var t=this.planes;var r=e.center;var n=-e.radius;for(var i=0;i<6;i++){var a=t[i].distanceToPoint(r);if(a<n){return false}}return true},intersectsBox:function(){var e=new Ht;return function t(r){var n=this.planes;for(var i=0;i<6;i++){var a=n[i];e.x=a.normal.x>0?r.max.x:r.min.x;e.y=a.normal.y>0?r.max.y:r.min.y;e.z=a.normal.z>0?r.max.z:r.min.z;if(a.distanceToPoint(e)<0){return false}}return true}}(),containsPoint:function(e){var t=this.planes;for(var r=0;r<6;r++){if(t[r].distanceToPoint(e)<0){return false}}return true}});var nr="#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif";var ir="#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif";var ar="#ifdef ALPHATEST\n\tif ( diffuseColor.a < ALPHATEST ) discard;\n#endif";var or="#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( PHYSICAL )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );\n\t#endif\n#endif";var sr="#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif";var ur="vec3 transformed = vec3( position );";var cr="vec3 objectNormal = vec3( normal );";var lr="float punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\tif( cutoffDistance > 0.0 ) {\n\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t}\n\treturn distanceFalloff;\n#else\n\tif( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\treturn pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t}\n\treturn 1.0;\n#endif\n}\nvec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );\n\treturn ( 1.0 - specularColor ) * fresnel + specularColor;\n}\nfloat G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\tfloat gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\treturn 1.0 / ( gl * gv );\n}\nfloat G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNL = saturate( dot( geometry.normal, incidentLight.direction ) );\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( G * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE  = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS  = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\nvec3 BRDF_Specular_GGX_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 AB = vec2( -1.04, 1.04 ) * a004 + r.zw;\n\treturn specularColor * AB.x + AB.y;\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\nfloat GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {\n\treturn ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );\n}\nfloat BlinnExponentToGGXRoughness( const in float blinnExponent ) {\n\treturn sqrt( 2.0 / ( blinnExponent + 2.0 ) );\n}";var fr="#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\n\t\tvec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\n\t\tvec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 );\n\t\tfDet *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif";var hr="#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vViewPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vViewPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\tif ( clipped ) discard;\n\t#endif\n#endif";var dr="#if NUM_CLIPPING_PLANES > 0\n\t#if ! defined( PHYSICAL ) && ! defined( PHONG ) && ! defined( MATCAP )\n\t\tvarying vec3 vViewPosition;\n\t#endif\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif";var pr="#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG ) && ! defined( MATCAP )\n\tvarying vec3 vViewPosition;\n#endif";var vr="#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG ) && ! defined( MATCAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif";var mr="#ifdef USE_COLOR\n\tdiffuseColor.rgb *= vColor;\n#endif";var gr="#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif";var yr="#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif";var br="#ifdef USE_COLOR\n\tvColor.xyz = color.xyz;\n#endif";var xr="#define PI 3.14159265359\n#define PI2 6.28318530718\n#define PI_HALF 1.5707963267949\n#define RECIPROCAL_PI 0.31830988618\n#define RECIPROCAL_PI2 0.15915494\n#define LOG2 1.442695\n#define EPSILON 1e-6\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#define whiteCompliment(a) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract(sin(sn) * c);\n}\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\tfloat distance = dot( planeNormal, point - pointOnPlane );\n\treturn - distance * planeNormal + point;\n}\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn sign( dot( point - pointOnPlane, planeNormal ) );\n}\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat linearToRelativeLuminance( const in vec3 color ) {\n\tvec3 weights = vec3( 0.2126, 0.7152, 0.0722 );\n\treturn dot( weights, color.rgb );\n}";var wr="#ifdef ENVMAP_TYPE_CUBE_UV\n#define cubeUV_textureSize (1024.0)\nint getFaceFromDirection(vec3 direction) {\n\tvec3 absDirection = abs(direction);\n\tint face = -1;\n\tif( absDirection.x > absDirection.z ) {\n\t\tif(absDirection.x > absDirection.y )\n\t\t\tface = direction.x > 0.0 ? 0 : 3;\n\t\telse\n\t\t\tface = direction.y > 0.0 ? 1 : 4;\n\t}\n\telse {\n\t\tif(absDirection.z > absDirection.y )\n\t\t\tface = direction.z > 0.0 ? 2 : 5;\n\t\telse\n\t\t\tface = direction.y > 0.0 ? 1 : 4;\n\t}\n\treturn face;\n}\n#define cubeUV_maxLods1  (log2(cubeUV_textureSize*0.25) - 1.0)\n#define cubeUV_rangeClamp (exp2((6.0 - 1.0) * 2.0))\nvec2 MipLevelInfo( vec3 vec, float roughnessLevel, float roughness ) {\n\tfloat scale = exp2(cubeUV_maxLods1 - roughnessLevel);\n\tfloat dxRoughness = dFdx(roughness);\n\tfloat dyRoughness = dFdy(roughness);\n\tvec3 dx = dFdx( vec * scale * dxRoughness );\n\tvec3 dy = dFdy( vec * scale * dyRoughness );\n\tfloat d = max( dot( dx, dx ), dot( dy, dy ) );\n\td = clamp(d, 1.0, cubeUV_rangeClamp);\n\tfloat mipLevel = 0.5 * log2(d);\n\treturn vec2(floor(mipLevel), fract(mipLevel));\n}\n#define cubeUV_maxLods2 (log2(cubeUV_textureSize*0.25) - 2.0)\n#define cubeUV_rcpTextureSize (1.0 / cubeUV_textureSize)\nvec2 getCubeUV(vec3 direction, float roughnessLevel, float mipLevel) {\n\tmipLevel = roughnessLevel > cubeUV_maxLods2 - 3.0 ? 0.0 : mipLevel;\n\tfloat a = 16.0 * cubeUV_rcpTextureSize;\n\tvec2 exp2_packed = exp2( vec2( roughnessLevel, mipLevel ) );\n\tvec2 rcp_exp2_packed = vec2( 1.0 ) / exp2_packed;\n\tfloat powScale = exp2_packed.x * exp2_packed.y;\n\tfloat scale = rcp_exp2_packed.x * rcp_exp2_packed.y * 0.25;\n\tfloat mipOffset = 0.75*(1.0 - rcp_exp2_packed.y) * rcp_exp2_packed.x;\n\tbool bRes = mipLevel == 0.0;\n\tscale =  bRes && (scale < a) ? a : scale;\n\tvec3 r;\n\tvec2 offset;\n\tint face = getFaceFromDirection(direction);\n\tfloat rcpPowScale = 1.0 / powScale;\n\tif( face == 0) {\n\t\tr = vec3(direction.x, -direction.z, direction.y);\n\t\toffset = vec2(0.0+mipOffset,0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 1) {\n\t\tr = vec3(direction.y, direction.x, direction.z);\n\t\toffset = vec2(scale+mipOffset, 0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 2) {\n\t\tr = vec3(direction.z, direction.x, direction.y);\n\t\toffset = vec2(2.0*scale+mipOffset, 0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 3) {\n\t\tr = vec3(direction.x, direction.z, direction.y);\n\t\toffset = vec2(0.0+mipOffset,0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\telse if( face == 4) {\n\t\tr = vec3(direction.y, direction.x, -direction.z);\n\t\toffset = vec2(scale+mipOffset, 0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\telse {\n\t\tr = vec3(direction.z, -direction.x, direction.y);\n\t\toffset = vec2(2.0*scale+mipOffset, 0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\tr = normalize(r);\n\tfloat texelOffset = 0.5 * cubeUV_rcpTextureSize;\n\tvec2 s = ( r.yz / abs( r.x ) + vec2( 1.0 ) ) * 0.5;\n\tvec2 base = offset + vec2( texelOffset );\n\treturn base + s * ( scale - 2.0 * texelOffset );\n}\n#define cubeUV_maxLods3 (log2(cubeUV_textureSize*0.25) - 3.0)\nvec4 textureCubeUV( sampler2D envMap, vec3 reflectedDirection, float roughness ) {\n\tfloat roughnessVal = roughness* cubeUV_maxLods3;\n\tfloat r1 = floor(roughnessVal);\n\tfloat r2 = r1 + 1.0;\n\tfloat t = fract(roughnessVal);\n\tvec2 mipInfo = MipLevelInfo(reflectedDirection, r1, roughness);\n\tfloat s = mipInfo.y;\n\tfloat level0 = mipInfo.x;\n\tfloat level1 = level0 + 1.0;\n\tlevel1 = level1 > 5.0 ? 5.0 : level1;\n\tlevel0 += min( floor( s + 0.5 ), 5.0 );\n\tvec2 uv_10 = getCubeUV(reflectedDirection, r1, level0);\n\tvec4 color10 = envMapTexelToLinear(texture2D(envMap, uv_10));\n\tvec2 uv_20 = getCubeUV(reflectedDirection, r2, level0);\n\tvec4 color20 = envMapTexelToLinear(texture2D(envMap, uv_20));\n\tvec4 result = mix(color10, color20, t);\n\treturn vec4(result.rgb, 1.0);\n}\n#endif";var Ar="vec3 transformedNormal = normalMatrix * objectNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif";var Mr="#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif";var Er="#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, uv ).x * displacementScale + displacementBias );\n#endif";var Sr="#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\temissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif";var Tr="#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif";var _r="gl_FragColor = linearToOutputTexel( gl_FragColor );";var Pr="\nvec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( gammaFactor ) ), value.a );\n}\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( 1.0 / gammaFactor ) ), value.a );\n}\nvec4 sRGBToLinear( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}\nvec4 RGBEToLinear( in vec4 value ) {\n\treturn vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\n}\nvec4 LinearToRGBE( in vec4 value ) {\n\tfloat maxComponent = max( max( value.r, value.g ), value.b );\n\tfloat fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\n\treturn vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\n}\nvec4 RGBMToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * value.a * maxRange, 1.0 );\n}\nvec4 LinearToRGBM( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat M = clamp( maxRGB / maxRange, 0.0, 1.0 );\n\tM = ceil( M * 255.0 ) / 255.0;\n\treturn vec4( value.rgb / ( M * maxRange ), M );\n}\nvec4 RGBDToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\n}\nvec4 LinearToRGBD( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat D = max( maxRange / maxRGB, 1.0 );\n\tD = min( floor( D ) / 255.0, 1.0 );\n\treturn vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\n}\nconst mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );\nvec4 LinearToLogLuv( in vec4 value )  {\n\tvec3 Xp_Y_XYZp = value.rgb * cLogLuvM;\n\tXp_Y_XYZp = max( Xp_Y_XYZp, vec3( 1e-6, 1e-6, 1e-6 ) );\n\tvec4 vResult;\n\tvResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;\n\tfloat Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;\n\tvResult.w = fract( Le );\n\tvResult.z = ( Le - ( floor( vResult.w * 255.0 ) ) / 255.0 ) / 255.0;\n\treturn vResult;\n}\nconst mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );\nvec4 LogLuvToLinear( in vec4 value ) {\n\tfloat Le = value.z * 255.0 + value.w;\n\tvec3 Xp_Y_XYZp;\n\tXp_Y_XYZp.y = exp2( ( Le - 127.0 ) / 2.0 );\n\tXp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;\n\tXp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;\n\tvec3 vRGB = Xp_Y_XYZp.rgb * cLogLuvInverseM;\n\treturn vec4( max( vRGB, 0.0 ), 1.0 );\n}";var Cr="#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvec3 cameraToVertex = normalize( vWorldPosition - cameraPosition );\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\tvec2 sampleUV;\n\t\treflectVec = normalize( reflectVec );\n\t\tsampleUV.y = asin( clamp( reflectVec.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\t\tsampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\tvec4 envColor = texture2D( envMap, sampleUV );\n\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\treflectVec = normalize( reflectVec );\n\t\tvec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0, 0.0, 1.0 ) );\n\t\tvec4 envColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5 );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\tenvColor = envMapTexelToLinear( envColor );\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif";var Or="#if defined( USE_ENVMAP ) || defined( PHYSICAL )\n\tuniform float reflectivity;\n\tuniform float envMapIntensity;\n#endif\n#ifdef USE_ENVMAP\n\t#if ! defined( PHYSICAL ) && ( defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) )\n\t\tvarying vec3 vWorldPosition;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\tuniform float flipEnvMap;\n\tuniform int maxMipLevel;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( PHYSICAL )\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif";var Lr="#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif";var Rr="#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif";var Br="#ifdef USE_FOG\n\tfogDepth = -mvPosition.z;\n#endif";var Dr="#ifdef USE_FOG\n\tvarying float fogDepth;\n#endif";var Ir="#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = whiteCompliment( exp2( - fogDensity * fogDensity * fogDepth * fogDepth * LOG2 ) );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, fogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif";var Fr="#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float fogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif";var Ur="#ifdef TOON\n\tuniform sampler2D gradientMap;\n\tvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\t\tfloat dotNL = dot( normal, lightDirection );\n\t\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t\t#ifdef USE_GRADIENTMAP\n\t\t\treturn texture2D( gradientMap, coord ).rgb;\n\t\t#else\n\t\t\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n\t\t#endif\n\t}\n#endif";var Gr="#ifdef USE_LIGHTMAP\n\treflectedLight.indirectDiffuse += PI * texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n#endif";var jr="#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif";var zr="vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\n#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tgetPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tgetSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tgetDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\tvLightFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );\n\t\t#endif\n\t}\n#endif";var Nr="uniform vec3 ambientLightColor;\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treturn irradiance;\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tdirectLight.color = directionalLight.color;\n\t\tdirectLight.direction = directionalLight.direction;\n\t\tdirectLight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t\tfloat shadowCameraNear;\n\t\tfloat shadowCameraFar;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tdirectLight.color = pointLight.color;\n\t\tdirectLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );\n\t\tdirectLight.visible = ( directLight.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight  ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tfloat angleCos = dot( directLight.direction, spotLight.direction );\n\t\tif ( angleCos > spotLight.coneCos ) {\n\t\t\tfloat spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\t\tdirectLight.color = spotLight.color;\n\t\t\tdirectLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tdirectLight.visible = true;\n\t\t} else {\n\t\t\tdirectLight.color = vec3( 0.0 );\n\t\t\tdirectLight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {\n\t\tfloat dotNL = dot( geometry.normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tirradiance *= PI;\n\t\t#endif\n\t\treturn irradiance;\n\t}\n#endif";var kr="#if defined( USE_ENVMAP ) && defined( PHYSICAL )\n\tvec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {\n\t\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, queryVec, 1.0 );\n\t\t#else\n\t\t\tvec4 envMapColor = vec4( 0.0 );\n\t\t#endif\n\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t}\n\tfloat getSpecularMIPLevel( const in float blinnShininessExponent, const in int maxMIPLevel ) {\n\t\tfloat maxMIPLevelScalar = float( maxMIPLevel );\n\t\tfloat desiredMIPLevel = maxMIPLevelScalar + 0.79248 - 0.5 * log2( pow2( blinnShininessExponent ) + 1.0 );\n\t\treturn clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );\n\t}\n\tvec3 getLightProbeIndirectRadiance( const in GeometricContext geometry, const in float blinnShininessExponent, const in int maxMIPLevel ) {\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( -geometry.viewDir, geometry.normal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( -geometry.viewDir, geometry.normal, refractionRatio );\n\t\t#endif\n\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\tfloat specularMIPLevel = getSpecularMIPLevel( blinnShininessExponent, maxMIPLevel );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, queryReflectVec, BlinnExponentToGGXRoughness(blinnShininessExponent ));\n\t\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\t\tvec2 sampleUV;\n\t\t\tsampleUV.y = asin( clamp( reflectVec.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\t\t\tsampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, sampleUV, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, sampleUV, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\t\tvec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0,0.0,1.0 ) );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#endif\n\t\treturn envMapColor.rgb * envMapIntensity;\n\t}\n#endif";var Hr="BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;";var Vr="varying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\nstruct BlinnPhongMaterial {\n\tvec3\tdiffuseColor;\n\tvec3\tspecularColor;\n\tfloat\tspecularShininess;\n\tfloat\tspecularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\t#ifdef TOON\n\t\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\t#else\n\t\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\t\tvec3 irradiance = dotNL * directLight.color;\n\t#endif\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)";var Wr="PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nmaterial.specularRoughness = clamp( roughnessFactor, 0.04, 1.0 );\n#ifdef STANDARD\n\tmaterial.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.clearCoat = saturate( clearCoat );\tmaterial.clearCoatRoughness = clamp( clearCoatRoughness, 0.04, 1.0 );\n#endif";var Yr="struct PhysicalMaterial {\n\tvec3\tdiffuseColor;\n\tfloat\tspecularRoughness;\n\tvec3\tspecularColor;\n\t#ifndef STANDARD\n\t\tfloat clearCoat;\n\t\tfloat clearCoatRoughness;\n\t#endif\n};\n#define MAXIMUM_SPECULAR_COEFFICIENT 0.16\n#define DEFAULT_SPECULAR_COEFFICIENT 0.04\nfloat clearCoatDHRApprox( const in float roughness, const in float dotNL ) {\n\treturn DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.specularRoughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos - halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos + halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos + halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos - halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\t#ifndef STANDARD\n\t\tfloat clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );\n\t#else\n\t\tfloat clearCoatDHR = 0.0;\n\t#endif\n\treflectedLight.directSpecular += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry, material.specularColor, material.specularRoughness );\n\treflectedLight.directDiffuse += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\t#ifndef STANDARD\n\t\treflectedLight.directSpecular += irradiance * material.clearCoat * BRDF_Specular_GGX( directLight, geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );\n\t#endif\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 clearCoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t#ifndef STANDARD\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\tfloat dotNL = dotNV;\n\t\tfloat clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );\n\t#else\n\t\tfloat clearCoatDHR = 0.0;\n\t#endif\n\treflectedLight.indirectSpecular += ( 1.0 - clearCoatDHR ) * radiance * BRDF_Specular_GGX_Environment( geometry, material.specularColor, material.specularRoughness );\n\t#ifndef STANDARD\n\t\treflectedLight.indirectSpecular += clearCoatRadiance * material.clearCoat * BRDF_Specular_GGX_Environment( geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );\n\t#endif\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\n#define Material_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.specularRoughness )\n#define Material_ClearCoat_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.clearCoatRoughness )\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}";var Xr="\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = normalize( vViewPosition );\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointDirectLightIrradiance( pointLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( pointLight.shadow, directLight.visible ) ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotDirectLightIrradiance( spotLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( spotLight.shadow, directLight.visible ) ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( directionalLight.shadow, directLight.visible ) ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t}\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearCoatRadiance = vec3( 0.0 );\n#endif";var Qr="#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec3 lightMapIrradiance = texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tlightMapIrradiance *= PI;\n\t\t#endif\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( PHYSICAL ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tirradiance += getLightProbeIndirectIrradiance( geometry, maxMipLevel );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getLightProbeIndirectRadiance( geometry, Material_BlinnShininessExponent( material ), maxMipLevel );\n\t#ifndef STANDARD\n\t\tclearCoatRadiance += getLightProbeIndirectRadiance( geometry, Material_ClearCoat_BlinnShininessExponent( material ), maxMipLevel );\n\t#endif\n#endif";var qr="#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, clearCoatRadiance, geometry, material, reflectedLight );\n#endif";var Jr="#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif";var Kr="#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n#endif";var Zr="#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif";var $r="#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t#else\n\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\tgl_Position.z *= gl_Position.w;\n\t#endif\n#endif";var en="#ifdef USE_MAP\n\tvec4 texelColor = texture2D( map, vUv );\n\ttexelColor = mapTexelToLinear( texelColor );\n\tdiffuseColor *= texelColor;\n#endif";var tn="#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif";var rn="#ifdef USE_MAP\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n\tvec4 mapTexel = texture2D( map, uv );\n\tdiffuseColor *= mapTexelToLinear( mapTexel );\n#endif";var nn="#ifdef USE_MAP\n\tuniform mat3 uvTransform;\n\tuniform sampler2D map;\n#endif";var an="float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif";var on="#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif";var sn="#ifdef USE_MORPHNORMALS\n\tobjectNormal += ( morphNormal0 - normal ) * morphTargetInfluences[ 0 ];\n\tobjectNormal += ( morphNormal1 - normal ) * morphTargetInfluences[ 1 ];\n\tobjectNormal += ( morphNormal2 - normal ) * morphTargetInfluences[ 2 ];\n\tobjectNormal += ( morphNormal3 - normal ) * morphTargetInfluences[ 3 ];\n#endif";var un="#ifdef USE_MORPHTARGETS\n\t#ifndef USE_MORPHNORMALS\n\tuniform float morphTargetInfluences[ 8 ];\n\t#else\n\tuniform float morphTargetInfluences[ 4 ];\n\t#endif\n#endif";var cn="#ifdef USE_MORPHTARGETS\n\ttransformed += ( morphTarget0 - position ) * morphTargetInfluences[ 0 ];\n\ttransformed += ( morphTarget1 - position ) * morphTargetInfluences[ 1 ];\n\ttransformed += ( morphTarget2 - position ) * morphTargetInfluences[ 2 ];\n\ttransformed += ( morphTarget3 - position ) * morphTargetInfluences[ 3 ];\n\t#ifndef USE_MORPHNORMALS\n\ttransformed += ( morphTarget4 - position ) * morphTargetInfluences[ 4 ];\n\ttransformed += ( morphTarget5 - position ) * morphTargetInfluences[ 5 ];\n\ttransformed += ( morphTarget6 - position ) * morphTargetInfluences[ 6 ];\n\ttransformed += ( morphTarget7 - position ) * morphTargetInfluences[ 7 ];\n\t#endif\n#endif";var ln="#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t#endif\n#endif";var fn="#ifdef USE_NORMALMAP\n\t#ifdef OBJECTSPACE_NORMALMAP\n\t\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t\t#ifdef FLIP_SIDED\n\t\t\tnormal = - normal;\n\t\t#endif\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\t#endif\n\t\tnormal = normalize( normalMatrix * normal );\n\t#else\n\t\tnormal = perturbNormal2Arb( -vViewPosition, normal );\n\t#endif\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\n#endif";var hn="#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n\t#ifdef OBJECTSPACE_NORMALMAP\n\t\tuniform mat3 normalMatrix;\n\t#else\n\t\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm ) {\n\t\t\tvec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\n\t\t\tvec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\n\t\t\tvec2 st0 = dFdx( vUv.st );\n\t\t\tvec2 st1 = dFdy( vUv.st );\n\t\t\tfloat scale = sign( st1.t * st0.s - st0.t * st1.s );\n\t\t\tvec3 S = normalize( ( q0 * st1.t - q1 * st0.t ) * scale );\n\t\t\tvec3 T = normalize( ( - q0 * st1.s + q1 * st0.s ) * scale );\n\t\t\tvec3 N = normalize( surf_norm );\n\t\t\tmat3 tsn = mat3( S, T, N );\n\t\t\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t\t\tmapN.xy *= normalScale;\n\t\t\tmapN.xy *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\t\treturn normalize( tsn * mapN );\n\t\t}\n\t#endif\n#endif";var dn="vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256.,  256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn (( near + viewZ ) * far ) / (( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}";var pn="#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif";var vn="vec4 mvPosition = modelViewMatrix * vec4( transformed, 1.0 );\ngl_Position = projectionMatrix * mvPosition;";var mn="#if defined( DITHERING )\n  gl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif";var gn="#if defined( DITHERING )\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif";var yn="float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif";var bn="#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif";var xn="#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHTS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHTS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHTS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tfloat texture2DShadowLerp( sampler2D depths, vec2 size, vec2 uv, float compare ) {\n\t\tconst vec2 offset = vec2( 0.0, 1.0 );\n\t\tvec2 texelSize = vec2( 1.0 ) / size;\n\t\tvec2 centroidUV = floor( uv * size + 0.5 ) / size;\n\t\tfloat lb = texture2DCompare( depths, centroidUV + texelSize * offset.xx, compare );\n\t\tfloat lt = texture2DCompare( depths, centroidUV + texelSize * offset.xy, compare );\n\t\tfloat rb = texture2DCompare( depths, centroidUV + texelSize * offset.yx, compare );\n\t\tfloat rt = texture2DCompare( depths, centroidUV + texelSize * offset.yy, compare );\n\t\tvec2 f = fract( uv * size + 0.5 );\n\t\tfloat a = mix( lb, lt, f.y );\n\t\tfloat b = mix( rb, rt, f.y );\n\t\tfloat c = mix( a, b, f.x );\n\t\treturn c;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tshadow = (\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif";var wn="#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHTS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHTS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHTS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\n\t#endif\n#endif";var An="#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n#endif";var Mn="float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\tDirectionalLight directionalLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tshadow *= bool( directionalLight.shadow ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\tSpotLight spotLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tshadow *= bool( spotLight.shadow ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\tPointLight pointLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tshadow *= bool( pointLight.shadow ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#endif\n\t#endif\n\treturn shadow;\n}";var En="#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif";var Sn="#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\t#ifdef BONE_TEXTURE\n\t\tuniform sampler2D boneTexture;\n\t\tuniform int boneTextureSize;\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\t\ty = dy * ( y + 0.5 );\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\t\treturn bone;\n\t\t}\n\t#else\n\t\tuniform mat4 boneMatrices[ MAX_BONES ];\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tmat4 bone = boneMatrices[ int(i) ];\n\t\t\treturn bone;\n\t\t}\n\t#endif\n#endif";var Tn="#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif";var _n="#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix  = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n#endif";var Pn="float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif";var Cn="#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif";var On="#if defined( TONE_MAPPING )\n  gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif";var Ln="#ifndef saturate\n\t#define saturate(a) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nuniform float toneMappingWhitePoint;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\n#define Uncharted2Helper( x ) max( ( ( x * ( 0.15 * x + 0.10 * 0.50 ) + 0.20 * 0.02 ) / ( x * ( 0.15 * x + 0.50 ) + 0.20 * 0.30 ) ) - 0.02 / 0.30, vec3( 0.0 ) )\nvec3 Uncharted2ToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( Uncharted2Helper( color ) / Uncharted2Helper( vec3( toneMappingWhitePoint ) ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( ( color * ( 2.51 * color + 0.03 ) ) / ( color * ( 2.43 * color + 0.59 ) + 0.14 ) );\n}";var Rn="#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvarying vec2 vUv;\n#endif";var Bn="#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvarying vec2 vUv;\n\tuniform mat3 uvTransform;\n#endif";var Dn="#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif";var In="#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif";var Fn="#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n#endif";var Un="#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = uv2;\n#endif";var Gn="#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP )\n\tvec4 worldPosition = modelMatrix * vec4( transformed, 1.0 );\n#endif";var jn="uniform sampler2D t2D;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 texColor = texture2D( t2D, vUv );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}";var zn="varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}";var Nn="uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldDirection;\nvoid main() {\n\tvec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}";var kn="varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}";var Hn="#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - gl_FragCoord.z ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( gl_FragCoord.z );\n\t#endif\n}";var Vn="#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n}";var Wn="#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}";var Yn="#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}";var Xn="uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV;\n\tsampleUV.y = asin( clamp( direction.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\tsampleUV.x = atan( direction.z, direction.x ) * RECIPROCAL_PI2 + 0.5;\n\tvec4 texColor = texture2D( tEquirect, sampleUV );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}";var Qn="varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}";var qn="uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}";var Jn="uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\tvLineDistance = scale * lineDistance;\n\tvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}";var Kn="uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\treflectedLight.indirectDiffuse += texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}";var Zn="#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_ENVMAP\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}";var $n="uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\treflectedLight.indirectDiffuse = getAmbientLightIrradiance( ambientLightColor );\n\t#include <lightmap_fragment>\n\treflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\t#else\n\t\treflectedLight.directDiffuse = vLightFront;\n\t#endif\n\treflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}";var ei="#define LAMBERT\nvarying vec3 vLightFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}";var ti="#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t\tmatcapColor = matcapTexelToLinear( matcapColor );\n\t#else\n\t\tvec4 matcapColor = vec4( 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}";var ri="#define MATCAP\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#ifndef FLAT_SHADED\n\t\tvNormal = normalize( transformedNormal );\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}";var ni="#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}";var ii="#define PHONG\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}";var ai="#define PHYSICAL\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifndef STANDARD\n\tuniform float clearCoat;\n\tuniform float clearCoatRoughness;\n#endif\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <bsdfs>\n#include <cube_uv_reflection_fragment>\n#include <envmap_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <lights_physical_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}";var oi="#define PHYSICAL\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}";var si="#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || ( defined( USE_NORMALMAP ) && ! defined( OBJECTSPACE_NORMALMAP ) )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\nvoid main() {\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n}";var ui="#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || ( defined( USE_NORMALMAP ) && ! defined( OBJECTSPACE_NORMALMAP ) )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || ( defined( USE_NORMALMAP ) && ! defined( OBJECTSPACE_NORMALMAP ) )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}";var ci="uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}";var li="uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = ( projectionMatrix[ 2 ][ 3 ] == - 1.0 );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}";var fi="uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <fog_fragment>\n}";var hi="#include <fog_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}";var di="uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}";var pi="uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = ( projectionMatrix[ 2 ][ 3 ] == - 1.0 );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}";var vi={alphamap_fragment:nr,alphamap_pars_fragment:ir,alphatest_fragment:ar,aomap_fragment:or,aomap_pars_fragment:sr,begin_vertex:ur,beginnormal_vertex:cr,bsdfs:lr,bumpmap_pars_fragment:fr,clipping_planes_fragment:hr,clipping_planes_pars_fragment:dr,clipping_planes_pars_vertex:pr,clipping_planes_vertex:vr,color_fragment:mr,color_pars_fragment:gr,color_pars_vertex:yr,color_vertex:br,common:xr,cube_uv_reflection_fragment:wr,defaultnormal_vertex:Ar,displacementmap_pars_vertex:Mr,displacementmap_vertex:Er,emissivemap_fragment:Sr,emissivemap_pars_fragment:Tr,encodings_fragment:_r,encodings_pars_fragment:Pr,envmap_fragment:Cr,envmap_pars_fragment:Or,envmap_pars_vertex:Lr,envmap_physical_pars_fragment:kr,envmap_vertex:Rr,fog_vertex:Br,fog_pars_vertex:Dr,fog_fragment:Ir,fog_pars_fragment:Fr,gradientmap_pars_fragment:Ur,lightmap_fragment:Gr,lightmap_pars_fragment:jr,lights_lambert_vertex:zr,lights_pars_begin:Nr,lights_phong_fragment:Hr,lights_phong_pars_fragment:Vr,lights_physical_fragment:Wr,lights_physical_pars_fragment:Yr,lights_fragment_begin:Xr,lights_fragment_maps:Qr,lights_fragment_end:qr,logdepthbuf_fragment:Jr,logdepthbuf_pars_fragment:Kr,logdepthbuf_pars_vertex:Zr,logdepthbuf_vertex:$r,map_fragment:en,map_pars_fragment:tn,map_particle_fragment:rn,map_particle_pars_fragment:nn,metalnessmap_fragment:an,metalnessmap_pars_fragment:on,morphnormal_vertex:sn,morphtarget_pars_vertex:un,morphtarget_vertex:cn,normal_fragment_begin:ln,normal_fragment_maps:fn,normalmap_pars_fragment:hn,packing:dn,premultiplied_alpha_fragment:pn,project_vertex:vn,dithering_fragment:mn,dithering_pars_fragment:gn,roughnessmap_fragment:yn,roughnessmap_pars_fragment:bn,shadowmap_pars_fragment:xn,shadowmap_pars_vertex:wn,shadowmap_vertex:An,shadowmask_pars_fragment:Mn,skinbase_vertex:En,skinning_pars_vertex:Sn,skinning_vertex:Tn,skinnormal_vertex:_n,specularmap_fragment:Pn,specularmap_pars_fragment:Cn,tonemapping_fragment:On,tonemapping_pars_fragment:Ln,uv_pars_fragment:Rn,uv_pars_vertex:Bn,uv_vertex:Dn,uv2_pars_fragment:In,uv2_pars_vertex:Fn,uv2_vertex:Un,worldpos_vertex:Gn,background_frag:jn,background_vert:zn,cube_frag:Nn,cube_vert:kn,depth_frag:Hn,depth_vert:Vn,distanceRGBA_frag:Wn,distanceRGBA_vert:Yn,equirect_frag:Xn,equirect_vert:Qn,linedashed_frag:qn,linedashed_vert:Jn,meshbasic_frag:Kn,meshbasic_vert:Zn,meshlambert_frag:$n,meshlambert_vert:ei,meshmatcap_frag:ti,meshmatcap_vert:ri,meshphong_frag:ni,meshphong_vert:ii,meshphysical_frag:ai,meshphysical_vert:oi,normal_frag:si,normal_vert:ui,points_frag:ci,points_vert:li,shadow_frag:fi,shadow_vert:hi,sprite_frag:di,sprite_vert:pi};function mi(e){var t={};for(var r in e){t[r]={};for(var n in e[r]){var i=e[r][n];if(i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture)){t[r][n]=i.clone()}else if(Array.isArray(i)){t[r][n]=i.slice()}else{t[r][n]=i}}}return t}function gi(e){var t={};for(var r=0;r<e.length;r++){var n=mi(e[r]);for(var i in n){t[i]=n[i]}}return t}var yi={clone:mi,merge:gi};var bi={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function xi(e,t,r){if(t===undefined&&r===undefined){return this.set(e)}return this.setRGB(e,t,r)}Object.assign(xi.prototype,{isColor:true,r:1,g:1,b:1,set:function(e){if(e&&e.isColor){this.copy(e)}else if(typeof e==="number"){this.setHex(e)}else if(typeof e==="string"){this.setStyle(e)}return this},setScalar:function(e){this.r=e;this.g=e;this.b=e;return this},setHex:function(e){e=Math.floor(e);this.r=(e>>16&255)/255;this.g=(e>>8&255)/255;this.b=(e&255)/255;return this},setRGB:function(e,t,r){this.r=e;this.g=t;this.b=r;return this},setHSL:function(){function e(e,t,r){if(r<0)r+=1;if(r>1)r-=1;if(r<1/6)return e+(t-e)*6*r;if(r<1/2)return t;if(r<2/3)return e+(t-e)*6*(2/3-r);return e}return function t(r,n,i){r=jt.euclideanModulo(r,1);n=jt.clamp(n,0,1);i=jt.clamp(i,0,1);if(n===0){this.r=this.g=this.b=i}else{var a=i<=.5?i*(1+n):i+n-i*n;var o=2*i-a;this.r=e(o,a,r+1/3);this.g=e(o,a,r);this.b=e(o,a,r-1/3)}return this}}(),setStyle:function(e){function t(t){if(t===undefined)return;if(parseFloat(t)<1){console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}}var r;if(r=/^((?:rgb|hsl)a?)\(\s*([^\)]*)\)/.exec(e)){var n;var i=r[1];var a=r[2];switch(i){case"rgb":case"rgba":if(n=/^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(a)){this.r=Math.min(255,parseInt(n[1],10))/255;this.g=Math.min(255,parseInt(n[2],10))/255;this.b=Math.min(255,parseInt(n[3],10))/255;t(n[5]);return this}if(n=/^(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(a)){this.r=Math.min(100,parseInt(n[1],10))/100;this.g=Math.min(100,parseInt(n[2],10))/100;this.b=Math.min(100,parseInt(n[3],10))/100;t(n[5]);return this}break;case"hsl":case"hsla":if(n=/^([0-9]*\.?[0-9]+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(a)){var o=parseFloat(n[1])/360;var s=parseInt(n[2],10)/100;var u=parseInt(n[3],10)/100;t(n[5]);return this.setHSL(o,s,u)}break}}else if(r=/^\#([A-Fa-f0-9]+)$/.exec(e)){var c=r[1];var l=c.length;if(l===3){this.r=parseInt(c.charAt(0)+c.charAt(0),16)/255;this.g=parseInt(c.charAt(1)+c.charAt(1),16)/255;this.b=parseInt(c.charAt(2)+c.charAt(2),16)/255;return this}else if(l===6){this.r=parseInt(c.charAt(0)+c.charAt(1),16)/255;this.g=parseInt(c.charAt(2)+c.charAt(3),16)/255;this.b=parseInt(c.charAt(4)+c.charAt(5),16)/255;return this}}if(e&&e.length>0){var c=bi[e];if(c!==undefined){this.setHex(c)}else{console.warn("THREE.Color: Unknown color "+e)}}return this},clone:function(){return new this.constructor(this.r,this.g,this.b)},copy:function(e){this.r=e.r;this.g=e.g;this.b=e.b;return this},copyGammaToLinear:function(e,t){if(t===undefined)t=2;this.r=Math.pow(e.r,t);this.g=Math.pow(e.g,t);this.b=Math.pow(e.b,t);return this},copyLinearToGamma:function(e,t){if(t===undefined)t=2;var r=t>0?1/t:1;this.r=Math.pow(e.r,r);this.g=Math.pow(e.g,r);this.b=Math.pow(e.b,r);return this},convertGammaToLinear:function(e){this.copyGammaToLinear(this,e);return this},convertLinearToGamma:function(e){this.copyLinearToGamma(this,e);return this},copySRGBToLinear:function(){function e(e){return e<.04045?e*.0773993808:Math.pow(e*.9478672986+.0521327014,2.4)}return function t(r){this.r=e(r.r);this.g=e(r.g);this.b=e(r.b);return this}}(),copyLinearToSRGB:function(){function e(e){return e<.0031308?e*12.92:1.055*Math.pow(e,.41666)-.055}return function t(r){this.r=e(r.r);this.g=e(r.g);this.b=e(r.b);return this}}(),convertSRGBToLinear:function(){this.copySRGBToLinear(this);return this},convertLinearToSRGB:function(){this.copyLinearToSRGB(this);return this},getHex:function(){return this.r*255<<16^this.g*255<<8^this.b*255<<0},getHexString:function(){return("000000"+this.getHex().toString(16)).slice(-6)},getHSL:function(e){if(e===undefined){console.warn("THREE.Color: .getHSL() target is now required");e={h:0,s:0,l:0}}var t=this.r,r=this.g,n=this.b;var i=Math.max(t,r,n);var a=Math.min(t,r,n);var o,s;var u=(a+i)/2;if(a===i){o=0;s=0}else{var c=i-a;s=u<=.5?c/(i+a):c/(2-i-a);switch(i){case t:o=(r-n)/c+(r<n?6:0);break;case r:o=(n-t)/c+2;break;case n:o=(t-r)/c+4;break}o/=6}e.h=o;e.s=s;e.l=u;return e},getStyle:function(){return"rgb("+(this.r*255|0)+","+(this.g*255|0)+","+(this.b*255|0)+")"},offsetHSL:function(){var e={};return function(t,r,n){this.getHSL(e);e.h+=t;e.s+=r;e.l+=n;this.setHSL(e.h,e.s,e.l);return this}}(),add:function(e){this.r+=e.r;this.g+=e.g;this.b+=e.b;return this},addColors:function(e,t){this.r=e.r+t.r;this.g=e.g+t.g;this.b=e.b+t.b;return this},addScalar:function(e){this.r+=e;this.g+=e;this.b+=e;return this},sub:function(e){this.r=Math.max(0,this.r-e.r);this.g=Math.max(0,this.g-e.g);this.b=Math.max(0,this.b-e.b);return this},multiply:function(e){this.r*=e.r;this.g*=e.g;this.b*=e.b;return this},multiplyScalar:function(e){this.r*=e;this.g*=e;this.b*=e;return this},lerp:function(e,t){this.r+=(e.r-this.r)*t;this.g+=(e.g-this.g)*t;this.b+=(e.b-this.b)*t;return this},lerpHSL:function(){var e={h:0,s:0,l:0};var t={h:0,s:0,l:0};return function r(n,i){this.getHSL(e);n.getHSL(t);var a=jt.lerp(e.h,t.h,i);var o=jt.lerp(e.s,t.s,i);var s=jt.lerp(e.l,t.l,i);this.setHSL(a,o,s);return this}}(),equals:function(e){return e.r===this.r&&e.g===this.g&&e.b===this.b},fromArray:function(e,t){if(t===undefined)t=0;this.r=e[t];this.g=e[t+1];this.b=e[t+2];return this},toArray:function(e,t){if(e===undefined)e=[];if(t===undefined)t=0;e[t]=this.r;e[t+1]=this.g;e[t+2]=this.b;return e},toJSON:function(){return this.getHex()}});var wi={common:{diffuse:{value:new xi(15658734)},opacity:{value:1},map:{value:null},uvTransform:{value:new Vt},alphaMap:{value:null}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},refractionRatio:{value:.98},maxMipLevel:{value:0}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new zt(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new xi(16777215)}},lights:{ambientLightColor:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}}},points:{diffuse:{value:new xi(15658734)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},uvTransform:{value:new Vt}},sprite:{diffuse:{value:new xi(15658734)},opacity:{value:1},center:{value:new zt(.5,.5)},rotation:{value:0},map:{value:null},uvTransform:{value:new Vt}}};var Ai={basic:{uniforms:gi([wi.common,wi.specularmap,wi.envmap,wi.aomap,wi.lightmap,wi.fog]),vertexShader:vi.meshbasic_vert,fragmentShader:vi.meshbasic_frag},lambert:{uniforms:gi([wi.common,wi.specularmap,wi.envmap,wi.aomap,wi.lightmap,wi.emissivemap,wi.fog,wi.lights,{emissive:{value:new xi(0)}}]),vertexShader:vi.meshlambert_vert,fragmentShader:vi.meshlambert_frag},phong:{uniforms:gi([wi.common,wi.specularmap,wi.envmap,wi.aomap,wi.lightmap,wi.emissivemap,wi.bumpmap,wi.normalmap,wi.displacementmap,wi.gradientmap,wi.fog,wi.lights,{emissive:{value:new xi(0)},specular:{value:new xi(1118481)},shininess:{value:30}}]),vertexShader:vi.meshphong_vert,fragmentShader:vi.meshphong_frag},standard:{uniforms:gi([wi.common,wi.envmap,wi.aomap,wi.lightmap,wi.emissivemap,wi.bumpmap,wi.normalmap,wi.displacementmap,wi.roughnessmap,wi.metalnessmap,wi.fog,wi.lights,{emissive:{value:new xi(0)},roughness:{value:.5},metalness:{value:.5},envMapIntensity:{value:1}}]),vertexShader:vi.meshphysical_vert,fragmentShader:vi.meshphysical_frag},matcap:{uniforms:gi([wi.common,wi.bumpmap,wi.normalmap,wi.displacementmap,wi.fog,{matcap:{value:null}}]),vertexShader:vi.meshmatcap_vert,fragmentShader:vi.meshmatcap_frag},points:{uniforms:gi([wi.points,wi.fog]),vertexShader:vi.points_vert,fragmentShader:vi.points_frag},dashed:{uniforms:gi([wi.common,wi.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:vi.linedashed_vert,fragmentShader:vi.linedashed_frag},depth:{uniforms:gi([wi.common,wi.displacementmap]),vertexShader:vi.depth_vert,fragmentShader:vi.depth_frag},normal:{uniforms:gi([wi.common,wi.bumpmap,wi.normalmap,wi.displacementmap,{opacity:{value:1}}]),vertexShader:vi.normal_vert,fragmentShader:vi.normal_frag},sprite:{uniforms:gi([wi.sprite,wi.fog]),vertexShader:vi.sprite_vert,fragmentShader:vi.sprite_frag},background:{uniforms:{uvTransform:{value:new Vt},t2D:{value:null}},vertexShader:vi.background_vert,fragmentShader:vi.background_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:vi.cube_vert,fragmentShader:vi.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:vi.equirect_vert,fragmentShader:vi.equirect_frag},distanceRGBA:{uniforms:gi([wi.common,wi.displacementmap,{referencePosition:{value:new Ht},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:vi.distanceRGBA_vert,fragmentShader:vi.distanceRGBA_frag},shadow:{uniforms:gi([wi.lights,wi.fog,{color:{value:new xi(0)},opacity:{value:1}}]),vertexShader:vi.shadow_vert,fragmentShader:vi.shadow_frag}};Ai.physical={uniforms:gi([Ai.standard.uniforms,{clearCoat:{value:0},clearCoatRoughness:{value:0}}]),vertexShader:vi.meshphysical_vert,fragmentShader:vi.meshphysical_frag};function Mi(){var e=null;var t=false;var r=null;function n(i,a){if(t===false)return;r(i,a);e.requestAnimationFrame(n)}return{start:function(){if(t===true)return;if(r===null)return;e.requestAnimationFrame(n);t=true},stop:function(){t=false},setAnimationLoop:function(e){r=e},setContext:function(t){e=t}}}function Ei(e){var t=new WeakMap;function r(t,r){var n=t.array;var i=t.dynamic?35048:35044;var a=e.createBuffer();e.bindBuffer(r,a);e.bufferData(r,n,i);t.onUploadCallback();var o=5126;if(n instanceof Float32Array){o=5126}else if(n instanceof Float64Array){console.warn("THREE.WebGLAttributes: Unsupported data buffer format: Float64Array.")}else if(n instanceof Uint16Array){o=5123}else if(n instanceof Int16Array){o=5122}else if(n instanceof Uint32Array){o=5125}else if(n instanceof Int32Array){o=5124}else if(n instanceof Int8Array){o=5120}else if(n instanceof Uint8Array){o=5121}return{buffer:a,type:o,bytesPerElement:n.BYTES_PER_ELEMENT,version:t.version}}function n(t,r,n){var i=r.array;var a=r.updateRange;e.bindBuffer(n,t);if(r.dynamic===false){e.bufferData(n,i,35044)}else if(a.count===-1){e.bufferSubData(n,0,i)}else if(a.count===0){console.error("THREE.WebGLObjects.updateBuffer: dynamic THREE.BufferAttribute marked as needsUpdate but updateRange.count is 0, ensure you are using set methods or updating manually.")}else{e.bufferSubData(n,a.offset*i.BYTES_PER_ELEMENT,i.subarray(a.offset,a.offset+a.count));a.count=-1}}function i(e){if(e.isInterleavedBufferAttribute)e=e.data;return t.get(e)}function a(r){if(r.isInterleavedBufferAttribute)r=r.data;var n=t.get(r);if(n){e.deleteBuffer(n.buffer);t.delete(r)}}function o(e,i){if(e.isInterleavedBufferAttribute)e=e.data;var a=t.get(e);if(a===undefined){t.set(e,r(e,i))}else if(a.version<e.version){n(a.buffer,e,i);a.version=e.version}}return{get:i,remove:a,update:o}}function Si(e,t,r,n,i,a){this.a=e;this.b=t;this.c=r;this.normal=n&&n.isVector3?n:new Ht;this.vertexNormals=Array.isArray(n)?n:[];this.color=i&&i.isColor?i:new xi;this.vertexColors=Array.isArray(i)?i:[];this.materialIndex=a!==undefined?a:0}Object.assign(Si.prototype,{clone:function(){return(new this.constructor).copy(this)},copy:function(e){this.a=e.a;this.b=e.b;this.c=e.c;this.normal.copy(e.normal);this.color.copy(e.color);this.materialIndex=e.materialIndex;for(var t=0,r=e.vertexNormals.length;t<r;t++){this.vertexNormals[t]=e.vertexNormals[t].clone()}for(var t=0,r=e.vertexColors.length;t<r;t++){this.vertexColors[t]=e.vertexColors[t].clone()}return this}});function Ti(e,t,r,n){this._x=e||0;this._y=t||0;this._z=r||0;this._order=n||Ti.DefaultOrder}Ti.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"];Ti.DefaultOrder="XYZ";Object.defineProperties(Ti.prototype,{x:{get:function(){return this._x},set:function(e){this._x=e;this.onChangeCallback()}},y:{get:function(){return this._y},set:function(e){this._y=e;this.onChangeCallback()}},z:{get:function(){return this._z},set:function(e){this._z=e;this.onChangeCallback()}},order:{get:function(){return this._order},set:function(e){this._order=e;this.onChangeCallback()}}});Object.assign(Ti.prototype,{isEuler:true,set:function(e,t,r,n){this._x=e;this._y=t;this._z=r;this._order=n||this._order;this.onChangeCallback();return this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._order)},copy:function(e){this._x=e._x;this._y=e._y;this._z=e._z;this._order=e._order;this.onChangeCallback();return this},setFromRotationMatrix:function(e,t,r){var n=jt.clamp;var i=e.elements;var a=i[0],o=i[4],s=i[8];var u=i[1],c=i[5],l=i[9];var f=i[2],h=i[6],d=i[10];t=t||this._order;if(t==="XYZ"){this._y=Math.asin(n(s,-1,1));if(Math.abs(s)<.99999){this._x=Math.atan2(-l,d);this._z=Math.atan2(-o,a)}else{this._x=Math.atan2(h,c);this._z=0}}else if(t==="YXZ"){this._x=Math.asin(-n(l,-1,1));if(Math.abs(l)<.99999){this._y=Math.atan2(s,d);this._z=Math.atan2(u,c)}else{this._y=Math.atan2(-f,a);this._z=0}}else if(t==="ZXY"){this._x=Math.asin(n(h,-1,1));if(Math.abs(h)<.99999){this._y=Math.atan2(-f,d);this._z=Math.atan2(-o,c)}else{this._y=0;this._z=Math.atan2(u,a)}}else if(t==="ZYX"){this._y=Math.asin(-n(f,-1,1));if(Math.abs(f)<.99999){this._x=Math.atan2(h,d);this._z=Math.atan2(u,a)}else{this._x=0;this._z=Math.atan2(-o,c)}}else if(t==="YZX"){this._z=Math.asin(n(u,-1,1));if(Math.abs(u)<.99999){this._x=Math.atan2(-l,c);this._y=Math.atan2(-f,a)}else{this._x=0;this._y=Math.atan2(s,d)}}else if(t==="XZY"){this._z=Math.asin(-n(o,-1,1));if(Math.abs(o)<.99999){this._x=Math.atan2(h,c);this._y=Math.atan2(s,a)}else{this._x=Math.atan2(-l,d);this._y=0}}else{console.warn("THREE.Euler: .setFromRotationMatrix() given unsupported order: "+t)}this._order=t;if(r!==false)this.onChangeCallback();return this},setFromQuaternion:function(){var e=new Nt;return function t(r,n,i){e.makeRotationFromQuaternion(r);return this.setFromRotationMatrix(e,n,i)}}(),setFromVector3:function(e,t){return this.set(e.x,e.y,e.z,t||this._order)},reorder:function(){var e=new kt;return function t(r){e.setFromEuler(this);return this.setFromQuaternion(e,r)}}(),equals:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order},fromArray:function(e){this._x=e[0];this._y=e[1];this._z=e[2];if(e[3]!==undefined)this._order=e[3];this.onChangeCallback();return this},toArray:function(e,t){if(e===undefined)e=[];if(t===undefined)t=0;e[t]=this._x;e[t+1]=this._y;e[t+2]=this._z;e[t+3]=this._order;return e},toVector3:function(e){if(e){return e.set(this._x,this._y,this._z)}else{return new Ht(this._x,this._y,this._z)}},onChange:function(e){this.onChangeCallback=e;return this},onChangeCallback:function(){}});function _i(){this.mask=1|0}Object.assign(_i.prototype,{set:function(e){this.mask=1<<e|0},enable:function(e){this.mask|=1<<e|0},toggle:function(e){this.mask^=1<<e|0},disable:function(e){this.mask&=~(1<<e|0)},test:function(e){return(this.mask&e.mask)!==0}});var Pi=0;function Ci(){Object.defineProperty(this,"id",{value:Pi++});this.uuid=jt.generateUUID();this.name="";this.type="Object3D";this.parent=null;this.children=[];this.up=Ci.DefaultUp.clone();var e=new Ht;var t=new Ti;var r=new kt;var n=new Ht(1,1,1);function i(){r.setFromEuler(t,false)}function a(){t.setFromQuaternion(r,undefined,false)}t.onChange(i);r.onChange(a);Object.defineProperties(this,{position:{configurable:true,enumerable:true,value:e},rotation:{configurable:true,enumerable:true,value:t},quaternion:{configurable:true,enumerable:true,value:r},scale:{configurable:true,enumerable:true,value:n},modelViewMatrix:{value:new Nt},normalMatrix:{value:new Vt}});this.matrix=new Nt;this.matrixWorld=new Nt;this.matrixAutoUpdate=Ci.DefaultMatrixAutoUpdate;this.matrixWorldNeedsUpdate=false;this.layers=new _i;this.visible=true;this.castShadow=false;this.receiveShadow=false;this.frustumCulled=true;this.renderOrder=0;this.userData={}}Ci.DefaultUp=new Ht(0,1,0);Ci.DefaultMatrixAutoUpdate=true;Ci.prototype=Object.assign(Object.create(n.prototype),{constructor:Ci,isObject3D:true,onBeforeRender:function(){},onAfterRender:function(){},applyMatrix:function(e){this.matrix.multiplyMatrices(e,this.matrix);this.matrix.decompose(this.position,this.quaternion,this.scale)},applyQuaternion:function(e){this.quaternion.premultiply(e);return this},setRotationFromAxisAngle:function(e,t){this.quaternion.setFromAxisAngle(e,t)},setRotationFromEuler:function(e){this.quaternion.setFromEuler(e,true)},setRotationFromMatrix:function(e){this.quaternion.setFromRotationMatrix(e)},setRotationFromQuaternion:function(e){this.quaternion.copy(e)},rotateOnAxis:function(){var e=new kt;return function t(r,n){e.setFromAxisAngle(r,n);this.quaternion.multiply(e);return this}}(),rotateOnWorldAxis:function(){var e=new kt;return function t(r,n){e.setFromAxisAngle(r,n);this.quaternion.premultiply(e);return this}}(),rotateX:function(){var e=new Ht(1,0,0);return function t(r){return this.rotateOnAxis(e,r)}}(),rotateY:function(){var e=new Ht(0,1,0);return function t(r){return this.rotateOnAxis(e,r)}}(),rotateZ:function(){var e=new Ht(0,0,1);return function t(r){return this.rotateOnAxis(e,r)}}(),translateOnAxis:function(){var e=new Ht;return function t(r,n){e.copy(r).applyQuaternion(this.quaternion);this.position.add(e.multiplyScalar(n));return this}}(),translateX:function(){var e=new Ht(1,0,0);return function t(r){return this.translateOnAxis(e,r)}}(),translateY:function(){var e=new Ht(0,1,0);return function t(r){return this.translateOnAxis(e,r)}}(),translateZ:function(){var e=new Ht(0,0,1);return function t(r){return this.translateOnAxis(e,r)}}(),localToWorld:function(e){return e.applyMatrix4(this.matrixWorld)},worldToLocal:function(){var e=new Nt;return function t(r){return r.applyMatrix4(e.getInverse(this.matrixWorld))}}(),lookAt:function(){var e=new kt;var t=new Nt;var r=new Ht;var n=new Ht;return function i(a,o,s){if(a.isVector3){r.copy(a)}else{r.set(a,o,s)}var u=this.parent;this.updateWorldMatrix(true,false);n.setFromMatrixPosition(this.matrixWorld);if(this.isCamera){t.lookAt(n,r,this.up)}else{t.lookAt(r,n,this.up)}this.quaternion.setFromRotationMatrix(t);if(u){t.extractRotation(u.matrixWorld);e.setFromRotationMatrix(t);this.quaternion.premultiply(e.inverse())}}}(),add:function(e){if(arguments.length>1){for(var t=0;t<arguments.length;t++){this.add(arguments[t])}return this}if(e===this){console.error("THREE.Object3D.add: object can't be added as a child of itself.",e);return this}if(e&&e.isObject3D){if(e.parent!==null){e.parent.remove(e)}e.parent=this;e.dispatchEvent({type:"added"});this.children.push(e)}else{console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e)}return this},remove:function(e){if(arguments.length>1){for(var t=0;t<arguments.length;t++){this.remove(arguments[t])}return this}var r=this.children.indexOf(e);if(r!==-1){e.parent=null;e.dispatchEvent({type:"removed"});this.children.splice(r,1)}return this},getObjectById:function(e){return this.getObjectByProperty("id",e)},getObjectByName:function(e){return this.getObjectByProperty("name",e)},getObjectByProperty:function(e,t){if(this[e]===t)return this;for(var r=0,n=this.children.length;r<n;r++){var i=this.children[r];var a=i.getObjectByProperty(e,t);if(a!==undefined){return a}}return undefined},getWorldPosition:function(e){if(e===undefined){console.warn("THREE.Object3D: .getWorldPosition() target is now required");e=new Ht}this.updateMatrixWorld(true);return e.setFromMatrixPosition(this.matrixWorld)},getWorldQuaternion:function(){var e=new Ht;var t=new Ht;return function r(n){if(n===undefined){console.warn("THREE.Object3D: .getWorldQuaternion() target is now required");n=new kt}this.updateMatrixWorld(true);this.matrixWorld.decompose(e,n,t);return n}}(),getWorldScale:function(){var e=new Ht;var t=new kt;return function r(n){if(n===undefined){console.warn("THREE.Object3D: .getWorldScale() target is now required");n=new Ht}this.updateMatrixWorld(true);this.matrixWorld.decompose(e,t,n);return n}}(),getWorldDirection:function(e){if(e===undefined){console.warn("THREE.Object3D: .getWorldDirection() target is now required");e=new Ht}this.updateMatrixWorld(true);var t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()},raycast:function(){},traverse:function(e){e(this);var t=this.children;for(var r=0,n=t.length;r<n;r++){t[r].traverse(e)}},traverseVisible:function(e){if(this.visible===false)return;e(this);var t=this.children;for(var r=0,n=t.length;r<n;r++){t[r].traverseVisible(e)}},traverseAncestors:function(e){var t=this.parent;if(t!==null){e(t);t.traverseAncestors(e)}},updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,this.scale);this.matrixWorldNeedsUpdate=true},updateMatrixWorld:function(e){if(this.matrixAutoUpdate)this.updateMatrix();if(this.matrixWorldNeedsUpdate||e){if(this.parent===null){this.matrixWorld.copy(this.matrix)}else{this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)}this.matrixWorldNeedsUpdate=false;e=true}var t=this.children;for(var r=0,n=t.length;r<n;r++){t[r].updateMatrixWorld(e)}},updateWorldMatrix:function(e,t){var r=this.parent;if(e===true&&r!==null){r.updateWorldMatrix(true,false)}if(this.matrixAutoUpdate)this.updateMatrix();if(this.parent===null){this.matrixWorld.copy(this.matrix)}else{this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)}if(t===true){var n=this.children;for(var i=0,a=n.length;i<a;i++){n[i].updateWorldMatrix(false,true)}}},toJSON:function(e){var t=e===undefined||typeof e==="string";var r={};if(t){e={geometries:{},materials:{},textures:{},images:{},shapes:{}};r.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"}}var n={};n.uuid=this.uuid;n.type=this.type;if(this.name!=="")n.name=this.name;if(this.castShadow===true)n.castShadow=true;if(this.receiveShadow===true)n.receiveShadow=true;if(this.visible===false)n.visible=false;if(this.frustumCulled===false)n.frustumCulled=false;if(this.renderOrder!==0)n.renderOrder=this.renderOrder;if(JSON.stringify(this.userData)!=="{}")n.userData=this.userData;n.layers=this.layers.mask;n.matrix=this.matrix.toArray();if(this.matrixAutoUpdate===false)n.matrixAutoUpdate=false;function i(t,r){if(t[r.uuid]===undefined){t[r.uuid]=r.toJSON(e)}return r.uuid}if(this.isMesh||this.isLine||this.isPoints){n.geometry=i(e.geometries,this.geometry);var a=this.geometry.parameters;if(a!==undefined&&a.shapes!==undefined){var o=a.shapes;if(Array.isArray(o)){for(var s=0,u=o.length;s<u;s++){var c=o[s];i(e.shapes,c)}}else{i(e.shapes,o)}}}if(this.material!==undefined){if(Array.isArray(this.material)){var l=[];for(var s=0,u=this.material.length;s<u;s++){l.push(i(e.materials,this.material[s]))}n.material=l}else{n.material=i(e.materials,this.material)}}if(this.children.length>0){n.children=[];for(var s=0;s<this.children.length;s++){n.children.push(this.children[s].toJSON(e).object)}}if(t){var f=v(e.geometries);var h=v(e.materials);var d=v(e.textures);var p=v(e.images);var o=v(e.shapes);if(f.length>0)r.geometries=f;if(h.length>0)r.materials=h;if(d.length>0)r.textures=d;if(p.length>0)r.images=p;if(o.length>0)r.shapes=o}r.object=n;return r;function v(e){var t=[];for(var r in e){var n=e[r];delete n.metadata;t.push(n)}return t}},clone:function(e){return(new this.constructor).copy(this,e)},copy:function(e,t){if(t===undefined)t=true;this.name=e.name;this.up.copy(e.up);this.position.copy(e.position);this.quaternion.copy(e.quaternion);this.scale.copy(e.scale);this.matrix.copy(e.matrix);this.matrixWorld.copy(e.matrixWorld);this.matrixAutoUpdate=e.matrixAutoUpdate;this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate;this.layers.mask=e.layers.mask;this.visible=e.visible;this.castShadow=e.castShadow;this.receiveShadow=e.receiveShadow;this.frustumCulled=e.frustumCulled;this.renderOrder=e.renderOrder;this.userData=JSON.parse(JSON.stringify(e.userData));if(t===true){for(var r=0;r<e.children.length;r++){var n=e.children[r];this.add(n.clone())}}return this}});var Oi=0;function Li(){Object.defineProperty(this,"id",{value:Oi+=2});this.uuid=jt.generateUUID();this.name="";this.type="Geometry";this.vertices=[];this.colors=[];this.faces=[];this.faceVertexUvs=[[]];this.morphTargets=[];this.morphNormals=[];this.skinWeights=[];this.skinIndices=[];this.lineDistances=[];this.boundingBox=null;this.boundingSphere=null;this.elementsNeedUpdate=false;this.verticesNeedUpdate=false;this.uvsNeedUpdate=false;this.normalsNeedUpdate=false;this.colorsNeedUpdate=false;this.lineDistancesNeedUpdate=false;this.groupsNeedUpdate=false}Li.prototype=Object.assign(Object.create(n.prototype),{constructor:Li,isGeometry:true,applyMatrix:function(e){var t=(new Vt).getNormalMatrix(e);for(var r=0,n=this.vertices.length;r<n;r++){var i=this.vertices[r];i.applyMatrix4(e)}for(var r=0,n=this.faces.length;r<n;r++){var a=this.faces[r];a.normal.applyMatrix3(t).normalize();for(var o=0,s=a.vertexNormals.length;o<s;o++){a.vertexNormals[o].applyMatrix3(t).normalize()}}if(this.boundingBox!==null){this.computeBoundingBox()}if(this.boundingSphere!==null){this.computeBoundingSphere()}this.verticesNeedUpdate=true;this.normalsNeedUpdate=true;return this},rotateX:function(){var e=new Nt;return function t(r){e.makeRotationX(r);this.applyMatrix(e);return this}}(),rotateY:function(){var e=new Nt;return function t(r){e.makeRotationY(r);this.applyMatrix(e);return this}}(),rotateZ:function(){var e=new Nt;return function t(r){e.makeRotationZ(r);this.applyMatrix(e);return this}}(),translate:function(){var e=new Nt;return function t(r,n,i){e.makeTranslation(r,n,i);this.applyMatrix(e);return this}}(),scale:function(){var e=new Nt;return function t(r,n,i){e.makeScale(r,n,i);this.applyMatrix(e);return this}}(),lookAt:function(){var e=new Ci;return function t(r){e.lookAt(r);e.updateMatrix();this.applyMatrix(e.matrix)}}(),fromBufferGeometry:function(e){var t=this;var r=e.index!==null?e.index.array:undefined;var n=e.attributes;var i=n.position.array;var a=n.normal!==undefined?n.normal.array:undefined;var o=n.color!==undefined?n.color.array:undefined;var s=n.uv!==undefined?n.uv.array:undefined;var u=n.uv2!==undefined?n.uv2.array:undefined;if(u!==undefined)this.faceVertexUvs[1]=[];for(var c=0,l=0;c<i.length;c+=3,l+=2){t.vertices.push((new Ht).fromArray(i,c));if(o!==undefined){t.colors.push((new xi).fromArray(o,c))}}function f(e,r,n,i){var c=o===undefined?[]:[t.colors[e].clone(),t.colors[r].clone(),t.colors[n].clone()];var l=a===undefined?[]:[(new Ht).fromArray(a,e*3),(new Ht).fromArray(a,r*3),(new Ht).fromArray(a,n*3)];var f=new Si(e,r,n,l,c,i);t.faces.push(f);if(s!==undefined){t.faceVertexUvs[0].push([(new zt).fromArray(s,e*2),(new zt).fromArray(s,r*2),(new zt).fromArray(s,n*2)])}if(u!==undefined){t.faceVertexUvs[1].push([(new zt).fromArray(u,e*2),(new zt).fromArray(u,r*2),(new zt).fromArray(u,n*2)])}}var h=e.groups;if(h.length>0){for(var c=0;c<h.length;c++){var d=h[c];var p=d.start;var v=d.count;for(var l=p,m=p+v;l<m;l+=3){if(r!==undefined){f(r[l],r[l+1],r[l+2],d.materialIndex)}else{f(l,l+1,l+2,d.materialIndex)}}}}else{if(r!==undefined){for(var c=0;c<r.length;c+=3){f(r[c],r[c+1],r[c+2])}}else{for(var c=0;c<i.length/3;c+=3){f(c,c+1,c+2)}}}this.computeFaceNormals();if(e.boundingBox!==null){this.boundingBox=e.boundingBox.clone()}if(e.boundingSphere!==null){this.boundingSphere=e.boundingSphere.clone()}return this},center:function(){var e=new Ht;return function t(){this.computeBoundingBox();this.boundingBox.getCenter(e).negate();this.translate(e.x,e.y,e.z);return this}}(),normalize:function(){this.computeBoundingSphere();var e=this.boundingSphere.center;var t=this.boundingSphere.radius;var r=t===0?1:1/t;var n=new Nt;n.set(r,0,0,-r*e.x,0,r,0,-r*e.y,0,0,r,-r*e.z,0,0,0,1);this.applyMatrix(n);return this},computeFaceNormals:function(){var e=new Ht,t=new Ht;for(var r=0,n=this.faces.length;r<n;r++){var i=this.faces[r];var a=this.vertices[i.a];var o=this.vertices[i.b];var s=this.vertices[i.c];e.subVectors(s,o);t.subVectors(a,o);e.cross(t);e.normalize();i.normal.copy(e)}},computeVertexNormals:function(e){if(e===undefined)e=true;var t,r,n,i,a,o;o=new Array(this.vertices.length);for(t=0,r=this.vertices.length;t<r;t++){o[t]=new Ht}if(e){var s,u,c;var l=new Ht,f=new Ht;for(n=0,i=this.faces.length;n<i;n++){a=this.faces[n];s=this.vertices[a.a];u=this.vertices[a.b];c=this.vertices[a.c];l.subVectors(c,u);f.subVectors(s,u);l.cross(f);o[a.a].add(l);o[a.b].add(l);o[a.c].add(l)}}else{this.computeFaceNormals();for(n=0,i=this.faces.length;n<i;n++){a=this.faces[n];o[a.a].add(a.normal);o[a.b].add(a.normal);o[a.c].add(a.normal)}}for(t=0,r=this.vertices.length;t<r;t++){o[t].normalize()}for(n=0,i=this.faces.length;n<i;n++){a=this.faces[n];var h=a.vertexNormals;if(h.length===3){h[0].copy(o[a.a]);h[1].copy(o[a.b]);h[2].copy(o[a.c])}else{h[0]=o[a.a].clone();h[1]=o[a.b].clone();h[2]=o[a.c].clone()}}if(this.faces.length>0){this.normalsNeedUpdate=true}},computeFlatVertexNormals:function(){var e,t,r;this.computeFaceNormals();for(e=0,t=this.faces.length;e<t;e++){r=this.faces[e];var n=r.vertexNormals;if(n.length===3){n[0].copy(r.normal);n[1].copy(r.normal);n[2].copy(r.normal)}else{n[0]=r.normal.clone();n[1]=r.normal.clone();n[2]=r.normal.clone()}}if(this.faces.length>0){this.normalsNeedUpdate=true}},computeMorphNormals:function(){var e,t,r,n,i;for(r=0,n=this.faces.length;r<n;r++){i=this.faces[r];if(!i.__originalFaceNormal){i.__originalFaceNormal=i.normal.clone()}else{i.__originalFaceNormal.copy(i.normal)}if(!i.__originalVertexNormals)i.__originalVertexNormals=[];for(e=0,t=i.vertexNormals.length;e<t;e++){if(!i.__originalVertexNormals[e]){i.__originalVertexNormals[e]=i.vertexNormals[e].clone()}else{i.__originalVertexNormals[e].copy(i.vertexNormals[e])}}}var a=new Li;a.faces=this.faces;for(e=0,t=this.morphTargets.length;e<t;e++){if(!this.morphNormals[e]){this.morphNormals[e]={};this.morphNormals[e].faceNormals=[];this.morphNormals[e].vertexNormals=[];var o=this.morphNormals[e].faceNormals;var s=this.morphNormals[e].vertexNormals;var u,c;for(r=0,n=this.faces.length;r<n;r++){u=new Ht;c={a:new Ht,b:new Ht,c:new Ht};o.push(u);s.push(c)}}var l=this.morphNormals[e];a.vertices=this.morphTargets[e].vertices;a.computeFaceNormals();a.computeVertexNormals();var u,c;for(r=0,n=this.faces.length;r<n;r++){i=this.faces[r];u=l.faceNormals[r];c=l.vertexNormals[r];u.copy(i.normal);c.a.copy(i.vertexNormals[0]);c.b.copy(i.vertexNormals[1]);c.c.copy(i.vertexNormals[2])}}for(r=0,n=this.faces.length;r<n;r++){i=this.faces[r];i.normal=i.__originalFaceNormal;i.vertexNormals=i.__originalVertexNormals}},computeBoundingBox:function(){if(this.boundingBox===null){this.boundingBox=new $t}this.boundingBox.setFromPoints(this.vertices)},computeBoundingSphere:function(){if(this.boundingSphere===null){this.boundingSphere=new er}this.boundingSphere.setFromPoints(this.vertices)},merge:function(e,t,r){if(!(e&&e.isGeometry)){console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.",e);return}var n,i=this.vertices.length,a=this.vertices,o=e.vertices,s=this.faces,u=e.faces,c=this.faceVertexUvs[0],l=e.faceVertexUvs[0],f=this.colors,h=e.colors;if(r===undefined)r=0;if(t!==undefined){n=(new Vt).getNormalMatrix(t)}for(var d=0,p=o.length;d<p;d++){var v=o[d];var m=v.clone();if(t!==undefined)m.applyMatrix4(t);a.push(m)}for(var d=0,p=h.length;d<p;d++){f.push(h[d].clone())}for(d=0,p=u.length;d<p;d++){var g=u[d],y,b,x,w=g.vertexNormals,A=g.vertexColors;y=new Si(g.a+i,g.b+i,g.c+i);y.normal.copy(g.normal);if(n!==undefined){y.normal.applyMatrix3(n).normalize()}for(var M=0,E=w.length;M<E;M++){b=w[M].clone();if(n!==undefined){b.applyMatrix3(n).normalize()}y.vertexNormals.push(b)}y.color.copy(g.color);for(var M=0,E=A.length;M<E;M++){x=A[M];y.vertexColors.push(x.clone())}y.materialIndex=g.materialIndex+r;s.push(y)}for(d=0,p=l.length;d<p;d++){var S=l[d],T=[];if(S===undefined){continue}for(var M=0,E=S.length;M<E;M++){T.push(S[M].clone())}c.push(T)}},mergeMesh:function(e){if(!(e&&e.isMesh)){console.error("THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.",e);return}if(e.matrixAutoUpdate)e.updateMatrix();this.merge(e.geometry,e.matrix)},mergeVertices:function(){var e={};var t=[],r=[];var n,i;var a=4;var o=Math.pow(10,a);var s,u,c;var l,f,h;for(s=0,u=this.vertices.length;s<u;s++){n=this.vertices[s];i=Math.round(n.x*o)+"_"+Math.round(n.y*o)+"_"+Math.round(n.z*o);if(e[i]===undefined){e[i]=s;t.push(this.vertices[s]);r[s]=t.length-1}else{r[s]=r[e[i]]}}var d=[];for(s=0,u=this.faces.length;s<u;s++){c=this.faces[s];c.a=r[c.a];c.b=r[c.b];c.c=r[c.c];l=[c.a,c.b,c.c];for(var p=0;p<3;p++){if(l[p]===l[(p+1)%3]){d.push(s);break}}}for(s=d.length-1;s>=0;s--){var v=d[s];this.faces.splice(v,1);for(f=0,h=this.faceVertexUvs.length;f<h;f++){this.faceVertexUvs[f].splice(v,1)}}var m=this.vertices.length-t.length;this.vertices=t;return m},setFromPoints:function(e){this.vertices=[];for(var t=0,r=e.length;t<r;t++){var n=e[t];this.vertices.push(new Ht(n.x,n.y,n.z||0))}return this},sortFacesByMaterialIndex:function(){var e=this.faces;var t=e.length;for(var r=0;r<t;r++){e[r]._id=r}function n(e,t){return e.materialIndex-t.materialIndex}e.sort(n);var i=this.faceVertexUvs[0];var a=this.faceVertexUvs[1];var o,s;if(i&&i.length===t)o=[];if(a&&a.length===t)s=[];for(var r=0;r<t;r++){var u=e[r]._id;if(o)o.push(i[u]);if(s)s.push(a[u])}if(o)this.faceVertexUvs[0]=o;if(s)this.faceVertexUvs[1]=s},toJSON:function(){var e={metadata:{version:4.5,type:"Geometry",generator:"Geometry.toJSON"}};e.uuid=this.uuid;e.type=this.type;if(this.name!=="")e.name=this.name;if(this.parameters!==undefined){var t=this.parameters;for(var r in t){if(t[r]!==undefined)e[r]=t[r]}return e}var n=[];for(var i=0;i<this.vertices.length;i++){var a=this.vertices[i];n.push(a.x,a.y,a.z)}var o=[];var s=[];var u={};var c=[];var l={};var f=[];var h={};for(var i=0;i<this.faces.length;i++){var d=this.faces[i];var p=true;var v=false;var m=this.faceVertexUvs[0][i]!==undefined;var g=d.normal.length()>0;var y=d.vertexNormals.length>0;var b=d.color.r!==1||d.color.g!==1||d.color.b!==1;var x=d.vertexColors.length>0;var w=0;w=S(w,0,0);w=S(w,1,p);w=S(w,2,v);w=S(w,3,m);w=S(w,4,g);w=S(w,5,y);w=S(w,6,b);w=S(w,7,x);o.push(w);o.push(d.a,d.b,d.c);o.push(d.materialIndex);if(m){var A=this.faceVertexUvs[0][i];o.push(P(A[0]),P(A[1]),P(A[2]))}if(g){o.push(T(d.normal))}if(y){var M=d.vertexNormals;o.push(T(M[0]),T(M[1]),T(M[2]))}if(b){o.push(_(d.color))}if(x){var E=d.vertexColors;o.push(_(E[0]),_(E[1]),_(E[2]))}}function S(e,t,r){return r?e|1<<t:e&~(1<<t)}function T(e){var t=e.x.toString()+e.y.toString()+e.z.toString();if(u[t]!==undefined){return u[t]}u[t]=s.length/3;s.push(e.x,e.y,e.z);return u[t]}function _(e){var t=e.r.toString()+e.g.toString()+e.b.toString();if(l[t]!==undefined){return l[t]}l[t]=c.length;c.push(e.getHex());return l[t]}function P(e){var t=e.x.toString()+e.y.toString();if(h[t]!==undefined){return h[t]}h[t]=f.length/2;f.push(e.x,e.y);return h[t]}e.data={};e.data.vertices=n;e.data.normals=s;if(c.length>0)e.data.colors=c;if(f.length>0)e.data.uvs=[f];e.data.faces=o;return e},clone:function(){return(new Li).copy(this)},copy:function(e){var t,r,n,i,a,o;this.vertices=[];this.colors=[];this.faces=[];this.faceVertexUvs=[[]];this.morphTargets=[];this.morphNormals=[];this.skinWeights=[];this.skinIndices=[];this.lineDistances=[];this.boundingBox=null;this.boundingSphere=null;this.name=e.name;var s=e.vertices;for(t=0,r=s.length;t<r;t++){this.vertices.push(s[t].clone())}var u=e.colors;for(t=0,r=u.length;t<r;t++){this.colors.push(u[t].clone())}var c=e.faces;for(t=0,r=c.length;t<r;t++){this.faces.push(c[t].clone())}for(t=0,r=e.faceVertexUvs.length;t<r;t++){var l=e.faceVertexUvs[t];if(this.faceVertexUvs[t]===undefined){this.faceVertexUvs[t]=[]}for(n=0,i=l.length;n<i;n++){var f=l[n],h=[];for(a=0,o=f.length;a<o;a++){var d=f[a];h.push(d.clone())}this.faceVertexUvs[t].push(h)}}var p=e.morphTargets;for(t=0,r=p.length;t<r;t++){var v={};v.name=p[t].name;if(p[t].vertices!==undefined){v.vertices=[];for(n=0,i=p[t].vertices.length;n<i;n++){v.vertices.push(p[t].vertices[n].clone())}}if(p[t].normals!==undefined){v.normals=[];for(n=0,i=p[t].normals.length;n<i;n++){v.normals.push(p[t].normals[n].clone())}}this.morphTargets.push(v)}var m=e.morphNormals;for(t=0,r=m.length;t<r;t++){var g={};if(m[t].vertexNormals!==undefined){g.vertexNormals=[];for(n=0,i=m[t].vertexNormals.length;n<i;n++){var y=m[t].vertexNormals[n];var b={};b.a=y.a.clone();b.b=y.b.clone();b.c=y.c.clone();g.vertexNormals.push(b)}}if(m[t].faceNormals!==undefined){g.faceNormals=[];for(n=0,i=m[t].faceNormals.length;n<i;n++){g.faceNormals.push(m[t].faceNormals[n].clone())}}this.morphNormals.push(g)}var x=e.skinWeights;for(t=0,r=x.length;t<r;t++){this.skinWeights.push(x[t].clone())}var w=e.skinIndices;for(t=0,r=w.length;t<r;t++){this.skinIndices.push(w[t].clone())}var A=e.lineDistances;for(t=0,r=A.length;t<r;t++){this.lineDistances.push(A[t])}var M=e.boundingBox;if(M!==null){this.boundingBox=M.clone()}var E=e.boundingSphere;if(E!==null){this.boundingSphere=E.clone()}this.elementsNeedUpdate=e.elementsNeedUpdate;this.verticesNeedUpdate=e.verticesNeedUpdate;this.uvsNeedUpdate=e.uvsNeedUpdate;this.normalsNeedUpdate=e.normalsNeedUpdate;this.colorsNeedUpdate=e.colorsNeedUpdate;this.lineDistancesNeedUpdate=e.lineDistancesNeedUpdate;this.groupsNeedUpdate=e.groupsNeedUpdate;return this},dispose:function(){this.dispatchEvent({type:"dispose"})}});function Ri(e,t,r){if(Array.isArray(e)){throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.")}this.name="";this.array=e;this.itemSize=t;this.count=e!==undefined?e.length/t:0;this.normalized=r===true;this.dynamic=false;this.updateRange={offset:0,count:-1};this.version=0}Object.defineProperty(Ri.prototype,"needsUpdate",{set:function(e){if(e===true)this.version++}});Object.assign(Ri.prototype,{isBufferAttribute:true,onUploadCallback:function(){},setArray:function(e){if(Array.isArray(e)){throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.")}this.count=e!==undefined?e.length/this.itemSize:0;this.array=e;return this},setDynamic:function(e){this.dynamic=e;return this},copy:function(e){this.name=e.name;this.array=new e.array.constructor(e.array);this.itemSize=e.itemSize;this.count=e.count;this.normalized=e.normalized;this.dynamic=e.dynamic;return this},copyAt:function(e,t,r){e*=this.itemSize;r*=t.itemSize;for(var n=0,i=this.itemSize;n<i;n++){this.array[e+n]=t.array[r+n]}return this},copyArray:function(e){this.array.set(e);return this},copyColorsArray:function(e){var t=this.array,r=0;for(var n=0,i=e.length;n<i;n++){var a=e[n];if(a===undefined){console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",n);a=new xi}t[r++]=a.r;t[r++]=a.g;t[r++]=a.b}return this},copyVector2sArray:function(e){var t=this.array,r=0;for(var n=0,i=e.length;n<i;n++){var a=e[n];if(a===undefined){console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",n);a=new zt}t[r++]=a.x;t[r++]=a.y}return this},copyVector3sArray:function(e){var t=this.array,r=0;for(var n=0,i=e.length;n<i;n++){var a=e[n];if(a===undefined){console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",n);a=new Ht}t[r++]=a.x;t[r++]=a.y;t[r++]=a.z}return this},copyVector4sArray:function(e){var t=this.array,r=0;for(var n=0,i=e.length;n<i;n++){var a=e[n];if(a===undefined){console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",n);a=new qt}t[r++]=a.x;t[r++]=a.y;t[r++]=a.z;t[r++]=a.w}return this},set:function(e,t){if(t===undefined)t=0;this.array.set(e,t);return this},getX:function(e){return this.array[e*this.itemSize]},setX:function(e,t){this.array[e*this.itemSize]=t;return this},getY:function(e){return this.array[e*this.itemSize+1]},setY:function(e,t){this.array[e*this.itemSize+1]=t;return this},getZ:function(e){return this.array[e*this.itemSize+2]},setZ:function(e,t){this.array[e*this.itemSize+2]=t;return this},getW:function(e){return this.array[e*this.itemSize+3]},setW:function(e,t){this.array[e*this.itemSize+3]=t;return this},setXY:function(e,t,r){e*=this.itemSize;this.array[e+0]=t;this.array[e+1]=r;return this},setXYZ:function(e,t,r,n){e*=this.itemSize;this.array[e+0]=t;this.array[e+1]=r;this.array[e+2]=n;return this},setXYZW:function(e,t,r,n,i){e*=this.itemSize;this.array[e+0]=t;this.array[e+1]=r;this.array[e+2]=n;this.array[e+3]=i;return this},onUpload:function(e){this.onUploadCallback=e;return this},clone:function(){return new this.constructor(this.array,this.itemSize).copy(this)}});function Bi(e,t,r){Ri.call(this,new Int8Array(e),t,r)}Bi.prototype=Object.create(Ri.prototype);Bi.prototype.constructor=Bi;function Di(e,t,r){Ri.call(this,new Uint8Array(e),t,r)}Di.prototype=Object.create(Ri.prototype);Di.prototype.constructor=Di;function Ii(e,t,r){Ri.call(this,new Uint8ClampedArray(e),t,r)}Ii.prototype=Object.create(Ri.prototype);Ii.prototype.constructor=Ii;function Fi(e,t,r){Ri.call(this,new Int16Array(e),t,r)}Fi.prototype=Object.create(Ri.prototype);Fi.prototype.constructor=Fi;function Ui(e,t,r){Ri.call(this,new Uint16Array(e),t,r)}Ui.prototype=Object.create(Ri.prototype);Ui.prototype.constructor=Ui;function Gi(e,t,r){Ri.call(this,new Int32Array(e),t,r)}Gi.prototype=Object.create(Ri.prototype);Gi.prototype.constructor=Gi;function ji(e,t,r){Ri.call(this,new Uint32Array(e),t,r)}ji.prototype=Object.create(Ri.prototype);ji.prototype.constructor=ji;function zi(e,t,r){Ri.call(this,new Float32Array(e),t,r)}zi.prototype=Object.create(Ri.prototype);zi.prototype.constructor=zi;function Ni(e,t,r){Ri.call(this,new Float64Array(e),t,r)}Ni.prototype=Object.create(Ri.prototype);Ni.prototype.constructor=Ni;function ki(){this.vertices=[];this.normals=[];this.colors=[];this.uvs=[];this.uvs2=[];this.groups=[];this.morphTargets={};this.skinWeights=[];this.skinIndices=[];this.boundingBox=null;this.boundingSphere=null;this.verticesNeedUpdate=false;this.normalsNeedUpdate=false;this.colorsNeedUpdate=false;this.uvsNeedUpdate=false;this.groupsNeedUpdate=false}Object.assign(ki.prototype,{computeGroups:function(e){var t;var r=[];var n=undefined;var i=e.faces;for(var a=0;a<i.length;a++){var o=i[a];if(o.materialIndex!==n){n=o.materialIndex;if(t!==undefined){t.count=a*3-t.start;r.push(t)}t={start:a*3,materialIndex:n}}}if(t!==undefined){t.count=a*3-t.start;r.push(t)}this.groups=r},fromGeometry:function(e){var t=e.faces;var r=e.vertices;var n=e.faceVertexUvs;var i=n[0]&&n[0].length>0;var a=n[1]&&n[1].length>0;var o=e.morphTargets;var s=o.length;var u;if(s>0){u=[];for(var c=0;c<s;c++){u[c]={name:o[c].name,data:[]}}this.morphTargets.position=u}var l=e.morphNormals;var f=l.length;var h;if(f>0){h=[];for(var c=0;c<f;c++){h[c]={name:l[c].name,data:[]}}this.morphTargets.normal=h}var d=e.skinIndices;var p=e.skinWeights;var v=d.length===r.length;var m=p.length===r.length;if(r.length>0&&t.length===0){console.error("THREE.DirectGeometry: Faceless geometries are not supported.")}for(var c=0;c<t.length;c++){var g=t[c];this.vertices.push(r[g.a],r[g.b],r[g.c]);var y=g.vertexNormals;if(y.length===3){this.normals.push(y[0],y[1],y[2])}else{var b=g.normal;this.normals.push(b,b,b)}var x=g.vertexColors;if(x.length===3){this.colors.push(x[0],x[1],x[2])}else{var w=g.color;this.colors.push(w,w,w)}if(i===true){var A=n[0][c];if(A!==undefined){this.uvs.push(A[0],A[1],A[2])}else{console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ",c);this.uvs.push(new zt,new zt,new zt)}}if(a===true){var A=n[1][c];if(A!==undefined){this.uvs2.push(A[0],A[1],A[2])}else{console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ",c);this.uvs2.push(new zt,new zt,new zt)}}for(var M=0;M<s;M++){var E=o[M].vertices;u[M].data.push(E[g.a],E[g.b],E[g.c])}for(var M=0;M<f;M++){var S=l[M].vertexNormals[c];h[M].data.push(S.a,S.b,S.c)}if(v){this.skinIndices.push(d[g.a],d[g.b],d[g.c])}if(m){this.skinWeights.push(p[g.a],p[g.b],p[g.c])}}this.computeGroups(e);this.verticesNeedUpdate=e.verticesNeedUpdate;this.normalsNeedUpdate=e.normalsNeedUpdate;this.colorsNeedUpdate=e.colorsNeedUpdate;this.uvsNeedUpdate=e.uvsNeedUpdate;this.groupsNeedUpdate=e.groupsNeedUpdate;return this}});function Hi(e){if(e.length===0)return-Infinity;var t=e[0];for(var r=1,n=e.length;r<n;++r){if(e[r]>t)t=e[r]}return t}var Vi=1;function Wi(){Object.defineProperty(this,"id",{value:Vi+=2});this.uuid=jt.generateUUID();this.name="";this.type="BufferGeometry";this.index=null;this.attributes={};this.morphAttributes={};this.groups=[];this.boundingBox=null;this.boundingSphere=null;this.drawRange={start:0,count:Infinity};this.userData={}}Wi.prototype=Object.assign(Object.create(n.prototype),{constructor:Wi,isBufferGeometry:true,getIndex:function(){return this.index},setIndex:function(e){if(Array.isArray(e)){this.index=new(Hi(e)>65535?ji:Ui)(e,1)}else{this.index=e}},addAttribute:function(e,t){if(!(t&&t.isBufferAttribute)&&!(t&&t.isInterleavedBufferAttribute)){console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute ).");return this.addAttribute(e,new Ri(arguments[1],arguments[2]))}if(e==="index"){console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute.");this.setIndex(t);return this}this.attributes[e]=t;return this},getAttribute:function(e){return this.attributes[e]},removeAttribute:function(e){delete this.attributes[e];return this},addGroup:function(e,t,r){this.groups.push({start:e,count:t,materialIndex:r!==undefined?r:0})},clearGroups:function(){this.groups=[]},setDrawRange:function(e,t){this.drawRange.start=e;this.drawRange.count=t},applyMatrix:function(e){var t=this.attributes.position;if(t!==undefined){e.applyToBufferAttribute(t);t.needsUpdate=true}var r=this.attributes.normal;if(r!==undefined){var n=(new Vt).getNormalMatrix(e);n.applyToBufferAttribute(r);r.needsUpdate=true}if(this.boundingBox!==null){this.computeBoundingBox()}if(this.boundingSphere!==null){this.computeBoundingSphere()}return this},rotateX:function(){var e=new Nt;return function t(r){e.makeRotationX(r);this.applyMatrix(e);return this}}(),rotateY:function(){var e=new Nt;return function t(r){e.makeRotationY(r);this.applyMatrix(e);return this}}(),rotateZ:function(){var e=new Nt;return function t(r){e.makeRotationZ(r);this.applyMatrix(e);return this}}(),translate:function(){var e=new Nt;return function t(r,n,i){e.makeTranslation(r,n,i);this.applyMatrix(e);return this}}(),scale:function(){var e=new Nt;return function t(r,n,i){e.makeScale(r,n,i);this.applyMatrix(e);return this}}(),lookAt:function(){var e=new Ci;return function t(r){e.lookAt(r);e.updateMatrix();this.applyMatrix(e.matrix)}}(),center:function(){var e=new Ht;return function t(){this.computeBoundingBox();this.boundingBox.getCenter(e).negate();this.translate(e.x,e.y,e.z);return this}}(),setFromObject:function(e){var t=e.geometry;if(e.isPoints||e.isLine){var r=new zi(t.vertices.length*3,3);var n=new zi(t.colors.length*3,3);this.addAttribute("position",r.copyVector3sArray(t.vertices));this.addAttribute("color",n.copyColorsArray(t.colors));if(t.lineDistances&&t.lineDistances.length===t.vertices.length){var i=new zi(t.lineDistances.length,1);this.addAttribute("lineDistance",i.copyArray(t.lineDistances))}if(t.boundingSphere!==null){this.boundingSphere=t.boundingSphere.clone()}if(t.boundingBox!==null){this.boundingBox=t.boundingBox.clone()}}else if(e.isMesh){if(t&&t.isGeometry){this.fromGeometry(t)}}return this},setFromPoints:function(e){var t=[];for(var r=0,n=e.length;r<n;r++){var i=e[r];t.push(i.x,i.y,i.z||0)}this.addAttribute("position",new zi(t,3));return this},updateFromObject:function(e){var t=e.geometry;if(e.isMesh){var r=t.__directGeometry;if(t.elementsNeedUpdate===true){r=undefined;t.elementsNeedUpdate=false}if(r===undefined){return this.fromGeometry(t)}r.verticesNeedUpdate=t.verticesNeedUpdate;r.normalsNeedUpdate=t.normalsNeedUpdate;r.colorsNeedUpdate=t.colorsNeedUpdate;r.uvsNeedUpdate=t.uvsNeedUpdate;r.groupsNeedUpdate=t.groupsNeedUpdate;t.verticesNeedUpdate=false;t.normalsNeedUpdate=false;t.colorsNeedUpdate=false;t.uvsNeedUpdate=false;t.groupsNeedUpdate=false;t=r}var n;if(t.verticesNeedUpdate===true){n=this.attributes.position;if(n!==undefined){n.copyVector3sArray(t.vertices);n.needsUpdate=true}t.verticesNeedUpdate=false}if(t.normalsNeedUpdate===true){n=this.attributes.normal;if(n!==undefined){n.copyVector3sArray(t.normals);n.needsUpdate=true}t.normalsNeedUpdate=false}if(t.colorsNeedUpdate===true){n=this.attributes.color;if(n!==undefined){n.copyColorsArray(t.colors);n.needsUpdate=true}t.colorsNeedUpdate=false}if(t.uvsNeedUpdate){n=this.attributes.uv;if(n!==undefined){n.copyVector2sArray(t.uvs);n.needsUpdate=true}t.uvsNeedUpdate=false}if(t.lineDistancesNeedUpdate){n=this.attributes.lineDistance;if(n!==undefined){n.copyArray(t.lineDistances);n.needsUpdate=true}t.lineDistancesNeedUpdate=false}if(t.groupsNeedUpdate){t.computeGroups(e.geometry);this.groups=t.groups;t.groupsNeedUpdate=false}return this},fromGeometry:function(e){e.__directGeometry=(new ki).fromGeometry(e);return this.fromDirectGeometry(e.__directGeometry)},fromDirectGeometry:function(e){var t=new Float32Array(e.vertices.length*3);this.addAttribute("position",new Ri(t,3).copyVector3sArray(e.vertices));if(e.normals.length>0){var r=new Float32Array(e.normals.length*3);this.addAttribute("normal",new Ri(r,3).copyVector3sArray(e.normals))}if(e.colors.length>0){var n=new Float32Array(e.colors.length*3);this.addAttribute("color",new Ri(n,3).copyColorsArray(e.colors))}if(e.uvs.length>0){var i=new Float32Array(e.uvs.length*2);this.addAttribute("uv",new Ri(i,2).copyVector2sArray(e.uvs))}if(e.uvs2.length>0){var a=new Float32Array(e.uvs2.length*2);this.addAttribute("uv2",new Ri(a,2).copyVector2sArray(e.uvs2))}this.groups=e.groups;for(var o in e.morphTargets){var s=[];var u=e.morphTargets[o];for(var c=0,l=u.length;c<l;c++){var f=u[c];var h=new zi(f.data.length*3,3);h.name=f.name;s.push(h.copyVector3sArray(f.data))}this.morphAttributes[o]=s}if(e.skinIndices.length>0){var d=new zi(e.skinIndices.length*4,4);this.addAttribute("skinIndex",d.copyVector4sArray(e.skinIndices))}if(e.skinWeights.length>0){var p=new zi(e.skinWeights.length*4,4);this.addAttribute("skinWeight",p.copyVector4sArray(e.skinWeights))}if(e.boundingSphere!==null){this.boundingSphere=e.boundingSphere.clone()}if(e.boundingBox!==null){this.boundingBox=e.boundingBox.clone()}return this},computeBoundingBox:function(){if(this.boundingBox===null){this.boundingBox=new $t}var e=this.attributes.position;if(e!==undefined){this.boundingBox.setFromBufferAttribute(e)}else{this.boundingBox.makeEmpty()}if(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z)){console.error('THREE.BufferGeometry.computeBoundingBox: Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}},computeBoundingSphere:function(){var e=new $t;var t=new Ht;return function r(){if(this.boundingSphere===null){this.boundingSphere=new er}var n=this.attributes.position;if(n){var i=this.boundingSphere.center;e.setFromBufferAttribute(n);e.getCenter(i);var a=0;for(var o=0,s=n.count;o<s;o++){t.x=n.getX(o);t.y=n.getY(o);t.z=n.getZ(o);a=Math.max(a,i.distanceToSquared(t))}this.boundingSphere.radius=Math.sqrt(a);if(isNaN(this.boundingSphere.radius)){console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}}}(),computeFaceNormals:function(){},computeVertexNormals:function(){var e=this.index;var t=this.attributes;if(t.position){var r=t.position.array;if(t.normal===undefined){this.addAttribute("normal",new Ri(new Float32Array(r.length),3))}else{var n=t.normal.array;for(var i=0,a=n.length;i<a;i++){n[i]=0}}var o=t.normal.array;var s,u,c;var l=new Ht,f=new Ht,h=new Ht;var d=new Ht,p=new Ht;if(e){var v=e.array;for(var i=0,a=e.count;i<a;i+=3){s=v[i+0]*3;u=v[i+1]*3;c=v[i+2]*3;l.fromArray(r,s);f.fromArray(r,u);h.fromArray(r,c);d.subVectors(h,f);p.subVectors(l,f);d.cross(p);o[s]+=d.x;o[s+1]+=d.y;o[s+2]+=d.z;o[u]+=d.x;o[u+1]+=d.y;o[u+2]+=d.z;o[c]+=d.x;o[c+1]+=d.y;o[c+2]+=d.z}}else{for(var i=0,a=r.length;i<a;i+=9){l.fromArray(r,i);f.fromArray(r,i+3);h.fromArray(r,i+6);d.subVectors(h,f);p.subVectors(l,f);d.cross(p);o[i]=d.x;o[i+1]=d.y;o[i+2]=d.z;o[i+3]=d.x;o[i+4]=d.y;o[i+5]=d.z;o[i+6]=d.x;o[i+7]=d.y;o[i+8]=d.z}}this.normalizeNormals();t.normal.needsUpdate=true}},merge:function(e,t){if(!(e&&e.isBufferGeometry)){console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",e);return}if(t===undefined){t=0;console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. "+"Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge.")}var r=this.attributes;for(var n in r){if(e.attributes[n]===undefined)continue;var i=r[n];var a=i.array;var o=e.attributes[n];var s=o.array;var u=o.itemSize;for(var c=0,l=u*t;c<s.length;c++,l++){a[l]=s[c]}}return this},normalizeNormals:function(){var e=new Ht;return function t(){var r=this.attributes.normal;for(var n=0,i=r.count;n<i;n++){e.x=r.getX(n);e.y=r.getY(n);e.z=r.getZ(n);e.normalize();r.setXYZ(n,e.x,e.y,e.z)}}}(),toNonIndexed:function(){if(this.index===null){console.warn("THREE.BufferGeometry.toNonIndexed(): Geometry is already non-indexed.");return this}var e=new Wi;var t=this.index.array;var r=this.attributes;for(var n in r){var i=r[n];var a=i.array;var o=i.itemSize;var s=new a.constructor(t.length*o);var u=0,c=0;for(var l=0,f=t.length;l<f;l++){u=t[l]*o;for(var h=0;h<o;h++){s[c++]=a[u++]}}e.addAttribute(n,new Ri(s,o))}var d=this.groups;for(var l=0,f=d.length;l<f;l++){var p=d[l];e.addGroup(p.start,p.count,p.materialIndex)}return e},toJSON:function(){var e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};e.uuid=this.uuid;e.type=this.type;if(this.name!=="")e.name=this.name;if(Object.keys(this.userData).length>0)e.userData=this.userData;if(this.parameters!==undefined){var t=this.parameters;for(var r in t){if(t[r]!==undefined)e[r]=t[r]}return e}e.data={attributes:{}};var n=this.index;if(n!==null){var i=Array.prototype.slice.call(n.array);e.data.index={type:n.array.constructor.name,array:i}}var a=this.attributes;for(var r in a){var o=a[r];var i=Array.prototype.slice.call(o.array);e.data.attributes[r]={itemSize:o.itemSize,type:o.array.constructor.name,array:i,normalized:o.normalized}}var s=this.groups;if(s.length>0){e.data.groups=JSON.parse(JSON.stringify(s))}var u=this.boundingSphere;if(u!==null){e.data.boundingSphere={center:u.center.toArray(),radius:u.radius}}return e},clone:function(){return(new Wi).copy(this)},copy:function(e){var t,r,n;this.index=null;this.attributes={};this.morphAttributes={};this.groups=[];this.boundingBox=null;this.boundingSphere=null;this.name=e.name;var i=e.index;if(i!==null){this.setIndex(i.clone())}var a=e.attributes;for(t in a){var o=a[t];this.addAttribute(t,o.clone())}var s=e.morphAttributes;for(t in s){var u=[];var c=s[t];for(r=0,n=c.length;r<n;r++){u.push(c[r].clone())}this.morphAttributes[t]=u}var l=e.groups;for(r=0,n=l.length;r<n;r++){var f=l[r];this.addGroup(f.start,f.count,f.materialIndex)}var h=e.boundingBox;if(h!==null){this.boundingBox=h.clone()}var d=e.boundingSphere;if(d!==null){this.boundingSphere=d.clone()}this.drawRange.start=e.drawRange.start;this.drawRange.count=e.drawRange.count;this.userData=e.userData;return this},dispose:function(){this.dispatchEvent({type:"dispose"})}});function Yi(e,t,r,n,i,a){Li.call(this);this.type="BoxGeometry";this.parameters={width:e,height:t,depth:r,widthSegments:n,heightSegments:i,depthSegments:a};this.fromBufferGeometry(new Xi(e,t,r,n,i,a));this.mergeVertices()}Yi.prototype=Object.create(Li.prototype);Yi.prototype.constructor=Yi;function Xi(e,t,r,n,i,a){Wi.call(this);this.type="BoxBufferGeometry";this.parameters={width:e,height:t,depth:r,widthSegments:n,heightSegments:i,depthSegments:a};var o=this;e=e||1;t=t||1;r=r||1;n=Math.floor(n)||1;i=Math.floor(i)||1;a=Math.floor(a)||1;var s=[];var u=[];var c=[];var l=[];var f=0;var h=0;d("z","y","x",-1,-1,r,t,e,a,i,0);d("z","y","x",1,-1,r,t,-e,a,i,1);d("x","z","y",1,1,e,r,t,n,a,2);d("x","z","y",1,-1,e,r,-t,n,a,3);d("x","y","z",1,-1,e,t,r,n,i,4);d("x","y","z",-1,-1,e,t,-r,n,i,5);this.setIndex(s);this.addAttribute("position",new zi(u,3));this.addAttribute("normal",new zi(c,3));this.addAttribute("uv",new zi(l,2));function d(e,t,r,n,i,a,d,p,v,m,g){var y=a/v;var b=d/m;var x=a/2;var w=d/2;var A=p/2;var M=v+1;var E=m+1;var S=0;var T=0;var _,P;var C=new Ht;for(P=0;P<E;P++){var O=P*b-w;for(_=0;_<M;_++){var L=_*y-x;C[e]=L*n;C[t]=O*i;C[r]=A;u.push(C.x,C.y,C.z);C[e]=0;C[t]=0;C[r]=p>0?1:-1;c.push(C.x,C.y,C.z);l.push(_/v);l.push(1-P/m);S+=1}}for(P=0;P<m;P++){for(_=0;_<v;_++){var R=f+_+M*P;var B=f+_+M*(P+1);var D=f+(_+1)+M*(P+1);var I=f+(_+1)+M*P;s.push(R,B,I);s.push(B,D,I);T+=6}}o.addGroup(h,T,g);h+=T;f+=S}}Xi.prototype=Object.create(Wi.prototype);Xi.prototype.constructor=Xi;function Qi(e,t,r,n){Li.call(this);this.type="PlaneGeometry";this.parameters={width:e,height:t,widthSegments:r,heightSegments:n};this.fromBufferGeometry(new qi(e,t,r,n));this.mergeVertices()}Qi.prototype=Object.create(Li.prototype);Qi.prototype.constructor=Qi;function qi(e,t,r,n){Wi.call(this);this.type="PlaneBufferGeometry";this.parameters={width:e,height:t,widthSegments:r,heightSegments:n};e=e||1;t=t||1;var i=e/2;var a=t/2;var o=Math.floor(r)||1;var s=Math.floor(n)||1;var u=o+1;var c=s+1;var l=e/o;var f=t/s;var h,d;var p=[];var v=[];var m=[];var g=[];for(d=0;d<c;d++){var y=d*f-a;for(h=0;h<u;h++){var b=h*l-i;v.push(b,-y,0);m.push(0,0,1);g.push(h/o);g.push(1-d/s)}}for(d=0;d<s;d++){for(h=0;h<o;h++){var x=h+u*d;var w=h+u*(d+1);var A=h+1+u*(d+1);var M=h+1+u*d;p.push(x,w,M);p.push(w,A,M)}}this.setIndex(p);this.addAttribute("position",new zi(v,3));this.addAttribute("normal",new zi(m,3));this.addAttribute("uv",new zi(g,2))}qi.prototype=Object.create(Wi.prototype);qi.prototype.constructor=qi;var Ji=0;function Ki(){Object.defineProperty(this,"id",{value:Ji++});this.uuid=jt.generateUUID();this.name="";this.type="Material";this.fog=true;this.lights=true;this.blending=E;this.side=v;this.flatShading=false;this.vertexColors=x;this.opacity=1;this.transparent=false;this.blendSrc=G;this.blendDst=j;this.blendEquation=C;this.blendSrcAlpha=null;this.blendDstAlpha=null;this.blendEquationAlpha=null;this.depthFunc=Q;this.depthTest=true;this.depthWrite=true;this.clippingPlanes=null;this.clipIntersection=false;this.clipShadows=false;this.shadowSide=null;this.colorWrite=true;this.precision=null;this.polygonOffset=false;this.polygonOffsetFactor=0;this.polygonOffsetUnits=0;this.dithering=false;this.alphaTest=0;this.premultipliedAlpha=false;this.visible=true;this.userData={};this.needsUpdate=true}Ki.prototype=Object.assign(Object.create(n.prototype),{constructor:Ki,isMaterial:true,onBeforeCompile:function(){},setValues:function(e){if(e===undefined)return;for(var t in e){var r=e[t];if(r===undefined){console.warn("THREE.Material: '"+t+"' parameter is undefined.");continue}if(t==="shading"){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.");this.flatShading=r===y?true:false;continue}var n=this[t];if(n===undefined){console.warn("THREE."+this.type+": '"+t+"' is not a property of this material.");continue}if(n&&n.isColor){n.set(r)}else if(n&&n.isVector3&&(r&&r.isVector3)){n.copy(r)}else{this[t]=r}}},toJSON:function(e){var t=e===undefined||typeof e==="string";if(t){e={textures:{},images:{}}}var r={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};r.uuid=this.uuid;r.type=this.type;if(this.name!=="")r.name=this.name;if(this.color&&this.color.isColor)r.color=this.color.getHex();if(this.roughness!==undefined)r.roughness=this.roughness;if(this.metalness!==undefined)r.metalness=this.metalness;if(this.emissive&&this.emissive.isColor)r.emissive=this.emissive.getHex();if(this.emissiveIntensity!==1)r.emissiveIntensity=this.emissiveIntensity;if(this.specular&&this.specular.isColor)r.specular=this.specular.getHex();if(this.shininess!==undefined)r.shininess=this.shininess;if(this.clearCoat!==undefined)r.clearCoat=this.clearCoat;if(this.clearCoatRoughness!==undefined)r.clearCoatRoughness=this.clearCoatRoughness;if(this.map&&this.map.isTexture)r.map=this.map.toJSON(e).uuid;if(this.alphaMap&&this.alphaMap.isTexture)r.alphaMap=this.alphaMap.toJSON(e).uuid;if(this.lightMap&&this.lightMap.isTexture)r.lightMap=this.lightMap.toJSON(e).uuid;if(this.aoMap&&this.aoMap.isTexture){r.aoMap=this.aoMap.toJSON(e).uuid;r.aoMapIntensity=this.aoMapIntensity}if(this.bumpMap&&this.bumpMap.isTexture){r.bumpMap=this.bumpMap.toJSON(e).uuid;r.bumpScale=this.bumpScale}if(this.normalMap&&this.normalMap.isTexture){r.normalMap=this.normalMap.toJSON(e).uuid;r.normalMapType=this.normalMapType;r.normalScale=this.normalScale.toArray()}if(this.displacementMap&&this.displacementMap.isTexture){r.displacementMap=this.displacementMap.toJSON(e).uuid;r.displacementScale=this.displacementScale;r.displacementBias=this.displacementBias}if(this.roughnessMap&&this.roughnessMap.isTexture)r.roughnessMap=this.roughnessMap.toJSON(e).uuid;if(this.metalnessMap&&this.metalnessMap.isTexture)r.metalnessMap=this.metalnessMap.toJSON(e).uuid;if(this.emissiveMap&&this.emissiveMap.isTexture)r.emissiveMap=this.emissiveMap.toJSON(e).uuid;if(this.specularMap&&this.specularMap.isTexture)r.specularMap=this.specularMap.toJSON(e).uuid;if(this.envMap&&this.envMap.isTexture){r.envMap=this.envMap.toJSON(e).uuid;r.reflectivity=this.reflectivity;if(this.combine!==undefined)r.combine=this.combine;if(this.envMapIntensity!==undefined)r.envMapIntensity=this.envMapIntensity}if(this.gradientMap&&this.gradientMap.isTexture){r.gradientMap=this.gradientMap.toJSON(e).uuid}if(this.size!==undefined)r.size=this.size;if(this.sizeAttenuation!==undefined)r.sizeAttenuation=this.sizeAttenuation;if(this.blending!==E)r.blending=this.blending;if(this.flatShading===true)r.flatShading=this.flatShading;if(this.side!==v)r.side=this.side;if(this.vertexColors!==x)r.vertexColors=this.vertexColors;if(this.opacity<1)r.opacity=this.opacity;if(this.transparent===true)r.transparent=this.transparent;r.depthFunc=this.depthFunc;r.depthTest=this.depthTest;r.depthWrite=this.depthWrite;if(this.rotation!==0)r.rotation=this.rotation;if(this.polygonOffset===true)r.polygonOffset=true;if(this.polygonOffsetFactor!==0)r.polygonOffsetFactor=this.polygonOffsetFactor;if(this.polygonOffsetUnits!==0)r.polygonOffsetUnits=this.polygonOffsetUnits;if(this.linewidth!==1)r.linewidth=this.linewidth;if(this.dashSize!==undefined)r.dashSize=this.dashSize;if(this.gapSize!==undefined)r.gapSize=this.gapSize;if(this.scale!==undefined)r.scale=this.scale;if(this.dithering===true)r.dithering=true;if(this.alphaTest>0)r.alphaTest=this.alphaTest;if(this.premultipliedAlpha===true)r.premultipliedAlpha=this.premultipliedAlpha;if(this.wireframe===true)r.wireframe=this.wireframe;if(this.wireframeLinewidth>1)r.wireframeLinewidth=this.wireframeLinewidth;if(this.wireframeLinecap!=="round")r.wireframeLinecap=this.wireframeLinecap;if(this.wireframeLinejoin!=="round")r.wireframeLinejoin=this.wireframeLinejoin;if(this.morphTargets===true)r.morphTargets=true;if(this.skinning===true)r.skinning=true;if(this.visible===false)r.visible=false;if(JSON.stringify(this.userData)!=="{}")r.userData=this.userData;function n(e){var t=[];for(var r in e){var n=e[r];delete n.metadata;t.push(n)}return t}if(t){var i=n(e.textures);var a=n(e.images);if(i.length>0)r.textures=i;if(a.length>0)r.images=a}return r},clone:function(){return(new this.constructor).copy(this)},copy:function(e){this.name=e.name;this.fog=e.fog;this.lights=e.lights;this.blending=e.blending;this.side=e.side;this.flatShading=e.flatShading;this.vertexColors=e.vertexColors;this.opacity=e.opacity;this.transparent=e.transparent;this.blendSrc=e.blendSrc;this.blendDst=e.blendDst;this.blendEquation=e.blendEquation;this.blendSrcAlpha=e.blendSrcAlpha;this.blendDstAlpha=e.blendDstAlpha;this.blendEquationAlpha=e.blendEquationAlpha;this.depthFunc=e.depthFunc;this.depthTest=e.depthTest;this.depthWrite=e.depthWrite;this.colorWrite=e.colorWrite;this.precision=e.precision;this.polygonOffset=e.polygonOffset;this.polygonOffsetFactor=e.polygonOffsetFactor;this.polygonOffsetUnits=e.polygonOffsetUnits;this.dithering=e.dithering;this.alphaTest=e.alphaTest;this.premultipliedAlpha=e.premultipliedAlpha;this.visible=e.visible;this.userData=JSON.parse(JSON.stringify(e.userData));this.clipShadows=e.clipShadows;this.clipIntersection=e.clipIntersection;var t=e.clippingPlanes,r=null;if(t!==null){var n=t.length;r=new Array(n);for(var i=0;i!==n;++i)r[i]=t[i].clone()}this.clippingPlanes=r;this.shadowSide=e.shadowSide;return this},dispose:function(){this.dispatchEvent({type:"dispose"})}});function Zi(e){Ki.call(this);this.type="ShaderMaterial";this.defines={};this.uniforms={};this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}";this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}";this.linewidth=1;this.wireframe=false;this.wireframeLinewidth=1;this.fog=false;this.lights=false;this.clipping=false;this.skinning=false;this.morphTargets=false;this.morphNormals=false;this.extensions={derivatives:false,fragDepth:false,drawBuffers:false,shaderTextureLOD:false};this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]};this.index0AttributeName=undefined;this.uniformsNeedUpdate=false;if(e!==undefined){if(e.attributes!==undefined){console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead.")}this.setValues(e)}}Zi.prototype=Object.create(Ki.prototype);Zi.prototype.constructor=Zi;Zi.prototype.isShaderMaterial=true;Zi.prototype.copy=function(e){Ki.prototype.copy.call(this,e);this.fragmentShader=e.fragmentShader;this.vertexShader=e.vertexShader;this.uniforms=mi(e.uniforms);this.defines=Object.assign({},e.defines);this.wireframe=e.wireframe;this.wireframeLinewidth=e.wireframeLinewidth;this.lights=e.lights;this.clipping=e.clipping;this.skinning=e.skinning;this.morphTargets=e.morphTargets;this.morphNormals=e.morphNormals;this.extensions=e.extensions;return this};Zi.prototype.toJSON=function(e){var t=Ki.prototype.toJSON.call(this,e);t.uniforms={};for(var r in this.uniforms){var n=this.uniforms[r];var i=n.value;if(i.isTexture){t.uniforms[r]={type:"t",value:i.toJSON(e).uuid}}else if(i.isColor){t.uniforms[r]={type:"c",value:i.getHex()}}else if(i.isVector2){t.uniforms[r]={type:"v2",value:i.toArray()}}else if(i.isVector3){t.uniforms[r]={type:"v3",value:i.toArray()}}else if(i.isVector4){t.uniforms[r]={type:"v4",value:i.toArray()}}else if(i.isMatrix4){t.uniforms[r]={type:"m4",value:i.toArray()}}else{t.uniforms[r]={value:i}}}if(Object.keys(this.defines).length>0)t.defines=this.defines;t.vertexShader=this.vertexShader;t.fragmentShader=this.fragmentShader;return t};function $i(e,t){this.origin=e!==undefined?e:new Ht;this.direction=t!==undefined?t:new Ht}Object.assign($i.prototype,{set:function(e,t){this.origin.copy(e);this.direction.copy(t);return this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){this.origin.copy(e.origin);this.direction.copy(e.direction);return this},at:function(e,t){if(t===undefined){console.warn("THREE.Ray: .at() target is now required");t=new Ht}return t.copy(this.direction).multiplyScalar(e).add(this.origin)},lookAt:function(e){this.direction.copy(e).sub(this.origin).normalize();return this},recast:function(){var e=new Ht;return function t(r){this.origin.copy(this.at(r,e));return this}}(),closestPointToPoint:function(e,t){if(t===undefined){console.warn("THREE.Ray: .closestPointToPoint() target is now required");t=new Ht}t.subVectors(e,this.origin);var r=t.dot(this.direction);if(r<0){return t.copy(this.origin)}return t.copy(this.direction).multiplyScalar(r).add(this.origin)},distanceToPoint:function(e){return Math.sqrt(this.distanceSqToPoint(e))},distanceSqToPoint:function(){var e=new Ht;return function t(r){var n=e.subVectors(r,this.origin).dot(this.direction);if(n<0){return this.origin.distanceToSquared(r)}e.copy(this.direction).multiplyScalar(n).add(this.origin);return e.distanceToSquared(r)}}(),distanceSqToSegment:function(){var e=new Ht;var t=new Ht;var r=new Ht;return function n(i,a,o,s){e.copy(i).add(a).multiplyScalar(.5);t.copy(a).sub(i).normalize();r.copy(this.origin).sub(e);var u=i.distanceTo(a)*.5;var c=-this.direction.dot(t);var l=r.dot(this.direction);var f=-r.dot(t);var h=r.lengthSq();var d=Math.abs(1-c*c);var p,v,m,g;if(d>0){p=c*f-l;v=c*l-f;g=u*d;if(p>=0){if(v>=-g){if(v<=g){var y=1/d;p*=y;v*=y;m=p*(p+c*v+2*l)+v*(c*p+v+2*f)+h}else{v=u;p=Math.max(0,-(c*v+l));m=-p*p+v*(v+2*f)+h}}else{v=-u;p=Math.max(0,-(c*v+l));m=-p*p+v*(v+2*f)+h}}else{if(v<=-g){p=Math.max(0,-(-c*u+l));v=p>0?-u:Math.min(Math.max(-u,-f),u);m=-p*p+v*(v+2*f)+h}else if(v<=g){p=0;v=Math.min(Math.max(-u,-f),u);m=v*(v+2*f)+h}else{p=Math.max(0,-(c*u+l));v=p>0?u:Math.min(Math.max(-u,-f),u);m=-p*p+v*(v+2*f)+h}}}else{v=c>0?-u:u;p=Math.max(0,-(c*v+l));m=-p*p+v*(v+2*f)+h}if(o){o.copy(this.direction).multiplyScalar(p).add(this.origin)}if(s){s.copy(t).multiplyScalar(v).add(e)}return m}}(),intersectSphere:function(){var e=new Ht;return function t(r,n){e.subVectors(r.center,this.origin);var i=e.dot(this.direction);var a=e.dot(e)-i*i;var o=r.radius*r.radius;if(a>o)return null;var s=Math.sqrt(o-a);var u=i-s;var c=i+s;if(u<0&&c<0)return null;if(u<0)return this.at(c,n);return this.at(u,n)}}(),intersectsSphere:function(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius},distanceToPlane:function(e){var t=e.normal.dot(this.direction);if(t===0){if(e.distanceToPoint(this.origin)===0){return 0}return null}var r=-(this.origin.dot(e.normal)+e.constant)/t;return r>=0?r:null},intersectPlane:function(e,t){var r=this.distanceToPlane(e);if(r===null){return null}return this.at(r,t)},intersectsPlane:function(e){var t=e.distanceToPoint(this.origin);if(t===0){return true}var r=e.normal.dot(this.direction);if(r*t<0){return true}return false},intersectBox:function(e,t){var r,n,i,a,o,s;var u=1/this.direction.x,c=1/this.direction.y,l=1/this.direction.z;var f=this.origin;if(u>=0){r=(e.min.x-f.x)*u;n=(e.max.x-f.x)*u}else{r=(e.max.x-f.x)*u;n=(e.min.x-f.x)*u}if(c>=0){i=(e.min.y-f.y)*c;a=(e.max.y-f.y)*c}else{i=(e.max.y-f.y)*c;a=(e.min.y-f.y)*c}if(r>a||i>n)return null;if(i>r||r!==r)r=i;if(a<n||n!==n)n=a;if(l>=0){o=(e.min.z-f.z)*l;s=(e.max.z-f.z)*l}else{o=(e.max.z-f.z)*l;s=(e.min.z-f.z)*l}if(r>s||o>n)return null;if(o>r||r!==r)r=o;if(s<n||n!==n)n=s;if(n<0)return null;return this.at(r>=0?r:n,t)},intersectsBox:function(){var e=new Ht;return function t(r){return this.intersectBox(r,e)!==null}}(),intersectTriangle:function(){var e=new Ht;var t=new Ht;var r=new Ht;var n=new Ht;return function i(a,o,s,u,c){t.subVectors(o,a);r.subVectors(s,a);n.crossVectors(t,r);var l=this.direction.dot(n);var f;if(l>0){if(u)return null;f=1}else if(l<0){f=-1;l=-l}else{return null}e.subVectors(this.origin,a);var h=f*this.direction.dot(r.crossVectors(e,r));if(h<0){return null}var d=f*this.direction.dot(t.cross(e));if(d<0){return null}if(h+d>l){return null}var p=-f*e.dot(n);if(p<0){return null}return this.at(p/l,c)}}(),applyMatrix4:function(e){this.origin.applyMatrix4(e);this.direction.transformDirection(e);return this},equals:function(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}});function ea(e,t,r){this.a=e!==undefined?e:new Ht;this.b=t!==undefined?t:new Ht;this.c=r!==undefined?r:new Ht}Object.assign(ea,{getNormal:function(){var e=new Ht;return function t(r,n,i,a){if(a===undefined){console.warn("THREE.Triangle: .getNormal() target is now required");a=new Ht}a.subVectors(i,n);e.subVectors(r,n);a.cross(e);var o=a.lengthSq();if(o>0){return a.multiplyScalar(1/Math.sqrt(o))}return a.set(0,0,0)}}(),getBarycoord:function(){var e=new Ht;var t=new Ht;var r=new Ht;return function n(i,a,o,s,u){e.subVectors(s,a);t.subVectors(o,a);r.subVectors(i,a);var c=e.dot(e);var l=e.dot(t);var f=e.dot(r);var h=t.dot(t);var d=t.dot(r);var p=c*h-l*l;if(u===undefined){console.warn("THREE.Triangle: .getBarycoord() target is now required");u=new Ht}if(p===0){return u.set(-2,-1,-1)}var v=1/p;var m=(h*f-l*d)*v;var g=(c*d-l*f)*v;return u.set(1-m-g,g,m)}}(),containsPoint:function(){var e=new Ht;return function t(r,n,i,a){ea.getBarycoord(r,n,i,a,e);return e.x>=0&&e.y>=0&&e.x+e.y<=1}}(),getUV:function(){var e=new Ht;return function t(r,n,i,a,o,s,u,c){this.getBarycoord(r,n,i,a,e);c.set(0,0);c.addScaledVector(o,e.x);c.addScaledVector(s,e.y);c.addScaledVector(u,e.z);return c}}()});Object.assign(ea.prototype,{set:function(e,t,r){this.a.copy(e);this.b.copy(t);this.c.copy(r);return this},setFromPointsAndIndices:function(e,t,r,n){this.a.copy(e[t]);this.b.copy(e[r]);this.c.copy(e[n]);return this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){this.a.copy(e.a);this.b.copy(e.b);this.c.copy(e.c);return this},getArea:function(){var e=new Ht;var t=new Ht;return function r(){e.subVectors(this.c,this.b);t.subVectors(this.a,this.b);return e.cross(t).length()*.5}}(),getMidpoint:function(e){if(e===undefined){console.warn("THREE.Triangle: .getMidpoint() target is now required");e=new Ht}return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)},getNormal:function(e){return ea.getNormal(this.a,this.b,this.c,e)},getPlane:function(e){if(e===undefined){console.warn("THREE.Triangle: .getPlane() target is now required");e=new Ht}return e.setFromCoplanarPoints(this.a,this.b,this.c)},getBarycoord:function(e,t){return ea.getBarycoord(e,this.a,this.b,this.c,t)},containsPoint:function(e){return ea.containsPoint(e,this.a,this.b,this.c)},getUV:function(e,t,r,n,i){return ea.getUV(e,this.a,this.b,this.c,t,r,n,i)},intersectsBox:function(e){return e.intersectsTriangle(this)},closestPointToPoint:function(){var e=new Ht;var t=new Ht;var r=new Ht;var n=new Ht;var i=new Ht;var a=new Ht;return function o(s,u){if(u===undefined){console.warn("THREE.Triangle: .closestPointToPoint() target is now required");u=new Ht}var c=this.a,l=this.b,f=this.c;var h,d;e.subVectors(l,c);t.subVectors(f,c);n.subVectors(s,c);var p=e.dot(n);var v=t.dot(n);if(p<=0&&v<=0){return u.copy(c)}i.subVectors(s,l);var m=e.dot(i);var g=t.dot(i);if(m>=0&&g<=m){return u.copy(l)}var y=p*g-m*v;if(y<=0&&p>=0&&m<=0){h=p/(p-m);return u.copy(c).addScaledVector(e,h)}a.subVectors(s,f);var b=e.dot(a);var x=t.dot(a);if(x>=0&&b<=x){return u.copy(f)}var w=b*v-p*x;if(w<=0&&v>=0&&x<=0){d=v/(v-x);return u.copy(c).addScaledVector(t,d)}var A=m*x-b*g;if(A<=0&&g-m>=0&&b-x>=0){r.subVectors(f,l);d=(g-m)/(g-m+(b-x));return u.copy(l).addScaledVector(r,d)}var M=1/(A+w+y);h=w*M;d=y*M;return u.copy(c).addScaledVector(e,h).addScaledVector(t,d)}}(),equals:function(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}});function ta(e){Ki.call(this);this.type="MeshBasicMaterial";this.color=new xi(16777215);this.map=null;this.lightMap=null;this.lightMapIntensity=1;this.aoMap=null;this.aoMapIntensity=1;this.specularMap=null;this.alphaMap=null;this.envMap=null;this.combine=$;this.reflectivity=1;this.refractionRatio=.98;this.wireframe=false;this.wireframeLinewidth=1;this.wireframeLinecap="round";this.wireframeLinejoin="round";this.skinning=false;this.morphTargets=false;this.lights=false;this.setValues(e)}ta.prototype=Object.create(Ki.prototype);ta.prototype.constructor=ta;ta.prototype.isMeshBasicMaterial=true;ta.prototype.copy=function(e){Ki.prototype.copy.call(this,e);this.color.copy(e.color);this.map=e.map;this.lightMap=e.lightMap;this.lightMapIntensity=e.lightMapIntensity;this.aoMap=e.aoMap;this.aoMapIntensity=e.aoMapIntensity;this.specularMap=e.specularMap;this.alphaMap=e.alphaMap;this.envMap=e.envMap;this.combine=e.combine;this.reflectivity=e.reflectivity;this.refractionRatio=e.refractionRatio;this.wireframe=e.wireframe;this.wireframeLinewidth=e.wireframeLinewidth;this.wireframeLinecap=e.wireframeLinecap;this.wireframeLinejoin=e.wireframeLinejoin;this.skinning=e.skinning;this.morphTargets=e.morphTargets;return this};function ra(e,t){Ci.call(this);this.type="Mesh";this.geometry=e!==undefined?e:new Wi;this.material=t!==undefined?t:new ta({color:Math.random()*16777215});this.drawMode=Et;this.updateMorphTargets()}ra.prototype=Object.assign(Object.create(Ci.prototype),{constructor:ra,isMesh:true,setDrawMode:function(e){this.drawMode=e},copy:function(e){Ci.prototype.copy.call(this,e);this.drawMode=e.drawMode;if(e.morphTargetInfluences!==undefined){this.morphTargetInfluences=e.morphTargetInfluences.slice()}if(e.morphTargetDictionary!==undefined){this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)}return this},updateMorphTargets:function(){var e=this.geometry;var t,r,n;if(e.isBufferGeometry){var i=e.morphAttributes;var a=Object.keys(i);if(a.length>0){var o=i[a[0]];if(o!==undefined){this.morphTargetInfluences=[];this.morphTargetDictionary={};for(t=0,r=o.length;t<r;t++){n=o[t].name||String(t);this.morphTargetInfluences.push(0);this.morphTargetDictionary[n]=t}}}}else{var s=e.morphTargets;if(s!==undefined&&s.length>0){this.morphTargetInfluences=[];this.morphTargetDictionary={};for(t=0,r=s.length;t<r;t++){n=s[t].name||String(t);this.morphTargetInfluences.push(0);this.morphTargetDictionary[n]=t}}}},raycast:function(){var e=new Nt;var t=new $i;var r=new er;var n=new Ht;var i=new Ht;var a=new Ht;var o=new Ht;var s=new Ht;var u=new Ht;var c=new zt;var l=new zt;var f=new zt;var h=new Ht;var d=new Ht;function p(e,t,r,n,i,a,o,s){var u;if(t.side===m){u=n.intersectTriangle(o,a,i,true,s)}else{u=n.intersectTriangle(i,a,o,t.side!==g,s)}if(u===null)return null;d.copy(s);d.applyMatrix4(e.matrixWorld);var c=r.ray.origin.distanceTo(d);if(c<r.near||c>r.far)return null;return{distance:c,point:d.clone(),object:e}}function v(e,t,r,o,s,u,d,v,m){n.fromBufferAttribute(s,d);i.fromBufferAttribute(s,v);a.fromBufferAttribute(s,m);var g=p(e,t,r,o,n,i,a,h);if(g){if(u){c.fromBufferAttribute(u,d);l.fromBufferAttribute(u,v);f.fromBufferAttribute(u,m);g.uv=ea.getUV(h,n,i,a,c,l,f,new zt)}var y=new Si(d,v,m);ea.getNormal(n,i,a,y.normal);g.face=y}return g}return function d(m,g){var y=this.geometry;var b=this.material;var x=this.matrixWorld;if(b===undefined)return;if(y.boundingSphere===null)y.computeBoundingSphere();r.copy(y.boundingSphere);r.applyMatrix4(x);if(m.ray.intersectsSphere(r)===false)return;e.getInverse(x);t.copy(m.ray).applyMatrix4(e);if(y.boundingBox!==null){if(t.intersectsBox(y.boundingBox)===false)return}var w;if(y.isBufferGeometry){var A,M,E;var S=y.index;var T=y.attributes.position;var _=y.attributes.uv;var P=y.groups;var C=y.drawRange;var O,L,R,B;var D,I;var F,U;if(S!==null){if(Array.isArray(b)){for(O=0,R=P.length;O<R;O++){D=P[O];I=b[D.materialIndex];F=Math.max(D.start,C.start);U=Math.min(D.start+D.count,C.start+C.count);for(L=F,B=U;L<B;L+=3){A=S.getX(L);M=S.getX(L+1);E=S.getX(L+2);w=v(this,I,m,t,T,_,A,M,E);if(w){w.faceIndex=Math.floor(L/3);g.push(w)}}}}else{F=Math.max(0,C.start);U=Math.min(S.count,C.start+C.count);for(O=F,R=U;O<R;O+=3){A=S.getX(O);M=S.getX(O+1);E=S.getX(O+2);w=v(this,b,m,t,T,_,A,M,E);if(w){w.faceIndex=Math.floor(O/3);g.push(w)}}}}else if(T!==undefined){if(Array.isArray(b)){for(O=0,R=P.length;O<R;O++){D=P[O];I=b[D.materialIndex];F=Math.max(D.start,C.start);U=Math.min(D.start+D.count,C.start+C.count);for(L=F,B=U;L<B;L+=3){A=L;M=L+1;E=L+2;w=v(this,I,m,t,T,_,A,M,E);if(w){w.faceIndex=Math.floor(L/3);g.push(w)}}}}else{F=Math.max(0,C.start);U=Math.min(T.count,C.start+C.count);for(O=F,R=U;O<R;O+=3){A=O;M=O+1;E=O+2;w=v(this,b,m,t,T,_,A,M,E);if(w){w.faceIndex=Math.floor(O/3);g.push(w)}}}}}else if(y.isGeometry){var G,j,z;var N=Array.isArray(b);var k=y.vertices;var H=y.faces;var V;var W=y.faceVertexUvs[0];if(W.length>0)V=W;for(var Y=0,X=H.length;Y<X;Y++){var Q=H[Y];var q=N?b[Q.materialIndex]:b;if(q===undefined)continue;G=k[Q.a];j=k[Q.b];z=k[Q.c];if(q.morphTargets===true){var J=y.morphTargets;var K=this.morphTargetInfluences;n.set(0,0,0);i.set(0,0,0);a.set(0,0,0);for(var Z=0,$=J.length;Z<$;Z++){var ee=K[Z];if(ee===0)continue;var te=J[Z].vertices;n.addScaledVector(o.subVectors(te[Q.a],G),ee);i.addScaledVector(s.subVectors(te[Q.b],j),ee);a.addScaledVector(u.subVectors(te[Q.c],z),ee)}n.add(G);i.add(j);a.add(z);G=n;j=i;z=a}w=p(this,q,m,t,G,j,z,h);if(w){if(V&&V[Y]){var re=V[Y];c.copy(re[0]);l.copy(re[1]);f.copy(re[2]);w.uv=ea.getUV(h,G,j,z,c,l,f,new zt)}w.face=Q;w.faceIndex=Y;g.push(w)}}}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}});function na(e,t,r,n){var i=new xi(0);var a=0;var o;var s;var u=null;var c=0;function l(t,n,l,h){var d=n.background;if(d===null){f(i,a);u=null;c=0}else if(d&&d.isColor){f(d,1);h=true;u=null;c=0}if(e.autoClear||h){e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil)}if(d&&(d.isCubeTexture||d.isWebGLRenderTargetCube)){if(s===undefined){s=new ra(new Xi(1,1,1),new Zi({type:"BackgroundCubeMaterial",uniforms:mi(Ai.cube.uniforms),vertexShader:Ai.cube.vertexShader,fragmentShader:Ai.cube.fragmentShader,side:m,depthTest:true,depthWrite:false,fog:false}));s.geometry.removeAttribute("normal");s.geometry.removeAttribute("uv");s.onBeforeRender=function(e,t,r){this.matrixWorld.copyPosition(r.matrixWorld)};Object.defineProperty(s.material,"map",{get:function(){return this.uniforms.tCube.value}});r.update(s)}var p=d.isWebGLRenderTargetCube?d.texture:d;s.material.uniforms.tCube.value=p;s.material.uniforms.tFlip.value=d.isWebGLRenderTargetCube?1:-1;if(u!==d||c!==p.version){s.material.needsUpdate=true;u=d;c=p.version}t.unshift(s,s.geometry,s.material,0,null)}else if(d&&d.isTexture){if(o===undefined){o=new ra(new qi(2,2),new Zi({type:"BackgroundMaterial",uniforms:mi(Ai.background.uniforms),vertexShader:Ai.background.vertexShader,fragmentShader:Ai.background.fragmentShader,side:v,depthTest:false,depthWrite:false,fog:false}));o.geometry.removeAttribute("normal");Object.defineProperty(o.material,"map",{get:function(){return this.uniforms.t2D.value}});r.update(o)}o.material.uniforms.t2D.value=d;if(d.matrixAutoUpdate===true){d.updateMatrix()}o.material.uniforms.uvTransform.value.copy(d.matrix);if(u!==d||c!==d.version){o.material.needsUpdate=true;u=d;c=d.version}t.unshift(o,o.geometry,o.material,0,null)}}function f(e,r){t.buffers.color.setClear(e.r,e.g,e.b,r,n)}return{getClearColor:function(){return i},setClearColor:function(e,t){i.set(e);a=t!==undefined?t:1;f(i,a)},getClearAlpha:function(){return a},setClearAlpha:function(e){a=e;f(i,a)},render:l}}function ia(e,t,r,n){var i;function a(e){i=e}function o(t,n){e.drawArrays(i,t,n);r.update(n,i)}function s(a,o,s){var u;if(n.isWebGL2){u=e}else{u=t.get("ANGLE_instanced_arrays");if(u===null){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}}u[n.isWebGL2?"drawArraysInstanced":"drawArraysInstancedANGLE"](i,o,s,a.maxInstancedCount);r.update(s,i,a.maxInstancedCount)}this.setMode=a;this.render=o;this.renderInstances=s}function aa(e,t,r){var n;function i(){if(n!==undefined)return n;var r=t.get("EXT_texture_filter_anisotropic");if(r!==null){n=e.getParameter(r.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else{n=0}return n}function a(t){if(t==="highp"){if(e.getShaderPrecisionFormat(35633,36338).precision>0&&e.getShaderPrecisionFormat(35632,36338).precision>0){return"highp"}t="mediump"}if(t==="mediump"){if(e.getShaderPrecisionFormat(35633,36337).precision>0&&e.getShaderPrecisionFormat(35632,36337).precision>0){return"mediump"}}return"lowp"}var o=typeof WebGL2RenderingContext!=="undefined"&&e instanceof WebGL2RenderingContext;var s=r.precision!==undefined?r.precision:"highp";var u=a(s);if(u!==s){console.warn("THREE.WebGLRenderer:",s,"not supported, using",u,"instead.");s=u}var c=r.logarithmicDepthBuffer===true;var l=e.getParameter(34930);var f=e.getParameter(35660);var h=e.getParameter(3379);var d=e.getParameter(34076);var p=e.getParameter(34921);var v=e.getParameter(36347);var m=e.getParameter(36348);var g=e.getParameter(36349);var y=f>0;var b=o||!!t.get("OES_texture_float");var x=y&&b;return{isWebGL2:o,getMaxAnisotropy:i,getMaxPrecision:a,precision:s,logarithmicDepthBuffer:c,maxTextures:l,maxVertexTextures:f,maxTextureSize:h,maxCubemapSize:d,maxAttributes:p,maxVertexUniforms:v,maxVaryings:m,maxFragmentUniforms:g,vertexTextures:y,floatFragmentTextures:b,floatVertexTextures:x}}function oa(){var e=this,t=null,r=0,n=false,i=false,a=new tr,o=new Vt,s={value:null,needsUpdate:false};this.uniform=s;this.numPlanes=0;this.numIntersection=0;this.init=function(e,i,a){var o=e.length!==0||i||r!==0||n;n=i;t=c(e,a,0);r=e.length;return o};this.beginShadows=function(){i=true;c(null)};this.endShadows=function(){i=false;u()};this.setState=function(e,a,o,l,f,h){if(!n||e===null||e.length===0||i&&!o){if(i){c(null)}else{u()}}else{var d=i?0:r,p=d*4,v=f.clippingState||null;s.value=v;v=c(e,l,p,h);for(var m=0;m!==p;++m){v[m]=t[m]}f.clippingState=v;this.numIntersection=a?this.numPlanes:0;this.numPlanes+=d}};function u(){if(s.value!==t){s.value=t;s.needsUpdate=r>0}e.numPlanes=r;e.numIntersection=0}function c(t,r,n,i){var u=t!==null?t.length:0,c=null;if(u!==0){c=s.value;if(i!==true||c===null){var l=n+u*4,f=r.matrixWorldInverse;o.getNormalMatrix(f);if(c===null||c.length<l){c=new Float32Array(l)}for(var h=0,d=n;h!==u;++h,d+=4){a.copy(t[h]).applyMatrix4(f,o);a.normal.toArray(c,d);c[d+3]=a.constant}}s.value=c;s.needsUpdate=true}e.numPlanes=u;return c}}function sa(e){var t={};return{get:function(r){if(t[r]!==undefined){return t[r]}var n;switch(r){case"WEBGL_depth_texture":n=e.getExtension("WEBGL_depth_texture")||e.getExtension("MOZ_WEBGL_depth_texture")||e.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":n=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":n=e.getExtension("WEBGL_compressed_texture_s3tc")||e.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":n=e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:n=e.getExtension(r)}if(n===null){console.warn("THREE.WebGLRenderer: "+r+" extension not supported.")}t[r]=n;return n}}}function ua(e,t,r){var n={};var i={};function a(e){var o=e.target;var s=n[o.id];if(s.index!==null){t.remove(s.index)}for(var u in s.attributes){t.remove(s.attributes[u])}o.removeEventListener("dispose",a);delete n[o.id];var c=i[s.id];if(c){t.remove(c);delete i[s.id]}r.memory.geometries--}function o(e,t){var i=n[t.id];if(i)return i;t.addEventListener("dispose",a);if(t.isBufferGeometry){i=t}else if(t.isGeometry){if(t._bufferGeometry===undefined){t._bufferGeometry=(new Wi).setFromObject(e)}i=t._bufferGeometry}n[t.id]=i;r.memory.geometries++;return i}function s(e){var r=e.index;var n=e.attributes;if(r!==null){t.update(r,34963)}for(var i in n){t.update(n[i],34962)}var a=e.morphAttributes;for(var i in a){var o=a[i];for(var s=0,u=o.length;s<u;s++){t.update(o[s],34962)}}}function u(e){var r=i[e.id];if(r)return r;var n=[];var a=e.index;var o=e.attributes;if(a!==null){var s=a.array;for(var u=0,c=s.length;u<c;u+=3){var l=s[u+0];var f=s[u+1];var h=s[u+2];n.push(l,f,f,h,h,l)}}else{var s=o.position.array;for(var u=0,c=s.length/3-1;u<c;u+=3){var l=u+0;var f=u+1;var h=u+2;n.push(l,f,f,h,h,l)}}r=new(Hi(n)>65535?ji:Ui)(n,1);t.update(r,34963);i[e.id]=r;return r}return{get:o,update:s,getWireframeAttribute:u}}function ca(e,t,r,n){var i;function a(e){i=e}var o,s;function u(e){o=e.type;s=e.bytesPerElement}function c(t,n){e.drawElements(i,n,o,t*s);r.update(n,i)}function l(a,u,c){var l;if(n.isWebGL2){l=e}else{var l=t.get("ANGLE_instanced_arrays");if(l===null){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}}l[n.isWebGL2?"drawElementsInstanced":"drawElementsInstancedANGLE"](i,c,o,u*s,a.maxInstancedCount);r.update(c,i,a.maxInstancedCount)}this.setMode=a;this.setIndex=u;this.render=c;this.renderInstances=l}function la(e){var t={geometries:0,textures:0};var r={frame:0,calls:0,triangles:0,points:0,lines:0};function n(e,t,n){n=n||1;r.calls++;switch(t){case 4:r.triangles+=n*(e/3);break;case 5:case 6:r.triangles+=n*(e-2);break;case 1:r.lines+=n*(e/2);break;case 3:r.lines+=n*(e-1);break;case 2:r.lines+=n*e;break;case 0:r.points+=n*e;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",t);break}}function i(){r.frame++;r.calls=0;r.triangles=0;r.points=0;r.lines=0}return{memory:t,render:r,programs:null,autoReset:true,reset:i,update:n}}function fa(e,t){return Math.abs(t[1])-Math.abs(e[1])}function ha(e){var t={};var r=new Float32Array(8);function n(n,i,a,o){var s=n.morphTargetInfluences;var u=s.length;var c=t[i.id];if(c===undefined){c=[];for(var l=0;l<u;l++){c[l]=[l,0]}t[i.id]=c}var f=a.morphTargets&&i.morphAttributes.position;var h=a.morphNormals&&i.morphAttributes.normal;for(var l=0;l<u;l++){var d=c[l];if(d[1]!==0){if(f)i.removeAttribute("morphTarget"+l);if(h)i.removeAttribute("morphNormal"+l)}}for(var l=0;l<u;l++){var d=c[l];d[0]=l;d[1]=s[l]}c.sort(fa);for(var l=0;l<8;l++){var d=c[l];if(d){var p=d[0];var v=d[1];if(v){if(f)i.addAttribute("morphTarget"+l,f[p]);if(h)i.addAttribute("morphNormal"+l,h[p]);r[l]=v;continue}}r[l]=0}o.getUniforms().setValue(e,"morphTargetInfluences",r)}return{update:n}}function da(e,t){var r={};function n(n){var i=t.render.frame;var a=n.geometry;var o=e.get(n,a);if(r[o.id]!==i){if(a.isGeometry){o.updateFromObject(n)}e.update(o);r[o.id]=i}return o}function i(){r={}}return{update:n,dispose:i}}function pa(e,t,r,n,i,a,o,s,u,c){e=e!==undefined?e:[];t=t!==undefined?t:ce;Qt.call(this,e,t,r,n,i,a,o,s,u,c);this.flipY=false}pa.prototype=Object.create(Qt.prototype);pa.prototype.constructor=pa;pa.prototype.isCubeTexture=true;Object.defineProperty(pa.prototype,"images",{get:function(){return this.image},set:function(e){this.image=e}});function va(e,t,r,n){Qt.call(this,null);this.image={data:e,width:t,height:r,depth:n};this.magFilter=be;this.minFilter=be;this.generateMipmaps=false;this.flipY=false}va.prototype=Object.create(Qt.prototype);va.prototype.constructor=va;va.prototype.isDataTexture3D=true;var ma=new Qt;var ga=new va;var ya=new pa;function ba(){this.seq=[];this.map={}}var xa=[];var wa=[];var Aa=new Float32Array(16);var Ma=new Float32Array(9);var Ea=new Float32Array(4);function Sa(e,t,r){var n=e[0];if(n<=0||n>0)return e;var i=t*r,a=xa[i];if(a===undefined){a=new Float32Array(i);xa[i]=a}if(t!==0){n.toArray(a,0);for(var o=1,s=0;o!==t;++o){s+=r;e[o].toArray(a,s)}}return a}function Ta(e,t){if(e.length!==t.length)return false;for(var r=0,n=e.length;r<n;r++){if(e[r]!==t[r])return false}return true}function _a(e,t){for(var r=0,n=t.length;r<n;r++){e[r]=t[r]}}function Pa(e,t){var r=wa[t];if(r===undefined){r=new Int32Array(t);wa[t]=r}for(var n=0;n!==t;++n)r[n]=e.allocTextureUnit();return r}function Ca(e,t){var r=this.cache;if(r[0]===t)return;e.uniform1f(this.addr,t);r[0]=t}function Oa(e,t){var r=this.cache;if(r[0]===t)return;e.uniform1i(this.addr,t);r[0]=t}function La(e,t){var r=this.cache;if(t.x!==undefined){if(r[0]!==t.x||r[1]!==t.y){e.uniform2f(this.addr,t.x,t.y);r[0]=t.x;r[1]=t.y}}else{if(Ta(r,t))return;e.uniform2fv(this.addr,t);_a(r,t)}}function Ra(e,t){var r=this.cache;if(t.x!==undefined){if(r[0]!==t.x||r[1]!==t.y||r[2]!==t.z){e.uniform3f(this.addr,t.x,t.y,t.z);r[0]=t.x;r[1]=t.y;r[2]=t.z}}else if(t.r!==undefined){if(r[0]!==t.r||r[1]!==t.g||r[2]!==t.b){e.uniform3f(this.addr,t.r,t.g,t.b);r[0]=t.r;r[1]=t.g;r[2]=t.b}}else{if(Ta(r,t))return;e.uniform3fv(this.addr,t);_a(r,t)}}function Ba(e,t){var r=this.cache;if(t.x!==undefined){if(r[0]!==t.x||r[1]!==t.y||r[2]!==t.z||r[3]!==t.w){e.uniform4f(this.addr,t.x,t.y,t.z,t.w);r[0]=t.x;r[1]=t.y;r[2]=t.z;r[3]=t.w}}else{if(Ta(r,t))return;e.uniform4fv(this.addr,t);_a(r,t)}}function Da(e,t){var r=this.cache;var n=t.elements;if(n===undefined){if(Ta(r,t))return;e.uniformMatrix2fv(this.addr,false,t);_a(r,t)}else{if(Ta(r,n))return;Ea.set(n);e.uniformMatrix2fv(this.addr,false,Ea);_a(r,n)}}function Ia(e,t){var r=this.cache;var n=t.elements;if(n===undefined){if(Ta(r,t))return;e.uniformMatrix3fv(this.addr,false,t);_a(r,t)}else{if(Ta(r,n))return;Ma.set(n);e.uniformMatrix3fv(this.addr,false,Ma);_a(r,n)}}function Fa(e,t){var r=this.cache;var n=t.elements;if(n===undefined){if(Ta(r,t))return;e.uniformMatrix4fv(this.addr,false,t);_a(r,t)}else{if(Ta(r,n))return;Aa.set(n);e.uniformMatrix4fv(this.addr,false,Aa);_a(r,n)}}function Ua(e,t,r){var n=this.cache;var i=r.allocTextureUnit();if(n[0]!==i){e.uniform1i(this.addr,i);n[0]=i}r.setTexture2D(t||ma,i)}function Ga(e,t,r){var n=this.cache;var i=r.allocTextureUnit();if(n[0]!==i){e.uniform1i(this.addr,i);n[0]=i}r.setTexture3D(t||ga,i)}function ja(e,t,r){var n=this.cache;var i=r.allocTextureUnit();if(n[0]!==i){e.uniform1i(this.addr,i);n[0]=i}r.setTextureCube(t||ya,i)}function za(e,t){var r=this.cache;if(Ta(r,t))return;e.uniform2iv(this.addr,t);_a(r,t)}function Na(e,t){var r=this.cache;if(Ta(r,t))return;e.uniform3iv(this.addr,t);_a(r,t)}function ka(e,t){var r=this.cache;if(Ta(r,t))return;e.uniform4iv(this.addr,t);_a(r,t)}function Ha(e){switch(e){case 5126:return Ca;case 35664:return La;case 35665:return Ra;case 35666:return Ba;case 35674:return Da;case 35675:return Ia;case 35676:return Fa;case 35678:case 36198:return Ua;case 35679:return Ga;case 35680:return ja;case 5124:case 35670:return Oa;case 35667:case 35671:return za;case 35668:case 35672:return Na;case 35669:case 35673:return ka}}function Va(e,t){var r=this.cache;if(Ta(r,t))return;e.uniform1fv(this.addr,t);_a(r,t)}function Wa(e,t){var r=this.cache;if(Ta(r,t))return;e.uniform1iv(this.addr,t);_a(r,t)}function Ya(e,t){var r=this.cache;var n=Sa(t,this.size,2);if(Ta(r,n))return;e.uniform2fv(this.addr,n);this.updateCache(n)}function Xa(e,t){var r=this.cache;var n=Sa(t,this.size,3);if(Ta(r,n))return;e.uniform3fv(this.addr,n);this.updateCache(n)}function Qa(e,t){var r=this.cache;var n=Sa(t,this.size,4);if(Ta(r,n))return;e.uniform4fv(this.addr,n);this.updateCache(n)}function qa(e,t){var r=this.cache;var n=Sa(t,this.size,4);if(Ta(r,n))return;e.uniformMatrix2fv(this.addr,false,n);this.updateCache(n)}function Ja(e,t){var r=this.cache;var n=Sa(t,this.size,9);if(Ta(r,n))return;e.uniformMatrix3fv(this.addr,false,n);this.updateCache(n)}function Ka(e,t){var r=this.cache;var n=Sa(t,this.size,16);if(Ta(r,n))return;e.uniformMatrix4fv(this.addr,false,n);this.updateCache(n)}function Za(e,t,r){var n=this.cache;var i=t.length;var a=Pa(r,i);if(Ta(n,a)===false){e.uniform1iv(this.addr,a);_a(n,a)}for(var o=0;o!==i;++o){r.setTexture2D(t[o]||ma,a[o])}}function $a(e,t,r){var n=this.cache;var i=t.length;var a=Pa(r,i);if(Ta(n,a)===false){e.uniform1iv(this.addr,a);_a(n,a)}for(var o=0;o!==i;++o){r.setTextureCube(t[o]||ya,a[o])}}function eo(e){switch(e){case 5126:return Va;case 35664:return Ya;case 35665:return Xa;case 35666:return Qa;case 35674:return qa;case 35675:return Ja;case 35676:return Ka;case 35678:return Za;case 35680:return $a;case 5124:case 35670:return Wa;case 35667:case 35671:return za;case 35668:case 35672:return Na;case 35669:case 35673:return ka}}function to(e,t,r){this.id=e;this.addr=r;this.cache=[];this.setValue=Ha(t.type)}function ro(e,t,r){this.id=e;this.addr=r;this.cache=[];this.size=t.size;this.setValue=eo(t.type)}ro.prototype.updateCache=function(e){var t=this.cache;if(e instanceof Float32Array&&t.length!==e.length){this.cache=new Float32Array(e.length)}_a(t,e)};function no(e){this.id=e;ba.call(this)}no.prototype.setValue=function(e,t,r){var n=this.seq;for(var i=0,a=n.length;i!==a;++i){var o=n[i];o.setValue(e,t[o.id],r)}};var io=/([\w\d_]+)(\])?(\[|\.)?/g;function ao(e,t){e.seq.push(t);e.map[t.id]=t}function oo(e,t,r){var n=e.name,i=n.length;io.lastIndex=0;while(true){var a=io.exec(n),o=io.lastIndex,s=a[1],u=a[2]==="]",c=a[3];if(u)s=s|0;if(c===undefined||c==="["&&o+2===i){ao(r,c===undefined?new to(s,e,t):new ro(s,e,t));break}else{var l=r.map,f=l[s];if(f===undefined){f=new no(s);ao(r,f)}r=f}}}function so(e,t,r){ba.call(this);this.renderer=r;var n=e.getProgramParameter(t,35718);for(var i=0;i<n;++i){var a=e.getActiveUniform(t,i),o=e.getUniformLocation(t,a.name);oo(a,o,this)}}so.prototype.setValue=function(e,t,r){var n=this.map[t];if(n!==undefined)n.setValue(e,r,this.renderer)};so.prototype.setOptional=function(e,t,r){var n=t[r];if(n!==undefined)this.setValue(e,r,n)};so.upload=function(e,t,r,n){for(var i=0,a=t.length;i!==a;++i){var o=t[i],s=r[o.id];if(s.needsUpdate!==false){o.setValue(e,s.value,n)}}};so.seqWithValue=function(e,t){var r=[];for(var n=0,i=e.length;n!==i;++n){var a=e[n];if(a.id in t)r.push(a)}return r};function uo(e){var t=e.split("\n");for(var r=0;r<t.length;r++){t[r]=r+1+": "+t[r]}return t.join("\n")}function co(e,t,r){var n=e.createShader(t);e.shaderSource(n,r);e.compileShader(n);if(e.getShaderParameter(n,35713)===false){console.error("THREE.WebGLShader: Shader couldn't compile.")}if(e.getShaderInfoLog(n)!==""){console.warn("THREE.WebGLShader: gl.getShaderInfoLog()",t===35633?"vertex":"fragment",e.getShaderInfoLog(n),uo(r))}return n}var lo=0;function fo(e){switch(e){case _t:return["Linear","( value )"];case Pt:return["sRGB","( value )"];case Ot:return["RGBE","( value )"];case Rt:return["RGBM","( value, 7.0 )"];case Bt:return["RGBM","( value, 16.0 )"];case Dt:return["RGBD","( value, 256.0 )"];case Ct:return["Gamma","( value, float( GAMMA_FACTOR ) )"];default:throw new Error("unsupported encoding: "+e)}}function ho(e,t){var r=fo(t);return"vec4 "+e+"( vec4 value ) { return "+r[0]+"ToLinear"+r[1]+"; }"}function po(e,t){var r=fo(t);return"vec4 "+e+"( vec4 value ) { return LinearTo"+r[0]+r[1]+"; }"}function vo(e,t){var r;switch(t){case ne:r="Linear";break;case ie:r="Reinhard";break;case ae:r="Uncharted2";break;case oe:r="OptimizedCineon";break;case se:r="ACESFilmic";break;default:throw new Error("unsupported toneMapping: "+t)}return"vec3 "+e+"( vec3 color ) { return "+r+"ToneMapping( color ); }"}function mo(e,t,r){e=e||{};var n=[e.derivatives||t.envMapCubeUV||t.bumpMap||t.normalMap&&!t.objectSpaceNormalMap||t.flatShading?"#extension GL_OES_standard_derivatives : enable":"",(e.fragDepth||t.logarithmicDepthBuffer)&&r.get("EXT_frag_depth")?"#extension GL_EXT_frag_depth : enable":"",e.drawBuffers&&r.get("WEBGL_draw_buffers")?"#extension GL_EXT_draw_buffers : require":"",(e.shaderTextureLOD||t.envMap)&&r.get("EXT_shader_texture_lod")?"#extension GL_EXT_shader_texture_lod : enable":""];return n.filter(bo).join("\n")}function go(e){var t=[];for(var r in e){var n=e[r];if(n===false)continue;t.push("#define "+r+" "+n)}return t.join("\n")}function yo(e,t){var r={};var n=e.getProgramParameter(t,35721);for(var i=0;i<n;i++){var a=e.getActiveAttrib(t,i);var o=a.name;r[o]=e.getAttribLocation(t,o)}return r}function bo(e){return e!==""}function xo(e,t){return e.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights)}function wo(e,t){return e.replace(/NUM_CLIPPING_PLANES/g,t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,t.numClippingPlanes-t.numClipIntersection)}function Ao(e){var t=/^[ \t]*#include +<([\w\d./]+)>/gm;function r(e,t){var r=vi[t];if(r===undefined){throw new Error("Can not resolve #include <"+t+">")}return Ao(r)}return e.replace(t,r)}function Mo(e){var t=/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g;function r(e,t,r,n){var i="";for(var a=parseInt(t);a<parseInt(r);a++){i+=n.replace(/\[ i \]/g,"[ "+a+" ]")}return i}return e.replace(t,r)}function Eo(e,t,r,n,i,a,o){var s=e.context;var u=n.defines;var c=i.vertexShader;var l=i.fragmentShader;var f="SHADOWMAP_TYPE_BASIC";if(a.shadowMapType===d){f="SHADOWMAP_TYPE_PCF"}else if(a.shadowMapType===p){f="SHADOWMAP_TYPE_PCF_SOFT"}var h="ENVMAP_TYPE_CUBE";var v="ENVMAP_MODE_REFLECTION";var m="ENVMAP_BLENDING_MULTIPLY";if(a.envMap){switch(n.envMap.mapping){case ce:case le:h="ENVMAP_TYPE_CUBE";break;case pe:case ve:h="ENVMAP_TYPE_CUBE_UV";break;case fe:case he:h="ENVMAP_TYPE_EQUIREC";break;case de:h="ENVMAP_TYPE_SPHERE";break}switch(n.envMap.mapping){case le:case he:v="ENVMAP_MODE_REFRACTION";break}switch(n.combine){case $:m="ENVMAP_BLENDING_MULTIPLY";break;case ee:m="ENVMAP_BLENDING_MIX";break;case te:m="ENVMAP_BLENDING_ADD";break}}var g=e.gammaFactor>0?e.gammaFactor:1;var y=o.isWebGL2?"":mo(n.extensions,a,t);var b=go(u);var x=s.createProgram();var w,A;if(n.isRawShaderMaterial){w=[b].filter(bo).join("\n");if(w.length>0){w+="\n"}A=[y,b].filter(bo).join("\n");if(A.length>0){A+="\n"}}else{w=["precision "+a.precision+" float;","precision "+a.precision+" int;","#define SHADER_NAME "+i.name,b,a.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+g,"#define MAX_BONES "+a.maxBones,a.useFog&&a.fog?"#define USE_FOG":"",a.useFog&&a.fogExp?"#define FOG_EXP2":"",a.map?"#define USE_MAP":"",a.envMap?"#define USE_ENVMAP":"",a.envMap?"#define "+v:"",a.lightMap?"#define USE_LIGHTMAP":"",a.aoMap?"#define USE_AOMAP":"",a.emissiveMap?"#define USE_EMISSIVEMAP":"",a.bumpMap?"#define USE_BUMPMAP":"",a.normalMap?"#define USE_NORMALMAP":"",a.normalMap&&a.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",a.displacementMap&&a.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",a.specularMap?"#define USE_SPECULARMAP":"",a.roughnessMap?"#define USE_ROUGHNESSMAP":"",a.metalnessMap?"#define USE_METALNESSMAP":"",a.alphaMap?"#define USE_ALPHAMAP":"",a.vertexColors?"#define USE_COLOR":"",a.flatShading?"#define FLAT_SHADED":"",a.skinning?"#define USE_SKINNING":"",a.useVertexTexture?"#define BONE_TEXTURE":"",a.morphTargets?"#define USE_MORPHTARGETS":"",a.morphNormals&&a.flatShading===false?"#define USE_MORPHNORMALS":"",a.doubleSided?"#define DOUBLE_SIDED":"",a.flipSided?"#define FLIP_SIDED":"",a.shadowMapEnabled?"#define USE_SHADOWMAP":"",a.shadowMapEnabled?"#define "+f:"",a.sizeAttenuation?"#define USE_SIZEATTENUATION":"",a.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",a.logarithmicDepthBuffer&&(o.isWebGL2||t.get("EXT_frag_depth"))?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_COLOR","\tattribute vec3 color;","#endif","#ifdef USE_MORPHTARGETS","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(bo).join("\n");A=[y,"precision "+a.precision+" float;","precision "+a.precision+" int;","#define SHADER_NAME "+i.name,b,a.alphaTest?"#define ALPHATEST "+a.alphaTest+(a.alphaTest%1?"":".0"):"","#define GAMMA_FACTOR "+g,a.useFog&&a.fog?"#define USE_FOG":"",a.useFog&&a.fogExp?"#define FOG_EXP2":"",a.map?"#define USE_MAP":"",a.matcap?"#define USE_MATCAP":"",a.envMap?"#define USE_ENVMAP":"",a.envMap?"#define "+h:"",a.envMap?"#define "+v:"",a.envMap?"#define "+m:"",a.lightMap?"#define USE_LIGHTMAP":"",a.aoMap?"#define USE_AOMAP":"",a.emissiveMap?"#define USE_EMISSIVEMAP":"",a.bumpMap?"#define USE_BUMPMAP":"",a.normalMap?"#define USE_NORMALMAP":"",a.normalMap&&a.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",a.specularMap?"#define USE_SPECULARMAP":"",a.roughnessMap?"#define USE_ROUGHNESSMAP":"",a.metalnessMap?"#define USE_METALNESSMAP":"",a.alphaMap?"#define USE_ALPHAMAP":"",a.vertexColors?"#define USE_COLOR":"",a.gradientMap?"#define USE_GRADIENTMAP":"",a.flatShading?"#define FLAT_SHADED":"",a.doubleSided?"#define DOUBLE_SIDED":"",a.flipSided?"#define FLIP_SIDED":"",a.shadowMapEnabled?"#define USE_SHADOWMAP":"",a.shadowMapEnabled?"#define "+f:"",a.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",a.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",a.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",a.logarithmicDepthBuffer&&(o.isWebGL2||t.get("EXT_frag_depth"))?"#define USE_LOGDEPTHBUF_EXT":"",a.envMap&&(o.isWebGL2||t.get("EXT_shader_texture_lod"))?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;",a.toneMapping!==re?"#define TONE_MAPPING":"",a.toneMapping!==re?vi["tonemapping_pars_fragment"]:"",a.toneMapping!==re?vo("toneMapping",a.toneMapping):"",a.dithering?"#define DITHERING":"",a.outputEncoding||a.mapEncoding||a.matcapEncoding||a.envMapEncoding||a.emissiveMapEncoding?vi["encodings_pars_fragment"]:"",a.mapEncoding?ho("mapTexelToLinear",a.mapEncoding):"",a.matcapEncoding?ho("matcapTexelToLinear",a.matcapEncoding):"",a.envMapEncoding?ho("envMapTexelToLinear",a.envMapEncoding):"",a.emissiveMapEncoding?ho("emissiveMapTexelToLinear",a.emissiveMapEncoding):"",a.outputEncoding?po("linearToOutputTexel",a.outputEncoding):"",a.depthPacking?"#define DEPTH_PACKING "+n.depthPacking:"","\n"].filter(bo).join("\n")}c=Ao(c);c=xo(c,a);c=wo(c,a);l=Ao(l);l=xo(l,a);l=wo(l,a);c=Mo(c);l=Mo(l);if(o.isWebGL2&&!n.isRawShaderMaterial){var M=false;var E=/^\s*#version\s+300\s+es\s*\n/;if(n.isShaderMaterial&&c.match(E)!==null&&l.match(E)!==null){M=true;c=c.replace(E,"");l=l.replace(E,"")}w=["#version 300 es\n","#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+w;A=["#version 300 es\n","#define varying in",M?"":"out highp vec4 pc_fragColor;",M?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+A}var S=w+c;var T=A+l;var _=co(s,35633,S);var P=co(s,35632,T);s.attachShader(x,_);s.attachShader(x,P);if(n.index0AttributeName!==undefined){s.bindAttribLocation(x,0,n.index0AttributeName)}else if(a.morphTargets===true){s.bindAttribLocation(x,0,"position")}s.linkProgram(x);var C=s.getProgramInfoLog(x).trim();var O=s.getShaderInfoLog(_).trim();var L=s.getShaderInfoLog(P).trim();var R=true;var B=true;if(s.getProgramParameter(x,35714)===false){R=false;console.error("THREE.WebGLProgram: shader error: ",s.getError(),"35715",s.getProgramParameter(x,35715),"gl.getProgramInfoLog",C,O,L)}else if(C!==""){console.warn("THREE.WebGLProgram: gl.getProgramInfoLog()",C)}else if(O===""||L===""){B=false}if(B){this.diagnostics={runnable:R,material:n,programLog:C,vertexShader:{log:O,prefix:w},fragmentShader:{log:L,prefix:A}}}s.deleteShader(_);s.deleteShader(P);var D;this.getUniforms=function(){if(D===undefined){D=new so(s,x,e)}return D};var I;this.getAttributes=function(){if(I===undefined){I=yo(s,x)}return I};this.destroy=function(){s.deleteProgram(x);this.program=undefined};Object.defineProperties(this,{uniforms:{get:function(){console.warn("THREE.WebGLProgram: .uniforms is now .getUniforms().");return this.getUniforms()}},attributes:{get:function(){console.warn("THREE.WebGLProgram: .attributes is now .getAttributes().");return this.getAttributes()}}});this.name=i.name;this.id=lo++;this.code=r;this.usedTimes=1;this.program=x;this.vertexShader=_;this.fragmentShader=P;return this}function So(e,t,r){var n=[];var i={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"phong",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};var a=["precision","supportsVertexTextures","map","mapEncoding","matcap","matcapEncoding","envMap","envMapMode","envMapEncoding","lightMap","aoMap","emissiveMap","emissiveMapEncoding","bumpMap","normalMap","objectSpaceNormalMap","displacementMap","specularMap","roughnessMap","metalnessMap","gradientMap","alphaMap","combine","vertexColors","fog","useFog","fogExp","flatShading","sizeAttenuation","logarithmicDepthBuffer","skinning","maxBones","useVertexTexture","morphTargets","morphNormals","maxMorphTargets","maxMorphNormals","premultipliedAlpha","numDirLights","numPointLights","numSpotLights","numHemiLights","numRectAreaLights","shadowMapEnabled","shadowMapType","toneMapping","physicallyCorrectLights","alphaTest","doubleSided","flipSided","numClippingPlanes","numClipIntersection","depthPacking","dithering"];function o(e){var t=e.skeleton;var n=t.bones;if(r.floatVertexTextures){return 1024}else{var i=r.maxVertexUniforms;var a=Math.floor((i-20)/4);var o=Math.min(a,n.length);if(o<n.length){console.warn("THREE.WebGLRenderer: Skeleton has "+n.length+" bones. This GPU supports "+o+".");return 0}return o}}function s(e,t){var r;if(!e){r=_t}else if(e.isTexture){r=e.encoding}else if(e.isWebGLRenderTarget){console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead.");r=e.texture.encoding}if(r===_t&&t){r=Ct}return r}this.getParameters=function(t,n,a,u,c,l,f){var h=i[t.type];var d=f.isSkinnedMesh?o(f):0;var p=r.precision;if(t.precision!==null){p=r.getMaxPrecision(t.precision);if(p!==t.precision){console.warn("THREE.WebGLProgram.getParameters:",t.precision,"not supported, using",p,"instead.")}}var v=e.getRenderTarget();var y={shaderID:h,precision:p,supportsVertexTextures:r.vertexTextures,outputEncoding:s(!v?null:v.texture,e.gammaOutput),map:!!t.map,mapEncoding:s(t.map,e.gammaInput),matcap:!!t.matcap,matcapEncoding:s(t.matcap,e.gammaInput),envMap:!!t.envMap,envMapMode:t.envMap&&t.envMap.mapping,envMapEncoding:s(t.envMap,e.gammaInput),envMapCubeUV:!!t.envMap&&(t.envMap.mapping===pe||t.envMap.mapping===ve),lightMap:!!t.lightMap,aoMap:!!t.aoMap,emissiveMap:!!t.emissiveMap,emissiveMapEncoding:s(t.emissiveMap,e.gammaInput),bumpMap:!!t.bumpMap,normalMap:!!t.normalMap,objectSpaceNormalMap:t.normalMapType===Gt,displacementMap:!!t.displacementMap,roughnessMap:!!t.roughnessMap,metalnessMap:!!t.metalnessMap,specularMap:!!t.specularMap,alphaMap:!!t.alphaMap,gradientMap:!!t.gradientMap,combine:t.combine,vertexColors:t.vertexColors,fog:!!u,useFog:t.fog,fogExp:u&&u.isFogExp2,flatShading:t.flatShading,sizeAttenuation:t.sizeAttenuation,logarithmicDepthBuffer:r.logarithmicDepthBuffer,skinning:t.skinning&&d>0,maxBones:d,useVertexTexture:r.floatVertexTextures,morphTargets:t.morphTargets,morphNormals:t.morphNormals,maxMorphTargets:e.maxMorphTargets,maxMorphNormals:e.maxMorphNormals,numDirLights:n.directional.length,numPointLights:n.point.length,numSpotLights:n.spot.length,numRectAreaLights:n.rectArea.length,numHemiLights:n.hemi.length,numClippingPlanes:c,numClipIntersection:l,dithering:t.dithering,shadowMapEnabled:e.shadowMap.enabled&&f.receiveShadow&&a.length>0,shadowMapType:e.shadowMap.type,toneMapping:e.toneMapping,physicallyCorrectLights:e.physicallyCorrectLights,premultipliedAlpha:t.premultipliedAlpha,alphaTest:t.alphaTest,doubleSided:t.side===g,flipSided:t.side===m,depthPacking:t.depthPacking!==undefined?t.depthPacking:false};return y};this.getProgramCode=function(t,r){var n=[];if(r.shaderID){n.push(r.shaderID)}else{n.push(t.fragmentShader);n.push(t.vertexShader)}if(t.defines!==undefined){for(var i in t.defines){n.push(i);n.push(t.defines[i])}}for(var o=0;o<a.length;o++){n.push(r[a[o]])}n.push(t.onBeforeCompile.toString());n.push(e.gammaOutput);n.push(e.gammaFactor);return n.join()};this.acquireProgram=function(i,a,o,s){var u;for(var c=0,l=n.length;c<l;c++){var f=n[c];if(f.code===s){u=f;++u.usedTimes;break}}if(u===undefined){u=new Eo(e,t,s,i,a,o,r);n.push(u)}return u};this.releaseProgram=function(e){if(--e.usedTimes===0){var t=n.indexOf(e);n[t]=n[n.length-1];n.pop();e.destroy()}};this.programs=n}function To(){var e=new WeakMap;function t(t){var r=e.get(t);if(r===undefined){r={};e.set(t,r)}return r}function r(t){e.delete(t)}function n(t,r,n){e.get(t)[r]=n}function i(){e=new WeakMap}return{get:t,remove:r,update:n,dispose:i}}function _o(e,t){if(e.renderOrder!==t.renderOrder){return e.renderOrder-t.renderOrder}else if(e.program&&t.program&&e.program!==t.program){return e.program.id-t.program.id}else if(e.material.id!==t.material.id){return e.material.id-t.material.id}else if(e.z!==t.z){return e.z-t.z}else{return e.id-t.id}}function Po(e,t){if(e.renderOrder!==t.renderOrder){return e.renderOrder-t.renderOrder}if(e.z!==t.z){return t.z-e.z}else{return e.id-t.id}}function Co(){var e=[];var t=0;var r=[];var n=[];function i(){t=0;r.length=0;n.length=0}function a(r,n,i,a,o){var s=e[t];if(s===undefined){s={id:r.id,object:r,geometry:n,material:i,program:i.program,renderOrder:r.renderOrder,z:a,group:o};e[t]=s}else{s.id=r.id;s.object=r;s.geometry=n;s.material=i;s.program=i.program;s.renderOrder=r.renderOrder;s.z=a;s.group=o}t++;return s}function o(e,t,i,o,s){var u=a(e,t,i,o,s);(i.transparent===true?n:r).push(u)}function s(e,t,i,o,s){var u=a(e,t,i,o,s);(i.transparent===true?n:r).unshift(u)}function u(){if(r.length>1)r.sort(_o);if(n.length>1)n.sort(Po)}return{opaque:r,transparent:n,init:i,push:o,unshift:s,sort:u}}function Oo(){var e={};function t(t,r){var n=e[t.id];var i;if(n===undefined){i=new Co;e[t.id]={};e[t.id][r.id]=i}else{i=n[r.id];if(i===undefined){i=new Co;n[r.id]=i}}return i}function r(){e={}}return{get:t,dispose:r}}function Lo(){var e={};return{get:function(t){if(e[t.id]!==undefined){return e[t.id]}var r;switch(t.type){case"DirectionalLight":r={direction:new Ht,color:new xi,shadow:false,shadowBias:0,shadowRadius:1,shadowMapSize:new zt};break;case"SpotLight":r={position:new Ht,direction:new Ht,color:new xi,distance:0,coneCos:0,penumbraCos:0,decay:0,shadow:false,shadowBias:0,shadowRadius:1,shadowMapSize:new zt};break;case"PointLight":r={position:new Ht,color:new xi,distance:0,decay:0,shadow:false,shadowBias:0,shadowRadius:1,shadowMapSize:new zt,shadowCameraNear:1,shadowCameraFar:1e3};break;case"HemisphereLight":r={direction:new Ht,skyColor:new xi,groundColor:new xi};break;case"RectAreaLight":r={color:new xi,position:new Ht,halfWidth:new Ht,halfHeight:new Ht};break}e[t.id]=r;return r}}}var Ro=0;function Bo(){var e=new Lo;var t={id:Ro++,hash:{stateID:-1,directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,shadowsLength:-1},ambient:[0,0,0],directional:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],point:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]};var r=new Ht;var n=new Nt;var i=new Nt;function a(a,o,s){var u=0,c=0,l=0;var f=0;var h=0;var d=0;var p=0;var v=0;var m=s.matrixWorldInverse;for(var g=0,y=a.length;g<y;g++){var b=a[g];var x=b.color;var w=b.intensity;var A=b.distance;var M=b.shadow&&b.shadow.map?b.shadow.map.texture:null;if(b.isAmbientLight){u+=x.r*w;c+=x.g*w;l+=x.b*w}else if(b.isDirectionalLight){var E=e.get(b);E.color.copy(b.color).multiplyScalar(b.intensity);E.direction.setFromMatrixPosition(b.matrixWorld);r.setFromMatrixPosition(b.target.matrixWorld);E.direction.sub(r);E.direction.transformDirection(m);E.shadow=b.castShadow;if(b.castShadow){var S=b.shadow;E.shadowBias=S.bias;E.shadowRadius=S.radius;E.shadowMapSize=S.mapSize}t.directionalShadowMap[f]=M;t.directionalShadowMatrix[f]=b.shadow.matrix;t.directional[f]=E;f++}else if(b.isSpotLight){var E=e.get(b);E.position.setFromMatrixPosition(b.matrixWorld);E.position.applyMatrix4(m);E.color.copy(x).multiplyScalar(w);E.distance=A;E.direction.setFromMatrixPosition(b.matrixWorld);r.setFromMatrixPosition(b.target.matrixWorld);E.direction.sub(r);E.direction.transformDirection(m);E.coneCos=Math.cos(b.angle);E.penumbraCos=Math.cos(b.angle*(1-b.penumbra));E.decay=b.decay;E.shadow=b.castShadow;if(b.castShadow){var S=b.shadow;E.shadowBias=S.bias;E.shadowRadius=S.radius;E.shadowMapSize=S.mapSize}t.spotShadowMap[d]=M;t.spotShadowMatrix[d]=b.shadow.matrix;t.spot[d]=E;d++}else if(b.isRectAreaLight){var E=e.get(b);E.color.copy(x).multiplyScalar(w);E.position.setFromMatrixPosition(b.matrixWorld);E.position.applyMatrix4(m);i.identity();n.copy(b.matrixWorld);n.premultiply(m);i.extractRotation(n);E.halfWidth.set(b.width*.5,0,0);E.halfHeight.set(0,b.height*.5,0);E.halfWidth.applyMatrix4(i);E.halfHeight.applyMatrix4(i);t.rectArea[p]=E;p++}else if(b.isPointLight){var E=e.get(b);E.position.setFromMatrixPosition(b.matrixWorld);E.position.applyMatrix4(m);E.color.copy(b.color).multiplyScalar(b.intensity);E.distance=b.distance;E.decay=b.decay;E.shadow=b.castShadow;if(b.castShadow){var S=b.shadow;E.shadowBias=S.bias;E.shadowRadius=S.radius;E.shadowMapSize=S.mapSize;E.shadowCameraNear=S.camera.near;E.shadowCameraFar=S.camera.far}t.pointShadowMap[h]=M;t.pointShadowMatrix[h]=b.shadow.matrix;t.point[h]=E;h++}else if(b.isHemisphereLight){var E=e.get(b);E.direction.setFromMatrixPosition(b.matrixWorld);E.direction.transformDirection(m);E.direction.normalize();E.skyColor.copy(b.color).multiplyScalar(w);E.groundColor.copy(b.groundColor).multiplyScalar(w);t.hemi[v]=E;v++}}t.ambient[0]=u;t.ambient[1]=c;t.ambient[2]=l;t.directional.length=f;t.spot.length=d;t.rectArea.length=p;t.point.length=h;t.hemi.length=v;t.hash.stateID=t.id;t.hash.directionalLength=f;t.hash.pointLength=h;t.hash.spotLength=d;t.hash.rectAreaLength=p;t.hash.hemiLength=v;t.hash.shadowsLength=o.length}return{setup:a,state:t}}function Do(){var e=new Bo;var t=[];var r=[];function n(){t.length=0;r.length=0}function i(e){t.push(e)}function a(e){r.push(e)}function o(n){e.setup(t,r,n)}var s={lightsArray:t,shadowsArray:r,lights:e};return{init:n,state:s,setupLights:o,pushLight:i,pushShadow:a}}function Io(){var e={};function t(t,r){var n;if(e[t.id]===undefined){n=new Do;e[t.id]={};e[t.id][r.id]=n}else{if(e[t.id][r.id]===undefined){n=new Do;e[t.id][r.id]=n}else{n=e[t.id][r.id]}}return n}function r(){e={}}return{get:t,dispose:r}}function Fo(e){Ki.call(this);this.type="MeshDepthMaterial";this.depthPacking=It;this.skinning=false;this.morphTargets=false;this.map=null;this.alphaMap=null;this.displacementMap=null;this.displacementScale=1;this.displacementBias=0;this.wireframe=false;this.wireframeLinewidth=1;this.fog=false;this.lights=false;this.setValues(e)}Fo.prototype=Object.create(Ki.prototype);Fo.prototype.constructor=Fo;Fo.prototype.isMeshDepthMaterial=true;Fo.prototype.copy=function(e){Ki.prototype.copy.call(this,e);this.depthPacking=e.depthPacking;this.skinning=e.skinning;this.morphTargets=e.morphTargets;this.map=e.map;this.alphaMap=e.alphaMap;this.displacementMap=e.displacementMap;this.displacementScale=e.displacementScale;this.displacementBias=e.displacementBias;this.wireframe=e.wireframe;this.wireframeLinewidth=e.wireframeLinewidth;return this};function Uo(e){Ki.call(this);this.type="MeshDistanceMaterial";this.referencePosition=new Ht;this.nearDistance=1;this.farDistance=1e3;this.skinning=false;this.morphTargets=false;this.map=null;this.alphaMap=null;this.displacementMap=null;this.displacementScale=1;this.displacementBias=0;this.fog=false;this.lights=false;this.setValues(e)}Uo.prototype=Object.create(Ki.prototype);Uo.prototype.constructor=Uo;Uo.prototype.isMeshDistanceMaterial=true;Uo.prototype.copy=function(e){Ki.prototype.copy.call(this,e);this.referencePosition.copy(e.referencePosition);this.nearDistance=e.nearDistance;this.farDistance=e.farDistance;this.skinning=e.skinning;this.morphTargets=e.morphTargets;this.map=e.map;this.alphaMap=e.alphaMap;this.displacementMap=e.displacementMap;this.displacementScale=e.displacementScale;this.displacementBias=e.displacementBias;return this};function Go(e,t,r){var n=new rr,i=new Nt,a=new zt,o=new zt(r,r),s=new Ht,u=new Ht,c=1,l=2,f=(c|l)+1,h=new Array(f),p=new Array(f),y={};var b={0:m,1:v,2:g};var x=[new Ht(1,0,0),new Ht(-1,0,0),new Ht(0,0,1),new Ht(0,0,-1),new Ht(0,1,0),new Ht(0,-1,0)];var w=[new Ht(0,1,0),new Ht(0,1,0),new Ht(0,1,0),new Ht(0,1,0),new Ht(0,0,1),new Ht(0,0,-1)];var A=[new qt,new qt,new qt,new qt,new qt,new qt];for(var M=0;M!==f;++M){var E=(M&c)!==0;var S=(M&l)!==0;var T=new Fo({depthPacking:Ft,morphTargets:E,skinning:S});h[M]=T;var _=new Uo({morphTargets:E,skinning:S});p[M]=_}var P=this;this.enabled=false;this.autoUpdate=true;this.needsUpdate=false;this.type=d;this.render=function(t,r,c){if(P.enabled===false)return;if(P.autoUpdate===false&&P.needsUpdate===false)return;if(t.length===0)return;var l=e.context;var f=e.state;f.disable(3042);f.buffers.color.setClear(1,1,1,1);f.buffers.depth.setTest(true);f.setScissorTest(false);var h;for(var d=0,p=t.length;d<p;d++){var v=t[d];var m=v.shadow;var g=v&&v.isPointLight;if(m===undefined){console.warn("THREE.WebGLShadowMap:",v,"has no shadow.");continue}var y=m.camera;a.copy(m.mapSize);a.min(o);if(g){var b=a.x;var M=a.y;A[0].set(b*2,M,b,M);A[1].set(0,M,b,M);A[2].set(b*3,M,b,M);A[3].set(b,M,b,M);A[4].set(b*3,0,b,M);A[5].set(b,0,b,M);a.x*=4;a.y*=2}if(m.map===null){var E={minFilter:be,magFilter:be,format:je};m.map=new Jt(a.x,a.y,E);m.map.texture.name=v.name+".shadowMap";y.updateProjectionMatrix()}if(m.isSpotLightShadow){m.update(v)}var S=m.map;var T=m.matrix;u.setFromMatrixPosition(v.matrixWorld);y.position.copy(u);if(g){h=6;T.makeTranslation(-u.x,-u.y,-u.z)}else{h=1;s.setFromMatrixPosition(v.target.matrixWorld);y.lookAt(s);y.updateMatrixWorld();T.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1);T.multiply(y.projectionMatrix);T.multiply(y.matrixWorldInverse)}e.setRenderTarget(S);e.clear();for(var _=0;_<h;_++){if(g){s.copy(y.position);s.add(x[_]);y.up.copy(w[_]);y.lookAt(s);y.updateMatrixWorld();var C=A[_];f.viewport(C)}i.multiplyMatrices(y.projectionMatrix,y.matrixWorldInverse);n.setFromMatrix(i);O(r,c,y,g)}}P.needsUpdate=false};function C(t,r,n,i,a,o){var s=t.geometry;var u=null;var f=h;var d=t.customDepthMaterial;if(n){f=p;d=t.customDistanceMaterial}if(!d){var v=false;if(r.morphTargets){if(s&&s.isBufferGeometry){v=s.morphAttributes&&s.morphAttributes.position&&s.morphAttributes.position.length>0}else if(s&&s.isGeometry){v=s.morphTargets&&s.morphTargets.length>0}}if(t.isSkinnedMesh&&r.skinning===false){console.warn("THREE.WebGLShadowMap: THREE.SkinnedMesh with material.skinning set to false:",t)}var m=t.isSkinnedMesh&&r.skinning;var g=0;if(v)g|=c;if(m)g|=l;u=f[g]}else{u=d}if(e.localClippingEnabled&&r.clipShadows===true&&r.clippingPlanes.length!==0){var x=u.uuid,w=r.uuid;var A=y[x];if(A===undefined){A={};y[x]=A}var M=A[w];if(M===undefined){M=u.clone();A[w]=M}u=M}u.visible=r.visible;u.wireframe=r.wireframe;u.side=r.shadowSide!=null?r.shadowSide:b[r.side];u.clipShadows=r.clipShadows;u.clippingPlanes=r.clippingPlanes;u.clipIntersection=r.clipIntersection;u.wireframeLinewidth=r.wireframeLinewidth;u.linewidth=r.linewidth;if(n&&u.isMeshDistanceMaterial){u.referencePosition.copy(i);u.nearDistance=a;u.farDistance=o}return u}function O(r,i,a,o){if(r.visible===false)return;var s=r.layers.test(i.layers);if(s&&(r.isMesh||r.isLine||r.isPoints)){if(r.castShadow&&(!r.frustumCulled||n.intersectsObject(r))){r.modelViewMatrix.multiplyMatrices(a.matrixWorldInverse,r.matrixWorld);var c=t.update(r);var l=r.material;if(Array.isArray(l)){var f=c.groups;for(var h=0,d=f.length;h<d;h++){var p=f[h];var v=l[p.materialIndex];if(v&&v.visible){var m=C(r,v,o,u,a.near,a.far);e.renderBufferDirect(a,null,c,m,r,p)}}}else if(l.visible){var m=C(r,l,o,u,a.near,a.far);e.renderBufferDirect(a,null,c,m,r,null)}}}var g=r.children;for(var y=0,b=g.length;y<b;y++){O(g[y],i,a,o)}}}function jo(e,t,r,n){function i(){var t=false;var r=new qt;var n=null;var i=new qt(0,0,0,0);return{setMask:function(r){if(n!==r&&!t){e.colorMask(r,r,r,r);n=r}},setLocked:function(e){t=e},setClear:function(t,n,a,o,s){if(s===true){t*=o;n*=o;a*=o}r.set(t,n,a,o);if(i.equals(r)===false){e.clearColor(t,n,a,o);i.copy(r)}},reset:function(){t=false;n=null;i.set(-1,0,0,0)}}}function a(){var t=false;var r=null;var n=null;var i=null;return{setTest:function(e){if(e){fe(2929)}else{he(2929)}},setMask:function(n){if(r!==n&&!t){e.depthMask(n);r=n}},setFunc:function(t){if(n!==t){if(t){switch(t){case W:e.depthFunc(512);break;case Y:e.depthFunc(519);break;case X:e.depthFunc(513);break;case Q:e.depthFunc(515);break;case q:e.depthFunc(514);break;case J:e.depthFunc(518);break;case K:e.depthFunc(516);break;case Z:e.depthFunc(517);break;default:e.depthFunc(515)}}else{e.depthFunc(515)}n=t}},setLocked:function(e){t=e},setClear:function(t){if(i!==t){e.clearDepth(t);i=t}},reset:function(){t=false;r=null;n=null;i=null}}}function c(){var t=false;var r=null;var n=null;var i=null;var a=null;var o=null;var s=null;var u=null;var c=null;return{setTest:function(e){if(e){fe(2960)}else{he(2960)}},setMask:function(n){if(r!==n&&!t){e.stencilMask(n);r=n}},setFunc:function(t,r,o){if(n!==t||i!==r||a!==o){e.stencilFunc(t,r,o);n=t;i=r;a=o}},setOp:function(t,r,n){if(o!==t||s!==r||u!==n){e.stencilOp(t,r,n);o=t;s=r;u=n}},setLocked:function(e){t=e},setClear:function(t){if(c!==t){e.clearStencil(t);c=t}},reset:function(){t=false;r=null;n=null;i=null;a=null;o=null;s=null;u=null;c=null}}}var l=new i;var f=new a;var h=new c;var d=e.getParameter(34921);var p=new Uint8Array(d);var v=new Uint8Array(d);var y=new Uint8Array(d);var b={};var x=null;var w=null;var A=null;var O=null;var L=null;var R=null;var B=null;var D=null;var I=null;var F=null;var U=false;var G=null;var j=null;var z=null;var N=null;var k=null;var H=e.getParameter(35661);var V=false;var $=0;var ee=e.getParameter(7938);if(ee.indexOf("WebGL")!==-1){$=parseFloat(/^WebGL\ ([0-9])/.exec(ee)[1]);V=$>=1}else if(ee.indexOf("OpenGL ES")!==-1){$=parseFloat(/^OpenGL\ ES\ ([0-9])/.exec(ee)[1]);V=$>=2}var te=null;var re={};var ne=new qt;var ie=new qt;function ae(t,r,n){var i=new Uint8Array(4);var a=e.createTexture();e.bindTexture(t,a);e.texParameteri(t,10241,9728);e.texParameteri(t,10240,9728);for(var o=0;o<n;o++){e.texImage2D(r+o,0,6408,1,1,0,6408,5121,i)}return a}var oe={};oe[3553]=ae(3553,3553,1);oe[34067]=ae(34067,34069,6);l.setClear(0,0,0,1);f.setClear(1);h.setClear(0);fe(2929);f.setFunc(Q);ge(false);ye(s);fe(2884);ve(M);function se(){for(var e=0,t=p.length;e<t;e++){p[e]=0}}function ue(e){ce(e,0)}function ce(r,i){p[r]=1;if(v[r]===0){e.enableVertexAttribArray(r);v[r]=1}if(y[r]!==i){var a=n.isWebGL2?e:t.get("ANGLE_instanced_arrays");a[n.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](r,i);y[r]=i}}function le(){for(var t=0,r=v.length;t!==r;++t){if(v[t]!==p[t]){e.disableVertexAttribArray(t);v[t]=0}}}function fe(t){if(b[t]!==true){e.enable(t);b[t]=true}}function he(t){if(b[t]!==false){e.disable(t);b[t]=false}}function de(){if(x===null){x=[];if(t.get("WEBGL_compressed_texture_pvrtc")||t.get("WEBGL_compressed_texture_s3tc")||t.get("WEBGL_compressed_texture_etc1")||t.get("WEBGL_compressed_texture_astc")){var r=e.getParameter(34467);for(var n=0;n<r.length;n++){x.push(r[n])}}}return x}function pe(t){if(w!==t){e.useProgram(t);w=t;return true}return false}function ve(t,n,i,a,o,s,u,c){if(t===M){if(A){he(3042);A=false}return}if(!A){fe(3042);A=true}if(t!==P){if(t!==O||c!==U){if(L!==C||D!==C){e.blendEquation(32774);L=C;D=C}if(c){switch(t){case E:e.blendFuncSeparate(1,771,1,771);break;case S:e.blendFunc(1,1);break;case T:e.blendFuncSeparate(0,0,769,771);break;case _:e.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",t);break}}else{switch(t){case E:e.blendFuncSeparate(770,771,1,771);break;case S:e.blendFunc(770,1);break;case T:e.blendFunc(0,769);break;case _:e.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",t);break}}R=null;B=null;I=null;F=null;O=t;U=c}return}o=o||n;s=s||i;u=u||a;if(n!==L||o!==D){e.blendEquationSeparate(r.convert(n),r.convert(o));L=n;D=o}if(i!==R||a!==B||s!==I||u!==F){e.blendFuncSeparate(r.convert(i),r.convert(a),r.convert(s),r.convert(u));R=i;B=a;I=s;F=u}O=t;U=null}function me(e,t){e.side===g?he(2884):fe(2884);var r=e.side===m;if(t)r=!r;ge(r);e.blending===E&&e.transparent===false?ve(M):ve(e.blending,e.blendEquation,e.blendSrc,e.blendDst,e.blendEquationAlpha,e.blendSrcAlpha,e.blendDstAlpha,e.premultipliedAlpha);f.setFunc(e.depthFunc);f.setTest(e.depthTest);f.setMask(e.depthWrite);l.setMask(e.colorWrite);xe(e.polygonOffset,e.polygonOffsetFactor,e.polygonOffsetUnits)}function ge(t){if(G!==t){if(t){e.frontFace(2304)}else{e.frontFace(2305)}G=t}}function ye(t){if(t!==o){fe(2884);if(t!==j){if(t===s){e.cullFace(1029)}else if(t===u){e.cullFace(1028)}else{e.cullFace(1032)}}}else{he(2884)}j=t}function be(t){if(t!==z){if(V)e.lineWidth(t);z=t}}function xe(t,r,n){if(t){fe(32823);if(N!==r||k!==n){e.polygonOffset(r,n);N=r;k=n}}else{he(32823)}}function we(e){if(e){fe(3089)}else{he(3089)}}function Ae(t){if(t===undefined)t=33984+H-1;if(te!==t){e.activeTexture(t);te=t}}function Me(t,r){if(te===null){Ae()}var n=re[te];if(n===undefined){n={type:undefined,texture:undefined};re[te]=n}if(n.type!==t||n.texture!==r){e.bindTexture(t,r||oe[t]);n.type=t;n.texture=r}}function Ee(){try{e.compressedTexImage2D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}}function Se(){try{e.texImage2D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}}function Te(){try{e.texImage3D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}}function _e(t){if(ne.equals(t)===false){e.scissor(t.x,t.y,t.z,t.w);ne.copy(t)}}function Pe(t){if(ie.equals(t)===false){e.viewport(t.x,t.y,t.z,t.w);ie.copy(t)}}function Ce(){for(var t=0;t<v.length;t++){if(v[t]===1){e.disableVertexAttribArray(t);v[t]=0}}b={};x=null;te=null;re={};w=null;O=null;G=null;j=null;l.reset();f.reset();h.reset()}return{buffers:{color:l,depth:f,stencil:h},initAttributes:se,enableAttribute:ue,enableAttributeAndDivisor:ce,disableUnusedAttributes:le,enable:fe,disable:he,getCompressedTextureFormats:de,useProgram:pe,setBlending:ve,setMaterial:me,setFlipSided:ge,setCullFace:ye,setLineWidth:be,setPolygonOffset:xe,setScissorTest:we,activeTexture:Ae,bindTexture:Me,compressedTexImage2D:Ee,texImage2D:Se,texImage3D:Te,scissor:_e,viewport:Pe,reset:Ce}}function zo(e,t,r,n,i,a,o){var s={};var u;function c(e,t){if(e.width>t||e.height>t){if("data"in e){console.warn("THREE.WebGLRenderer: image in DataTexture is too big ("+e.width+"x"+e.height+").");return}var r=t/Math.max(e.width,e.height);var n=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");n.width=Math.floor(e.width*r);n.height=Math.floor(e.height*r);var i=n.getContext("2d");i.drawImage(e,0,0,e.width,e.height,0,0,n.width,n.height);console.warn("THREE.WebGLRenderer: image is too big ("+e.width+"x"+e.height+"). Resized to "+n.width+"x"+n.height);return n}return e}function l(e){return jt.isPowerOfTwo(e.width)&&jt.isPowerOfTwo(e.height)}function f(e){if(e instanceof HTMLImageElement||e instanceof HTMLCanvasElement||e instanceof ImageBitmap){if(u===undefined)u=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");u.width=jt.floorPowerOfTwo(e.width);u.height=jt.floorPowerOfTwo(e.height);var t=u.getContext("2d");t.drawImage(e,0,0,u.width,u.height);console.warn("THREE.WebGLRenderer: image is not power of two ("+e.width+"x"+e.height+"). Resized to "+u.width+"x"+u.height);return u}return e}function h(e){if(i.isWebGL2)return false;return e.wrapS!==ge||e.wrapT!==ge||e.minFilter!==be&&e.minFilter!==Ae}function d(e,t){return e.generateMipmaps&&t&&e.minFilter!==be&&e.minFilter!==Ae}function p(t,r,i,a){e.generateMipmap(t);var o=n.get(r);o.__maxMipLevel=Math.log(Math.max(i,a))*Math.LOG2E}function v(e,t){if(!i.isWebGL2)return e;if(e===6403){if(t===5126)return 33326;if(t===5131)return 33325;if(t===5121)return 33321}if(e===6407){if(t===5126)return 34837;if(t===5131)return 34843;if(t===5121)return 32849}if(e===6408){if(t===5126)return 34836;if(t===5131)return 34842;if(t===5121)return 32856}return e}function m(e){if(e===be||e===xe||e===we){return 9728}return 9729}function g(e){var t=e.target;t.removeEventListener("dispose",g);b(t);if(t.isVideoTexture){delete s[t.id]}o.memory.textures--}function y(e){var t=e.target;t.removeEventListener("dispose",y);x(t);o.memory.textures--}function b(t){var r=n.get(t);if(t.image&&r.__image__webglTextureCube){e.deleteTexture(r.__image__webglTextureCube)}else{if(r.__webglInit===undefined)return;e.deleteTexture(r.__webglTexture)}n.remove(t)}function x(t){var r=n.get(t);var i=n.get(t.texture);if(!t)return;if(i.__webglTexture!==undefined){e.deleteTexture(i.__webglTexture)}if(t.depthTexture){t.depthTexture.dispose()}if(t.isWebGLRenderTargetCube){for(var a=0;a<6;a++){e.deleteFramebuffer(r.__webglFramebuffer[a]);if(r.__webglDepthbuffer)e.deleteRenderbuffer(r.__webglDepthbuffer[a])}}else{e.deleteFramebuffer(r.__webglFramebuffer);if(r.__webglDepthbuffer)e.deleteRenderbuffer(r.__webglDepthbuffer)}n.remove(t.texture);n.remove(t)}function w(e,t){var i=n.get(e);if(e.isVideoTexture)B(e);if(e.version>0&&i.__version!==e.version){var a=e.image;if(a===undefined){console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined")}else if(a.complete===false){console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}else{T(i,e,t);return}}r.activeTexture(33984+t);r.bindTexture(3553,i.__webglTexture)}function A(e,t){var i=n.get(e);if(e.version>0&&i.__version!==e.version){T(i,e,t);return}r.activeTexture(33984+t);r.bindTexture(32879,i.__webglTexture)}function M(t,s){var u=n.get(t);if(t.image.length===6){if(t.version>0&&u.__version!==t.version){if(!u.__image__webglTextureCube){t.addEventListener("dispose",g);u.__image__webglTextureCube=e.createTexture();o.memory.textures++}r.activeTexture(33984+s);r.bindTexture(34067,u.__image__webglTextureCube);e.pixelStorei(37440,t.flipY);var f=t&&t.isCompressedTexture;var h=t.image[0]&&t.image[0].isDataTexture;var m=[];for(var y=0;y<6;y++){if(!f&&!h){m[y]=c(t.image[y],i.maxCubemapSize)}else{m[y]=h?t.image[y].image:t.image[y]}}var b=m[0],x=l(b),w=a.convert(t.format),A=a.convert(t.type),M=v(w,A);S(34067,t,x);for(var y=0;y<6;y++){if(!f){if(h){r.texImage2D(34069+y,0,M,m[y].width,m[y].height,0,w,A,m[y].data)}else{r.texImage2D(34069+y,0,M,w,A,m[y])}}else{var E,T=m[y].mipmaps;for(var _=0,P=T.length;_<P;_++){E=T[_];if(t.format!==je&&t.format!==Ge){if(r.getCompressedTextureFormats().indexOf(w)>-1){r.compressedTexImage2D(34069+y,_,M,E.width,E.height,0,E.data)}else{console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()")}}else{r.texImage2D(34069+y,_,M,E.width,E.height,0,w,A,E.data)}}}}if(!f){u.__maxMipLevel=0}else{u.__maxMipLevel=T.length-1}if(d(t,x)){p(34067,t,b.width,b.height)}u.__version=t.version;if(t.onUpdate)t.onUpdate(t)}else{r.activeTexture(33984+s);r.bindTexture(34067,u.__image__webglTextureCube)}}}function E(e,t){r.activeTexture(33984+t);r.bindTexture(34067,n.get(e).__webglTexture)}function S(r,o,s){var u;if(s){e.texParameteri(r,10242,a.convert(o.wrapS));e.texParameteri(r,10243,a.convert(o.wrapT));e.texParameteri(r,10240,a.convert(o.magFilter));e.texParameteri(r,10241,a.convert(o.minFilter))}else{e.texParameteri(r,10242,33071);e.texParameteri(r,10243,33071);if(o.wrapS!==ge||o.wrapT!==ge){console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping.")}e.texParameteri(r,10240,m(o.magFilter));e.texParameteri(r,10241,m(o.minFilter));if(o.minFilter!==be&&o.minFilter!==Ae){console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")}}u=t.get("EXT_texture_filter_anisotropic");if(u){if(o.type===Le&&t.get("OES_texture_float_linear")===null)return;if(o.type===Re&&(i.isWebGL2||t.get("OES_texture_half_float_linear"))===null)return;if(o.anisotropy>1||n.get(o).__currentAnisotropy){e.texParameterf(r,u.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(o.anisotropy,i.getMaxAnisotropy()));n.get(o).__currentAnisotropy=o.anisotropy}}}function T(t,n,s){var u;if(n.isDataTexture3D){u=32879}else{u=3553}if(t.__webglInit===undefined){t.__webglInit=true;n.addEventListener("dispose",g);t.__webglTexture=e.createTexture();o.memory.textures++}r.activeTexture(33984+s);r.bindTexture(u,t.__webglTexture);e.pixelStorei(37440,n.flipY);e.pixelStorei(37441,n.premultiplyAlpha);e.pixelStorei(3317,n.unpackAlignment);var m=c(n.image,i.maxTextureSize);if(h(n)&&l(m)===false){m=f(m)}var y=l(m),b=a.convert(n.format),x=a.convert(n.type),w=v(b,x);S(u,n,y);var A,M=n.mipmaps;if(n.isDepthTexture){w=6402;if(n.type===Le){if(!i.isWebGL2)throw new Error("Float Depth Texture only supported in WebGL2.0");w=36012}else if(i.isWebGL2){w=33189}if(n.format===He&&w===6402){if(n.type!==Pe&&n.type!==Oe){console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture.");n.type=Pe;x=a.convert(n.type)}}if(n.format===Ve){w=34041;if(n.type!==Fe){console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture.");n.type=Fe;x=a.convert(n.type)}}r.texImage2D(3553,0,w,m.width,m.height,0,b,x,null)}else if(n.isDataTexture){if(M.length>0&&y){for(var E=0,T=M.length;E<T;E++){A=M[E];r.texImage2D(3553,E,w,A.width,A.height,0,b,x,A.data)}n.generateMipmaps=false;t.__maxMipLevel=M.length-1}else{r.texImage2D(3553,0,w,m.width,m.height,0,b,x,m.data);t.__maxMipLevel=0}}else if(n.isCompressedTexture){for(var E=0,T=M.length;E<T;E++){A=M[E];if(n.format!==je&&n.format!==Ge){if(r.getCompressedTextureFormats().indexOf(b)>-1){r.compressedTexImage2D(3553,E,w,A.width,A.height,0,A.data)}else{console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()")}}else{r.texImage2D(3553,E,w,A.width,A.height,0,b,x,A.data)}}t.__maxMipLevel=M.length-1}else if(n.isDataTexture3D){r.texImage3D(32879,0,w,m.width,m.height,m.depth,0,b,x,m.data);t.__maxMipLevel=0}else{if(M.length>0&&y){for(var E=0,T=M.length;E<T;E++){A=M[E];r.texImage2D(3553,E,w,b,x,A)}n.generateMipmaps=false;t.__maxMipLevel=M.length-1}else{r.texImage2D(3553,0,w,b,x,m);t.__maxMipLevel=0}}if(d(n,y)){p(3553,n,m.width,m.height)}t.__version=n.version;if(n.onUpdate)n.onUpdate(n)}function _(t,i,o,s){var u=a.convert(i.texture.format);var c=a.convert(i.texture.type);var l=v(u,c);r.texImage2D(s,0,l,i.width,i.height,0,u,c,null);e.bindFramebuffer(36160,t);e.framebufferTexture2D(36160,o,s,n.get(i.texture).__webglTexture,0);e.bindFramebuffer(36160,null)}function P(t,r){e.bindRenderbuffer(36161,t);if(r.depthBuffer&&!r.stencilBuffer){e.renderbufferStorage(36161,33189,r.width,r.height);e.framebufferRenderbuffer(36160,36096,36161,t)}else if(r.depthBuffer&&r.stencilBuffer){e.renderbufferStorage(36161,34041,r.width,r.height);e.framebufferRenderbuffer(36160,33306,36161,t)}else{e.renderbufferStorage(36161,32854,r.width,r.height)}e.bindRenderbuffer(36161,null)}function C(t,r){var i=r&&r.isWebGLRenderTargetCube;if(i)throw new Error("Depth Texture with cube render targets is not supported");e.bindFramebuffer(36160,t);if(!(r.depthTexture&&r.depthTexture.isDepthTexture)){throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture")}if(!n.get(r.depthTexture).__webglTexture||r.depthTexture.image.width!==r.width||r.depthTexture.image.height!==r.height){r.depthTexture.image.width=r.width;r.depthTexture.image.height=r.height;r.depthTexture.needsUpdate=true}w(r.depthTexture,0);var a=n.get(r.depthTexture).__webglTexture;if(r.depthTexture.format===He){e.framebufferTexture2D(36160,36096,3553,a,0)}else if(r.depthTexture.format===Ve){e.framebufferTexture2D(36160,33306,3553,a,0)}else{throw new Error("Unknown depthTexture format")}}function O(t){var r=n.get(t);var i=t.isWebGLRenderTargetCube===true;if(t.depthTexture){if(i)throw new Error("target.depthTexture not supported in Cube render targets");C(r.__webglFramebuffer,t)}else{if(i){r.__webglDepthbuffer=[];for(var a=0;a<6;a++){e.bindFramebuffer(36160,r.__webglFramebuffer[a]);r.__webglDepthbuffer[a]=e.createRenderbuffer();P(r.__webglDepthbuffer[a],t)}}else{e.bindFramebuffer(36160,r.__webglFramebuffer);r.__webglDepthbuffer=e.createRenderbuffer();P(r.__webglDepthbuffer,t)}}e.bindFramebuffer(36160,null)}function L(t){var i=n.get(t);var a=n.get(t.texture);t.addEventListener("dispose",y);a.__webglTexture=e.createTexture();o.memory.textures++;var s=t.isWebGLRenderTargetCube===true;var u=l(t);if(s){i.__webglFramebuffer=[];for(var c=0;c<6;c++){i.__webglFramebuffer[c]=e.createFramebuffer()}}else{i.__webglFramebuffer=e.createFramebuffer()}if(s){r.bindTexture(34067,a.__webglTexture);S(34067,t.texture,u);for(var c=0;c<6;c++){_(i.__webglFramebuffer[c],t,36064,34069+c)}if(d(t.texture,u)){p(34067,t.texture,t.width,t.height)}r.bindTexture(34067,null)}else{r.bindTexture(3553,a.__webglTexture);S(3553,t.texture,u);_(i.__webglFramebuffer,t,36064,3553);if(d(t.texture,u)){p(3553,t.texture,t.width,t.height)}r.bindTexture(3553,null)}if(t.depthBuffer){O(t)}}function R(e){var t=e.texture;var i=l(e);if(d(t,i)){var a=e.isWebGLRenderTargetCube?34067:3553;var o=n.get(t).__webglTexture;r.bindTexture(a,o);p(a,t,e.width,e.height);r.bindTexture(a,null)}}function B(e){var t=e.id;var r=o.render.frame;if(s[t]!==r){s[t]=r;e.update()}}this.setTexture2D=w;this.setTexture3D=A;this.setTextureCube=M;this.setTextureCubeDynamic=E;this.setupRenderTarget=L;this.updateRenderTargetMipmap=R}function No(e,t,r){function n(e){var n;if(e===me)return 10497;if(e===ge)return 33071;if(e===ye)return 33648;if(e===be)return 9728;if(e===xe)return 9984;if(e===we)return 9986;if(e===Ae)return 9729;if(e===Me)return 9985;if(e===Ee)return 9987;if(e===Se)return 5121;if(e===Be)return 32819;if(e===De)return 32820;if(e===Ie)return 33635;if(e===Te)return 5120;if(e===_e)return 5122;if(e===Pe)return 5123;if(e===Ce)return 5124;if(e===Oe)return 5125;if(e===Le)return 5126;if(e===Re){if(r.isWebGL2)return 5131;n=t.get("OES_texture_half_float");if(n!==null)return n.HALF_FLOAT_OES}if(e===Ue)return 6406;if(e===Ge)return 6407;if(e===je)return 6408;if(e===ze)return 6409;if(e===Ne)return 6410;if(e===He)return 6402;if(e===Ve)return 34041;if(e===We)return 6403;if(e===C)return 32774;if(e===O)return 32778;if(e===L)return 32779;if(e===D)return 0;if(e===I)return 1;if(e===F)return 768;if(e===U)return 769;if(e===G)return 770;if(e===j)return 771;if(e===z)return 772;if(e===N)return 773;if(e===k)return 774;if(e===H)return 775;if(e===V)return 776;if(e===Ye||e===Xe||e===Qe||e===qe){n=t.get("WEBGL_compressed_texture_s3tc");if(n!==null){if(e===Ye)return n.COMPRESSED_RGB_S3TC_DXT1_EXT;if(e===Xe)return n.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(e===Qe)return n.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(e===qe)return n.COMPRESSED_RGBA_S3TC_DXT5_EXT}}if(e===Je||e===Ke||e===Ze||e===$e){n=t.get("WEBGL_compressed_texture_pvrtc");if(n!==null){if(e===Je)return n.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(e===Ke)return n.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(e===Ze)return n.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(e===$e)return n.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}}if(e===et){n=t.get("WEBGL_compressed_texture_etc1");if(n!==null)return n.COMPRESSED_RGB_ETC1_WEBGL}if(e===tt||e===rt||e===nt||e===it||e===at||e===ot||e===st||e===ut||e===ct||e===lt||e===ft||e===ht||e===dt||e===pt){n=t.get("WEBGL_compressed_texture_astc");if(n!==null){return e}}if(e===R||e===B){if(r.isWebGL2){if(e===R)return 32775;if(e===B)return 32776}n=t.get("EXT_blend_minmax");if(n!==null){if(e===R)return n.MIN_EXT;if(e===B)return n.MAX_EXT}}if(e===Fe){if(r.isWebGL2)return 34042;n=t.get("WEBGL_depth_texture");if(n!==null)return n.UNSIGNED_INT_24_8_WEBGL}return 0}return{convert:n}}function ko(){Ci.call(this);this.type="Group"}ko.prototype=Object.assign(Object.create(Ci.prototype),{constructor:ko,isGroup:true});function Ho(){Ci.call(this);this.type="Camera";this.matrixWorldInverse=new Nt;this.projectionMatrix=new Nt;this.projectionMatrixInverse=new Nt}Ho.prototype=Object.assign(Object.create(Ci.prototype),{constructor:Ho,isCamera:true,copy:function(e,t){Ci.prototype.copy.call(this,e,t);this.matrixWorldInverse.copy(e.matrixWorldInverse);this.projectionMatrix.copy(e.projectionMatrix);this.projectionMatrixInverse.copy(e.projectionMatrixInverse);return this},getWorldDirection:function(e){if(e===undefined){console.warn("THREE.Camera: .getWorldDirection() target is now required");e=new Ht}this.updateMatrixWorld(true);var t=this.matrixWorld.elements;return e.set(-t[8],-t[9],-t[10]).normalize()},updateMatrixWorld:function(e){Ci.prototype.updateMatrixWorld.call(this,e);this.matrixWorldInverse.getInverse(this.matrixWorld)},clone:function(){return(new this.constructor).copy(this)}});function Vo(e,t,r,n){Ho.call(this);this.type="PerspectiveCamera";this.fov=e!==undefined?e:50;this.zoom=1;this.near=r!==undefined?r:.1;this.far=n!==undefined?n:2e3;this.focus=10;this.aspect=t!==undefined?t:1;this.view=null;this.filmGauge=35;this.filmOffset=0;this.updateProjectionMatrix()}Vo.prototype=Object.assign(Object.create(Ho.prototype),{constructor:Vo,isPerspectiveCamera:true,copy:function(e,t){Ho.prototype.copy.call(this,e,t);this.fov=e.fov;this.zoom=e.zoom;this.near=e.near;this.far=e.far;this.focus=e.focus;this.aspect=e.aspect;this.view=e.view===null?null:Object.assign({},e.view);this.filmGauge=e.filmGauge;this.filmOffset=e.filmOffset;return this},setFocalLength:function(e){var t=.5*this.getFilmHeight()/e;this.fov=jt.RAD2DEG*2*Math.atan(t);this.updateProjectionMatrix()},getFocalLength:function(){var e=Math.tan(jt.DEG2RAD*.5*this.fov);return.5*this.getFilmHeight()/e},getEffectiveFOV:function(){return jt.RAD2DEG*2*Math.atan(Math.tan(jt.DEG2RAD*.5*this.fov)/this.zoom)},getFilmWidth:function(){return this.filmGauge*Math.min(this.aspect,1)},getFilmHeight:function(){return this.filmGauge/Math.max(this.aspect,1)},setViewOffset:function(e,t,r,n,i,a){this.aspect=e/t;if(this.view===null){this.view={enabled:true,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}}this.view.enabled=true;this.view.fullWidth=e;this.view.fullHeight=t;this.view.offsetX=r;this.view.offsetY=n;this.view.width=i;this.view.height=a;this.updateProjectionMatrix()},clearViewOffset:function(){if(this.view!==null){this.view.enabled=false}this.updateProjectionMatrix()},updateProjectionMatrix:function(){var e=this.near,t=e*Math.tan(jt.DEG2RAD*.5*this.fov)/this.zoom,r=2*t,n=this.aspect*r,i=-.5*n,a=this.view;if(this.view!==null&&this.view.enabled){var o=a.fullWidth,s=a.fullHeight;i+=a.offsetX*n/o;t-=a.offsetY*r/s;n*=a.width/o;r*=a.height/s}var u=this.filmOffset;if(u!==0)i+=e*u/this.getFilmWidth();this.projectionMatrix.makePerspective(i,i+n,t,t-r,e,this.far);this.projectionMatrixInverse.getInverse(this.projectionMatrix)},toJSON:function(e){var t=Ci.prototype.toJSON.call(this,e);t.object.fov=this.fov;t.object.zoom=this.zoom;t.object.near=this.near;t.object.far=this.far;t.object.focus=this.focus;t.object.aspect=this.aspect;if(this.view!==null)t.object.view=Object.assign({},this.view);t.object.filmGauge=this.filmGauge;t.object.filmOffset=this.filmOffset;return t}});function Wo(e){Vo.call(this);this.cameras=e||[]}Wo.prototype=Object.assign(Object.create(Vo.prototype),{constructor:Wo,isArrayCamera:true});var Yo=new Ht;var Xo=new Ht;function Qo(e,t,r){Yo.setFromMatrixPosition(t.matrixWorld);Xo.setFromMatrixPosition(r.matrixWorld);var n=Yo.distanceTo(Xo);var i=t.projectionMatrix.elements;var a=r.projectionMatrix.elements;var o=i[14]/(i[10]-1);var s=i[14]/(i[10]+1);var u=(i[9]+1)/i[5];var c=(i[9]-1)/i[5];var l=(i[8]-1)/i[0];var f=(a[8]+1)/a[0];var h=o*l;var d=o*f;var p=n/(-l+f);var v=p*-l;t.matrixWorld.decompose(e.position,e.quaternion,e.scale);e.translateX(v);e.translateZ(p);e.matrixWorld.compose(e.position,e.quaternion,e.scale);e.matrixWorldInverse.getInverse(e.matrixWorld);var m=o+p;var g=s+p;var y=h-v;var b=d+(n-v);var x=u*s/g*m;var w=c*s/g*m;e.projectionMatrix.makePerspective(y,b,x,w,m,g)}function qo(e){var t=this;var r=null;var n=null;var i=null;var a=[];var o=new Nt;var s=new Nt;var u=1;var c="stage";if(typeof window!=="undefined"&&"VRFrameData"in window){n=new window.VRFrameData;window.addEventListener("vrdisplaypresentchange",b,false)}var l=new Nt;var f=new kt;var h=new Ht;var d=new Vo;d.bounds=new qt(0,0,.5,1);d.layers.enable(1);var p=new Vo;p.bounds=new qt(.5,0,.5,1);p.layers.enable(2);var v=new Wo([d,p]);v.layers.enable(1);v.layers.enable(2);function m(){return r!==null&&r.isPresenting===true}var g,y;function b(){if(m()){var n=r.getEyeParameters("left");var i=n.renderWidth*u;var a=n.renderHeight*u;y=e.getPixelRatio();g=e.getSize();e.setDrawingBufferSize(i*2,a,1);M.start()}else{if(t.enabled){e.setDrawingBufferSize(g.width,g.height,y)}M.stop()}}var x=[];function w(e){var t=navigator.getGamepads&&navigator.getGamepads();for(var r=0,n=0,i=t.length;r<i;r++){var a=t[r];if(a&&(a.id==="Daydream Controller"||a.id==="Gear VR Controller"||a.id==="Oculus Go Controller"||a.id==="OpenVR Gamepad"||a.id.startsWith("Oculus Touch")||a.id.startsWith("Spatial Controller"))){if(n===e)return a;n++}}}function A(){for(var e=0;e<a.length;e++){var t=a[e];var r=w(e);if(r!==undefined&&r.pose!==undefined){if(r.pose===null)return;var n=r.pose;if(n.hasPosition===false)t.position.set(.2,-.6,-.05);if(n.position!==null)t.position.fromArray(n.position);if(n.orientation!==null)t.quaternion.fromArray(n.orientation);t.matrix.compose(t.position,t.quaternion,t.scale);t.matrix.premultiply(o);t.matrix.decompose(t.position,t.quaternion,t.scale);t.matrixWorldNeedsUpdate=true;t.visible=true;var i=r.id==="Daydream Controller"?0:1;if(x[e]!==r.buttons[i].pressed){x[e]=r.buttons[i].pressed;if(x[e]===true){t.dispatchEvent({type:"selectstart"})}else{t.dispatchEvent({type:"selectend"});t.dispatchEvent({type:"select"})}}}else{t.visible=false}}}this.enabled=false;this.getController=function(e){var t=a[e];if(t===undefined){t=new ko;t.matrixAutoUpdate=false;t.visible=false;a[e]=t}return t};this.getDevice=function(){return r};this.setDevice=function(e){if(e!==undefined)r=e;M.setContext(e)};this.setFramebufferScaleFactor=function(e){u=e};this.setFrameOfReferenceType=function(e){c=e};this.setPoseTarget=function(e){if(e!==undefined)i=e};this.getCamera=function(e){var t=c==="stage"?1.6:0;if(r===null){e.position.set(0,t,0);return e}r.depthNear=e.near;r.depthFar=e.far;r.getFrameData(n);if(c==="stage"){var a=r.stageParameters;if(a){o.fromArray(a.sittingToStandingTransform)}else{o.makeTranslation(0,t,0)}}var u=n.pose;var m=i!==null?i:e;m.matrix.copy(o);m.matrix.decompose(m.position,m.quaternion,m.scale);if(u.orientation!==null){f.fromArray(u.orientation);m.quaternion.multiply(f)}if(u.position!==null){f.setFromRotationMatrix(o);h.fromArray(u.position);h.applyQuaternion(f);m.position.add(h)}m.updateMatrixWorld();if(r.isPresenting===false)return e;d.near=e.near;p.near=e.near;d.far=e.far;p.far=e.far;d.matrixWorldInverse.fromArray(n.leftViewMatrix);p.matrixWorldInverse.fromArray(n.rightViewMatrix);s.getInverse(o);if(c==="stage"){d.matrixWorldInverse.multiply(s);p.matrixWorldInverse.multiply(s)}var g=m.parent;if(g!==null){l.getInverse(g.matrixWorld);d.matrixWorldInverse.multiply(l);p.matrixWorldInverse.multiply(l)}d.matrixWorld.getInverse(d.matrixWorldInverse);p.matrixWorld.getInverse(p.matrixWorldInverse);d.projectionMatrix.fromArray(n.leftProjectionMatrix);p.projectionMatrix.fromArray(n.rightProjectionMatrix);Qo(v,d,p);var y=r.getLayers();if(y.length){var b=y[0];if(b.leftBounds!==null&&b.leftBounds.length===4){d.bounds.fromArray(b.leftBounds)}if(b.rightBounds!==null&&b.rightBounds.length===4){p.bounds.fromArray(b.rightBounds)}}A();return v};this.getStandingMatrix=function(){return o};this.isPresenting=m;var M=new Mi;this.setAnimationLoop=function(e){M.setAnimationLoop(e)};this.submitFrame=function(){if(m())r.submitFrame()};this.dispose=function(){if(typeof window!=="undefined"){window.removeEventListener("vrdisplaypresentchange",b)}}}function Jo(e){var t=e.context;var r=null;var n=null;var i=1;var a=null;var o="stage";var s=null;var u=[];var c=[];function l(){return n!==null&&a!==null}var f=new Vo;f.layers.enable(1);f.viewport=new qt;var h=new Vo;h.layers.enable(2);h.viewport=new qt;var d=new Wo([f,h]);d.layers.enable(1);d.layers.enable(2);this.enabled=false;this.getController=function(e){var t=u[e];if(t===undefined){t=new ko;t.matrixAutoUpdate=false;t.visible=false;u[e]=t}return t};this.getDevice=function(){return r};this.setDevice=function(e){if(e!==undefined)r=e;if(e instanceof XRDevice)t.setCompatibleXRDevice(e)};function p(e){var t=u[c.indexOf(e.inputSource)];if(t)t.dispatchEvent({type:e.type})}function v(){e.setFramebuffer(null);b.stop()}this.setFramebufferScaleFactor=function(e){i=e};this.setFrameOfReferenceType=function(e){o=e};this.setSession=function(r){n=r;if(n!==null){n.addEventListener("select",p);n.addEventListener("selectstart",p);n.addEventListener("selectend",p);n.addEventListener("end",v);n.baseLayer=new XRWebGLLayer(n,t,{framebufferScaleFactor:i});n.requestFrameOfReference(o).then((function(t){a=t;e.setFramebuffer(n.baseLayer.framebuffer);b.setContext(n);b.start()}));c=n.getInputSources();n.addEventListener("inputsourceschange",(function(){c=n.getInputSources();console.log(c);for(var e=0;e<u.length;e++){var t=u[e];t.userData.inputSource=c[e]}}))}};function m(e,t){if(t===null){e.matrixWorld.copy(e.matrix)}else{e.matrixWorld.multiplyMatrices(t.matrixWorld,e.matrix)}e.matrixWorldInverse.getInverse(e.matrixWorld)}this.getCamera=function(e){if(l()){var t=e.parent;var r=d.cameras;m(d,t);for(var n=0;n<r.length;n++){m(r[n],t)}e.matrixWorld.copy(d.matrixWorld);var i=e.children;for(var n=0,a=i.length;n<a;n++){i[n].updateMatrixWorld(true)}Qo(d,f,h);return d}return e};this.isPresenting=l;var g=null;function y(e,t){s=t.getDevicePose(a);if(s!==null){var r=n.baseLayer;var i=t.views;for(var o=0;o<i.length;o++){var l=i[o];var f=r.getViewport(l);var h=s.getViewMatrix(l);var p=d.cameras[o];p.matrix.fromArray(h).getInverse(p.matrix);p.projectionMatrix.fromArray(l.projectionMatrix);p.viewport.set(f.x,f.y,f.width,f.height);if(o===0){d.matrix.copy(p.matrix)}}}for(var o=0;o<u.length;o++){var v=u[o];var m=c[o];if(m){var y=t.getInputPose(m,a);if(y!==null){if("targetRay"in y){v.matrix.elements=y.targetRay.transformMatrix}else if("pointerMatrix"in y){v.matrix.elements=y.pointerMatrix}v.matrix.decompose(v.position,v.rotation,v.scale);v.visible=true;continue}}v.visible=false}if(g)g(e)}var b=new Mi;b.setAnimationLoop(y);this.setAnimationLoop=function(e){g=e};this.dispose=function(){};this.getStandingMatrix=function(){console.warn("THREE.WebXRManager: getStandingMatrix() is no longer needed.");return new THREE.Matrix4};this.submitFrame=function(){}}function Ko(e){console.log("THREE.WebGLRenderer",i);e=e||{};var t=e.canvas!==undefined?e.canvas:document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),r=e.context!==undefined?e.context:null,n=e.alpha!==undefined?e.alpha:false,a=e.depth!==undefined?e.depth:true,o=e.stencil!==undefined?e.stencil:true,s=e.antialias!==undefined?e.antialias:false,u=e.premultipliedAlpha!==undefined?e.premultipliedAlpha:true,c=e.preserveDrawingBuffer!==undefined?e.preserveDrawingBuffer:false,l=e.powerPreference!==undefined?e.powerPreference:"default";var f=null;var h=null;this.domElement=t;this.context=null;this.autoClear=true;this.autoClearColor=true;this.autoClearDepth=true;this.autoClearStencil=true;this.sortObjects=true;this.clippingPlanes=[];this.localClippingEnabled=false;this.gammaFactor=2;this.gammaInput=false;this.gammaOutput=false;this.physicallyCorrectLights=false;this.toneMapping=ne;this.toneMappingExposure=1;this.toneMappingWhitePoint=1;this.maxMorphTargets=8;this.maxMorphNormals=4;var d=this,p=false,v=null,g=null,y=null,b=-1,x={geometry:null,program:null,wireframe:false},w=null,A=null,M=new qt,E=new qt,S=null,T=0,_=t.width,P=t.height,C=1,O=new qt(0,0,_,P),L=new qt(0,0,_,P),R=false,B=new rr,D=new oa,I=false,F=false,U=new Nt,G=new Ht;function j(){return g===null?C:1}var z;try{var N={alpha:n,depth:a,stencil:o,antialias:s,premultipliedAlpha:u,preserveDrawingBuffer:c,powerPreference:l};t.addEventListener("webglcontextlost",ce,false);t.addEventListener("webglcontextrestored",le,false);z=r||t.getContext("webgl",N)||t.getContext("experimental-webgl",N);if(z===null){if(t.getContext("webgl")!==null){throw new Error("Error creating WebGL context with your selected attributes.")}else{throw new Error("Error creating WebGL context.")}}if(z.getShaderPrecisionFormat===undefined){z.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}}}}catch(e){console.error("THREE.WebGLRenderer: "+e.message)}var k,H,V,W;var Y,X,Q,q,J;var K,Z,$;var ee,te,re,ie;var ae;function oe(){k=new sa(z);H=new aa(z,k,e);if(!H.isWebGL2){k.get("WEBGL_depth_texture");k.get("OES_texture_float");k.get("OES_texture_half_float");k.get("OES_texture_half_float_linear");k.get("OES_standard_derivatives");k.get("OES_element_index_uint");k.get("ANGLE_instanced_arrays")}k.get("OES_texture_float_linear");ae=new No(z,k,H);V=new jo(z,k,ae,H);V.scissor(E.copy(L).multiplyScalar(C));V.viewport(M.copy(O).multiplyScalar(C));W=new la(z);Y=new To;X=new zo(z,k,V,Y,H,ae,W);Q=new Ei(z);q=new ua(z,Q,W);J=new da(q,W);te=new ha(z);K=new So(d,k,H);Z=new Oo;$=new Io;ee=new na(d,V,J,u);re=new ia(z,k,W,H);ie=new ca(z,k,W,H);W.programs=K.programs;d.context=z;d.capabilities=H;d.extensions=k;d.properties=Y;d.renderLists=Z;d.state=V;d.info=W}oe();var se=null;if(typeof navigator!=="undefined"){se="xr"in navigator?new Jo(d):new qo(d)}this.vr=se;var ue=new Go(d,J,H.maxTextureSize);this.shadowMap=ue;this.getContext=function(){return z};this.getContextAttributes=function(){return z.getContextAttributes()};this.forceContextLoss=function(){var e=k.get("WEBGL_lose_context");if(e)e.loseContext()};this.forceContextRestore=function(){var e=k.get("WEBGL_lose_context");if(e)e.restoreContext()};this.getPixelRatio=function(){return C};this.setPixelRatio=function(e){if(e===undefined)return;C=e;this.setSize(_,P,false)};this.getSize=function(){return{width:_,height:P}};this.setSize=function(e,r,n){if(se.isPresenting()){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}_=e;P=r;t.width=e*C;t.height=r*C;if(n!==false){t.style.width=e+"px";t.style.height=r+"px"}this.setViewport(0,0,e,r)};this.getDrawingBufferSize=function(){return{width:_*C,height:P*C}};this.setDrawingBufferSize=function(e,r,n){_=e;P=r;C=n;t.width=e*n;t.height=r*n;this.setViewport(0,0,e,r)};this.getCurrentViewport=function(){return M};this.setViewport=function(e,t,r,n){O.set(e,P-t-n,r,n);V.viewport(M.copy(O).multiplyScalar(C))};this.setScissor=function(e,t,r,n){L.set(e,P-t-n,r,n);V.scissor(E.copy(L).multiplyScalar(C))};this.setScissorTest=function(e){V.setScissorTest(R=e)};this.getClearColor=function(){return ee.getClearColor()};this.setClearColor=function(){ee.setClearColor.apply(ee,arguments)};this.getClearAlpha=function(){return ee.getClearAlpha()};this.setClearAlpha=function(){ee.setClearAlpha.apply(ee,arguments)};this.clear=function(e,t,r){var n=0;if(e===undefined||e)n|=16384;if(t===undefined||t)n|=256;if(r===undefined||r)n|=1024;z.clear(n)};this.clearColor=function(){this.clear(true,false,false)};this.clearDepth=function(){this.clear(false,true,false)};this.clearStencil=function(){this.clear(false,false,true)};this.dispose=function(){t.removeEventListener("webglcontextlost",ce,false);t.removeEventListener("webglcontextrestored",le,false);Z.dispose();$.dispose();Y.dispose();J.dispose();se.dispose();ye.stop()};function ce(e){e.preventDefault();console.log("THREE.WebGLRenderer: Context Lost.");p=true}function le(){console.log("THREE.WebGLRenderer: Context Restored.");p=false;oe()}function fe(e){var t=e.target;t.removeEventListener("dispose",fe);he(t)}function he(e){de(e);Y.remove(e)}function de(e){var t=Y.get(e).program;e.program=undefined;if(t!==undefined){K.releaseProgram(t)}}function pe(e,t){e.render((function(e){d.renderBufferImmediate(e,t)}))}this.renderBufferImmediate=function(e,t){V.initAttributes();var r=Y.get(e);if(e.hasPositions&&!r.position)r.position=z.createBuffer();if(e.hasNormals&&!r.normal)r.normal=z.createBuffer();if(e.hasUvs&&!r.uv)r.uv=z.createBuffer();if(e.hasColors&&!r.color)r.color=z.createBuffer();var n=t.getAttributes();if(e.hasPositions){z.bindBuffer(34962,r.position);z.bufferData(34962,e.positionArray,35048);V.enableAttribute(n.position);z.vertexAttribPointer(n.position,3,5126,false,0,0)}if(e.hasNormals){z.bindBuffer(34962,r.normal);z.bufferData(34962,e.normalArray,35048);V.enableAttribute(n.normal);z.vertexAttribPointer(n.normal,3,5126,false,0,0)}if(e.hasUvs){z.bindBuffer(34962,r.uv);z.bufferData(34962,e.uvArray,35048);V.enableAttribute(n.uv);z.vertexAttribPointer(n.uv,2,5126,false,0,0)}if(e.hasColors){z.bindBuffer(34962,r.color);z.bufferData(34962,e.colorArray,35048);V.enableAttribute(n.color);z.vertexAttribPointer(n.color,3,5126,false,0,0)}V.disableUnusedAttributes();z.drawArrays(4,0,e.count);e.count=0};this.renderBufferDirect=function(e,t,r,n,i,a){var o=i.isMesh&&i.normalMatrix.determinant()<0;V.setMaterial(n,o);var s=Me(e,t,n,i);var u=false;if(x.geometry!==r.id||x.program!==s.id||x.wireframe!==(n.wireframe===true)){x.geometry=r.id;x.program=s.id;x.wireframe=n.wireframe===true;u=true}if(i.morphTargetInfluences){te.update(i,r,n,s);u=true}var c=r.index;var l=r.attributes.position;var f=1;if(n.wireframe===true){c=q.getWireframeAttribute(r);f=2}var h;var d=re;if(c!==null){h=Q.get(c);d=ie;d.setIndex(h)}if(u){ve(n,s,r);if(c!==null){z.bindBuffer(34963,h.buffer)}}var p=Infinity;if(c!==null){p=c.count}else if(l!==undefined){p=l.count}var v=r.drawRange.start*f;var m=r.drawRange.count*f;var g=a!==null?a.start*f:0;var y=a!==null?a.count*f:Infinity;var b=Math.max(v,g);var w=Math.min(p,v+m,g+y)-1;var A=Math.max(0,w-b+1);if(A===0)return;if(i.isMesh){if(n.wireframe===true){V.setLineWidth(n.wireframeLinewidth*j());d.setMode(1)}else{switch(i.drawMode){case Et:d.setMode(4);break;case St:d.setMode(5);break;case Tt:d.setMode(6);break}}}else if(i.isLine){var M=n.linewidth;if(M===undefined)M=1;V.setLineWidth(M*j());if(i.isLineSegments){d.setMode(1)}else if(i.isLineLoop){d.setMode(2)}else{d.setMode(3)}}else if(i.isPoints){d.setMode(0)}else if(i.isSprite){d.setMode(4)}if(r&&r.isInstancedBufferGeometry){if(r.maxInstancedCount>0){d.renderInstances(r,b,A)}}else{d.render(b,A)}};function ve(e,t,r){if(r&&r.isInstancedBufferGeometry&!H.isWebGL2){if(k.get("ANGLE_instanced_arrays")===null){console.error("THREE.WebGLRenderer.setupVertexAttributes: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}}V.initAttributes();var n=r.attributes;var i=t.getAttributes();var a=e.defaultAttributeValues;for(var o in i){var s=i[o];if(s>=0){var u=n[o];if(u!==undefined){var c=u.normalized;var l=u.itemSize;var f=Q.get(u);if(f===undefined)continue;var h=f.buffer;var d=f.type;var p=f.bytesPerElement;if(u.isInterleavedBufferAttribute){var v=u.data;var m=v.stride;var g=u.offset;if(v&&v.isInstancedInterleavedBuffer){V.enableAttributeAndDivisor(s,v.meshPerAttribute);if(r.maxInstancedCount===undefined){r.maxInstancedCount=v.meshPerAttribute*v.count}}else{V.enableAttribute(s)}z.bindBuffer(34962,h);z.vertexAttribPointer(s,l,d,c,m*p,g*p)}else{if(u.isInstancedBufferAttribute){V.enableAttributeAndDivisor(s,u.meshPerAttribute);if(r.maxInstancedCount===undefined){r.maxInstancedCount=u.meshPerAttribute*u.count}}else{V.enableAttribute(s)}z.bindBuffer(34962,h);z.vertexAttribPointer(s,l,d,c,0,0)}}else if(a!==undefined){var y=a[o];if(y!==undefined){switch(y.length){case 2:z.vertexAttrib2fv(s,y);break;case 3:z.vertexAttrib3fv(s,y);break;case 4:z.vertexAttrib4fv(s,y);break;default:z.vertexAttrib1fv(s,y)}}}}}V.disableUnusedAttributes()}this.compile=function(e,t){h=$.get(e,t);h.init();e.traverse((function(e){if(e.isLight){h.pushLight(e);if(e.castShadow){h.pushShadow(e)}}}));h.setupLights(t);e.traverse((function(t){if(t.material){if(Array.isArray(t.material)){for(var r=0;r<t.material.length;r++){Ae(t.material[r],e.fog,t)}}else{Ae(t.material,e.fog,t)}}}))};var me=null;function ge(e){if(se.isPresenting())return;if(me)me(e)}var ye=new Mi;ye.setAnimationLoop(ge);if(typeof window!=="undefined")ye.setContext(window);this.setAnimationLoop=function(e){me=e;se.setAnimationLoop(e);ye.start()};this.render=function(e,t,r,n){if(!(t&&t.isCamera)){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(p)return;x.geometry=null;x.program=null;x.wireframe=false;b=-1;w=null;if(e.autoUpdate===true)e.updateMatrixWorld();if(t.parent===null)t.updateMatrixWorld();if(se.enabled){t=se.getCamera(t)}h=$.get(e,t);h.init();e.onBeforeRender(d,e,t,r);U.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse);B.setFromMatrix(U);F=this.localClippingEnabled;I=D.init(this.clippingPlanes,F,t);f=Z.get(e,t);f.init();be(e,t,d.sortObjects);if(d.sortObjects===true){f.sort()}if(I)D.beginShadows();var i=h.state.shadowsArray;ue.render(i,e,t);h.setupLights(t);if(I)D.endShadows();if(this.info.autoReset)this.info.reset();if(r===undefined){r=null}this.setRenderTarget(r);ee.render(f,e,t,n);var a=f.opaque;var o=f.transparent;if(e.overrideMaterial){var s=e.overrideMaterial;if(a.length)xe(a,e,t,s);if(o.length)xe(o,e,t,s)}else{if(a.length)xe(a,e,t);if(o.length)xe(o,e,t)}if(r){X.updateRenderTargetMipmap(r)}V.buffers.depth.setTest(true);V.buffers.depth.setMask(true);V.buffers.color.setMask(true);V.setPolygonOffset(false);e.onAfterRender(d,e,t);if(se.enabled){se.submitFrame()}f=null;h=null};function be(e,t,r){if(e.visible===false)return;var n=e.layers.test(t.layers);if(n){if(e.isLight){h.pushLight(e);if(e.castShadow){h.pushShadow(e)}}else if(e.isSprite){if(!e.frustumCulled||B.intersectsSprite(e)){if(r){G.setFromMatrixPosition(e.matrixWorld).applyMatrix4(U)}var i=J.update(e);var a=e.material;f.push(e,i,a,G.z,null)}}else if(e.isImmediateRenderObject){if(r){G.setFromMatrixPosition(e.matrixWorld).applyMatrix4(U)}f.push(e,null,e.material,G.z,null)}else if(e.isMesh||e.isLine||e.isPoints){if(e.isSkinnedMesh){e.skeleton.update()}if(!e.frustumCulled||B.intersectsObject(e)){if(r){G.setFromMatrixPosition(e.matrixWorld).applyMatrix4(U)}var i=J.update(e);var a=e.material;if(Array.isArray(a)){var o=i.groups;for(var s=0,u=o.length;s<u;s++){var c=o[s];var l=a[c.materialIndex];if(l&&l.visible){f.push(e,i,l,G.z,c)}}}else if(a.visible){f.push(e,i,a,G.z,null)}}}}var d=e.children;for(var s=0,u=d.length;s<u;s++){be(d[s],t,r)}}function xe(e,t,r,n){for(var i=0,a=e.length;i<a;i++){var o=e[i];var s=o.object;var u=o.geometry;var c=n===undefined?o.material:n;var l=o.group;if(r.isArrayCamera){A=r;var f=r.cameras;for(var d=0,p=f.length;d<p;d++){var v=f[d];if(s.layers.test(v.layers)){if("viewport"in v){V.viewport(M.copy(v.viewport))}else{var m=v.bounds;var g=m.x*_;var y=m.y*P;var b=m.z*_;var x=m.w*P;V.viewport(M.set(g,y,b,x).multiplyScalar(C))}h.setupLights(v);we(s,t,v,u,c,l)}}}else{A=null;we(s,t,r,u,c,l)}}}function we(e,t,r,n,i,a){e.onBeforeRender(d,t,r,n,i,a);h=$.get(t,A||r);e.modelViewMatrix.multiplyMatrices(r.matrixWorldInverse,e.matrixWorld);e.normalMatrix.getNormalMatrix(e.modelViewMatrix);if(e.isImmediateRenderObject){V.setMaterial(i);var o=Me(r,t.fog,i,e);x.geometry=null;x.program=null;x.wireframe=false;pe(e,o)}else{d.renderBufferDirect(r,t.fog,n,i,e,a)}e.onAfterRender(d,t,r,n,i,a);h=$.get(t,A||r)}function Ae(e,t,r){var n=Y.get(e);var i=h.state.lights;var a=h.state.shadowsArray;var o=n.lightsHash;var s=i.state.hash;var u=K.getParameters(e,i.state,a,t,D.numPlanes,D.numIntersection,r);var c=K.getProgramCode(e,u);var l=n.program;var f=true;if(l===undefined){e.addEventListener("dispose",fe)}else if(l.code!==c){de(e)}else if(o.stateID!==s.stateID||o.directionalLength!==s.directionalLength||o.pointLength!==s.pointLength||o.spotLength!==s.spotLength||o.rectAreaLength!==s.rectAreaLength||o.hemiLength!==s.hemiLength||o.shadowsLength!==s.shadowsLength){o.stateID=s.stateID;o.directionalLength=s.directionalLength;o.pointLength=s.pointLength;o.spotLength=s.spotLength;o.rectAreaLength=s.rectAreaLength;o.hemiLength=s.hemiLength;o.shadowsLength=s.shadowsLength;f=false}else if(u.shaderID!==undefined){return}else{f=false}if(f){if(u.shaderID){var p=Ai[u.shaderID];n.shader={name:e.type,uniforms:mi(p.uniforms),vertexShader:p.vertexShader,fragmentShader:p.fragmentShader}}else{n.shader={name:e.type,uniforms:e.uniforms,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader}}e.onBeforeCompile(n.shader,d);c=K.getProgramCode(e,u);l=K.acquireProgram(e,n.shader,u,c);n.program=l;e.program=l}var v=l.getAttributes();if(e.morphTargets){e.numSupportedMorphTargets=0;for(var m=0;m<d.maxMorphTargets;m++){if(v["morphTarget"+m]>=0){e.numSupportedMorphTargets++}}}if(e.morphNormals){e.numSupportedMorphNormals=0;for(var m=0;m<d.maxMorphNormals;m++){if(v["morphNormal"+m]>=0){e.numSupportedMorphNormals++}}}var g=n.shader.uniforms;if(!e.isShaderMaterial&&!e.isRawShaderMaterial||e.clipping===true){n.numClippingPlanes=D.numPlanes;n.numIntersection=D.numIntersection;g.clippingPlanes=D.uniform}n.fog=t;if(o===undefined){n.lightsHash=o={}}o.stateID=s.stateID;o.directionalLength=s.directionalLength;o.pointLength=s.pointLength;o.spotLength=s.spotLength;o.rectAreaLength=s.rectAreaLength;o.hemiLength=s.hemiLength;o.shadowsLength=s.shadowsLength;if(e.lights){g.ambientLightColor.value=i.state.ambient;g.directionalLights.value=i.state.directional;g.spotLights.value=i.state.spot;g.rectAreaLights.value=i.state.rectArea;g.pointLights.value=i.state.point;g.hemisphereLights.value=i.state.hemi;g.directionalShadowMap.value=i.state.directionalShadowMap;g.directionalShadowMatrix.value=i.state.directionalShadowMatrix;g.spotShadowMap.value=i.state.spotShadowMap;g.spotShadowMatrix.value=i.state.spotShadowMatrix;g.pointShadowMap.value=i.state.pointShadowMap;g.pointShadowMatrix.value=i.state.pointShadowMatrix}var y=n.program.getUniforms(),b=so.seqWithValue(y.seq,g);n.uniformsList=b}function Me(e,t,r,n){T=0;var i=Y.get(r);var a=h.state.lights;var o=i.lightsHash;var s=a.state.hash;if(I){if(F||e!==w){var u=e===w&&r.id===b;D.setState(r.clippingPlanes,r.clipIntersection,r.clipShadows,e,i,u)}}if(r.needsUpdate===false){if(i.program===undefined){r.needsUpdate=true}else if(r.fog&&i.fog!==t){r.needsUpdate=true}else if(r.lights&&(o.stateID!==s.stateID||o.directionalLength!==s.directionalLength||o.pointLength!==s.pointLength||o.spotLength!==s.spotLength||o.rectAreaLength!==s.rectAreaLength||o.hemiLength!==s.hemiLength||o.shadowsLength!==s.shadowsLength)){r.needsUpdate=true}else if(i.numClippingPlanes!==undefined&&(i.numClippingPlanes!==D.numPlanes||i.numIntersection!==D.numIntersection)){r.needsUpdate=true}}if(r.needsUpdate){Ae(r,t,n);r.needsUpdate=false}var c=false;var l=false;var f=false;var p=i.program,v=p.getUniforms(),m=i.shader.uniforms;if(V.useProgram(p.program)){c=true;l=true;f=true}if(r.id!==b){b=r.id;l=true}if(c||w!==e){v.setValue(z,"projectionMatrix",e.projectionMatrix);if(H.logarithmicDepthBuffer){v.setValue(z,"logDepthBufFC",2/(Math.log(e.far+1)/Math.LN2))}if(w!==e){w=e;l=true;f=true}if(r.isShaderMaterial||r.isMeshPhongMaterial||r.isMeshStandardMaterial||r.envMap){var g=v.map.cameraPosition;if(g!==undefined){g.setValue(z,G.setFromMatrixPosition(e.matrixWorld))}}if(r.isMeshPhongMaterial||r.isMeshLambertMaterial||r.isMeshBasicMaterial||r.isMeshStandardMaterial||r.isShaderMaterial||r.skinning){v.setValue(z,"viewMatrix",e.matrixWorldInverse)}}if(r.skinning){v.setOptional(z,n,"bindMatrix");v.setOptional(z,n,"bindMatrixInverse");var y=n.skeleton;if(y){var x=y.bones;if(H.floatVertexTextures){if(y.boneTexture===undefined){var A=Math.sqrt(x.length*4);A=jt.ceilPowerOfTwo(A);A=Math.max(A,4);var M=new Float32Array(A*A*4);M.set(y.boneMatrices);var E=new Zt(M,A,A,je,Le);E.needsUpdate=true;y.boneMatrices=M;y.boneTexture=E;y.boneTextureSize=A}v.setValue(z,"boneTexture",y.boneTexture);v.setValue(z,"boneTextureSize",y.boneTextureSize)}else{v.setOptional(z,y,"boneMatrices")}}}if(l){v.setValue(z,"toneMappingExposure",d.toneMappingExposure);v.setValue(z,"toneMappingWhitePoint",d.toneMappingWhitePoint);if(r.lights){He(m,f)}if(t&&r.fog){Oe(m,t)}if(r.isMeshBasicMaterial){Ee(m,r)}else if(r.isMeshLambertMaterial){Ee(m,r);Be(m,r)}else if(r.isMeshPhongMaterial){Ee(m,r);if(r.isMeshToonMaterial){Ie(m,r)}else{De(m,r)}}else if(r.isMeshStandardMaterial){Ee(m,r);if(r.isMeshPhysicalMaterial){Ue(m,r)}else{Fe(m,r)}}else if(r.isMeshMatcapMaterial){Ee(m,r);Ge(m,r)}else if(r.isMeshDepthMaterial){Ee(m,r);ze(m,r)}else if(r.isMeshDistanceMaterial){Ee(m,r);Ne(m,r)}else if(r.isMeshNormalMaterial){Ee(m,r);ke(m,r)}else if(r.isLineBasicMaterial){Te(m,r);if(r.isLineDashedMaterial){_e(m,r)}}else if(r.isPointsMaterial){Pe(m,r)}else if(r.isSpriteMaterial){Ce(m,r)}else if(r.isShadowMaterial){m.color.value=r.color;m.opacity.value=r.opacity}if(m.ltc_1!==undefined)m.ltc_1.value=wi.LTC_1;if(m.ltc_2!==undefined)m.ltc_2.value=wi.LTC_2;so.upload(z,i.uniformsList,m,d)}if(r.isShaderMaterial&&r.uniformsNeedUpdate===true){so.upload(z,i.uniformsList,m,d);r.uniformsNeedUpdate=false}if(r.isSpriteMaterial){v.setValue(z,"center",n.center)}v.setValue(z,"modelViewMatrix",n.modelViewMatrix);v.setValue(z,"normalMatrix",n.normalMatrix);v.setValue(z,"modelMatrix",n.matrixWorld);return p}function Ee(e,t){e.opacity.value=t.opacity;if(t.color){e.diffuse.value=t.color}if(t.emissive){e.emissive.value.copy(t.emissive).multiplyScalar(t.emissiveIntensity)}if(t.map){e.map.value=t.map}if(t.alphaMap){e.alphaMap.value=t.alphaMap}if(t.specularMap){e.specularMap.value=t.specularMap}if(t.envMap){e.envMap.value=t.envMap;e.flipEnvMap.value=t.envMap.isCubeTexture?-1:1;e.reflectivity.value=t.reflectivity;e.refractionRatio.value=t.refractionRatio;e.maxMipLevel.value=Y.get(t.envMap).__maxMipLevel}if(t.lightMap){e.lightMap.value=t.lightMap;e.lightMapIntensity.value=t.lightMapIntensity}if(t.aoMap){e.aoMap.value=t.aoMap;e.aoMapIntensity.value=t.aoMapIntensity}var r;if(t.map){r=t.map}else if(t.specularMap){r=t.specularMap}else if(t.displacementMap){r=t.displacementMap}else if(t.normalMap){r=t.normalMap}else if(t.bumpMap){r=t.bumpMap}else if(t.roughnessMap){r=t.roughnessMap}else if(t.metalnessMap){r=t.metalnessMap}else if(t.alphaMap){r=t.alphaMap}else if(t.emissiveMap){r=t.emissiveMap}if(r!==undefined){if(r.isWebGLRenderTarget){r=r.texture}if(r.matrixAutoUpdate===true){r.updateMatrix()}e.uvTransform.value.copy(r.matrix)}}function Te(e,t){e.diffuse.value=t.color;e.opacity.value=t.opacity}function _e(e,t){e.dashSize.value=t.dashSize;e.totalSize.value=t.dashSize+t.gapSize;e.scale.value=t.scale}function Pe(e,t){e.diffuse.value=t.color;e.opacity.value=t.opacity;e.size.value=t.size*C;e.scale.value=P*.5;e.map.value=t.map;if(t.map!==null){if(t.map.matrixAutoUpdate===true){t.map.updateMatrix()}e.uvTransform.value.copy(t.map.matrix)}}function Ce(e,t){e.diffuse.value=t.color;e.opacity.value=t.opacity;e.rotation.value=t.rotation;e.map.value=t.map;if(t.map!==null){if(t.map.matrixAutoUpdate===true){t.map.updateMatrix()}e.uvTransform.value.copy(t.map.matrix)}}function Oe(e,t){e.fogColor.value=t.color;if(t.isFog){e.fogNear.value=t.near;e.fogFar.value=t.far}else if(t.isFogExp2){e.fogDensity.value=t.density}}function Be(e,t){if(t.emissiveMap){e.emissiveMap.value=t.emissiveMap}}function De(e,t){e.specular.value=t.specular;e.shininess.value=Math.max(t.shininess,1e-4);if(t.emissiveMap){e.emissiveMap.value=t.emissiveMap}if(t.bumpMap){e.bumpMap.value=t.bumpMap;e.bumpScale.value=t.bumpScale;if(t.side===m)e.bumpScale.value*=-1}if(t.normalMap){e.normalMap.value=t.normalMap;e.normalScale.value.copy(t.normalScale);if(t.side===m)e.normalScale.value.negate()}if(t.displacementMap){e.displacementMap.value=t.displacementMap;e.displacementScale.value=t.displacementScale;e.displacementBias.value=t.displacementBias}}function Ie(e,t){De(e,t);if(t.gradientMap){e.gradientMap.value=t.gradientMap}}function Fe(e,t){e.roughness.value=t.roughness;e.metalness.value=t.metalness;if(t.roughnessMap){e.roughnessMap.value=t.roughnessMap}if(t.metalnessMap){e.metalnessMap.value=t.metalnessMap}if(t.emissiveMap){e.emissiveMap.value=t.emissiveMap}if(t.bumpMap){e.bumpMap.value=t.bumpMap;e.bumpScale.value=t.bumpScale;if(t.side===m)e.bumpScale.value*=-1}if(t.normalMap){e.normalMap.value=t.normalMap;e.normalScale.value.copy(t.normalScale);if(t.side===m)e.normalScale.value.negate()}if(t.displacementMap){e.displacementMap.value=t.displacementMap;e.displacementScale.value=t.displacementScale;e.displacementBias.value=t.displacementBias}if(t.envMap){e.envMapIntensity.value=t.envMapIntensity}}function Ue(e,t){Fe(e,t);e.reflectivity.value=t.reflectivity;e.clearCoat.value=t.clearCoat;e.clearCoatRoughness.value=t.clearCoatRoughness}function Ge(e,t){if(t.matcap){e.matcap.value=t.matcap}if(t.bumpMap){e.bumpMap.value=t.bumpMap;e.bumpScale.value=t.bumpScale;if(t.side===m)e.bumpScale.value*=-1}if(t.normalMap){e.normalMap.value=t.normalMap;e.normalScale.value.copy(t.normalScale);if(t.side===m)e.normalScale.value.negate()}if(t.displacementMap){e.displacementMap.value=t.displacementMap;e.displacementScale.value=t.displacementScale;e.displacementBias.value=t.displacementBias}}function ze(e,t){if(t.displacementMap){e.displacementMap.value=t.displacementMap;e.displacementScale.value=t.displacementScale;e.displacementBias.value=t.displacementBias}}function Ne(e,t){if(t.displacementMap){e.displacementMap.value=t.displacementMap;e.displacementScale.value=t.displacementScale;e.displacementBias.value=t.displacementBias}e.referencePosition.value.copy(t.referencePosition);e.nearDistance.value=t.nearDistance;e.farDistance.value=t.farDistance}function ke(e,t){if(t.bumpMap){e.bumpMap.value=t.bumpMap;e.bumpScale.value=t.bumpScale;if(t.side===m)e.bumpScale.value*=-1}if(t.normalMap){e.normalMap.value=t.normalMap;e.normalScale.value.copy(t.normalScale);if(t.side===m)e.normalScale.value.negate()}if(t.displacementMap){e.displacementMap.value=t.displacementMap;e.displacementScale.value=t.displacementScale;e.displacementBias.value=t.displacementBias}}function He(e,t){e.ambientLightColor.needsUpdate=t;e.directionalLights.needsUpdate=t;e.pointLights.needsUpdate=t;e.spotLights.needsUpdate=t;e.rectAreaLights.needsUpdate=t;e.hemisphereLights.needsUpdate=t}function Ve(){var e=T;if(e>=H.maxTextures){console.warn("THREE.WebGLRenderer: Trying to use "+e+" texture units while this GPU supports only "+H.maxTextures)}T+=1;return e}this.allocTextureUnit=Ve;this.setTexture2D=function(){var e=false;return function t(r,n){if(r&&r.isWebGLRenderTarget){if(!e){console.warn("THREE.WebGLRenderer.setTexture2D: don't use render targets as textures. Use their .texture property instead.");e=true}r=r.texture}X.setTexture2D(r,n)}}();this.setTexture3D=function(){return function e(t,r){X.setTexture3D(t,r)}}();this.setTexture=function(){var e=false;return function t(r,n){if(!e){console.warn("THREE.WebGLRenderer: .setTexture is deprecated, use setTexture2D instead.");e=true}X.setTexture2D(r,n)}}();this.setTextureCube=function(){var e=false;return function t(r,n){if(r&&r.isWebGLRenderTargetCube){if(!e){console.warn("THREE.WebGLRenderer.setTextureCube: don't use cube render targets as textures. Use their .texture property instead.");e=true}r=r.texture}if(r&&r.isCubeTexture||Array.isArray(r.image)&&r.image.length===6){X.setTextureCube(r,n)}else{X.setTextureCubeDynamic(r,n)}}}();this.setFramebuffer=function(e){v=e};this.getRenderTarget=function(){return g};this.setRenderTarget=function(e){g=e;if(e&&Y.get(e).__webglFramebuffer===undefined){X.setupRenderTarget(e)}var t=v;var r=false;if(e){var n=Y.get(e).__webglFramebuffer;if(e.isWebGLRenderTargetCube){t=n[e.activeCubeFace];r=true}else{t=n}M.copy(e.viewport);E.copy(e.scissor);S=e.scissorTest}else{M.copy(O).multiplyScalar(C);E.copy(L).multiplyScalar(C);S=R}if(y!==t){z.bindFramebuffer(36160,t);y=t}V.viewport(M);V.scissor(E);V.setScissorTest(S);if(r){var i=Y.get(e.texture);z.framebufferTexture2D(36160,36064,34069+e.activeCubeFace,i.__webglTexture,e.activeMipMapLevel)}};this.readRenderTargetPixels=function(e,t,r,n,i,a){if(!(e&&e.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}var o=Y.get(e).__webglFramebuffer;if(o){var s=false;if(o!==y){z.bindFramebuffer(36160,o);s=true}try{var u=e.texture;var c=u.format;var l=u.type;if(c!==je&&ae.convert(c)!==z.getParameter(35739)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(l!==Se&&ae.convert(l)!==z.getParameter(35738)&&!(l===Le&&(H.isWebGL2||k.get("OES_texture_float")||k.get("WEBGL_color_buffer_float")))&&!(l===Re&&(H.isWebGL2?k.get("EXT_color_buffer_float"):k.get("EXT_color_buffer_half_float")))){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}if(z.checkFramebufferStatus(36160)===36053){if(t>=0&&t<=e.width-n&&(r>=0&&r<=e.height-i)){z.readPixels(t,r,n,i,ae.convert(c),ae.convert(l),a)}}else{console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.")}}finally{if(s){z.bindFramebuffer(36160,y)}}}};this.copyFramebufferToTexture=function(e,t,r){var n=t.image.width;var i=t.image.height;var a=ae.convert(t.format);this.setTexture2D(t,0);z.copyTexImage2D(3553,r||0,a,e.x,e.y,n,i,0)};this.copyTextureToTexture=function(e,t,r,n){var i=t.image.width;var a=t.image.height;var o=ae.convert(r.format);var s=ae.convert(r.type);this.setTexture2D(r,0);if(t.isDataTexture){z.texSubImage2D(3553,n||0,e.x,e.y,i,a,o,s,t.image.data)}else{z.texSubImage2D(3553,n||0,e.x,e.y,o,s,t.image)}}}function Zo(e,t){this.name="";this.color=new xi(e);this.density=t!==undefined?t:25e-5}Zo.prototype.isFogExp2=true;Zo.prototype.clone=function(){return new Zo(this.color,this.density)};Zo.prototype.toJSON=function(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}};function $o(e,t,r){this.name="";this.color=new xi(e);this.near=t!==undefined?t:1;this.far=r!==undefined?r:1e3}$o.prototype.isFog=true;$o.prototype.clone=function(){return new $o(this.color,this.near,this.far)};$o.prototype.toJSON=function(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}};function es(){Ci.call(this);this.type="Scene";this.background=null;this.fog=null;this.overrideMaterial=null;this.autoUpdate=true}es.prototype=Object.assign(Object.create(Ci.prototype),{constructor:es,copy:function(e,t){Ci.prototype.copy.call(this,e,t);if(e.background!==null)this.background=e.background.clone();if(e.fog!==null)this.fog=e.fog.clone();if(e.overrideMaterial!==null)this.overrideMaterial=e.overrideMaterial.clone();this.autoUpdate=e.autoUpdate;this.matrixAutoUpdate=e.matrixAutoUpdate;return this},toJSON:function(e){var t=Ci.prototype.toJSON.call(this,e);if(this.background!==null)t.object.background=this.background.toJSON(e);if(this.fog!==null)t.object.fog=this.fog.toJSON();return t}});function ts(e,t){this.array=e;this.stride=t;this.count=e!==undefined?e.length/t:0;this.dynamic=false;this.updateRange={offset:0,count:-1};this.version=0}Object.defineProperty(ts.prototype,"needsUpdate",{set:function(e){if(e===true)this.version++}});Object.assign(ts.prototype,{isInterleavedBuffer:true,onUploadCallback:function(){},setArray:function(e){if(Array.isArray(e)){throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.")}this.count=e!==undefined?e.length/this.stride:0;this.array=e;return this},setDynamic:function(e){this.dynamic=e;return this},copy:function(e){this.array=new e.array.constructor(e.array);this.count=e.count;this.stride=e.stride;this.dynamic=e.dynamic;return this},copyAt:function(e,t,r){e*=this.stride;r*=t.stride;for(var n=0,i=this.stride;n<i;n++){this.array[e+n]=t.array[r+n]}return this},set:function(e,t){if(t===undefined)t=0;this.array.set(e,t);return this},clone:function(){return(new this.constructor).copy(this)},onUpload:function(e){this.onUploadCallback=e;return this}});function rs(e,t,r,n){this.data=e;this.itemSize=t;this.offset=r;this.normalized=n===true}Object.defineProperties(rs.prototype,{count:{get:function(){return this.data.count}},array:{get:function(){return this.data.array}}});Object.assign(rs.prototype,{isInterleavedBufferAttribute:true,setX:function(e,t){this.data.array[e*this.data.stride+this.offset]=t;return this},setY:function(e,t){this.data.array[e*this.data.stride+this.offset+1]=t;return this},setZ:function(e,t){this.data.array[e*this.data.stride+this.offset+2]=t;return this},setW:function(e,t){this.data.array[e*this.data.stride+this.offset+3]=t;return this},getX:function(e){return this.data.array[e*this.data.stride+this.offset]},getY:function(e){return this.data.array[e*this.data.stride+this.offset+1]},getZ:function(e){return this.data.array[e*this.data.stride+this.offset+2]},getW:function(e){return this.data.array[e*this.data.stride+this.offset+3]},setXY:function(e,t,r){e=e*this.data.stride+this.offset;this.data.array[e+0]=t;this.data.array[e+1]=r;return this},setXYZ:function(e,t,r,n){e=e*this.data.stride+this.offset;this.data.array[e+0]=t;this.data.array[e+1]=r;this.data.array[e+2]=n;return this},setXYZW:function(e,t,r,n,i){e=e*this.data.stride+this.offset;this.data.array[e+0]=t;this.data.array[e+1]=r;this.data.array[e+2]=n;this.data.array[e+3]=i;return this}});function ns(e){Ki.call(this);this.type="SpriteMaterial";this.color=new xi(16777215);this.map=null;this.rotation=0;this.sizeAttenuation=true;this.lights=false;this.transparent=true;this.setValues(e)}ns.prototype=Object.create(Ki.prototype);ns.prototype.constructor=ns;ns.prototype.isSpriteMaterial=true;ns.prototype.copy=function(e){Ki.prototype.copy.call(this,e);this.color.copy(e.color);this.map=e.map;this.rotation=e.rotation;this.sizeAttenuation=e.sizeAttenuation;return this};var is;function as(e){Ci.call(this);this.type="Sprite";if(is===undefined){is=new Wi;var t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]);var r=new ts(t,5);is.setIndex([0,1,2,0,2,3]);is.addAttribute("position",new rs(r,3,0,false));is.addAttribute("uv",new rs(r,2,3,false))}this.geometry=is;this.material=e!==undefined?e:new ns;this.center=new zt(.5,.5)}as.prototype=Object.assign(Object.create(Ci.prototype),{constructor:as,isSprite:true,raycast:function(){var e=new Ht;var t=new Ht;var r=new Ht;var n=new zt;var i=new zt;var a=new Nt;var o=new Ht;var s=new Ht;var u=new Ht;var c=new zt;var l=new zt;var f=new zt;function h(e,t,r,o,s,u){n.subVectors(e,r).addScalar(.5).multiply(o);if(s!==undefined){i.x=u*n.x-s*n.y;i.y=s*n.x+u*n.y}else{i.copy(n)}e.copy(t);e.x+=i.x;e.y+=i.y;e.applyMatrix4(a)}return function n(i,d){t.setFromMatrixScale(this.matrixWorld);a.getInverse(this.modelViewMatrix).premultiply(this.matrixWorld);r.setFromMatrixPosition(this.modelViewMatrix);var p=this.material.rotation;var v,m;if(p!==0){m=Math.cos(p);v=Math.sin(p)}var g=this.center;h(o.set(-.5,-.5,0),r,g,t,v,m);h(s.set(.5,-.5,0),r,g,t,v,m);h(u.set(.5,.5,0),r,g,t,v,m);c.set(0,0);l.set(1,0);f.set(1,1);var y=i.ray.intersectTriangle(o,s,u,false,e);if(y===null){h(s.set(-.5,.5,0),r,g,t,v,m);l.set(0,1);y=i.ray.intersectTriangle(o,u,s,false,e);if(y===null){return}}var b=i.ray.origin.distanceTo(e);if(b<i.near||b>i.far)return;d.push({distance:b,point:e.clone(),uv:ea.getUV(e,o,s,u,c,l,f,new zt),face:null,object:this})}}(),clone:function(){return new this.constructor(this.material).copy(this)},copy:function(e){Ci.prototype.copy.call(this,e);if(e.center!==undefined)this.center.copy(e.center);return this}});function os(){Ci.call(this);this.type="LOD";Object.defineProperties(this,{levels:{enumerable:true,value:[]}})}os.prototype=Object.assign(Object.create(Ci.prototype),{constructor:os,copy:function(e){Ci.prototype.copy.call(this,e,false);var t=e.levels;for(var r=0,n=t.length;r<n;r++){var i=t[r];this.addLevel(i.object.clone(),i.distance)}return this},addLevel:function(e,t){if(t===undefined)t=0;t=Math.abs(t);var r=this.levels;for(var n=0;n<r.length;n++){if(t<r[n].distance){break}}r.splice(n,0,{distance:t,object:e});this.add(e)},getObjectForDistance:function(e){var t=this.levels;for(var r=1,n=t.length;r<n;r++){if(e<t[r].distance){break}}return t[r-1].object},raycast:function(){var e=new Ht;return function t(r,n){e.setFromMatrixPosition(this.matrixWorld);var i=r.ray.origin.distanceTo(e);this.getObjectForDistance(i).raycast(r,n)}}(),update:function(){var e=new Ht;var t=new Ht;return function r(n){var i=this.levels;if(i.length>1){e.setFromMatrixPosition(n.matrixWorld);t.setFromMatrixPosition(this.matrixWorld);var a=e.distanceTo(t);i[0].object.visible=true;for(var o=1,s=i.length;o<s;o++){if(a>=i[o].distance){i[o-1].object.visible=false;i[o].object.visible=true}else{break}}for(;o<s;o++){i[o].object.visible=false}}}}(),toJSON:function(e){var t=Ci.prototype.toJSON.call(this,e);t.object.levels=[];var r=this.levels;for(var n=0,i=r.length;n<i;n++){var a=r[n];t.object.levels.push({object:a.object.uuid,distance:a.distance})}return t}});function ss(e,t){if(e&&e.isGeometry){console.error("THREE.SkinnedMesh no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}ra.call(this,e,t);this.type="SkinnedMesh";this.bindMode="attached";this.bindMatrix=new Nt;this.bindMatrixInverse=new Nt}ss.prototype=Object.assign(Object.create(ra.prototype),{constructor:ss,isSkinnedMesh:true,bind:function(e,t){this.skeleton=e;if(t===undefined){this.updateMatrixWorld(true);this.skeleton.calculateInverses();t=this.matrixWorld}this.bindMatrix.copy(t);this.bindMatrixInverse.getInverse(t)},pose:function(){this.skeleton.pose()},normalizeSkinWeights:function(){var e=new qt;var t=this.geometry.attributes.skinWeight;for(var r=0,n=t.count;r<n;r++){e.x=t.getX(r);e.y=t.getY(r);e.z=t.getZ(r);e.w=t.getW(r);var i=1/e.manhattanLength();if(i!==Infinity){e.multiplyScalar(i)}else{e.set(1,0,0,0)}t.setXYZW(r,e.x,e.y,e.z,e.w)}},updateMatrixWorld:function(e){ra.prototype.updateMatrixWorld.call(this,e);if(this.bindMode==="attached"){this.bindMatrixInverse.getInverse(this.matrixWorld)}else if(this.bindMode==="detached"){this.bindMatrixInverse.getInverse(this.bindMatrix)}else{console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}},clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}});function us(e,t){e=e||[];this.bones=e.slice(0);this.boneMatrices=new Float32Array(this.bones.length*16);if(t===undefined){this.calculateInverses()}else{if(this.bones.length===t.length){this.boneInverses=t.slice(0)}else{console.warn("THREE.Skeleton boneInverses is the wrong length.");this.boneInverses=[];for(var r=0,n=this.bones.length;r<n;r++){this.boneInverses.push(new Nt)}}}}Object.assign(us.prototype,{calculateInverses:function(){this.boneInverses=[];for(var e=0,t=this.bones.length;e<t;e++){var r=new Nt;if(this.bones[e]){r.getInverse(this.bones[e].matrixWorld)}this.boneInverses.push(r)}},pose:function(){var e,t,r;for(t=0,r=this.bones.length;t<r;t++){e=this.bones[t];if(e){e.matrixWorld.getInverse(this.boneInverses[t])}}for(t=0,r=this.bones.length;t<r;t++){e=this.bones[t];if(e){if(e.parent&&e.parent.isBone){e.matrix.getInverse(e.parent.matrixWorld);e.matrix.multiply(e.matrixWorld)}else{e.matrix.copy(e.matrixWorld)}e.matrix.decompose(e.position,e.quaternion,e.scale)}}},update:function(){var e=new Nt;var t=new Nt;return function r(){var n=this.bones;var i=this.boneInverses;var a=this.boneMatrices;var o=this.boneTexture;for(var s=0,u=n.length;s<u;s++){var c=n[s]?n[s].matrixWorld:t;e.multiplyMatrices(c,i[s]);e.toArray(a,s*16)}if(o!==undefined){o.needsUpdate=true}}}(),clone:function(){return new us(this.bones,this.boneInverses)},getBoneByName:function(e){for(var t=0,r=this.bones.length;t<r;t++){var n=this.bones[t];if(n.name===e){return n}}return undefined}});function cs(){Ci.call(this);this.type="Bone"}cs.prototype=Object.assign(Object.create(Ci.prototype),{constructor:cs,isBone:true});function ls(e){Ki.call(this);this.type="LineBasicMaterial";this.color=new xi(16777215);this.linewidth=1;this.linecap="round";this.linejoin="round";this.lights=false;this.setValues(e)}ls.prototype=Object.create(Ki.prototype);ls.prototype.constructor=ls;ls.prototype.isLineBasicMaterial=true;ls.prototype.copy=function(e){Ki.prototype.copy.call(this,e);this.color.copy(e.color);this.linewidth=e.linewidth;this.linecap=e.linecap;this.linejoin=e.linejoin;return this};function fs(e,t,r){if(r===1){console.error("THREE.Line: parameter THREE.LinePieces no longer supported. Use THREE.LineSegments instead.")}Ci.call(this);this.type="Line";this.geometry=e!==undefined?e:new Wi;this.material=t!==undefined?t:new ls({color:Math.random()*16777215})}fs.prototype=Object.assign(Object.create(Ci.prototype),{constructor:fs,isLine:true,computeLineDistances:function(){var e=new Ht;var t=new Ht;return function r(){var n=this.geometry;if(n.isBufferGeometry){if(n.index===null){var i=n.attributes.position;var a=[0];for(var o=1,s=i.count;o<s;o++){e.fromBufferAttribute(i,o-1);t.fromBufferAttribute(i,o);a[o]=a[o-1];a[o]+=e.distanceTo(t)}n.addAttribute("lineDistance",new zi(a,1))}else{console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.")}}else if(n.isGeometry){var u=n.vertices;var a=n.lineDistances;a[0]=0;for(var o=1,s=u.length;o<s;o++){a[o]=a[o-1];a[o]+=u[o-1].distanceTo(u[o])}}return this}}(),raycast:function(){var e=new Nt;var t=new $i;var r=new er;return function n(i,a){var o=i.linePrecision;var s=this.geometry;var u=this.matrixWorld;if(s.boundingSphere===null)s.computeBoundingSphere();r.copy(s.boundingSphere);r.applyMatrix4(u);r.radius+=o;if(i.ray.intersectsSphere(r)===false)return;e.getInverse(u);t.copy(i.ray).applyMatrix4(e);var c=o/((this.scale.x+this.scale.y+this.scale.z)/3);var l=c*c;var f=new Ht;var h=new Ht;var d=new Ht;var p=new Ht;var v=this&&this.isLineSegments?2:1;if(s.isBufferGeometry){var m=s.index;var g=s.attributes;var y=g.position.array;if(m!==null){var b=m.array;for(var x=0,w=b.length-1;x<w;x+=v){var A=b[x];var M=b[x+1];f.fromArray(y,A*3);h.fromArray(y,M*3);var E=t.distanceSqToSegment(f,h,p,d);if(E>l)continue;p.applyMatrix4(this.matrixWorld);var S=i.ray.origin.distanceTo(p);if(S<i.near||S>i.far)continue;a.push({distance:S,point:d.clone().applyMatrix4(this.matrixWorld),index:x,face:null,faceIndex:null,object:this})}}else{for(var x=0,w=y.length/3-1;x<w;x+=v){f.fromArray(y,3*x);h.fromArray(y,3*x+3);var E=t.distanceSqToSegment(f,h,p,d);if(E>l)continue;p.applyMatrix4(this.matrixWorld);var S=i.ray.origin.distanceTo(p);if(S<i.near||S>i.far)continue;a.push({distance:S,point:d.clone().applyMatrix4(this.matrixWorld),index:x,face:null,faceIndex:null,object:this})}}}else if(s.isGeometry){var T=s.vertices;var _=T.length;for(var x=0;x<_-1;x+=v){var E=t.distanceSqToSegment(T[x],T[x+1],p,d);if(E>l)continue;p.applyMatrix4(this.matrixWorld);var S=i.ray.origin.distanceTo(p);if(S<i.near||S>i.far)continue;a.push({distance:S,point:d.clone().applyMatrix4(this.matrixWorld),index:x,face:null,faceIndex:null,object:this})}}}}(),copy:function(e){Ci.prototype.copy.call(this,e);this.geometry.copy(e.geometry);this.material.copy(e.material);return this},clone:function(){return(new this.constructor).copy(this)}});function hs(e,t){fs.call(this,e,t);this.type="LineSegments"}hs.prototype=Object.assign(Object.create(fs.prototype),{constructor:hs,isLineSegments:true,computeLineDistances:function(){var e=new Ht;var t=new Ht;return function r(){var n=this.geometry;if(n.isBufferGeometry){if(n.index===null){var i=n.attributes.position;var a=[];for(var o=0,s=i.count;o<s;o+=2){e.fromBufferAttribute(i,o);t.fromBufferAttribute(i,o+1);a[o]=o===0?0:a[o-1];a[o+1]=a[o]+e.distanceTo(t)}n.addAttribute("lineDistance",new zi(a,1))}else{console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.")}}else if(n.isGeometry){var u=n.vertices;var a=n.lineDistances;for(var o=0,s=u.length;o<s;o+=2){e.copy(u[o]);t.copy(u[o+1]);a[o]=o===0?0:a[o-1];a[o+1]=a[o]+e.distanceTo(t)}}return this}}()});function ds(e,t){fs.call(this,e,t);this.type="LineLoop"}ds.prototype=Object.assign(Object.create(fs.prototype),{constructor:ds,isLineLoop:true});function ps(e){Ki.call(this);this.type="PointsMaterial";this.color=new xi(16777215);this.map=null;this.size=1;this.sizeAttenuation=true;this.morphTargets=false;this.lights=false;this.setValues(e)}ps.prototype=Object.create(Ki.prototype);ps.prototype.constructor=ps;ps.prototype.isPointsMaterial=true;ps.prototype.copy=function(e){Ki.prototype.copy.call(this,e);this.color.copy(e.color);this.map=e.map;this.size=e.size;this.sizeAttenuation=e.sizeAttenuation;this.morphTargets=e.morphTargets;return this};function vs(e,t){Ci.call(this);this.type="Points";this.geometry=e!==undefined?e:new Wi;this.material=t!==undefined?t:new ps({color:Math.random()*16777215})}vs.prototype=Object.assign(Object.create(Ci.prototype),{constructor:vs,isPoints:true,raycast:function(){var e=new Nt;var t=new $i;var r=new er;return function n(i,a){var o=this;var s=this.geometry;var u=this.matrixWorld;var c=i.params.Points.threshold;if(s.boundingSphere===null)s.computeBoundingSphere();r.copy(s.boundingSphere);r.applyMatrix4(u);r.radius+=c;if(i.ray.intersectsSphere(r)===false)return;e.getInverse(u);t.copy(i.ray).applyMatrix4(e);var l=c/((this.scale.x+this.scale.y+this.scale.z)/3);var f=l*l;var h=new Ht;var d=new Ht;function p(e,r){var n=t.distanceSqToPoint(e);if(n<f){t.closestPointToPoint(e,d);d.applyMatrix4(u);var s=i.ray.origin.distanceTo(d);if(s<i.near||s>i.far)return;a.push({distance:s,distanceToRay:Math.sqrt(n),point:d.clone(),index:r,face:null,object:o})}}if(s.isBufferGeometry){var v=s.index;var m=s.attributes;var g=m.position.array;if(v!==null){var y=v.array;for(var b=0,x=y.length;b<x;b++){var w=y[b];h.fromArray(g,w*3);p(h,w)}}else{for(var b=0,A=g.length/3;b<A;b++){h.fromArray(g,b*3);p(h,b)}}}else{var M=s.vertices;for(var b=0,A=M.length;b<A;b++){p(M[b],b)}}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}});function ms(e,t,r,n,i,a,o,s,u){Qt.call(this,e,t,r,n,i,a,o,s,u);this.format=o!==undefined?o:Ge;this.minFilter=a!==undefined?a:Ae;this.magFilter=i!==undefined?i:Ae;this.generateMipmaps=false}ms.prototype=Object.assign(Object.create(Qt.prototype),{constructor:ms,isVideoTexture:true,update:function(){var e=this.image;if(e.readyState>=e.HAVE_CURRENT_DATA){this.needsUpdate=true}}});function gs(e,t,r,n,i,a,o,s,u,c,l,f){Qt.call(this,null,a,o,s,u,c,n,i,l,f);this.image={width:t,height:r};this.mipmaps=e;this.flipY=false;this.generateMipmaps=false}gs.prototype=Object.create(Qt.prototype);gs.prototype.constructor=gs;gs.prototype.isCompressedTexture=true;function ys(e,t,r,n,i,a,o,s,u){Qt.call(this,e,t,r,n,i,a,o,s,u);this.needsUpdate=true}ys.prototype=Object.create(Qt.prototype);ys.prototype.constructor=ys;ys.prototype.isCanvasTexture=true;function bs(e,t,r,n,i,a,o,s,u,c){c=c!==undefined?c:He;if(c!==He&&c!==Ve){throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat")}if(r===undefined&&c===He)r=Pe;if(r===undefined&&c===Ve)r=Fe;Qt.call(this,null,n,i,a,o,s,c,r,u);this.image={width:e,height:t};this.magFilter=o!==undefined?o:be;this.minFilter=s!==undefined?s:be;this.flipY=false;this.generateMipmaps=false}bs.prototype=Object.create(Qt.prototype);bs.prototype.constructor=bs;bs.prototype.isDepthTexture=true;function xs(e){Wi.call(this);this.type="WireframeGeometry";var t=[];var r,n,i,a,o;var s=[0,0],u={},c,l,f;var h,d=["a","b","c"];var p;if(e&&e.isGeometry){var v=e.faces;for(r=0,i=v.length;r<i;r++){var m=v[r];for(n=0;n<3;n++){l=m[d[n]];f=m[d[(n+1)%3]];s[0]=Math.min(l,f);s[1]=Math.max(l,f);h=s[0]+","+s[1];if(u[h]===undefined){u[h]={index1:s[0],index2:s[1]}}}}for(h in u){c=u[h];p=e.vertices[c.index1];t.push(p.x,p.y,p.z);p=e.vertices[c.index2];t.push(p.x,p.y,p.z)}}else if(e&&e.isBufferGeometry){var g,y,b;var x,w,A;var M,E;p=new Ht;if(e.index!==null){g=e.attributes.position;y=e.index;b=e.groups;if(b.length===0){b=[{start:0,count:y.count,materialIndex:0}]}for(a=0,o=b.length;a<o;++a){x=b[a];w=x.start;A=x.count;for(r=w,i=w+A;r<i;r+=3){for(n=0;n<3;n++){l=y.getX(r+n);f=y.getX(r+(n+1)%3);s[0]=Math.min(l,f);s[1]=Math.max(l,f);h=s[0]+","+s[1];if(u[h]===undefined){u[h]={index1:s[0],index2:s[1]}}}}}for(h in u){c=u[h];p.fromBufferAttribute(g,c.index1);t.push(p.x,p.y,p.z);p.fromBufferAttribute(g,c.index2);t.push(p.x,p.y,p.z)}}else{g=e.attributes.position;for(r=0,i=g.count/3;r<i;r++){for(n=0;n<3;n++){M=3*r+n;p.fromBufferAttribute(g,M);t.push(p.x,p.y,p.z);E=3*r+(n+1)%3;p.fromBufferAttribute(g,E);t.push(p.x,p.y,p.z)}}}}this.addAttribute("position",new zi(t,3))}xs.prototype=Object.create(Wi.prototype);xs.prototype.constructor=xs;function ws(e,t,r){Li.call(this);this.type="ParametricGeometry";this.parameters={func:e,slices:t,stacks:r};this.fromBufferGeometry(new As(e,t,r));this.mergeVertices()}ws.prototype=Object.create(Li.prototype);ws.prototype.constructor=ws;function As(e,t,r){Wi.call(this);this.type="ParametricBufferGeometry";this.parameters={func:e,slices:t,stacks:r};var n=[];var i=[];var a=[];var o=[];var s=1e-5;var u=new Ht;var c=new Ht,l=new Ht;var f=new Ht,h=new Ht;var d,p;if(e.length<3){console.error("THREE.ParametricGeometry: Function must now modify a Vector3 as third parameter.")}var v=t+1;for(d=0;d<=r;d++){var m=d/r;for(p=0;p<=t;p++){var g=p/t;e(g,m,c);i.push(c.x,c.y,c.z);if(g-s>=0){e(g-s,m,l);f.subVectors(c,l)}else{e(g+s,m,l);f.subVectors(l,c)}if(m-s>=0){e(g,m-s,l);h.subVectors(c,l)}else{e(g,m+s,l);h.subVectors(l,c)}u.crossVectors(f,h).normalize();a.push(u.x,u.y,u.z);o.push(g,m)}}for(d=0;d<r;d++){for(p=0;p<t;p++){var y=d*v+p;var b=d*v+p+1;var x=(d+1)*v+p+1;var w=(d+1)*v+p;n.push(y,b,w);n.push(b,x,w)}}this.setIndex(n);this.addAttribute("position",new zi(i,3));this.addAttribute("normal",new zi(a,3));this.addAttribute("uv",new zi(o,2))}As.prototype=Object.create(Wi.prototype);As.prototype.constructor=As;function Ms(e,t,r,n){Li.call(this);this.type="PolyhedronGeometry";this.parameters={vertices:e,indices:t,radius:r,detail:n};this.fromBufferGeometry(new Es(e,t,r,n));this.mergeVertices()}Ms.prototype=Object.create(Li.prototype);Ms.prototype.constructor=Ms;function Es(e,t,r,n){Wi.call(this);this.type="PolyhedronBufferGeometry";this.parameters={vertices:e,indices:t,radius:r,detail:n};r=r||1;n=n||0;var i=[];var a=[];o(n);u(r);c();this.addAttribute("position",new zi(i,3));this.addAttribute("normal",new zi(i.slice(),3));this.addAttribute("uv",new zi(a,2));if(n===0){this.computeVertexNormals()}else{this.normalizeNormals()}function o(e){var r=new Ht;var n=new Ht;var i=new Ht;for(var a=0;a<t.length;a+=3){h(t[a+0],r);h(t[a+1],n);h(t[a+2],i);s(r,n,i,e)}}function s(e,t,r,n){var i=Math.pow(2,n);var a=[];var o,s;for(o=0;o<=i;o++){a[o]=[];var u=e.clone().lerp(r,o/i);var c=t.clone().lerp(r,o/i);var l=i-o;for(s=0;s<=l;s++){if(s===0&&o===i){a[o][s]=u}else{a[o][s]=u.clone().lerp(c,s/l)}}}for(o=0;o<i;o++){for(s=0;s<2*(i-o)-1;s++){var h=Math.floor(s/2);if(s%2===0){f(a[o][h+1]);f(a[o+1][h]);f(a[o][h])}else{f(a[o][h+1]);f(a[o+1][h+1]);f(a[o+1][h])}}}}function u(e){var t=new Ht;for(var r=0;r<i.length;r+=3){t.x=i[r+0];t.y=i[r+1];t.z=i[r+2];t.normalize().multiplyScalar(e);i[r+0]=t.x;i[r+1]=t.y;i[r+2]=t.z}}function c(){var e=new Ht;for(var t=0;t<i.length;t+=3){e.x=i[t+0];e.y=i[t+1];e.z=i[t+2];var r=v(e)/2/Math.PI+.5;var n=m(e)/Math.PI+.5;a.push(r,1-n)}d();l()}function l(){for(var e=0;e<a.length;e+=6){var t=a[e+0];var r=a[e+2];var n=a[e+4];var i=Math.max(t,r,n);var o=Math.min(t,r,n);if(i>.9&&o<.1){if(t<.2)a[e+0]+=1;if(r<.2)a[e+2]+=1;if(n<.2)a[e+4]+=1}}}function f(e){i.push(e.x,e.y,e.z)}function h(t,r){var n=t*3;r.x=e[n+0];r.y=e[n+1];r.z=e[n+2]}function d(){var e=new Ht;var t=new Ht;var r=new Ht;var n=new Ht;var o=new zt;var s=new zt;var u=new zt;for(var c=0,l=0;c<i.length;c+=9,l+=6){e.set(i[c+0],i[c+1],i[c+2]);t.set(i[c+3],i[c+4],i[c+5]);r.set(i[c+6],i[c+7],i[c+8]);o.set(a[l+0],a[l+1]);s.set(a[l+2],a[l+3]);u.set(a[l+4],a[l+5]);n.copy(e).add(t).add(r).divideScalar(3);var f=v(n);p(o,l+0,e,f);p(s,l+2,t,f);p(u,l+4,r,f)}}function p(e,t,r,n){if(n<0&&e.x===1){a[t]=e.x-1}if(r.x===0&&r.z===0){a[t]=n/2/Math.PI+.5}}function v(e){return Math.atan2(e.z,-e.x)}function m(e){return Math.atan2(-e.y,Math.sqrt(e.x*e.x+e.z*e.z))}}Es.prototype=Object.create(Wi.prototype);Es.prototype.constructor=Es;function Ss(e,t){Li.call(this);this.type="TetrahedronGeometry";this.parameters={radius:e,detail:t};this.fromBufferGeometry(new Ts(e,t));this.mergeVertices()}Ss.prototype=Object.create(Li.prototype);Ss.prototype.constructor=Ss;function Ts(e,t){var r=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1];var n=[2,1,0,0,3,2,1,3,0,2,3,1];Es.call(this,r,n,e,t);this.type="TetrahedronBufferGeometry";this.parameters={radius:e,detail:t}}Ts.prototype=Object.create(Es.prototype);Ts.prototype.constructor=Ts;function _s(e,t){Li.call(this);this.type="OctahedronGeometry";this.parameters={radius:e,detail:t};this.fromBufferGeometry(new Ps(e,t));this.mergeVertices()}_s.prototype=Object.create(Li.prototype);_s.prototype.constructor=_s;function Ps(e,t){var r=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1];var n=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];Es.call(this,r,n,e,t);this.type="OctahedronBufferGeometry";this.parameters={radius:e,detail:t}}Ps.prototype=Object.create(Es.prototype);Ps.prototype.constructor=Ps;function Cs(e,t){Li.call(this);this.type="IcosahedronGeometry";this.parameters={radius:e,detail:t};this.fromBufferGeometry(new Os(e,t));this.mergeVertices()}Cs.prototype=Object.create(Li.prototype);Cs.prototype.constructor=Cs;function Os(e,t){var r=(1+Math.sqrt(5))/2;var n=[-1,r,0,1,r,0,-1,-r,0,1,-r,0,0,-1,r,0,1,r,0,-1,-r,0,1,-r,r,0,-1,r,0,1,-r,0,-1,-r,0,1];var i=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];Es.call(this,n,i,e,t);this.type="IcosahedronBufferGeometry";this.parameters={radius:e,detail:t}}Os.prototype=Object.create(Es.prototype);Os.prototype.constructor=Os;function Ls(e,t){Li.call(this);this.type="DodecahedronGeometry";this.parameters={radius:e,detail:t};this.fromBufferGeometry(new Rs(e,t));this.mergeVertices()}Ls.prototype=Object.create(Li.prototype);Ls.prototype.constructor=Ls;function Rs(e,t){var r=(1+Math.sqrt(5))/2;var n=1/r;var i=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-n,-r,0,-n,r,0,n,-r,0,n,r,-n,-r,0,-n,r,0,n,-r,0,n,r,0,-r,0,-n,r,0,-n,-r,0,n,r,0,n];var a=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];Es.call(this,i,a,e,t);this.type="DodecahedronBufferGeometry";this.parameters={radius:e,detail:t}}Rs.prototype=Object.create(Es.prototype);Rs.prototype.constructor=Rs;function Bs(e,t,r,n,i,a){Li.call(this);this.type="TubeGeometry";this.parameters={path:e,tubularSegments:t,radius:r,radialSegments:n,closed:i};if(a!==undefined)console.warn("THREE.TubeGeometry: taper has been removed.");var o=new Ds(e,t,r,n,i);this.tangents=o.tangents;this.normals=o.normals;this.binormals=o.binormals;this.fromBufferGeometry(o);this.mergeVertices()}Bs.prototype=Object.create(Li.prototype);Bs.prototype.constructor=Bs;function Ds(e,t,r,n,i){Wi.call(this);this.type="TubeBufferGeometry";this.parameters={path:e,tubularSegments:t,radius:r,radialSegments:n,closed:i};t=t||64;r=r||1;n=n||8;i=i||false;var a=e.computeFrenetFrames(t,i);this.tangents=a.tangents;this.normals=a.normals;this.binormals=a.binormals;var o=new Ht;var s=new Ht;var u=new zt;var c=new Ht;var l,f;var h=[];var d=[];var p=[];var v=[];m();this.setIndex(v);this.addAttribute("position",new zi(h,3));this.addAttribute("normal",new zi(d,3));this.addAttribute("uv",new zi(p,2));function m(){for(l=0;l<t;l++){g(l)}g(i===false?t:0);b();y()}function g(i){c=e.getPointAt(i/t,c);var u=a.normals[i];var l=a.binormals[i];for(f=0;f<=n;f++){var p=f/n*Math.PI*2;var v=Math.sin(p);var m=-Math.cos(p);s.x=m*u.x+v*l.x;s.y=m*u.y+v*l.y;s.z=m*u.z+v*l.z;s.normalize();d.push(s.x,s.y,s.z);o.x=c.x+r*s.x;o.y=c.y+r*s.y;o.z=c.z+r*s.z;h.push(o.x,o.y,o.z)}}function y(){for(f=1;f<=t;f++){for(l=1;l<=n;l++){var e=(n+1)*(f-1)+(l-1);var r=(n+1)*f+(l-1);var i=(n+1)*f+l;var a=(n+1)*(f-1)+l;v.push(e,r,a);v.push(r,i,a)}}}function b(){for(l=0;l<=t;l++){for(f=0;f<=n;f++){u.x=l/t;u.y=f/n;p.push(u.x,u.y)}}}}Ds.prototype=Object.create(Wi.prototype);Ds.prototype.constructor=Ds;function Is(e,t,r,n,i,a,o){Li.call(this);this.type="TorusKnotGeometry";this.parameters={radius:e,tube:t,tubularSegments:r,radialSegments:n,p:i,q:a};if(o!==undefined)console.warn("THREE.TorusKnotGeometry: heightScale has been deprecated. Use .scale( x, y, z ) instead.");this.fromBufferGeometry(new Fs(e,t,r,n,i,a));this.mergeVertices()}Is.prototype=Object.create(Li.prototype);Is.prototype.constructor=Is;function Fs(e,t,r,n,i,a){Wi.call(this);this.type="TorusKnotBufferGeometry";this.parameters={radius:e,tube:t,tubularSegments:r,radialSegments:n,p:i,q:a};e=e||1;t=t||.4;r=Math.floor(r)||64;n=Math.floor(n)||8;i=i||2;a=a||3;var o=[];var s=[];var u=[];var c=[];var l,f;var h=new Ht;var d=new Ht;var p=new Ht;var v=new Ht;var m=new Ht;var g=new Ht;var y=new Ht;for(l=0;l<=r;++l){var b=l/r*i*Math.PI*2;_(b,i,a,e,p);_(b+.01,i,a,e,v);g.subVectors(v,p);y.addVectors(v,p);m.crossVectors(g,y);y.crossVectors(m,g);m.normalize();y.normalize();for(f=0;f<=n;++f){var x=f/n*Math.PI*2;var w=-t*Math.cos(x);var A=t*Math.sin(x);h.x=p.x+(w*y.x+A*m.x);h.y=p.y+(w*y.y+A*m.y);h.z=p.z+(w*y.z+A*m.z);s.push(h.x,h.y,h.z);d.subVectors(h,p).normalize();u.push(d.x,d.y,d.z);c.push(l/r);c.push(f/n)}}for(f=1;f<=r;f++){for(l=1;l<=n;l++){var M=(n+1)*(f-1)+(l-1);var E=(n+1)*f+(l-1);var S=(n+1)*f+l;var T=(n+1)*(f-1)+l;o.push(M,E,T);o.push(E,S,T)}}this.setIndex(o);this.addAttribute("position",new zi(s,3));this.addAttribute("normal",new zi(u,3));this.addAttribute("uv",new zi(c,2));function _(e,t,r,n,i){var a=Math.cos(e);var o=Math.sin(e);var s=r/t*e;var u=Math.cos(s);i.x=n*(2+u)*.5*a;i.y=n*(2+u)*o*.5;i.z=n*Math.sin(s)*.5}}Fs.prototype=Object.create(Wi.prototype);Fs.prototype.constructor=Fs;function Us(e,t,r,n,i){Li.call(this);this.type="TorusGeometry";this.parameters={radius:e,tube:t,radialSegments:r,tubularSegments:n,arc:i};this.fromBufferGeometry(new Gs(e,t,r,n,i));this.mergeVertices()}Us.prototype=Object.create(Li.prototype);Us.prototype.constructor=Us;function Gs(e,t,r,n,i){Wi.call(this);this.type="TorusBufferGeometry";this.parameters={radius:e,tube:t,radialSegments:r,tubularSegments:n,arc:i};e=e||1;t=t||.4;r=Math.floor(r)||8;n=Math.floor(n)||6;i=i||Math.PI*2;var a=[];var o=[];var s=[];var u=[];var c=new Ht;var l=new Ht;var f=new Ht;var h,d;for(h=0;h<=r;h++){for(d=0;d<=n;d++){var p=d/n*i;var v=h/r*Math.PI*2;l.x=(e+t*Math.cos(v))*Math.cos(p);l.y=(e+t*Math.cos(v))*Math.sin(p);l.z=t*Math.sin(v);o.push(l.x,l.y,l.z);c.x=e*Math.cos(p);c.y=e*Math.sin(p);f.subVectors(l,c).normalize();s.push(f.x,f.y,f.z);u.push(d/n);u.push(h/r)}}for(h=1;h<=r;h++){for(d=1;d<=n;d++){var m=(n+1)*h+d-1;var g=(n+1)*(h-1)+d-1;var y=(n+1)*(h-1)+d;var b=(n+1)*h+d;a.push(m,g,b);a.push(g,y,b)}}this.setIndex(a);this.addAttribute("position",new zi(o,3));this.addAttribute("normal",new zi(s,3));this.addAttribute("uv",new zi(u,2))}Gs.prototype=Object.create(Wi.prototype);Gs.prototype.constructor=Gs;var js={triangulate:function(e,t,r){r=r||2;var n=t&&t.length,i=n?t[0]*r:e.length,a=zs(e,0,i,r,true),o=[];if(!a)return o;var s,u,c,l,f,h,d;if(n)a=Xs(e,t,a,r);if(e.length>80*r){s=c=e[0];u=l=e[1];for(var p=r;p<i;p+=r){f=e[p];h=e[p+1];if(f<s)s=f;if(h<u)u=h;if(f>c)c=f;if(h>l)l=h}d=Math.max(c-s,l-u);d=d!==0?1/d:0}ks(a,o,r,s,u,d);return o}};function zs(e,t,r,n,i){var a,o;if(i===du(e,t,r,n)>0){for(a=t;a<r;a+=n)o=lu(a,e[a],e[a+1],o)}else{for(a=r-n;a>=t;a-=n)o=lu(a,e[a],e[a+1],o)}if(o&&iu(o,o.next)){fu(o);o=o.next}return o}function Ns(e,t){if(!e)return e;if(!t)t=e;var r=e,n;do{n=false;if(!r.steiner&&(iu(r,r.next)||nu(r.prev,r,r.next)===0)){fu(r);r=t=r.prev;if(r===r.next)break;n=true}else{r=r.next}}while(n||r!==t);return t}function ks(e,t,r,n,i,a,o){if(!e)return;if(!o&&a)Ks(e,n,i,a);var s=e,u,c;while(e.prev!==e.next){u=e.prev;c=e.next;if(a?Vs(e,n,i,a):Hs(e)){t.push(u.i/r);t.push(e.i/r);t.push(c.i/r);fu(e);e=c.next;s=c.next;continue}e=c;if(e===s){if(!o){ks(Ns(e),t,r,n,i,a,1)}else if(o===1){e=Ws(e,t,r);ks(e,t,r,n,i,a,2)}else if(o===2){Ys(e,t,r,n,i,a)}break}}}function Hs(e){var t=e.prev,r=e,n=e.next;if(nu(t,r,n)>=0)return false;var i=e.next.next;while(i!==e.prev){if(tu(t.x,t.y,r.x,r.y,n.x,n.y,i.x,i.y)&&nu(i.prev,i,i.next)>=0){return false}i=i.next}return true}function Vs(e,t,r,n){var i=e.prev,a=e,o=e.next;if(nu(i,a,o)>=0)return false;var s=i.x<a.x?i.x<o.x?i.x:o.x:a.x<o.x?a.x:o.x,u=i.y<a.y?i.y<o.y?i.y:o.y:a.y<o.y?a.y:o.y,c=i.x>a.x?i.x>o.x?i.x:o.x:a.x>o.x?a.x:o.x,l=i.y>a.y?i.y>o.y?i.y:o.y:a.y>o.y?a.y:o.y;var f=$s(s,u,t,r,n),h=$s(c,l,t,r,n);var d=e.nextZ;while(d&&d.z<=h){if(d!==e.prev&&d!==e.next&&tu(i.x,i.y,a.x,a.y,o.x,o.y,d.x,d.y)&&nu(d.prev,d,d.next)>=0)return false;d=d.nextZ}d=e.prevZ;while(d&&d.z>=f){if(d!==e.prev&&d!==e.next&&tu(i.x,i.y,a.x,a.y,o.x,o.y,d.x,d.y)&&nu(d.prev,d,d.next)>=0)return false;d=d.prevZ}return true}function Ws(e,t,r){var n=e;do{var i=n.prev,a=n.next.next;if(!iu(i,a)&&au(i,n,n.next,a)&&su(i,a)&&su(a,i)){t.push(i.i/r);t.push(n.i/r);t.push(a.i/r);fu(n);fu(n.next);n=e=a}n=n.next}while(n!==e);return n}function Ys(e,t,r,n,i,a){var o=e;do{var s=o.next.next;while(s!==o.prev){if(o.i!==s.i&&ru(o,s)){var u=cu(o,s);o=Ns(o,o.next);u=Ns(u,u.next);ks(o,t,r,n,i,a);ks(u,t,r,n,i,a);return}s=s.next}o=o.next}while(o!==e)}function Xs(e,t,r,n){var i=[],a,o,s,u,c;for(a=0,o=t.length;a<o;a++){s=t[a]*n;u=a<o-1?t[a+1]*n:e.length;c=zs(e,s,u,n,false);if(c===c.next)c.steiner=true;i.push(eu(c))}i.sort(Qs);for(a=0;a<i.length;a++){qs(i[a],r);r=Ns(r,r.next)}return r}function Qs(e,t){return e.x-t.x}function qs(e,t){t=Js(e,t);if(t){var r=cu(t,e);Ns(r,r.next)}}function Js(e,t){var r=t,n=e.x,i=e.y,a=-Infinity,o;do{if(i<=r.y&&i>=r.next.y&&r.next.y!==r.y){var s=r.x+(i-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(s<=n&&s>a){a=s;if(s===n){if(i===r.y)return r;if(i===r.next.y)return r.next}o=r.x<r.next.x?r:r.next}}r=r.next}while(r!==t);if(!o)return null;if(n===a)return o.prev;var u=o,c=o.x,l=o.y,f=Infinity,h;r=o.next;while(r!==u){if(n>=r.x&&r.x>=c&&n!==r.x&&tu(i<l?n:a,i,c,l,i<l?a:n,i,r.x,r.y)){h=Math.abs(i-r.y)/(n-r.x);if((h<f||h===f&&r.x>o.x)&&su(r,e)){o=r;f=h}}r=r.next}return o}function Ks(e,t,r,n){var i=e;do{if(i.z===null)i.z=$s(i.x,i.y,t,r,n);i.prevZ=i.prev;i.nextZ=i.next;i=i.next}while(i!==e);i.prevZ.nextZ=null;i.prevZ=null;Zs(i)}function Zs(e){var t,r,n,i,a,o,s,u,c=1;do{r=e;e=null;a=null;o=0;while(r){o++;n=r;s=0;for(t=0;t<c;t++){s++;n=n.nextZ;if(!n)break}u=c;while(s>0||u>0&&n){if(s!==0&&(u===0||!n||r.z<=n.z)){i=r;r=r.nextZ;s--}else{i=n;n=n.nextZ;u--}if(a)a.nextZ=i;else e=i;i.prevZ=a;a=i}r=n}a.nextZ=null;c*=2}while(o>1);return e}function $s(e,t,r,n,i){e=32767*(e-r)*i;t=32767*(t-n)*i;e=(e|e<<8)&16711935;e=(e|e<<4)&252645135;e=(e|e<<2)&858993459;e=(e|e<<1)&1431655765;t=(t|t<<8)&16711935;t=(t|t<<4)&252645135;t=(t|t<<2)&858993459;t=(t|t<<1)&1431655765;return e|t<<1}function eu(e){var t=e,r=e;do{if(t.x<r.x)r=t;t=t.next}while(t!==e);return r}function tu(e,t,r,n,i,a,o,s){return(i-o)*(t-s)-(e-o)*(a-s)>=0&&(e-o)*(n-s)-(r-o)*(t-s)>=0&&(r-o)*(a-s)-(i-o)*(n-s)>=0}function ru(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!ou(e,t)&&su(e,t)&&su(t,e)&&uu(e,t)}function nu(e,t,r){return(t.y-e.y)*(r.x-t.x)-(t.x-e.x)*(r.y-t.y)}function iu(e,t){return e.x===t.x&&e.y===t.y}function au(e,t,r,n){if(iu(e,t)&&iu(r,n)||iu(e,n)&&iu(r,t))return true;return nu(e,t,r)>0!==nu(e,t,n)>0&&nu(r,n,e)>0!==nu(r,n,t)>0}function ou(e,t){var r=e;do{if(r.i!==e.i&&r.next.i!==e.i&&r.i!==t.i&&r.next.i!==t.i&&au(r,r.next,e,t)){return true}r=r.next}while(r!==e);return false}function su(e,t){return nu(e.prev,e,e.next)<0?nu(e,t,e.next)>=0&&nu(e,e.prev,t)>=0:nu(e,t,e.prev)<0||nu(e,e.next,t)<0}function uu(e,t){var r=e,n=false,i=(e.x+t.x)/2,a=(e.y+t.y)/2;do{if(r.y>a!==r.next.y>a&&r.next.y!==r.y&&i<(r.next.x-r.x)*(a-r.y)/(r.next.y-r.y)+r.x){n=!n}r=r.next}while(r!==e);return n}function cu(e,t){var r=new hu(e.i,e.x,e.y),n=new hu(t.i,t.x,t.y),i=e.next,a=t.prev;e.next=t;t.prev=e;r.next=i;i.prev=r;n.next=r;r.prev=n;a.next=n;n.prev=a;return n}function lu(e,t,r,n){var i=new hu(e,t,r);if(!n){i.prev=i;i.next=i}else{i.next=n.next;i.prev=n;n.next.prev=i;n.next=i}return i}function fu(e){e.next.prev=e.prev;e.prev.next=e.next;if(e.prevZ)e.prevZ.nextZ=e.nextZ;if(e.nextZ)e.nextZ.prevZ=e.prevZ}function hu(e,t,r){this.i=e;this.x=t;this.y=r;this.prev=null;this.next=null;this.z=null;this.prevZ=null;this.nextZ=null;this.steiner=false}function du(e,t,r,n){var i=0;for(var a=t,o=r-n;a<r;a+=n){i+=(e[o]-e[a])*(e[a+1]+e[o+1]);o=a}return i}var pu={area:function(e){var t=e.length;var r=0;for(var n=t-1,i=0;i<t;n=i++){r+=e[n].x*e[i].y-e[i].x*e[n].y}return r*.5},isClockWise:function(e){return pu.area(e)<0},triangulateShape:function(e,t){var r=[];var n=[];var i=[];vu(e);mu(r,e);var a=e.length;t.forEach(vu);for(var o=0;o<t.length;o++){n.push(a);a+=t[o].length;mu(r,t[o])}var s=js.triangulate(r,n);for(var o=0;o<s.length;o+=3){i.push(s.slice(o,o+3))}return i}};function vu(e){var t=e.length;if(t>2&&e[t-1].equals(e[0])){e.pop()}}function mu(e,t){for(var r=0;r<t.length;r++){e.push(t[r].x);e.push(t[r].y)}}function gu(e,t){Li.call(this);this.type="ExtrudeGeometry";this.parameters={shapes:e,options:t};this.fromBufferGeometry(new yu(e,t));this.mergeVertices()}gu.prototype=Object.create(Li.prototype);gu.prototype.constructor=gu;gu.prototype.toJSON=function(){var e=Li.prototype.toJSON.call(this);var t=this.parameters.shapes;var r=this.parameters.options;return xu(t,r,e)};function yu(e,t){Wi.call(this);this.type="ExtrudeBufferGeometry";this.parameters={shapes:e,options:t};e=Array.isArray(e)?e:[e];var r=this;var n=[];var i=[];for(var a=0,o=e.length;a<o;a++){var s=e[a];u(s)}this.addAttribute("position",new zi(n,3));this.addAttribute("uv",new zi(i,2));this.computeVertexNormals();function u(e){var a=[];var o=t.curveSegments!==undefined?t.curveSegments:12;var s=t.steps!==undefined?t.steps:1;var u=t.depth!==undefined?t.depth:100;var c=t.bevelEnabled!==undefined?t.bevelEnabled:true;var l=t.bevelThickness!==undefined?t.bevelThickness:6;var f=t.bevelSize!==undefined?t.bevelSize:l-2;var h=t.bevelSegments!==undefined?t.bevelSegments:3;var d=t.extrudePath;var p=t.UVGenerator!==undefined?t.UVGenerator:bu;if(t.amount!==undefined){console.warn("THREE.ExtrudeBufferGeometry: amount has been renamed to depth.");u=t.amount}var v,m=false;var g,y,b,x;if(d){v=d.getSpacedPoints(s);m=true;c=false;g=d.computeFrenetFrames(s,false);y=new Ht;b=new Ht;x=new Ht}if(!c){h=0;l=0;f=0}var w,A,M;var E=e.extractPoints(o);var S=E.shape;var T=E.holes;var _=!pu.isClockWise(S);if(_){S=S.reverse();for(A=0,M=T.length;A<M;A++){w=T[A];if(pu.isClockWise(w)){T[A]=w.reverse()}}}var P=pu.triangulateShape(S,T);var C=S;for(A=0,M=T.length;A<M;A++){w=T[A];S=S.concat(w)}function O(e,t,r){if(!t)console.error("THREE.ExtrudeGeometry: vec does not exist");return t.clone().multiplyScalar(r).add(e)}var L,R,B,D,I,F=S.length,U,G=P.length;function j(e,t,r){var n,i,a;var o=e.x-t.x,s=e.y-t.y;var u=r.x-e.x,c=r.y-e.y;var l=o*o+s*s;var f=o*c-s*u;if(Math.abs(f)>Number.EPSILON){var h=Math.sqrt(l);var d=Math.sqrt(u*u+c*c);var p=t.x-s/h;var v=t.y+o/h;var m=r.x-c/d;var g=r.y+u/d;var y=((m-p)*c-(g-v)*u)/(o*c-s*u);n=p+o*y-e.x;i=v+s*y-e.y;var b=n*n+i*i;if(b<=2){return new zt(n,i)}else{a=Math.sqrt(b/2)}}else{var x=false;if(o>Number.EPSILON){if(u>Number.EPSILON){x=true}}else{if(o<-Number.EPSILON){if(u<-Number.EPSILON){x=true}}else{if(Math.sign(s)===Math.sign(c)){x=true}}}if(x){n=-s;i=o;a=Math.sqrt(l)}else{n=o;i=s;a=Math.sqrt(l/2)}}return new zt(n/a,i/a)}var z=[];for(var N=0,k=C.length,H=k-1,V=N+1;N<k;N++,H++,V++){if(H===k)H=0;if(V===k)V=0;z[N]=j(C[N],C[H],C[V])}var W=[],Y,X=z.concat();for(A=0,M=T.length;A<M;A++){w=T[A];Y=[];for(N=0,k=w.length,H=k-1,V=N+1;N<k;N++,H++,V++){if(H===k)H=0;if(V===k)V=0;Y[N]=j(w[N],w[H],w[V])}W.push(Y);X=X.concat(Y)}for(L=0;L<h;L++){B=L/h;D=l*Math.cos(B*Math.PI/2);R=f*Math.sin(B*Math.PI/2);for(N=0,k=C.length;N<k;N++){I=O(C[N],z[N],R);Z(I.x,I.y,-D)}for(A=0,M=T.length;A<M;A++){w=T[A];Y=W[A];for(N=0,k=w.length;N<k;N++){I=O(w[N],Y[N],R);Z(I.x,I.y,-D)}}}R=f;for(N=0;N<F;N++){I=c?O(S[N],X[N],R):S[N];if(!m){Z(I.x,I.y,0)}else{b.copy(g.normals[0]).multiplyScalar(I.x);y.copy(g.binormals[0]).multiplyScalar(I.y);x.copy(v[0]).add(b).add(y);Z(x.x,x.y,x.z)}}var Q;for(Q=1;Q<=s;Q++){for(N=0;N<F;N++){I=c?O(S[N],X[N],R):S[N];if(!m){Z(I.x,I.y,u/s*Q)}else{b.copy(g.normals[Q]).multiplyScalar(I.x);y.copy(g.binormals[Q]).multiplyScalar(I.y);x.copy(v[Q]).add(b).add(y);Z(x.x,x.y,x.z)}}}for(L=h-1;L>=0;L--){B=L/h;D=l*Math.cos(B*Math.PI/2);R=f*Math.sin(B*Math.PI/2);for(N=0,k=C.length;N<k;N++){I=O(C[N],z[N],R);Z(I.x,I.y,u+D)}for(A=0,M=T.length;A<M;A++){w=T[A];Y=W[A];for(N=0,k=w.length;N<k;N++){I=O(w[N],Y[N],R);if(!m){Z(I.x,I.y,u+D)}else{Z(I.x,I.y+v[s-1].y,v[s-1].x+D)}}}}q();J();function q(){var e=n.length/3;if(c){var t=0;var i=F*t;for(N=0;N<G;N++){U=P[N];$(U[2]+i,U[1]+i,U[0]+i)}t=s+h*2;i=F*t;for(N=0;N<G;N++){U=P[N];$(U[0]+i,U[1]+i,U[2]+i)}}else{for(N=0;N<G;N++){U=P[N];$(U[2],U[1],U[0])}for(N=0;N<G;N++){U=P[N];$(U[0]+F*s,U[1]+F*s,U[2]+F*s)}}r.addGroup(e,n.length/3-e,0)}function J(){var e=n.length/3;var t=0;K(C,t);t+=C.length;for(A=0,M=T.length;A<M;A++){w=T[A];K(w,t);t+=w.length}r.addGroup(e,n.length/3-e,1)}function K(e,t){var r,n;N=e.length;while(--N>=0){r=N;n=N-1;if(n<0)n=e.length-1;var i=0,a=s+h*2;for(i=0;i<a;i++){var o=F*i;var u=F*(i+1);var c=t+r+o,l=t+n+o,f=t+n+u,d=t+r+u;ee(c,l,f,d)}}}function Z(e,t,r){a.push(e);a.push(t);a.push(r)}function $(e,t,i){te(e);te(t);te(i);var a=n.length/3;var o=p.generateTopUV(r,n,a-3,a-2,a-1);re(o[0]);re(o[1]);re(o[2])}function ee(e,t,i,a){te(e);te(t);te(a);te(t);te(i);te(a);var o=n.length/3;var s=p.generateSideWallUV(r,n,o-6,o-3,o-2,o-1);re(s[0]);re(s[1]);re(s[3]);re(s[1]);re(s[2]);re(s[3])}function te(e){n.push(a[e*3+0]);n.push(a[e*3+1]);n.push(a[e*3+2])}function re(e){i.push(e.x);i.push(e.y)}}}yu.prototype=Object.create(Wi.prototype);yu.prototype.constructor=yu;yu.prototype.toJSON=function(){var e=Wi.prototype.toJSON.call(this);var t=this.parameters.shapes;var r=this.parameters.options;return xu(t,r,e)};var bu={generateTopUV:function(e,t,r,n,i){var a=t[r*3];var o=t[r*3+1];var s=t[n*3];var u=t[n*3+1];var c=t[i*3];var l=t[i*3+1];return[new zt(a,o),new zt(s,u),new zt(c,l)]},generateSideWallUV:function(e,t,r,n,i,a){var o=t[r*3];var s=t[r*3+1];var u=t[r*3+2];var c=t[n*3];var l=t[n*3+1];var f=t[n*3+2];var h=t[i*3];var d=t[i*3+1];var p=t[i*3+2];var v=t[a*3];var m=t[a*3+1];var g=t[a*3+2];if(Math.abs(s-l)<.01){return[new zt(o,1-u),new zt(c,1-f),new zt(h,1-p),new zt(v,1-g)]}else{return[new zt(s,1-u),new zt(l,1-f),new zt(d,1-p),new zt(m,1-g)]}}};function xu(e,t,r){r.shapes=[];if(Array.isArray(e)){for(var n=0,i=e.length;n<i;n++){var a=e[n];r.shapes.push(a.uuid)}}else{r.shapes.push(e.uuid)}if(t.extrudePath!==undefined)r.options.extrudePath=t.extrudePath.toJSON();return r}function wu(e,t){Li.call(this);this.type="TextGeometry";this.parameters={text:e,parameters:t};this.fromBufferGeometry(new Au(e,t));this.mergeVertices()}wu.prototype=Object.create(Li.prototype);wu.prototype.constructor=wu;function Au(e,t){t=t||{};var r=t.font;if(!(r&&r.isFont)){console.error("THREE.TextGeometry: font parameter is not an instance of THREE.Font.");return new Li}var n=r.generateShapes(e,t.size);t.depth=t.height!==undefined?t.height:50;if(t.bevelThickness===undefined)t.bevelThickness=10;if(t.bevelSize===undefined)t.bevelSize=8;if(t.bevelEnabled===undefined)t.bevelEnabled=false;yu.call(this,n,t);this.type="TextBufferGeometry"}Au.prototype=Object.create(yu.prototype);Au.prototype.constructor=Au;function Mu(e,t,r,n,i,a,o){Li.call(this);this.type="SphereGeometry";this.parameters={radius:e,widthSegments:t,heightSegments:r,phiStart:n,phiLength:i,thetaStart:a,thetaLength:o};this.fromBufferGeometry(new Eu(e,t,r,n,i,a,o));this.mergeVertices()}Mu.prototype=Object.create(Li.prototype);Mu.prototype.constructor=Mu;function Eu(e,t,r,n,i,a,o){Wi.call(this);this.type="SphereBufferGeometry";this.parameters={radius:e,widthSegments:t,heightSegments:r,phiStart:n,phiLength:i,thetaStart:a,thetaLength:o};e=e||1;t=Math.max(3,Math.floor(t)||8);r=Math.max(2,Math.floor(r)||6);n=n!==undefined?n:0;i=i!==undefined?i:Math.PI*2;a=a!==undefined?a:0;o=o!==undefined?o:Math.PI;var s=a+o;var u,c;var l=0;var f=[];var h=new Ht;var d=new Ht;var p=[];var v=[];var m=[];var g=[];for(c=0;c<=r;c++){var y=[];var b=c/r;for(u=0;u<=t;u++){var x=u/t;h.x=-e*Math.cos(n+x*i)*Math.sin(a+b*o);h.y=e*Math.cos(a+b*o);h.z=e*Math.sin(n+x*i)*Math.sin(a+b*o);v.push(h.x,h.y,h.z);d.set(h.x,h.y,h.z).normalize();m.push(d.x,d.y,d.z);g.push(x,1-b);y.push(l++)}f.push(y)}for(c=0;c<r;c++){for(u=0;u<t;u++){var w=f[c][u+1];var A=f[c][u];var M=f[c+1][u];var E=f[c+1][u+1];if(c!==0||a>0)p.push(w,A,E);if(c!==r-1||s<Math.PI)p.push(A,M,E)}}this.setIndex(p);this.addAttribute("position",new zi(v,3));this.addAttribute("normal",new zi(m,3));this.addAttribute("uv",new zi(g,2))}Eu.prototype=Object.create(Wi.prototype);Eu.prototype.constructor=Eu;function Su(e,t,r,n,i,a){Li.call(this);this.type="RingGeometry";this.parameters={innerRadius:e,outerRadius:t,thetaSegments:r,phiSegments:n,thetaStart:i,thetaLength:a};this.fromBufferGeometry(new Tu(e,t,r,n,i,a));this.mergeVertices()}Su.prototype=Object.create(Li.prototype);Su.prototype.constructor=Su;function Tu(e,t,r,n,i,a){Wi.call(this);this.type="RingBufferGeometry";this.parameters={innerRadius:e,outerRadius:t,thetaSegments:r,phiSegments:n,thetaStart:i,thetaLength:a};e=e||.5;t=t||1;i=i!==undefined?i:0;a=a!==undefined?a:Math.PI*2;r=r!==undefined?Math.max(3,r):8;n=n!==undefined?Math.max(1,n):1;var o=[];var s=[];var u=[];var c=[];var l;var f=e;var h=(t-e)/n;var d=new Ht;var p=new zt;var v,m;for(v=0;v<=n;v++){for(m=0;m<=r;m++){l=i+m/r*a;d.x=f*Math.cos(l);d.y=f*Math.sin(l);s.push(d.x,d.y,d.z);u.push(0,0,1);p.x=(d.x/t+1)/2;p.y=(d.y/t+1)/2;c.push(p.x,p.y)}f+=h}for(v=0;v<n;v++){var g=v*(r+1);for(m=0;m<r;m++){l=m+g;var y=l;var b=l+r+1;var x=l+r+2;var w=l+1;o.push(y,b,w);o.push(b,x,w)}}this.setIndex(o);this.addAttribute("position",new zi(s,3));this.addAttribute("normal",new zi(u,3));this.addAttribute("uv",new zi(c,2))}Tu.prototype=Object.create(Wi.prototype);Tu.prototype.constructor=Tu;function _u(e,t,r,n){Li.call(this);this.type="LatheGeometry";this.parameters={points:e,segments:t,phiStart:r,phiLength:n};this.fromBufferGeometry(new Pu(e,t,r,n));this.mergeVertices()}_u.prototype=Object.create(Li.prototype);_u.prototype.constructor=_u;function Pu(e,t,r,n){Wi.call(this);this.type="LatheBufferGeometry";this.parameters={points:e,segments:t,phiStart:r,phiLength:n};t=Math.floor(t)||12;r=r||0;n=n||Math.PI*2;n=jt.clamp(n,0,Math.PI*2);var i=[];var a=[];var o=[];var s;var u=1/t;var c=new Ht;var l=new zt;var f,h;for(f=0;f<=t;f++){var d=r+f*u*n;var p=Math.sin(d);var v=Math.cos(d);for(h=0;h<=e.length-1;h++){c.x=e[h].x*p;c.y=e[h].y;c.z=e[h].x*v;a.push(c.x,c.y,c.z);l.x=f/t;l.y=h/(e.length-1);o.push(l.x,l.y)}}for(f=0;f<t;f++){for(h=0;h<e.length-1;h++){s=h+f*e.length;var m=s;var g=s+e.length;var y=s+e.length+1;var b=s+1;i.push(m,g,b);i.push(g,y,b)}}this.setIndex(i);this.addAttribute("position",new zi(a,3));this.addAttribute("uv",new zi(o,2));this.computeVertexNormals();if(n===Math.PI*2){var x=this.attributes.normal.array;var w=new Ht;var A=new Ht;var M=new Ht;s=t*e.length*3;for(f=0,h=0;f<e.length;f++,h+=3){w.x=x[h+0];w.y=x[h+1];w.z=x[h+2];A.x=x[s+h+0];A.y=x[s+h+1];A.z=x[s+h+2];M.addVectors(w,A).normalize();x[h+0]=x[s+h+0]=M.x;x[h+1]=x[s+h+1]=M.y;x[h+2]=x[s+h+2]=M.z}}}Pu.prototype=Object.create(Wi.prototype);Pu.prototype.constructor=Pu;function Cu(e,t){Li.call(this);this.type="ShapeGeometry";if(typeof t==="object"){console.warn("THREE.ShapeGeometry: Options parameter has been removed.");t=t.curveSegments}this.parameters={shapes:e,curveSegments:t};this.fromBufferGeometry(new Ou(e,t));this.mergeVertices()}Cu.prototype=Object.create(Li.prototype);Cu.prototype.constructor=Cu;Cu.prototype.toJSON=function(){var e=Li.prototype.toJSON.call(this);var t=this.parameters.shapes;return Lu(t,e)};function Ou(e,t){Wi.call(this);this.type="ShapeBufferGeometry";this.parameters={shapes:e,curveSegments:t};t=t||12;var r=[];var n=[];var i=[];var a=[];var o=0;var s=0;if(Array.isArray(e)===false){c(e)}else{for(var u=0;u<e.length;u++){c(e[u]);this.addGroup(o,s,u);o+=s;s=0}}this.setIndex(r);this.addAttribute("position",new zi(n,3));this.addAttribute("normal",new zi(i,3));this.addAttribute("uv",new zi(a,2));function c(e){var o,u,c;var l=n.length/3;var f=e.extractPoints(t);var h=f.shape;var d=f.holes;if(pu.isClockWise(h)===false){h=h.reverse();for(o=0,u=d.length;o<u;o++){c=d[o];if(pu.isClockWise(c)===true){d[o]=c.reverse()}}}var p=pu.triangulateShape(h,d);for(o=0,u=d.length;o<u;o++){c=d[o];h=h.concat(c)}for(o=0,u=h.length;o<u;o++){var v=h[o];n.push(v.x,v.y,0);i.push(0,0,1);a.push(v.x,v.y)}for(o=0,u=p.length;o<u;o++){var m=p[o];var g=m[0]+l;var y=m[1]+l;var b=m[2]+l;r.push(g,y,b);s+=3}}}Ou.prototype=Object.create(Wi.prototype);Ou.prototype.constructor=Ou;Ou.prototype.toJSON=function(){var e=Wi.prototype.toJSON.call(this);var t=this.parameters.shapes;return Lu(t,e)};function Lu(e,t){t.shapes=[];if(Array.isArray(e)){for(var r=0,n=e.length;r<n;r++){var i=e[r];t.shapes.push(i.uuid)}}else{t.shapes.push(e.uuid)}return t}function Ru(e,t){Wi.call(this);this.type="EdgesGeometry";this.parameters={thresholdAngle:t};t=t!==undefined?t:1;var r=[];var n=Math.cos(jt.DEG2RAD*t);var i=[0,0],a={},o,s;var u,c=["a","b","c"];var l;if(e.isBufferGeometry){l=new Li;l.fromBufferGeometry(e)}else{l=e.clone()}l.mergeVertices();l.computeFaceNormals();var f=l.vertices;var h=l.faces;for(var d=0,p=h.length;d<p;d++){var v=h[d];for(var m=0;m<3;m++){o=v[c[m]];s=v[c[(m+1)%3]];i[0]=Math.min(o,s);i[1]=Math.max(o,s);u=i[0]+","+i[1];if(a[u]===undefined){a[u]={index1:i[0],index2:i[1],face1:d,face2:undefined}}else{a[u].face2=d}}}for(u in a){var g=a[u];if(g.face2===undefined||h[g.face1].normal.dot(h[g.face2].normal)<=n){var y=f[g.index1];r.push(y.x,y.y,y.z);y=f[g.index2];r.push(y.x,y.y,y.z)}}this.addAttribute("position",new zi(r,3))}Ru.prototype=Object.create(Wi.prototype);Ru.prototype.constructor=Ru;function Bu(e,t,r,n,i,a,o,s){Li.call(this);this.type="CylinderGeometry";this.parameters={radiusTop:e,radiusBottom:t,height:r,radialSegments:n,heightSegments:i,openEnded:a,thetaStart:o,thetaLength:s};this.fromBufferGeometry(new Du(e,t,r,n,i,a,o,s));this.mergeVertices()}Bu.prototype=Object.create(Li.prototype);Bu.prototype.constructor=Bu;function Du(e,t,r,n,i,a,o,s){Wi.call(this);this.type="CylinderBufferGeometry";this.parameters={radiusTop:e,radiusBottom:t,height:r,radialSegments:n,heightSegments:i,openEnded:a,thetaStart:o,thetaLength:s};var u=this;e=e!==undefined?e:1;t=t!==undefined?t:1;r=r||1;n=Math.floor(n)||8;i=Math.floor(i)||1;a=a!==undefined?a:false;o=o!==undefined?o:0;s=s!==undefined?s:Math.PI*2;var c=[];var l=[];var f=[];var h=[];var d=0;var p=[];var v=r/2;var m=0;g();if(a===false){if(e>0)y(true);if(t>0)y(false)}this.setIndex(c);this.addAttribute("position",new zi(l,3));this.addAttribute("normal",new zi(f,3));this.addAttribute("uv",new zi(h,2));function g(){var a,g;var y=new Ht;var b=new Ht;var x=0;var w=(t-e)/r;for(g=0;g<=i;g++){var A=[];var M=g/i;var E=M*(t-e)+e;for(a=0;a<=n;a++){var S=a/n;var T=S*s+o;var _=Math.sin(T);var P=Math.cos(T);b.x=E*_;b.y=-M*r+v;b.z=E*P;l.push(b.x,b.y,b.z);y.set(_,w,P).normalize();f.push(y.x,y.y,y.z);h.push(S,1-M);A.push(d++)}p.push(A)}for(a=0;a<n;a++){for(g=0;g<i;g++){var C=p[g][a];var O=p[g+1][a];var L=p[g+1][a+1];var R=p[g][a+1];c.push(C,O,R);c.push(O,L,R);x+=6}}u.addGroup(m,x,0);m+=x}function y(r){var i,a,p;var g=new zt;var y=new Ht;var b=0;var x=r===true?e:t;var w=r===true?1:-1;a=d;for(i=1;i<=n;i++){l.push(0,v*w,0);f.push(0,w,0);h.push(.5,.5);d++}p=d;for(i=0;i<=n;i++){var A=i/n;var M=A*s+o;var E=Math.cos(M);var S=Math.sin(M);y.x=x*S;y.y=v*w;y.z=x*E;l.push(y.x,y.y,y.z);f.push(0,w,0);g.x=E*.5+.5;g.y=S*.5*w+.5;h.push(g.x,g.y);d++}for(i=0;i<n;i++){var T=a+i;var _=p+i;if(r===true){c.push(_,_+1,T)}else{c.push(_+1,_,T)}b+=3}u.addGroup(m,b,r===true?1:2);m+=b}}Du.prototype=Object.create(Wi.prototype);Du.prototype.constructor=Du;function Iu(e,t,r,n,i,a,o){Bu.call(this,0,e,t,r,n,i,a,o);this.type="ConeGeometry";this.parameters={radius:e,height:t,radialSegments:r,heightSegments:n,openEnded:i,thetaStart:a,thetaLength:o}}Iu.prototype=Object.create(Bu.prototype);Iu.prototype.constructor=Iu;function Fu(e,t,r,n,i,a,o){Du.call(this,0,e,t,r,n,i,a,o);this.type="ConeBufferGeometry";this.parameters={radius:e,height:t,radialSegments:r,heightSegments:n,openEnded:i,thetaStart:a,thetaLength:o}}Fu.prototype=Object.create(Du.prototype);Fu.prototype.constructor=Fu;function Uu(e,t,r,n){Li.call(this);this.type="CircleGeometry";this.parameters={radius:e,segments:t,thetaStart:r,thetaLength:n};this.fromBufferGeometry(new Gu(e,t,r,n));this.mergeVertices()}Uu.prototype=Object.create(Li.prototype);Uu.prototype.constructor=Uu;function Gu(e,t,r,n){Wi.call(this);this.type="CircleBufferGeometry";this.parameters={radius:e,segments:t,thetaStart:r,thetaLength:n};e=e||1;t=t!==undefined?Math.max(3,t):8;r=r!==undefined?r:0;n=n!==undefined?n:Math.PI*2;var i=[];var a=[];var o=[];var s=[];var u,c;var l=new Ht;var f=new zt;a.push(0,0,0);o.push(0,0,1);s.push(.5,.5);for(c=0,u=3;c<=t;c++,u+=3){var h=r+c/t*n;l.x=e*Math.cos(h);l.y=e*Math.sin(h);a.push(l.x,l.y,l.z);o.push(0,0,1);f.x=(a[u]/e+1)/2;f.y=(a[u+1]/e+1)/2;s.push(f.x,f.y)}for(u=1;u<=t;u++){i.push(u,u+1,0)}this.setIndex(i);this.addAttribute("position",new zi(a,3));this.addAttribute("normal",new zi(o,3));this.addAttribute("uv",new zi(s,2))}Gu.prototype=Object.create(Wi.prototype);Gu.prototype.constructor=Gu;var ju=Object.freeze({WireframeGeometry:xs,ParametricGeometry:ws,ParametricBufferGeometry:As,TetrahedronGeometry:Ss,TetrahedronBufferGeometry:Ts,OctahedronGeometry:_s,OctahedronBufferGeometry:Ps,IcosahedronGeometry:Cs,IcosahedronBufferGeometry:Os,DodecahedronGeometry:Ls,DodecahedronBufferGeometry:Rs,PolyhedronGeometry:Ms,PolyhedronBufferGeometry:Es,TubeGeometry:Bs,TubeBufferGeometry:Ds,TorusKnotGeometry:Is,TorusKnotBufferGeometry:Fs,TorusGeometry:Us,TorusBufferGeometry:Gs,TextGeometry:wu,TextBufferGeometry:Au,SphereGeometry:Mu,SphereBufferGeometry:Eu,RingGeometry:Su,RingBufferGeometry:Tu,PlaneGeometry:Qi,PlaneBufferGeometry:qi,LatheGeometry:_u,LatheBufferGeometry:Pu,ShapeGeometry:Cu,ShapeBufferGeometry:Ou,ExtrudeGeometry:gu,ExtrudeBufferGeometry:yu,EdgesGeometry:Ru,ConeGeometry:Iu,ConeBufferGeometry:Fu,CylinderGeometry:Bu,CylinderBufferGeometry:Du,CircleGeometry:Uu,CircleBufferGeometry:Gu,BoxGeometry:Yi,BoxBufferGeometry:Xi});function zu(e){Ki.call(this);this.type="ShadowMaterial";this.color=new xi(0);this.transparent=true;this.setValues(e)}zu.prototype=Object.create(Ki.prototype);zu.prototype.constructor=zu;zu.prototype.isShadowMaterial=true;zu.prototype.copy=function(e){Ki.prototype.copy.call(this,e);this.color.copy(e.color);return this};function Nu(e){Zi.call(this,e);this.type="RawShaderMaterial"}Nu.prototype=Object.create(Zi.prototype);Nu.prototype.constructor=Nu;Nu.prototype.isRawShaderMaterial=true;function ku(e){Ki.call(this);this.defines={STANDARD:""};this.type="MeshStandardMaterial";this.color=new xi(16777215);this.roughness=.5;this.metalness=.5;this.map=null;this.lightMap=null;this.lightMapIntensity=1;this.aoMap=null;this.aoMapIntensity=1;this.emissive=new xi(0);this.emissiveIntensity=1;this.emissiveMap=null;this.bumpMap=null;this.bumpScale=1;this.normalMap=null;this.normalMapType=Ut;this.normalScale=new zt(1,1);this.displacementMap=null;this.displacementScale=1;this.displacementBias=0;this.roughnessMap=null;this.metalnessMap=null;this.alphaMap=null;this.envMap=null;this.envMapIntensity=1;this.refractionRatio=.98;this.wireframe=false;this.wireframeLinewidth=1;this.wireframeLinecap="round";this.wireframeLinejoin="round";this.skinning=false;this.morphTargets=false;this.morphNormals=false;this.setValues(e)}ku.prototype=Object.create(Ki.prototype);ku.prototype.constructor=ku;ku.prototype.isMeshStandardMaterial=true;ku.prototype.copy=function(e){Ki.prototype.copy.call(this,e);this.defines={STANDARD:""};this.color.copy(e.color);this.roughness=e.roughness;this.metalness=e.metalness;this.map=e.map;this.lightMap=e.lightMap;this.lightMapIntensity=e.lightMapIntensity;this.aoMap=e.aoMap;this.aoMapIntensity=e.aoMapIntensity;this.emissive.copy(e.emissive);this.emissiveMap=e.emissiveMap;this.emissiveIntensity=e.emissiveIntensity;this.bumpMap=e.bumpMap;this.bumpScale=e.bumpScale;this.normalMap=e.normalMap;this.normalMapType=e.normalMapType;this.normalScale.copy(e.normalScale);this.displacementMap=e.displacementMap;this.displacementScale=e.displacementScale;this.displacementBias=e.displacementBias;this.roughnessMap=e.roughnessMap;this.metalnessMap=e.metalnessMap;this.alphaMap=e.alphaMap;this.envMap=e.envMap;this.envMapIntensity=e.envMapIntensity;this.refractionRatio=e.refractionRatio;this.wireframe=e.wireframe;this.wireframeLinewidth=e.wireframeLinewidth;this.wireframeLinecap=e.wireframeLinecap;this.wireframeLinejoin=e.wireframeLinejoin;this.skinning=e.skinning;this.morphTargets=e.morphTargets;this.morphNormals=e.morphNormals;return this};function Hu(e){ku.call(this);this.defines={PHYSICAL:""};this.type="MeshPhysicalMaterial";this.reflectivity=.5;this.clearCoat=0;this.clearCoatRoughness=0;this.setValues(e)}Hu.prototype=Object.create(ku.prototype);Hu.prototype.constructor=Hu;Hu.prototype.isMeshPhysicalMaterial=true;Hu.prototype.copy=function(e){ku.prototype.copy.call(this,e);this.defines={PHYSICAL:""};this.reflectivity=e.reflectivity;this.clearCoat=e.clearCoat;this.clearCoatRoughness=e.clearCoatRoughness;return this};function Vu(e){Ki.call(this);this.type="MeshPhongMaterial";this.color=new xi(16777215);this.specular=new xi(1118481);this.shininess=30;this.map=null;this.lightMap=null;this.lightMapIntensity=1;this.aoMap=null;this.aoMapIntensity=1;this.emissive=new xi(0);this.emissiveIntensity=1;this.emissiveMap=null;this.bumpMap=null;this.bumpScale=1;this.normalMap=null;this.normalMapType=Ut;this.normalScale=new zt(1,1);this.displacementMap=null;this.displacementScale=1;this.displacementBias=0;this.specularMap=null;this.alphaMap=null;this.envMap=null;this.combine=$;this.reflectivity=1;this.refractionRatio=.98;this.wireframe=false;this.wireframeLinewidth=1;this.wireframeLinecap="round";this.wireframeLinejoin="round";this.skinning=false;this.morphTargets=false;this.morphNormals=false;this.setValues(e)}Vu.prototype=Object.create(Ki.prototype);Vu.prototype.constructor=Vu;Vu.prototype.isMeshPhongMaterial=true;Vu.prototype.copy=function(e){Ki.prototype.copy.call(this,e);this.color.copy(e.color);this.specular.copy(e.specular);this.shininess=e.shininess;this.map=e.map;this.lightMap=e.lightMap;this.lightMapIntensity=e.lightMapIntensity;this.aoMap=e.aoMap;this.aoMapIntensity=e.aoMapIntensity;this.emissive.copy(e.emissive);this.emissiveMap=e.emissiveMap;this.emissiveIntensity=e.emissiveIntensity;this.bumpMap=e.bumpMap;this.bumpScale=e.bumpScale;this.normalMap=e.normalMap;this.normalMapType=e.normalMapType;this.normalScale.copy(e.normalScale);this.displacementMap=e.displacementMap;this.displacementScale=e.displacementScale;this.displacementBias=e.displacementBias;this.specularMap=e.specularMap;this.alphaMap=e.alphaMap;this.envMap=e.envMap;this.combine=e.combine;this.reflectivity=e.reflectivity;this.refractionRatio=e.refractionRatio;this.wireframe=e.wireframe;this.wireframeLinewidth=e.wireframeLinewidth;this.wireframeLinecap=e.wireframeLinecap;this.wireframeLinejoin=e.wireframeLinejoin;this.skinning=e.skinning;this.morphTargets=e.morphTargets;this.morphNormals=e.morphNormals;return this};function Wu(e){Vu.call(this);this.defines={TOON:""};this.type="MeshToonMaterial";this.gradientMap=null;this.setValues(e)}Wu.prototype=Object.create(Vu.prototype);Wu.prototype.constructor=Wu;Wu.prototype.isMeshToonMaterial=true;Wu.prototype.copy=function(e){Vu.prototype.copy.call(this,e);this.gradientMap=e.gradientMap;return this};function Yu(e){Ki.call(this);this.type="MeshNormalMaterial";this.bumpMap=null;this.bumpScale=1;this.normalMap=null;this.normalMapType=Ut;this.normalScale=new zt(1,1);this.displacementMap=null;this.displacementScale=1;this.displacementBias=0;this.wireframe=false;this.wireframeLinewidth=1;this.fog=false;this.lights=false;this.skinning=false;this.morphTargets=false;this.morphNormals=false;this.setValues(e)}Yu.prototype=Object.create(Ki.prototype);Yu.prototype.constructor=Yu;Yu.prototype.isMeshNormalMaterial=true;Yu.prototype.copy=function(e){Ki.prototype.copy.call(this,e);this.bumpMap=e.bumpMap;this.bumpScale=e.bumpScale;this.normalMap=e.normalMap;this.normalMapType=e.normalMapType;this.normalScale.copy(e.normalScale);this.displacementMap=e.displacementMap;this.displacementScale=e.displacementScale;this.displacementBias=e.displacementBias;this.wireframe=e.wireframe;this.wireframeLinewidth=e.wireframeLinewidth;this.skinning=e.skinning;this.morphTargets=e.morphTargets;this.morphNormals=e.morphNormals;return this};function Xu(e){Ki.call(this);this.type="MeshLambertMaterial";this.color=new xi(16777215);this.map=null;this.lightMap=null;this.lightMapIntensity=1;this.aoMap=null;this.aoMapIntensity=1;this.emissive=new xi(0);this.emissiveIntensity=1;this.emissiveMap=null;this.specularMap=null;this.alphaMap=null;this.envMap=null;this.combine=$;this.reflectivity=1;this.refractionRatio=.98;this.wireframe=false;this.wireframeLinewidth=1;this.wireframeLinecap="round";this.wireframeLinejoin="round";this.skinning=false;this.morphTargets=false;this.morphNormals=false;this.setValues(e)}Xu.prototype=Object.create(Ki.prototype);Xu.prototype.constructor=Xu;Xu.prototype.isMeshLambertMaterial=true;Xu.prototype.copy=function(e){Ki.prototype.copy.call(this,e);this.color.copy(e.color);this.map=e.map;this.lightMap=e.lightMap;this.lightMapIntensity=e.lightMapIntensity;this.aoMap=e.aoMap;this.aoMapIntensity=e.aoMapIntensity;this.emissive.copy(e.emissive);this.emissiveMap=e.emissiveMap;this.emissiveIntensity=e.emissiveIntensity;this.specularMap=e.specularMap;this.alphaMap=e.alphaMap;this.envMap=e.envMap;this.combine=e.combine;this.reflectivity=e.reflectivity;this.refractionRatio=e.refractionRatio;this.wireframe=e.wireframe;this.wireframeLinewidth=e.wireframeLinewidth;this.wireframeLinecap=e.wireframeLinecap;this.wireframeLinejoin=e.wireframeLinejoin;this.skinning=e.skinning;this.morphTargets=e.morphTargets;this.morphNormals=e.morphNormals;return this};function Qu(e){Ki.call(this);this.defines={MATCAP:""};this.type="MeshMatcapMaterial";this.color=new xi(16777215);this.matcap=null;this.map=null;this.bumpMap=null;this.bumpScale=1;this.normalMap=null;this.normalMapType=Ut;this.normalScale=new zt(1,1);this.displacementMap=null;this.displacementScale=1;this.displacementBias=0;this.alphaMap=null;this.skinning=false;this.morphTargets=false;this.morphNormals=false;this.lights=false;this.setValues(e)}Qu.prototype=Object.create(Ki.prototype);Qu.prototype.constructor=Qu;Qu.prototype.isMeshMatcapMaterial=true;Qu.prototype.copy=function(e){Ki.prototype.copy.call(this,e);this.defines={MATCAP:""};this.color.copy(e.color);this.matcap=e.matcap;this.map=e.map;this.bumpMap=e.bumpMap;this.bumpScale=e.bumpScale;this.normalMap=e.normalMap;this.normalMapType=e.normalMapType;this.normalScale.copy(e.normalScale);this.displacementMap=e.displacementMap;this.displacementScale=e.displacementScale;this.displacementBias=e.displacementBias;this.alphaMap=e.alphaMap;this.skinning=e.skinning;this.morphTargets=e.morphTargets;this.morphNormals=e.morphNormals;return this};function qu(e){ls.call(this);this.type="LineDashedMaterial";this.scale=1;this.dashSize=3;this.gapSize=1;this.setValues(e)}qu.prototype=Object.create(ls.prototype);qu.prototype.constructor=qu;qu.prototype.isLineDashedMaterial=true;qu.prototype.copy=function(e){ls.prototype.copy.call(this,e);this.scale=e.scale;this.dashSize=e.dashSize;this.gapSize=e.gapSize;return this};var Ju=Object.freeze({ShadowMaterial:zu,SpriteMaterial:ns,RawShaderMaterial:Nu,ShaderMaterial:Zi,PointsMaterial:ps,MeshPhysicalMaterial:Hu,MeshStandardMaterial:ku,MeshPhongMaterial:Vu,MeshToonMaterial:Wu,MeshNormalMaterial:Yu,MeshLambertMaterial:Xu,MeshDepthMaterial:Fo,MeshDistanceMaterial:Uo,MeshBasicMaterial:ta,MeshMatcapMaterial:Qu,LineDashedMaterial:qu,LineBasicMaterial:ls,Material:Ki});var Ku={arraySlice:function(e,t,r){if(Ku.isTypedArray(e)){return new e.constructor(e.subarray(t,r!==undefined?r:e.length))}return e.slice(t,r)},convertArray:function(e,t,r){if(!e||!r&&e.constructor===t)return e;if(typeof t.BYTES_PER_ELEMENT==="number"){return new t(e)}return Array.prototype.slice.call(e)},isTypedArray:function(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)},getKeyframeOrder:function(e){function t(t,r){return e[t]-e[r]}var r=e.length;var n=new Array(r);for(var i=0;i!==r;++i)n[i]=i;n.sort(t);return n},sortedArray:function(e,t,r){var n=e.length;var i=new e.constructor(n);for(var a=0,o=0;o!==n;++a){var s=r[a]*t;for(var u=0;u!==t;++u){i[o++]=e[s+u]}}return i},flattenJSON:function(e,t,r,n){var i=1,a=e[0];while(a!==undefined&&a[n]===undefined){a=e[i++]}if(a===undefined)return;var o=a[n];if(o===undefined)return;if(Array.isArray(o)){do{o=a[n];if(o!==undefined){t.push(a.time);r.push.apply(r,o)}a=e[i++]}while(a!==undefined)}else if(o.toArray!==undefined){do{o=a[n];if(o!==undefined){t.push(a.time);o.toArray(r,r.length)}a=e[i++]}while(a!==undefined)}else{do{o=a[n];if(o!==undefined){t.push(a.time);r.push(o)}a=e[i++]}while(a!==undefined)}}};function Zu(e,t,r,n){this.parameterPositions=e;this._cachedIndex=0;this.resultBuffer=n!==undefined?n:new t.constructor(r);this.sampleValues=t;this.valueSize=r}Object.assign(Zu.prototype,{evaluate:function(e){var t=this.parameterPositions,r=this._cachedIndex,n=t[r],i=t[r-1];e:{t:{var a;r:{n:if(!(e<n)){for(var o=r+2;;){if(n===undefined){if(e<i)break n;r=t.length;this._cachedIndex=r;return this.afterEnd_(r-1,e,i)}if(r===o)break;i=n;n=t[++r];if(e<n){break t}}a=t.length;break r}if(!(e>=i)){var s=t[1];if(e<s){r=2;i=s}for(var o=r-2;;){if(i===undefined){this._cachedIndex=0;return this.beforeStart_(0,e,n)}if(r===o)break;n=i;i=t[--r-1];if(e>=i){break t}}a=r;r=0;break r}break e}while(r<a){var u=r+a>>>1;if(e<t[u]){a=u}else{r=u+1}}n=t[r];i=t[r-1];if(i===undefined){this._cachedIndex=0;return this.beforeStart_(0,e,n)}if(n===undefined){r=t.length;this._cachedIndex=r;return this.afterEnd_(r-1,i,e)}}this._cachedIndex=r;this.intervalChanged_(r,i,n)}return this.interpolate_(r,i,e,n)},settings:null,DefaultSettings_:{},getSettings_:function(){return this.settings||this.DefaultSettings_},copySampleValue_:function(e){var t=this.resultBuffer,r=this.sampleValues,n=this.valueSize,i=e*n;for(var a=0;a!==n;++a){t[a]=r[i+a]}return t},interpolate_:function(){throw new Error("call to abstract method")},intervalChanged_:function(){}});Object.assign(Zu.prototype,{beforeStart_:Zu.prototype.copySampleValue_,afterEnd_:Zu.prototype.copySampleValue_});function $u(e,t,r,n){Zu.call(this,e,t,r,n);this._weightPrev=-0;this._offsetPrev=-0;this._weightNext=-0;this._offsetNext=-0}$u.prototype=Object.assign(Object.create(Zu.prototype),{constructor:$u,DefaultSettings_:{endingStart:wt,endingEnd:wt},intervalChanged_:function(e,t,r){var n=this.parameterPositions,i=e-2,a=e+1,o=n[i],s=n[a];if(o===undefined){switch(this.getSettings_().endingStart){case At:i=e;o=2*t-r;break;case Mt:i=n.length-2;o=t+n[i]-n[i+1];break;default:i=e;o=r}}if(s===undefined){switch(this.getSettings_().endingEnd){case At:a=e;s=2*r-t;break;case Mt:a=1;s=r+n[1]-n[0];break;default:a=e-1;s=t}}var u=(r-t)*.5,c=this.valueSize;this._weightPrev=u/(t-o);this._weightNext=u/(s-r);this._offsetPrev=i*c;this._offsetNext=a*c},interpolate_:function(e,t,r,n){var i=this.resultBuffer,a=this.sampleValues,o=this.valueSize,s=e*o,u=s-o,c=this._offsetPrev,l=this._offsetNext,f=this._weightPrev,h=this._weightNext,d=(r-t)/(n-t),p=d*d,v=p*d;var m=-f*v+2*f*p-f*d;var g=(1+f)*v+(-1.5-2*f)*p+(-.5+f)*d+1;var y=(-1-h)*v+(1.5+h)*p+.5*d;var b=h*v-h*p;for(var x=0;x!==o;++x){i[x]=m*a[c+x]+g*a[u+x]+y*a[s+x]+b*a[l+x]}return i}});function ec(e,t,r,n){Zu.call(this,e,t,r,n)}ec.prototype=Object.assign(Object.create(Zu.prototype),{constructor:ec,interpolate_:function(e,t,r,n){var i=this.resultBuffer,a=this.sampleValues,o=this.valueSize,s=e*o,u=s-o,c=(r-t)/(n-t),l=1-c;for(var f=0;f!==o;++f){i[f]=a[u+f]*l+a[s+f]*c}return i}});function tc(e,t,r,n){Zu.call(this,e,t,r,n)}tc.prototype=Object.assign(Object.create(Zu.prototype),{constructor:tc,interpolate_:function(e){return this.copySampleValue_(e-1)}});function rc(e,t,r,n){if(e===undefined)throw new Error("THREE.KeyframeTrack: track name is undefined");if(t===undefined||t.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e;this.times=Ku.convertArray(t,this.TimeBufferType);this.values=Ku.convertArray(r,this.ValueBufferType);this.setInterpolation(n||this.DefaultInterpolation)}Object.assign(rc,{toJSON:function(e){var t=e.constructor;var r;if(t.toJSON!==undefined){r=t.toJSON(e)}else{r={name:e.name,times:Ku.convertArray(e.times,Array),values:Ku.convertArray(e.values,Array)};var n=e.getInterpolation();if(n!==e.DefaultInterpolation){r.interpolation=n}}r.type=e.ValueTypeName;return r}});Object.assign(rc.prototype,{constructor:rc,TimeBufferType:Float32Array,ValueBufferType:Float32Array,DefaultInterpolation:bt,InterpolantFactoryMethodDiscrete:function(e){return new tc(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodLinear:function(e){return new ec(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodSmooth:function(e){return new $u(this.times,this.values,this.getValueSize(),e)},setInterpolation:function(e){var t;switch(e){case yt:t=this.InterpolantFactoryMethodDiscrete;break;case bt:t=this.InterpolantFactoryMethodLinear;break;case xt:t=this.InterpolantFactoryMethodSmooth;break}if(t===undefined){var r="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===undefined){if(e!==this.DefaultInterpolation){this.setInterpolation(this.DefaultInterpolation)}else{throw new Error(r)}}console.warn("THREE.KeyframeTrack:",r);return this}this.createInterpolant=t;return this},getInterpolation:function(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return yt;case this.InterpolantFactoryMethodLinear:return bt;case this.InterpolantFactoryMethodSmooth:return xt}},getValueSize:function(){return this.values.length/this.times.length},shift:function(e){if(e!==0){var t=this.times;for(var r=0,n=t.length;r!==n;++r){t[r]+=e}}return this},scale:function(e){if(e!==1){var t=this.times;for(var r=0,n=t.length;r!==n;++r){t[r]*=e}}return this},trim:function(e,t){var r=this.times,n=r.length,i=0,a=n-1;while(i!==n&&r[i]<e){++i}while(a!==-1&&r[a]>t){--a}++a;if(i!==0||a!==n){if(i>=a)a=Math.max(a,1),i=a-1;var o=this.getValueSize();this.times=Ku.arraySlice(r,i,a);this.values=Ku.arraySlice(this.values,i*o,a*o)}return this},validate:function(){var e=true;var t=this.getValueSize();if(t-Math.floor(t)!==0){console.error("THREE.KeyframeTrack: Invalid value size in track.",this);e=false}var r=this.times,n=this.values,i=r.length;if(i===0){console.error("THREE.KeyframeTrack: Track is empty.",this);e=false}var a=null;for(var o=0;o!==i;o++){var s=r[o];if(typeof s==="number"&&isNaN(s)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,o,s);e=false;break}if(a!==null&&a>s){console.error("THREE.KeyframeTrack: Out of order keys.",this,o,s,a);e=false;break}a=s}if(n!==undefined){if(Ku.isTypedArray(n)){for(var o=0,u=n.length;o!==u;++o){var c=n[o];if(isNaN(c)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,o,c);e=false;break}}}}return e},optimize:function(){var e=this.times,t=this.values,r=this.getValueSize(),n=this.getInterpolation()===xt,i=1,a=e.length-1;for(var o=1;o<a;++o){var s=false;var u=e[o];var c=e[o+1];if(u!==c&&(o!==1||u!==u[0])){if(!n){var l=o*r,f=l-r,h=l+r;for(var d=0;d!==r;++d){var p=t[l+d];if(p!==t[f+d]||p!==t[h+d]){s=true;break}}}else{s=true}}if(s){if(o!==i){e[i]=e[o];var v=o*r,m=i*r;for(var d=0;d!==r;++d){t[m+d]=t[v+d]}}++i}}if(a>0){e[i]=e[a];for(var v=a*r,m=i*r,d=0;d!==r;++d){t[m+d]=t[v+d]}++i}if(i!==e.length){this.times=Ku.arraySlice(e,0,i);this.values=Ku.arraySlice(t,0,i*r)}return this}});function nc(e,t,r){rc.call(this,e,t,r)}nc.prototype=Object.assign(Object.create(rc.prototype),{constructor:nc,ValueTypeName:"bool",ValueBufferType:Array,DefaultInterpolation:yt,InterpolantFactoryMethodLinear:undefined,InterpolantFactoryMethodSmooth:undefined});function ic(e,t,r,n){rc.call(this,e,t,r,n)}ic.prototype=Object.assign(Object.create(rc.prototype),{constructor:ic,ValueTypeName:"color"});function ac(e,t,r,n){rc.call(this,e,t,r,n)}ac.prototype=Object.assign(Object.create(rc.prototype),{constructor:ac,ValueTypeName:"number"});function oc(e,t,r,n){Zu.call(this,e,t,r,n)}oc.prototype=Object.assign(Object.create(Zu.prototype),{constructor:oc,interpolate_:function(e,t,r,n){var i=this.resultBuffer,a=this.sampleValues,o=this.valueSize,s=e*o,u=(r-t)/(n-t);for(var c=s+o;s!==c;s+=4){kt.slerpFlat(i,0,a,s-o,a,s,u)}return i}});function sc(e,t,r,n){rc.call(this,e,t,r,n)}sc.prototype=Object.assign(Object.create(rc.prototype),{constructor:sc,ValueTypeName:"quaternion",DefaultInterpolation:bt,InterpolantFactoryMethodLinear:function(e){return new oc(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodSmooth:undefined});function uc(e,t,r,n){rc.call(this,e,t,r,n)}uc.prototype=Object.assign(Object.create(rc.prototype),{constructor:uc,ValueTypeName:"string",ValueBufferType:Array,DefaultInterpolation:yt,InterpolantFactoryMethodLinear:undefined,InterpolantFactoryMethodSmooth:undefined});function cc(e,t,r,n){rc.call(this,e,t,r,n)}cc.prototype=Object.assign(Object.create(rc.prototype),{constructor:cc,ValueTypeName:"vector"});function lc(e,t,r){this.name=e;this.tracks=r;this.duration=t!==undefined?t:-1;this.uuid=jt.generateUUID();if(this.duration<0){this.resetDuration()}}function fc(e){switch(e.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return ac;case"vector":case"vector2":case"vector3":case"vector4":return cc;case"color":return ic;case"quaternion":return sc;case"bool":case"boolean":return nc;case"string":return uc}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+e)}function hc(e){if(e.type===undefined){throw new Error("THREE.KeyframeTrack: track type undefined, can not parse")}var t=fc(e.type);if(e.times===undefined){var r=[],n=[];Ku.flattenJSON(e.keys,r,n,"value");e.times=r;e.values=n}if(t.parse!==undefined){return t.parse(e)}else{return new t(e.name,e.times,e.values,e.interpolation)}}Object.assign(lc,{parse:function(e){var t=[],r=e.tracks,n=1/(e.fps||1);for(var i=0,a=r.length;i!==a;++i){t.push(hc(r[i]).scale(n))}return new lc(e.name,e.duration,t)},toJSON:function(e){var t=[],r=e.tracks;var n={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid};for(var i=0,a=r.length;i!==a;++i){t.push(rc.toJSON(r[i]))}return n},CreateFromMorphTargetSequence:function(e,t,r,n){var i=t.length;var a=[];for(var o=0;o<i;o++){var s=[];var u=[];s.push((o+i-1)%i,o,(o+1)%i);u.push(0,1,0);var c=Ku.getKeyframeOrder(s);s=Ku.sortedArray(s,1,c);u=Ku.sortedArray(u,1,c);if(!n&&s[0]===0){s.push(i);u.push(u[0])}a.push(new ac(".morphTargetInfluences["+t[o].name+"]",s,u).scale(1/r))}return new lc(e,-1,a)},findByName:function(e,t){var r=e;if(!Array.isArray(e)){var n=e;r=n.geometry&&n.geometry.animations||n.animations}for(var i=0;i<r.length;i++){if(r[i].name===t){return r[i]}}return null},CreateClipsFromMorphTargetSequences:function(e,t,r){var n={};var i=/^([\w-]*?)([\d]+)$/;for(var a=0,o=e.length;a<o;a++){var s=e[a];var u=s.name.match(i);if(u&&u.length>1){var c=u[1];var l=n[c];if(!l){n[c]=l=[]}l.push(s)}}var f=[];for(var c in n){f.push(lc.CreateFromMorphTargetSequence(c,n[c],t,r))}return f},parseAnimation:function(e,t){if(!e){console.error("THREE.AnimationClip: No animation in JSONLoader data.");return null}var r=function(e,t,r,n,i){if(r.length!==0){var a=[];var o=[];Ku.flattenJSON(r,a,o,n);if(a.length!==0){i.push(new e(t,a,o))}}};var n=[];var i=e.name||"default";var a=e.length||-1;var o=e.fps||30;var s=e.hierarchy||[];for(var u=0;u<s.length;u++){var c=s[u].keys;if(!c||c.length===0)continue;if(c[0].morphTargets){var l={};for(var f=0;f<c.length;f++){if(c[f].morphTargets){for(var h=0;h<c[f].morphTargets.length;h++){l[c[f].morphTargets[h]]=-1}}}for(var d in l){var p=[];var v=[];for(var h=0;h!==c[f].morphTargets.length;++h){var m=c[f];p.push(m.time);v.push(m.morphTarget===d?1:0)}n.push(new ac(".morphTargetInfluence["+d+"]",p,v))}a=l.length*(o||1)}else{var g=".bones["+t[u].name+"]";r(cc,g+".position",c,"pos",n);r(sc,g+".quaternion",c,"rot",n);r(cc,g+".scale",c,"scl",n)}}if(n.length===0){return null}var y=new lc(i,a,n);return y}});Object.assign(lc.prototype,{resetDuration:function(){var e=this.tracks,t=0;for(var r=0,n=e.length;r!==n;++r){var i=this.tracks[r];t=Math.max(t,i.times[i.times.length-1])}this.duration=t;return this},trim:function(){for(var e=0;e<this.tracks.length;e++){this.tracks[e].trim(0,this.duration)}return this},validate:function(){var e=true;for(var t=0;t<this.tracks.length;t++){e=e&&this.tracks[t].validate()}return e},optimize:function(){for(var e=0;e<this.tracks.length;e++){this.tracks[e].optimize()}return this}});var dc={enabled:false,files:{},add:function(e,t){if(this.enabled===false)return;this.files[e]=t},get:function(e){if(this.enabled===false)return;return this.files[e]},remove:function(e){delete this.files[e]},clear:function(){this.files={}}};function pc(e,t,r){var n=this;var i=false;var a=0;var o=0;var s=undefined;this.onStart=undefined;this.onLoad=e;this.onProgress=t;this.onError=r;this.itemStart=function(e){o++;if(i===false){if(n.onStart!==undefined){n.onStart(e,a,o)}}i=true};this.itemEnd=function(e){a++;if(n.onProgress!==undefined){n.onProgress(e,a,o)}if(a===o){i=false;if(n.onLoad!==undefined){n.onLoad()}}};this.itemError=function(e){if(n.onError!==undefined){n.onError(e)}};this.resolveURL=function(e){if(s){return s(e)}return e};this.setURLModifier=function(e){s=e;return this}}var vc=new pc;var mc={};function gc(e){this.manager=e!==undefined?e:vc}Object.assign(gc.prototype,{load:function(e,t,r,n){if(e===undefined)e="";if(this.path!==undefined)e=this.path+e;e=this.manager.resolveURL(e);var i=this;var a=dc.get(e);if(a!==undefined){i.manager.itemStart(e);setTimeout((function(){if(t)t(a);i.manager.itemEnd(e)}),0);return a}if(mc[e]!==undefined){mc[e].push({onLoad:t,onProgress:r,onError:n});return}var o=/^data:(.*?)(;base64)?,(.*)$/;var s=e.match(o);if(s){var u=s[1];var c=!!s[2];var l=s[3];l=decodeURIComponent(l);if(c)l=atob(l);try{var f;var h=(this.responseType||"").toLowerCase();switch(h){case"arraybuffer":case"blob":var d=new Uint8Array(l.length);for(var p=0;p<l.length;p++){d[p]=l.charCodeAt(p)}if(h==="blob"){f=new Blob([d.buffer],{type:u})}else{f=d.buffer}break;case"document":var v=new DOMParser;f=v.parseFromString(l,u);break;case"json":f=JSON.parse(l);break;default:f=l;break}setTimeout((function(){if(t)t(f);i.manager.itemEnd(e)}),0)}catch(t){setTimeout((function(){if(n)n(t);i.manager.itemError(e);i.manager.itemEnd(e)}),0)}}else{mc[e]=[];mc[e].push({onLoad:t,onProgress:r,onError:n});var m=new XMLHttpRequest;m.open("GET",e,true);m.addEventListener("load",(function(t){var r=this.response;dc.add(e,r);var n=mc[e];delete mc[e];if(this.status===200||this.status===0){if(this.status===0)console.warn("THREE.FileLoader: HTTP Status 0 received.");for(var a=0,o=n.length;a<o;a++){var s=n[a];if(s.onLoad)s.onLoad(r)}i.manager.itemEnd(e)}else{for(var a=0,o=n.length;a<o;a++){var s=n[a];if(s.onError)s.onError(t)}i.manager.itemError(e);i.manager.itemEnd(e)}}),false);m.addEventListener("progress",(function(t){var r=mc[e];for(var n=0,i=r.length;n<i;n++){var a=r[n];if(a.onProgress)a.onProgress(t)}}),false);m.addEventListener("error",(function(t){var r=mc[e];delete mc[e];for(var n=0,a=r.length;n<a;n++){var o=r[n];if(o.onError)o.onError(t)}i.manager.itemError(e);i.manager.itemEnd(e)}),false);m.addEventListener("abort",(function(t){var r=mc[e];delete mc[e];for(var n=0,a=r.length;n<a;n++){var o=r[n];if(o.onError)o.onError(t)}i.manager.itemError(e);i.manager.itemEnd(e)}),false);if(this.responseType!==undefined)m.responseType=this.responseType;if(this.withCredentials!==undefined)m.withCredentials=this.withCredentials;if(m.overrideMimeType)m.overrideMimeType(this.mimeType!==undefined?this.mimeType:"text/plain");for(var g in this.requestHeader){m.setRequestHeader(g,this.requestHeader[g])}m.send(null)}i.manager.itemStart(e);return m},setPath:function(e){this.path=e;return this},setResponseType:function(e){this.responseType=e;return this},setWithCredentials:function(e){this.withCredentials=e;return this},setMimeType:function(e){this.mimeType=e;return this},setRequestHeader:function(e){this.requestHeader=e;return this}});function yc(e){this.manager=e!==undefined?e:vc}Object.assign(yc.prototype,{load:function(e,t,r,n){var i=this;var a=new gc(i.manager);a.setPath(i.path);a.load(e,(function(e){t(i.parse(JSON.parse(e)))}),r,n)},parse:function(e,t){var r=[];for(var n=0;n<e.length;n++){var i=lc.parse(e[n]);r.push(i)}t(r)},setPath:function(e){this.path=e;return this}});function bc(e){this.manager=e!==undefined?e:vc;this._parser=null}Object.assign(bc.prototype,{load:function(e,t,r,n){var i=this;var a=[];var o=new gs;o.image=a;var s=new gc(this.manager);s.setPath(this.path);s.setResponseType("arraybuffer");function u(u){s.load(e[u],(function(e){var r=i._parser(e,true);a[u]={width:r.width,height:r.height,format:r.format,mipmaps:r.mipmaps};c+=1;if(c===6){if(r.mipmapCount===1)o.minFilter=Ae;o.format=r.format;o.needsUpdate=true;if(t)t(o)}}),r,n)}if(Array.isArray(e)){var c=0;for(var l=0,f=e.length;l<f;++l){u(l)}}else{s.load(e,(function(e){var r=i._parser(e,true);if(r.isCubemap){var n=r.mipmaps.length/r.mipmapCount;for(var s=0;s<n;s++){a[s]={mipmaps:[]};for(var u=0;u<r.mipmapCount;u++){a[s].mipmaps.push(r.mipmaps[s*r.mipmapCount+u]);a[s].format=r.format;a[s].width=r.width;a[s].height=r.height}}}else{o.image.width=r.width;o.image.height=r.height;o.mipmaps=r.mipmaps}if(r.mipmapCount===1){o.minFilter=Ae}o.format=r.format;o.needsUpdate=true;if(t)t(o)}),r,n)}return o},setPath:function(e){this.path=e;return this}});function xc(e){this.manager=e!==undefined?e:vc;this._parser=null}Object.assign(xc.prototype,{load:function(e,t,r,n){var i=this;var a=new Zt;var o=new gc(this.manager);o.setResponseType("arraybuffer");o.setPath(this.path);o.load(e,(function(e){var r=i._parser(e);if(!r)return;if(r.image!==undefined){a.image=r.image}else if(r.data!==undefined){a.image.width=r.width;a.image.height=r.height;a.image.data=r.data}a.wrapS=r.wrapS!==undefined?r.wrapS:ge;a.wrapT=r.wrapT!==undefined?r.wrapT:ge;a.magFilter=r.magFilter!==undefined?r.magFilter:Ae;a.minFilter=r.minFilter!==undefined?r.minFilter:Ee;a.anisotropy=r.anisotropy!==undefined?r.anisotropy:1;if(r.format!==undefined){a.format=r.format}if(r.type!==undefined){a.type=r.type}if(r.mipmaps!==undefined){a.mipmaps=r.mipmaps}if(r.mipmapCount===1){a.minFilter=Ae}a.needsUpdate=true;if(t)t(a,r)}),r,n);return a},setPath:function(e){this.path=e;return this}});function wc(e){this.manager=e!==undefined?e:vc}Object.assign(wc.prototype,{crossOrigin:"anonymous",load:function(e,t,r,n){if(e===undefined)e="";if(this.path!==undefined)e=this.path+e;e=this.manager.resolveURL(e);var i=this;var a=dc.get(e);if(a!==undefined){i.manager.itemStart(e);setTimeout((function(){if(t)t(a);i.manager.itemEnd(e)}),0);return a}var o=document.createElementNS("http://www.w3.org/1999/xhtml","img");function s(){o.removeEventListener("load",s,false);o.removeEventListener("error",u,false);dc.add(e,this);if(t)t(this);i.manager.itemEnd(e)}function u(t){o.removeEventListener("load",s,false);o.removeEventListener("error",u,false);if(n)n(t);i.manager.itemError(e);i.manager.itemEnd(e)}o.addEventListener("load",s,false);o.addEventListener("error",u,false);if(e.substr(0,5)!=="data:"){if(this.crossOrigin!==undefined)o.crossOrigin=this.crossOrigin}i.manager.itemStart(e);o.src=e;return o},setCrossOrigin:function(e){this.crossOrigin=e;return this},setPath:function(e){this.path=e;return this}});function Ac(e){this.manager=e!==undefined?e:vc}Object.assign(Ac.prototype,{crossOrigin:"anonymous",load:function(e,t,r,n){var i=new pa;var a=new wc(this.manager);a.setCrossOrigin(this.crossOrigin);a.setPath(this.path);var o=0;function s(r){a.load(e[r],(function(e){i.images[r]=e;o++;if(o===6){i.needsUpdate=true;if(t)t(i)}}),undefined,n)}for(var u=0;u<e.length;++u){s(u)}return i},setCrossOrigin:function(e){this.crossOrigin=e;return this},setPath:function(e){this.path=e;return this}});function Mc(e){this.manager=e!==undefined?e:vc}Object.assign(Mc.prototype,{crossOrigin:"anonymous",load:function(e,t,r,n){var i=new Qt;var a=new wc(this.manager);a.setCrossOrigin(this.crossOrigin);a.setPath(this.path);a.load(e,(function(r){i.image=r;var n=e.search(/\.jpe?g($|\?)/i)>0||e.search(/^data\:image\/jpeg/)===0;i.format=n?Ge:je;i.needsUpdate=true;if(t!==undefined){t(i)}}),r,n);return i},setCrossOrigin:function(e){this.crossOrigin=e;return this},setPath:function(e){this.path=e;return this}});function Ec(){this.type="Curve";this.arcLengthDivisions=200}Object.assign(Ec.prototype,{getPoint:function(){console.warn("THREE.Curve: .getPoint() not implemented.");return null},getPointAt:function(e,t){var r=this.getUtoTmapping(e);return this.getPoint(r,t)},getPoints:function(e){if(e===undefined)e=5;var t=[];for(var r=0;r<=e;r++){t.push(this.getPoint(r/e))}return t},getSpacedPoints:function(e){if(e===undefined)e=5;var t=[];for(var r=0;r<=e;r++){t.push(this.getPointAt(r/e))}return t},getLength:function(){var e=this.getLengths();return e[e.length-1]},getLengths:function(e){if(e===undefined)e=this.arcLengthDivisions;if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate){return this.cacheArcLengths}this.needsUpdate=false;var t=[];var r,n=this.getPoint(0);var i,a=0;t.push(0);for(i=1;i<=e;i++){r=this.getPoint(i/e);a+=r.distanceTo(n);t.push(a);n=r}this.cacheArcLengths=t;return t},updateArcLengths:function(){this.needsUpdate=true;this.getLengths()},getUtoTmapping:function(e,t){var r=this.getLengths();var n=0,i=r.length;var a;if(t){a=t}else{a=e*r[i-1]}var o=0,s=i-1,u;while(o<=s){n=Math.floor(o+(s-o)/2);u=r[n]-a;if(u<0){o=n+1}else if(u>0){s=n-1}else{s=n;break}}n=s;if(r[n]===a){return n/(i-1)}var c=r[n];var l=r[n+1];var f=l-c;var h=(a-c)/f;var d=(n+h)/(i-1);return d},getTangent:function(e){var t=1e-4;var r=e-t;var n=e+t;if(r<0)r=0;if(n>1)n=1;var i=this.getPoint(r);var a=this.getPoint(n);var o=a.clone().sub(i);return o.normalize()},getTangentAt:function(e){var t=this.getUtoTmapping(e);return this.getTangent(t)},computeFrenetFrames:function(e,t){var r=new Ht;var n=[];var i=[];var a=[];var o=new Ht;var s=new Nt;var u,c,l;for(u=0;u<=e;u++){c=u/e;n[u]=this.getTangentAt(c);n[u].normalize()}i[0]=new Ht;a[0]=new Ht;var f=Number.MAX_VALUE;var h=Math.abs(n[0].x);var d=Math.abs(n[0].y);var p=Math.abs(n[0].z);if(h<=f){f=h;r.set(1,0,0)}if(d<=f){f=d;r.set(0,1,0)}if(p<=f){r.set(0,0,1)}o.crossVectors(n[0],r).normalize();i[0].crossVectors(n[0],o);a[0].crossVectors(n[0],i[0]);for(u=1;u<=e;u++){i[u]=i[u-1].clone();a[u]=a[u-1].clone();o.crossVectors(n[u-1],n[u]);if(o.length()>Number.EPSILON){o.normalize();l=Math.acos(jt.clamp(n[u-1].dot(n[u]),-1,1));i[u].applyMatrix4(s.makeRotationAxis(o,l))}a[u].crossVectors(n[u],i[u])}if(t===true){l=Math.acos(jt.clamp(i[0].dot(i[e]),-1,1));l/=e;if(n[0].dot(o.crossVectors(i[0],i[e]))>0){l=-l}for(u=1;u<=e;u++){i[u].applyMatrix4(s.makeRotationAxis(n[u],l*u));a[u].crossVectors(n[u],i[u])}}return{tangents:n,normals:i,binormals:a}},clone:function(){return(new this.constructor).copy(this)},copy:function(e){this.arcLengthDivisions=e.arcLengthDivisions;return this},toJSON:function(){var e={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};e.arcLengthDivisions=this.arcLengthDivisions;e.type=this.type;return e},fromJSON:function(e){this.arcLengthDivisions=e.arcLengthDivisions;return this}});function Sc(e,t,r,n,i,a,o,s){Ec.call(this);this.type="EllipseCurve";this.aX=e||0;this.aY=t||0;this.xRadius=r||1;this.yRadius=n||1;this.aStartAngle=i||0;this.aEndAngle=a||2*Math.PI;this.aClockwise=o||false;this.aRotation=s||0}Sc.prototype=Object.create(Ec.prototype);Sc.prototype.constructor=Sc;Sc.prototype.isEllipseCurve=true;Sc.prototype.getPoint=function(e,t){var r=t||new zt;var n=Math.PI*2;var i=this.aEndAngle-this.aStartAngle;var a=Math.abs(i)<Number.EPSILON;while(i<0)i+=n;while(i>n)i-=n;if(i<Number.EPSILON){if(a){i=0}else{i=n}}if(this.aClockwise===true&&!a){if(i===n){i=-n}else{i=i-n}}var o=this.aStartAngle+e*i;var s=this.aX+this.xRadius*Math.cos(o);var u=this.aY+this.yRadius*Math.sin(o);if(this.aRotation!==0){var c=Math.cos(this.aRotation);var l=Math.sin(this.aRotation);var f=s-this.aX;var h=u-this.aY;s=f*c-h*l+this.aX;u=f*l+h*c+this.aY}return r.set(s,u)};Sc.prototype.copy=function(e){Ec.prototype.copy.call(this,e);this.aX=e.aX;this.aY=e.aY;this.xRadius=e.xRadius;this.yRadius=e.yRadius;this.aStartAngle=e.aStartAngle;this.aEndAngle=e.aEndAngle;this.aClockwise=e.aClockwise;this.aRotation=e.aRotation;return this};Sc.prototype.toJSON=function(){var e=Ec.prototype.toJSON.call(this);e.aX=this.aX;e.aY=this.aY;e.xRadius=this.xRadius;e.yRadius=this.yRadius;e.aStartAngle=this.aStartAngle;e.aEndAngle=this.aEndAngle;e.aClockwise=this.aClockwise;e.aRotation=this.aRotation;return e};Sc.prototype.fromJSON=function(e){Ec.prototype.fromJSON.call(this,e);this.aX=e.aX;this.aY=e.aY;this.xRadius=e.xRadius;this.yRadius=e.yRadius;this.aStartAngle=e.aStartAngle;this.aEndAngle=e.aEndAngle;this.aClockwise=e.aClockwise;this.aRotation=e.aRotation;return this};function Tc(e,t,r,n,i,a){Sc.call(this,e,t,r,r,n,i,a);this.type="ArcCurve"}Tc.prototype=Object.create(Sc.prototype);Tc.prototype.constructor=Tc;Tc.prototype.isArcCurve=true;function _c(){var e=0,t=0,r=0,n=0;function i(i,a,o,s){e=i;t=o;r=-3*i+3*a-2*o-s;n=2*i-2*a+o+s}return{initCatmullRom:function(e,t,r,n,a){i(t,r,a*(r-e),a*(n-t))},initNonuniformCatmullRom:function(e,t,r,n,a,o,s){var u=(t-e)/a-(r-e)/(a+o)+(r-t)/o;var c=(r-t)/o-(n-t)/(o+s)+(n-r)/s;u*=o;c*=o;i(t,r,u,c)},calc:function(i){var a=i*i;var o=a*i;return e+t*i+r*a+n*o}}}var Pc=new Ht;var Cc=new _c,Oc=new _c,Lc=new _c;function Rc(e,t,r,n){Ec.call(this);this.type="CatmullRomCurve3";this.points=e||[];this.closed=t||false;this.curveType=r||"centripetal";this.tension=n||.5}Rc.prototype=Object.create(Ec.prototype);Rc.prototype.constructor=Rc;Rc.prototype.isCatmullRomCurve3=true;Rc.prototype.getPoint=function(e,t){var r=t||new Ht;var n=this.points;var i=n.length;var a=(i-(this.closed?0:1))*e;var o=Math.floor(a);var s=a-o;if(this.closed){o+=o>0?0:(Math.floor(Math.abs(o)/i)+1)*i}else if(s===0&&o===i-1){o=i-2;s=1}var u,c,l,f;if(this.closed||o>0){u=n[(o-1)%i]}else{Pc.subVectors(n[0],n[1]).add(n[0]);u=Pc}c=n[o%i];l=n[(o+1)%i];if(this.closed||o+2<i){f=n[(o+2)%i]}else{Pc.subVectors(n[i-1],n[i-2]).add(n[i-1]);f=Pc}if(this.curveType==="centripetal"||this.curveType==="chordal"){var h=this.curveType==="chordal"?.5:.25;var d=Math.pow(u.distanceToSquared(c),h);var p=Math.pow(c.distanceToSquared(l),h);var v=Math.pow(l.distanceToSquared(f),h);if(p<1e-4)p=1;if(d<1e-4)d=p;if(v<1e-4)v=p;Cc.initNonuniformCatmullRom(u.x,c.x,l.x,f.x,d,p,v);Oc.initNonuniformCatmullRom(u.y,c.y,l.y,f.y,d,p,v);Lc.initNonuniformCatmullRom(u.z,c.z,l.z,f.z,d,p,v)}else if(this.curveType==="catmullrom"){Cc.initCatmullRom(u.x,c.x,l.x,f.x,this.tension);Oc.initCatmullRom(u.y,c.y,l.y,f.y,this.tension);Lc.initCatmullRom(u.z,c.z,l.z,f.z,this.tension)}r.set(Cc.calc(s),Oc.calc(s),Lc.calc(s));return r};Rc.prototype.copy=function(e){Ec.prototype.copy.call(this,e);this.points=[];for(var t=0,r=e.points.length;t<r;t++){var n=e.points[t];this.points.push(n.clone())}this.closed=e.closed;this.curveType=e.curveType;this.tension=e.tension;return this};Rc.prototype.toJSON=function(){var e=Ec.prototype.toJSON.call(this);e.points=[];for(var t=0,r=this.points.length;t<r;t++){var n=this.points[t];e.points.push(n.toArray())}e.closed=this.closed;e.curveType=this.curveType;e.tension=this.tension;return e};Rc.prototype.fromJSON=function(e){Ec.prototype.fromJSON.call(this,e);this.points=[];for(var t=0,r=e.points.length;t<r;t++){var n=e.points[t];this.points.push((new Ht).fromArray(n))}this.closed=e.closed;this.curveType=e.curveType;this.tension=e.tension;return this};function Bc(e,t,r,n,i){var a=(n-t)*.5;var o=(i-r)*.5;var s=e*e;var u=e*s;return(2*r-2*n+a+o)*u+(-3*r+3*n-2*a-o)*s+a*e+r}function Dc(e,t){var r=1-e;return r*r*t}function Ic(e,t){return 2*(1-e)*e*t}function Fc(e,t){return e*e*t}function Uc(e,t,r,n){return Dc(e,t)+Ic(e,r)+Fc(e,n)}function Gc(e,t){var r=1-e;return r*r*r*t}function jc(e,t){var r=1-e;return 3*r*r*e*t}function zc(e,t){return 3*(1-e)*e*e*t}function Nc(e,t){return e*e*e*t}function kc(e,t,r,n,i){return Gc(e,t)+jc(e,r)+zc(e,n)+Nc(e,i)}function Hc(e,t,r,n){Ec.call(this);this.type="CubicBezierCurve";this.v0=e||new zt;this.v1=t||new zt;this.v2=r||new zt;this.v3=n||new zt}Hc.prototype=Object.create(Ec.prototype);Hc.prototype.constructor=Hc;Hc.prototype.isCubicBezierCurve=true;Hc.prototype.getPoint=function(e,t){var r=t||new zt;var n=this.v0,i=this.v1,a=this.v2,o=this.v3;r.set(kc(e,n.x,i.x,a.x,o.x),kc(e,n.y,i.y,a.y,o.y));return r};Hc.prototype.copy=function(e){Ec.prototype.copy.call(this,e);this.v0.copy(e.v0);this.v1.copy(e.v1);this.v2.copy(e.v2);this.v3.copy(e.v3);return this};Hc.prototype.toJSON=function(){var e=Ec.prototype.toJSON.call(this);e.v0=this.v0.toArray();e.v1=this.v1.toArray();e.v2=this.v2.toArray();e.v3=this.v3.toArray();return e};Hc.prototype.fromJSON=function(e){Ec.prototype.fromJSON.call(this,e);this.v0.fromArray(e.v0);this.v1.fromArray(e.v1);this.v2.fromArray(e.v2);this.v3.fromArray(e.v3);return this};function Vc(e,t,r,n){Ec.call(this);this.type="CubicBezierCurve3";this.v0=e||new Ht;this.v1=t||new Ht;this.v2=r||new Ht;this.v3=n||new Ht}Vc.prototype=Object.create(Ec.prototype);Vc.prototype.constructor=Vc;Vc.prototype.isCubicBezierCurve3=true;Vc.prototype.getPoint=function(e,t){var r=t||new Ht;var n=this.v0,i=this.v1,a=this.v2,o=this.v3;r.set(kc(e,n.x,i.x,a.x,o.x),kc(e,n.y,i.y,a.y,o.y),kc(e,n.z,i.z,a.z,o.z));return r};Vc.prototype.copy=function(e){Ec.prototype.copy.call(this,e);this.v0.copy(e.v0);this.v1.copy(e.v1);this.v2.copy(e.v2);this.v3.copy(e.v3);return this};Vc.prototype.toJSON=function(){var e=Ec.prototype.toJSON.call(this);e.v0=this.v0.toArray();e.v1=this.v1.toArray();e.v2=this.v2.toArray();e.v3=this.v3.toArray();return e};Vc.prototype.fromJSON=function(e){Ec.prototype.fromJSON.call(this,e);this.v0.fromArray(e.v0);this.v1.fromArray(e.v1);this.v2.fromArray(e.v2);this.v3.fromArray(e.v3);return this};function Wc(e,t){Ec.call(this);this.type="LineCurve";this.v1=e||new zt;this.v2=t||new zt}Wc.prototype=Object.create(Ec.prototype);Wc.prototype.constructor=Wc;Wc.prototype.isLineCurve=true;Wc.prototype.getPoint=function(e,t){var r=t||new zt;if(e===1){r.copy(this.v2)}else{r.copy(this.v2).sub(this.v1);r.multiplyScalar(e).add(this.v1)}return r};Wc.prototype.getPointAt=function(e,t){return this.getPoint(e,t)};Wc.prototype.getTangent=function(){var e=this.v2.clone().sub(this.v1);return e.normalize()};Wc.prototype.copy=function(e){Ec.prototype.copy.call(this,e);this.v1.copy(e.v1);this.v2.copy(e.v2);return this};Wc.prototype.toJSON=function(){var e=Ec.prototype.toJSON.call(this);e.v1=this.v1.toArray();e.v2=this.v2.toArray();return e};Wc.prototype.fromJSON=function(e){Ec.prototype.fromJSON.call(this,e);this.v1.fromArray(e.v1);this.v2.fromArray(e.v2);return this};function Yc(e,t){Ec.call(this);this.type="LineCurve3";this.v1=e||new Ht;this.v2=t||new Ht}Yc.prototype=Object.create(Ec.prototype);Yc.prototype.constructor=Yc;Yc.prototype.isLineCurve3=true;Yc.prototype.getPoint=function(e,t){var r=t||new Ht;if(e===1){r.copy(this.v2)}else{r.copy(this.v2).sub(this.v1);r.multiplyScalar(e).add(this.v1)}return r};Yc.prototype.getPointAt=function(e,t){return this.getPoint(e,t)};Yc.prototype.copy=function(e){Ec.prototype.copy.call(this,e);this.v1.copy(e.v1);this.v2.copy(e.v2);return this};Yc.prototype.toJSON=function(){var e=Ec.prototype.toJSON.call(this);e.v1=this.v1.toArray();e.v2=this.v2.toArray();return e};Yc.prototype.fromJSON=function(e){Ec.prototype.fromJSON.call(this,e);this.v1.fromArray(e.v1);this.v2.fromArray(e.v2);return this};function Xc(e,t,r){Ec.call(this);this.type="QuadraticBezierCurve";this.v0=e||new zt;this.v1=t||new zt;this.v2=r||new zt}Xc.prototype=Object.create(Ec.prototype);Xc.prototype.constructor=Xc;Xc.prototype.isQuadraticBezierCurve=true;Xc.prototype.getPoint=function(e,t){var r=t||new zt;var n=this.v0,i=this.v1,a=this.v2;r.set(Uc(e,n.x,i.x,a.x),Uc(e,n.y,i.y,a.y));return r};Xc.prototype.copy=function(e){Ec.prototype.copy.call(this,e);this.v0.copy(e.v0);this.v1.copy(e.v1);this.v2.copy(e.v2);return this};Xc.prototype.toJSON=function(){var e=Ec.prototype.toJSON.call(this);e.v0=this.v0.toArray();e.v1=this.v1.toArray();e.v2=this.v2.toArray();return e};Xc.prototype.fromJSON=function(e){Ec.prototype.fromJSON.call(this,e);this.v0.fromArray(e.v0);this.v1.fromArray(e.v1);this.v2.fromArray(e.v2);return this};function Qc(e,t,r){Ec.call(this);this.type="QuadraticBezierCurve3";this.v0=e||new Ht;this.v1=t||new Ht;this.v2=r||new Ht}Qc.prototype=Object.create(Ec.prototype);Qc.prototype.constructor=Qc;Qc.prototype.isQuadraticBezierCurve3=true;Qc.prototype.getPoint=function(e,t){var r=t||new Ht;var n=this.v0,i=this.v1,a=this.v2;r.set(Uc(e,n.x,i.x,a.x),Uc(e,n.y,i.y,a.y),Uc(e,n.z,i.z,a.z));return r};Qc.prototype.copy=function(e){Ec.prototype.copy.call(this,e);this.v0.copy(e.v0);this.v1.copy(e.v1);this.v2.copy(e.v2);return this};Qc.prototype.toJSON=function(){var e=Ec.prototype.toJSON.call(this);e.v0=this.v0.toArray();e.v1=this.v1.toArray();e.v2=this.v2.toArray();return e};Qc.prototype.fromJSON=function(e){Ec.prototype.fromJSON.call(this,e);this.v0.fromArray(e.v0);this.v1.fromArray(e.v1);this.v2.fromArray(e.v2);return this};function qc(e){Ec.call(this);this.type="SplineCurve";this.points=e||[]}qc.prototype=Object.create(Ec.prototype);qc.prototype.constructor=qc;qc.prototype.isSplineCurve=true;qc.prototype.getPoint=function(e,t){var r=t||new zt;var n=this.points;var i=(n.length-1)*e;var a=Math.floor(i);var o=i-a;var s=n[a===0?a:a-1];var u=n[a];var c=n[a>n.length-2?n.length-1:a+1];var l=n[a>n.length-3?n.length-1:a+2];r.set(Bc(o,s.x,u.x,c.x,l.x),Bc(o,s.y,u.y,c.y,l.y));return r};qc.prototype.copy=function(e){Ec.prototype.copy.call(this,e);this.points=[];for(var t=0,r=e.points.length;t<r;t++){var n=e.points[t];this.points.push(n.clone())}return this};qc.prototype.toJSON=function(){var e=Ec.prototype.toJSON.call(this);e.points=[];for(var t=0,r=this.points.length;t<r;t++){var n=this.points[t];e.points.push(n.toArray())}return e};qc.prototype.fromJSON=function(e){Ec.prototype.fromJSON.call(this,e);this.points=[];for(var t=0,r=e.points.length;t<r;t++){var n=e.points[t];this.points.push((new zt).fromArray(n))}return this};var Jc=Object.freeze({ArcCurve:Tc,CatmullRomCurve3:Rc,CubicBezierCurve:Hc,CubicBezierCurve3:Vc,EllipseCurve:Sc,LineCurve:Wc,LineCurve3:Yc,QuadraticBezierCurve:Xc,QuadraticBezierCurve3:Qc,SplineCurve:qc});function Kc(){Ec.call(this);this.type="CurvePath";this.curves=[];this.autoClose=false}Kc.prototype=Object.assign(Object.create(Ec.prototype),{constructor:Kc,add:function(e){this.curves.push(e)},closePath:function(){var e=this.curves[0].getPoint(0);var t=this.curves[this.curves.length-1].getPoint(1);if(!e.equals(t)){this.curves.push(new Wc(t,e))}},getPoint:function(e){var t=e*this.getLength();var r=this.getCurveLengths();var n=0;while(n<r.length){if(r[n]>=t){var i=r[n]-t;var a=this.curves[n];var o=a.getLength();var s=o===0?0:1-i/o;return a.getPointAt(s)}n++}return null},getLength:function(){var e=this.getCurveLengths();return e[e.length-1]},updateArcLengths:function(){this.needsUpdate=true;this.cacheLengths=null;this.getCurveLengths()},getCurveLengths:function(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length){return this.cacheLengths}var e=[],t=0;for(var r=0,n=this.curves.length;r<n;r++){t+=this.curves[r].getLength();e.push(t)}this.cacheLengths=e;return e},getSpacedPoints:function(e){if(e===undefined)e=40;var t=[];for(var r=0;r<=e;r++){t.push(this.getPoint(r/e))}if(this.autoClose){t.push(t[0])}return t},getPoints:function(e){e=e||12;var t=[],r;for(var n=0,i=this.curves;n<i.length;n++){var a=i[n];var o=a&&a.isEllipseCurve?e*2:a&&(a.isLineCurve||a.isLineCurve3)?1:a&&a.isSplineCurve?e*a.points.length:e;var s=a.getPoints(o);for(var u=0;u<s.length;u++){var c=s[u];if(r&&r.equals(c))continue;t.push(c);r=c}}if(this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])){t.push(t[0])}return t},copy:function(e){Ec.prototype.copy.call(this,e);this.curves=[];for(var t=0,r=e.curves.length;t<r;t++){var n=e.curves[t];this.curves.push(n.clone())}this.autoClose=e.autoClose;return this},toJSON:function(){var e=Ec.prototype.toJSON.call(this);e.autoClose=this.autoClose;e.curves=[];for(var t=0,r=this.curves.length;t<r;t++){var n=this.curves[t];e.curves.push(n.toJSON())}return e},fromJSON:function(e){Ec.prototype.fromJSON.call(this,e);this.autoClose=e.autoClose;this.curves=[];for(var t=0,r=e.curves.length;t<r;t++){var n=e.curves[t];this.curves.push((new Jc[n.type]).fromJSON(n))}return this}});function Zc(e){Kc.call(this);this.type="Path";this.currentPoint=new zt;if(e){this.setFromPoints(e)}}Zc.prototype=Object.assign(Object.create(Kc.prototype),{constructor:Zc,setFromPoints:function(e){this.moveTo(e[0].x,e[0].y);for(var t=1,r=e.length;t<r;t++){this.lineTo(e[t].x,e[t].y)}},moveTo:function(e,t){this.currentPoint.set(e,t)},lineTo:function(e,t){var r=new Wc(this.currentPoint.clone(),new zt(e,t));this.curves.push(r);this.currentPoint.set(e,t)},quadraticCurveTo:function(e,t,r,n){var i=new Xc(this.currentPoint.clone(),new zt(e,t),new zt(r,n));this.curves.push(i);this.currentPoint.set(r,n)},bezierCurveTo:function(e,t,r,n,i,a){var o=new Hc(this.currentPoint.clone(),new zt(e,t),new zt(r,n),new zt(i,a));this.curves.push(o);this.currentPoint.set(i,a)},splineThru:function(e){var t=[this.currentPoint.clone()].concat(e);var r=new qc(t);this.curves.push(r);this.currentPoint.copy(e[e.length-1])},arc:function(e,t,r,n,i,a){var o=this.currentPoint.x;var s=this.currentPoint.y;this.absarc(e+o,t+s,r,n,i,a)},absarc:function(e,t,r,n,i,a){this.absellipse(e,t,r,r,n,i,a)},ellipse:function(e,t,r,n,i,a,o,s){var u=this.currentPoint.x;var c=this.currentPoint.y;this.absellipse(e+u,t+c,r,n,i,a,o,s)},absellipse:function(e,t,r,n,i,a,o,s){var u=new Sc(e,t,r,n,i,a,o,s);if(this.curves.length>0){var c=u.getPoint(0);if(!c.equals(this.currentPoint)){this.lineTo(c.x,c.y)}}this.curves.push(u);var l=u.getPoint(1);this.currentPoint.copy(l)},copy:function(e){Kc.prototype.copy.call(this,e);this.currentPoint.copy(e.currentPoint);return this},toJSON:function(){var e=Kc.prototype.toJSON.call(this);e.currentPoint=this.currentPoint.toArray();return e},fromJSON:function(e){Kc.prototype.fromJSON.call(this,e);this.currentPoint.fromArray(e.currentPoint);return this}});function $c(e){Zc.call(this,e);this.uuid=jt.generateUUID();this.type="Shape";this.holes=[]}$c.prototype=Object.assign(Object.create(Zc.prototype),{constructor:$c,getPointsHoles:function(e){var t=[];for(var r=0,n=this.holes.length;r<n;r++){t[r]=this.holes[r].getPoints(e)}return t},extractPoints:function(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}},copy:function(e){Zc.prototype.copy.call(this,e);this.holes=[];for(var t=0,r=e.holes.length;t<r;t++){var n=e.holes[t];this.holes.push(n.clone())}return this},toJSON:function(){var e=Zc.prototype.toJSON.call(this);e.uuid=this.uuid;e.holes=[];for(var t=0,r=this.holes.length;t<r;t++){var n=this.holes[t];e.holes.push(n.toJSON())}return e},fromJSON:function(e){Zc.prototype.fromJSON.call(this,e);this.uuid=e.uuid;this.holes=[];for(var t=0,r=e.holes.length;t<r;t++){var n=e.holes[t];this.holes.push((new Zc).fromJSON(n))}return this}});function el(e,t){Ci.call(this);this.type="Light";this.color=new xi(e);this.intensity=t!==undefined?t:1;this.receiveShadow=undefined}el.prototype=Object.assign(Object.create(Ci.prototype),{constructor:el,isLight:true,copy:function(e){Ci.prototype.copy.call(this,e);this.color.copy(e.color);this.intensity=e.intensity;return this},toJSON:function(e){var t=Ci.prototype.toJSON.call(this,e);t.object.color=this.color.getHex();t.object.intensity=this.intensity;if(this.groundColor!==undefined)t.object.groundColor=this.groundColor.getHex();if(this.distance!==undefined)t.object.distance=this.distance;if(this.angle!==undefined)t.object.angle=this.angle;if(this.decay!==undefined)t.object.decay=this.decay;if(this.penumbra!==undefined)t.object.penumbra=this.penumbra;if(this.shadow!==undefined)t.object.shadow=this.shadow.toJSON();return t}});function tl(e,t,r){el.call(this,e,r);this.type="HemisphereLight";this.castShadow=undefined;this.position.copy(Ci.DefaultUp);this.updateMatrix();this.groundColor=new xi(t)}tl.prototype=Object.assign(Object.create(el.prototype),{constructor:tl,isHemisphereLight:true,copy:function(e){el.prototype.copy.call(this,e);this.groundColor.copy(e.groundColor);return this}});function rl(e){this.camera=e;this.bias=0;this.radius=1;this.mapSize=new zt(512,512);this.map=null;this.matrix=new Nt}Object.assign(rl.prototype,{copy:function(e){this.camera=e.camera.clone();this.bias=e.bias;this.radius=e.radius;this.mapSize.copy(e.mapSize);return this},clone:function(){return(new this.constructor).copy(this)},toJSON:function(){var e={};if(this.bias!==0)e.bias=this.bias;if(this.radius!==1)e.radius=this.radius;if(this.mapSize.x!==512||this.mapSize.y!==512)e.mapSize=this.mapSize.toArray();e.camera=this.camera.toJSON(false).object;delete e.camera.matrix;return e}});function nl(){rl.call(this,new Vo(50,1,.5,500))}nl.prototype=Object.assign(Object.create(rl.prototype),{constructor:nl,isSpotLightShadow:true,update:function(e){var t=this.camera;var r=jt.RAD2DEG*2*e.angle;var n=this.mapSize.width/this.mapSize.height;var i=e.distance||t.far;if(r!==t.fov||n!==t.aspect||i!==t.far){t.fov=r;t.aspect=n;t.far=i;t.updateProjectionMatrix()}}});function il(e,t,r,n,i,a){el.call(this,e,t);this.type="SpotLight";this.position.copy(Ci.DefaultUp);this.updateMatrix();this.target=new Ci;Object.defineProperty(this,"power",{get:function(){return this.intensity*Math.PI},set:function(e){this.intensity=e/Math.PI}});this.distance=r!==undefined?r:0;this.angle=n!==undefined?n:Math.PI/3;this.penumbra=i!==undefined?i:0;this.decay=a!==undefined?a:1;this.shadow=new nl}il.prototype=Object.assign(Object.create(el.prototype),{constructor:il,isSpotLight:true,copy:function(e){el.prototype.copy.call(this,e);this.distance=e.distance;this.angle=e.angle;this.penumbra=e.penumbra;this.decay=e.decay;this.target=e.target.clone();this.shadow=e.shadow.clone();return this}});function al(e,t,r,n){el.call(this,e,t);this.type="PointLight";Object.defineProperty(this,"power",{get:function(){return this.intensity*4*Math.PI},set:function(e){this.intensity=e/(4*Math.PI)}});this.distance=r!==undefined?r:0;this.decay=n!==undefined?n:1;this.shadow=new rl(new Vo(90,1,.5,500))}al.prototype=Object.assign(Object.create(el.prototype),{constructor:al,isPointLight:true,copy:function(e){el.prototype.copy.call(this,e);this.distance=e.distance;this.decay=e.decay;this.shadow=e.shadow.clone();return this}});function ol(e,t,r,n,i,a){Ho.call(this);this.type="OrthographicCamera";this.zoom=1;this.view=null;this.left=e!==undefined?e:-1;this.right=t!==undefined?t:1;this.top=r!==undefined?r:1;this.bottom=n!==undefined?n:-1;this.near=i!==undefined?i:.1;this.far=a!==undefined?a:2e3;this.updateProjectionMatrix()}ol.prototype=Object.assign(Object.create(Ho.prototype),{constructor:ol,isOrthographicCamera:true,copy:function(e,t){Ho.prototype.copy.call(this,e,t);this.left=e.left;this.right=e.right;this.top=e.top;this.bottom=e.bottom;this.near=e.near;this.far=e.far;this.zoom=e.zoom;this.view=e.view===null?null:Object.assign({},e.view);return this},setViewOffset:function(e,t,r,n,i,a){if(this.view===null){this.view={enabled:true,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}}this.view.enabled=true;this.view.fullWidth=e;this.view.fullHeight=t;this.view.offsetX=r;this.view.offsetY=n;this.view.width=i;this.view.height=a;this.updateProjectionMatrix()},clearViewOffset:function(){if(this.view!==null){this.view.enabled=false}this.updateProjectionMatrix()},updateProjectionMatrix:function(){var e=(this.right-this.left)/(2*this.zoom);var t=(this.top-this.bottom)/(2*this.zoom);var r=(this.right+this.left)/2;var n=(this.top+this.bottom)/2;var i=r-e;var a=r+e;var o=n+t;var s=n-t;if(this.view!==null&&this.view.enabled){var u=this.zoom/(this.view.width/this.view.fullWidth);var c=this.zoom/(this.view.height/this.view.fullHeight);var l=(this.right-this.left)/this.view.width;var f=(this.top-this.bottom)/this.view.height;i+=l*(this.view.offsetX/u);a=i+l*(this.view.width/u);o-=f*(this.view.offsetY/c);s=o-f*(this.view.height/c)}this.projectionMatrix.makeOrthographic(i,a,o,s,this.near,this.far);this.projectionMatrixInverse.getInverse(this.projectionMatrix)},toJSON:function(e){var t=Ci.prototype.toJSON.call(this,e);t.object.zoom=this.zoom;t.object.left=this.left;t.object.right=this.right;t.object.top=this.top;t.object.bottom=this.bottom;t.object.near=this.near;t.object.far=this.far;if(this.view!==null)t.object.view=Object.assign({},this.view);return t}});function sl(){rl.call(this,new ol(-5,5,5,-5,.5,500))}sl.prototype=Object.assign(Object.create(rl.prototype),{constructor:sl});function ul(e,t){el.call(this,e,t);this.type="DirectionalLight";this.position.copy(Ci.DefaultUp);this.updateMatrix();this.target=new Ci;this.shadow=new sl}ul.prototype=Object.assign(Object.create(el.prototype),{constructor:ul,isDirectionalLight:true,copy:function(e){el.prototype.copy.call(this,e);this.target=e.target.clone();this.shadow=e.shadow.clone();return this}});function cl(e,t){el.call(this,e,t);this.type="AmbientLight";this.castShadow=undefined}cl.prototype=Object.assign(Object.create(el.prototype),{constructor:cl,isAmbientLight:true});function ll(e,t,r,n){el.call(this,e,t);this.type="RectAreaLight";this.width=r!==undefined?r:10;this.height=n!==undefined?n:10}ll.prototype=Object.assign(Object.create(el.prototype),{constructor:ll,isRectAreaLight:true,copy:function(e){el.prototype.copy.call(this,e);this.width=e.width;this.height=e.height;return this},toJSON:function(e){var t=el.prototype.toJSON.call(this,e);t.object.width=this.width;t.object.height=this.height;return t}});function fl(e){this.manager=e!==undefined?e:vc;this.textures={}}Object.assign(fl.prototype,{load:function(e,t,r,n){var i=this;var a=new gc(i.manager);a.setPath(i.path);a.load(e,(function(e){t(i.parse(JSON.parse(e)))}),r,n)},parse:function(e){var t=this.textures;function r(e){if(t[e]===undefined){console.warn("THREE.MaterialLoader: Undefined texture",e)}return t[e]}var n=new Ju[e.type];if(e.uuid!==undefined)n.uuid=e.uuid;if(e.name!==undefined)n.name=e.name;if(e.color!==undefined)n.color.setHex(e.color);if(e.roughness!==undefined)n.roughness=e.roughness;if(e.metalness!==undefined)n.metalness=e.metalness;if(e.emissive!==undefined)n.emissive.setHex(e.emissive);if(e.specular!==undefined)n.specular.setHex(e.specular);if(e.shininess!==undefined)n.shininess=e.shininess;if(e.clearCoat!==undefined)n.clearCoat=e.clearCoat;if(e.clearCoatRoughness!==undefined)n.clearCoatRoughness=e.clearCoatRoughness;if(e.vertexColors!==undefined)n.vertexColors=e.vertexColors;if(e.fog!==undefined)n.fog=e.fog;if(e.flatShading!==undefined)n.flatShading=e.flatShading;if(e.blending!==undefined)n.blending=e.blending;if(e.combine!==undefined)n.combine=e.combine;if(e.side!==undefined)n.side=e.side;if(e.opacity!==undefined)n.opacity=e.opacity;if(e.transparent!==undefined)n.transparent=e.transparent;if(e.alphaTest!==undefined)n.alphaTest=e.alphaTest;if(e.depthTest!==undefined)n.depthTest=e.depthTest;if(e.depthWrite!==undefined)n.depthWrite=e.depthWrite;if(e.colorWrite!==undefined)n.colorWrite=e.colorWrite;if(e.wireframe!==undefined)n.wireframe=e.wireframe;if(e.wireframeLinewidth!==undefined)n.wireframeLinewidth=e.wireframeLinewidth;if(e.wireframeLinecap!==undefined)n.wireframeLinecap=e.wireframeLinecap;if(e.wireframeLinejoin!==undefined)n.wireframeLinejoin=e.wireframeLinejoin;if(e.rotation!==undefined)n.rotation=e.rotation;if(e.linewidth!==1)n.linewidth=e.linewidth;if(e.dashSize!==undefined)n.dashSize=e.dashSize;if(e.gapSize!==undefined)n.gapSize=e.gapSize;if(e.scale!==undefined)n.scale=e.scale;if(e.polygonOffset!==undefined)n.polygonOffset=e.polygonOffset;if(e.polygonOffsetFactor!==undefined)n.polygonOffsetFactor=e.polygonOffsetFactor;if(e.polygonOffsetUnits!==undefined)n.polygonOffsetUnits=e.polygonOffsetUnits;if(e.skinning!==undefined)n.skinning=e.skinning;if(e.morphTargets!==undefined)n.morphTargets=e.morphTargets;if(e.dithering!==undefined)n.dithering=e.dithering;if(e.visible!==undefined)n.visible=e.visible;if(e.userData!==undefined)n.userData=e.userData;if(e.uniforms!==undefined){for(var i in e.uniforms){var a=e.uniforms[i];n.uniforms[i]={};switch(a.type){case"t":n.uniforms[i].value=r(a.value);break;case"c":n.uniforms[i].value=(new xi).setHex(a.value);break;case"v2":n.uniforms[i].value=(new zt).fromArray(a.value);break;case"v3":n.uniforms[i].value=(new Ht).fromArray(a.value);break;case"v4":n.uniforms[i].value=(new qt).fromArray(a.value);break;case"m4":n.uniforms[i].value=(new Nt).fromArray(a.value);break;default:n.uniforms[i].value=a.value}}}if(e.defines!==undefined)n.defines=e.defines;if(e.vertexShader!==undefined)n.vertexShader=e.vertexShader;if(e.fragmentShader!==undefined)n.fragmentShader=e.fragmentShader;if(e.shading!==undefined)n.flatShading=e.shading===1;if(e.size!==undefined)n.size=e.size;if(e.sizeAttenuation!==undefined)n.sizeAttenuation=e.sizeAttenuation;if(e.map!==undefined)n.map=r(e.map);if(e.alphaMap!==undefined){n.alphaMap=r(e.alphaMap);n.transparent=true}if(e.bumpMap!==undefined)n.bumpMap=r(e.bumpMap);if(e.bumpScale!==undefined)n.bumpScale=e.bumpScale;if(e.normalMap!==undefined)n.normalMap=r(e.normalMap);if(e.normalMapType!==undefined)n.normalMapType=e.normalMapType;if(e.normalScale!==undefined){var o=e.normalScale;if(Array.isArray(o)===false){o=[o,o]}n.normalScale=(new zt).fromArray(o)}if(e.displacementMap!==undefined)n.displacementMap=r(e.displacementMap);if(e.displacementScale!==undefined)n.displacementScale=e.displacementScale;if(e.displacementBias!==undefined)n.displacementBias=e.displacementBias;if(e.roughnessMap!==undefined)n.roughnessMap=r(e.roughnessMap);if(e.metalnessMap!==undefined)n.metalnessMap=r(e.metalnessMap);if(e.emissiveMap!==undefined)n.emissiveMap=r(e.emissiveMap);if(e.emissiveIntensity!==undefined)n.emissiveIntensity=e.emissiveIntensity;if(e.specularMap!==undefined)n.specularMap=r(e.specularMap);if(e.envMap!==undefined)n.envMap=r(e.envMap);if(e.envMapIntensity!==undefined)n.envMapIntensity=e.envMapIntensity;if(e.reflectivity!==undefined)n.reflectivity=e.reflectivity;if(e.lightMap!==undefined)n.lightMap=r(e.lightMap);if(e.lightMapIntensity!==undefined)n.lightMapIntensity=e.lightMapIntensity;if(e.aoMap!==undefined)n.aoMap=r(e.aoMap);if(e.aoMapIntensity!==undefined)n.aoMapIntensity=e.aoMapIntensity;if(e.gradientMap!==undefined)n.gradientMap=r(e.gradientMap);return n},setPath:function(e){this.path=e;return this},setTextures:function(e){this.textures=e;return this}});var hl={decodeText:function(e){if(typeof TextDecoder!=="undefined"){return(new TextDecoder).decode(e)}var t="";for(var r=0,n=e.length;r<n;r++){t+=String.fromCharCode(e[r])}return decodeURIComponent(escape(t))},extractUrlBase:function(e){var t=e.lastIndexOf("/");if(t===-1)return"./";return e.substr(0,t+1)}};function dl(e){this.manager=e!==undefined?e:vc}Object.assign(dl.prototype,{load:function(e,t,r,n){var i=this;var a=new gc(i.manager);a.setPath(i.path);a.load(e,(function(e){t(i.parse(JSON.parse(e)))}),r,n)},parse:function(e){var t=new Wi;var r=e.data.index;if(r!==undefined){var n=new pl[r.type](r.array);t.setIndex(new Ri(n,1))}var i=e.data.attributes;for(var a in i){var o=i[a];var n=new pl[o.type](o.array);t.addAttribute(a,new Ri(n,o.itemSize,o.normalized))}var s=e.data.groups||e.data.drawcalls||e.data.offsets;if(s!==undefined){for(var u=0,c=s.length;u!==c;++u){var l=s[u];t.addGroup(l.start,l.count,l.materialIndex)}}var f=e.data.boundingSphere;if(f!==undefined){var h=new Ht;if(f.center!==undefined){h.fromArray(f.center)}t.boundingSphere=new er(h,f.radius)}if(e.name)t.name=e.name;if(e.userData)t.userData=e.userData;return t},setPath:function(e){this.path=e;return this}});var pl={Int8Array:Int8Array,Uint8Array:Uint8Array,Uint8ClampedArray:typeof Uint8ClampedArray!=="undefined"?Uint8ClampedArray:Uint8Array,Int16Array:Int16Array,Uint16Array:Uint16Array,Int32Array:Int32Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array};function vl(e){this.manager=e!==undefined?e:vc;this.resourcePath=""}Object.assign(vl.prototype,{crossOrigin:"anonymous",load:function(e,t,r,n){var i=this;var a=this.path===undefined?hl.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||a;var o=new gc(i.manager);o.setPath(this.path);o.load(e,(function(r){var a=null;try{a=JSON.parse(r)}catch(t){if(n!==undefined)n(t);console.error("THREE:ObjectLoader: Can't parse "+e+".",t.message);return}var o=a.metadata;if(o===undefined||o.type===undefined||o.type.toLowerCase()==="geometry"){console.error("THREE.ObjectLoader: Can't load "+e);return}i.parse(a,t)}),r,n)},setPath:function(e){this.path=e;return this},setResourcePath:function(e){this.resourcePath=e;return this},setCrossOrigin:function(e){this.crossOrigin=e;return this},parse:function(e,t){var r=this.parseShape(e.shapes);var n=this.parseGeometries(e.geometries,r);var i=this.parseImages(e.images,(function(){if(t!==undefined)t(s)}));var a=this.parseTextures(e.textures,i);var o=this.parseMaterials(e.materials,a);var s=this.parseObject(e.object,n,o);if(e.animations){s.animations=this.parseAnimations(e.animations)}if(e.images===undefined||e.images.length===0){if(t!==undefined)t(s)}return s},parseShape:function(e){var t={};if(e!==undefined){for(var r=0,n=e.length;r<n;r++){var i=(new $c).fromJSON(e[r]);t[i.uuid]=i}}return t},parseGeometries:function(e,t){var r={};if(e!==undefined){var n=new dl;for(var i=0,a=e.length;i<a;i++){var o;var s=e[i];switch(s.type){case"PlaneGeometry":case"PlaneBufferGeometry":o=new ju[s.type](s.width,s.height,s.widthSegments,s.heightSegments);break;case"BoxGeometry":case"BoxBufferGeometry":case"CubeGeometry":o=new ju[s.type](s.width,s.height,s.depth,s.widthSegments,s.heightSegments,s.depthSegments);break;case"CircleGeometry":case"CircleBufferGeometry":o=new ju[s.type](s.radius,s.segments,s.thetaStart,s.thetaLength);break;case"CylinderGeometry":case"CylinderBufferGeometry":o=new ju[s.type](s.radiusTop,s.radiusBottom,s.height,s.radialSegments,s.heightSegments,s.openEnded,s.thetaStart,s.thetaLength);break;case"ConeGeometry":case"ConeBufferGeometry":o=new ju[s.type](s.radius,s.height,s.radialSegments,s.heightSegments,s.openEnded,s.thetaStart,s.thetaLength);break;case"SphereGeometry":case"SphereBufferGeometry":o=new ju[s.type](s.radius,s.widthSegments,s.heightSegments,s.phiStart,s.phiLength,s.thetaStart,s.thetaLength);break;case"DodecahedronGeometry":case"DodecahedronBufferGeometry":case"IcosahedronGeometry":case"IcosahedronBufferGeometry":case"OctahedronGeometry":case"OctahedronBufferGeometry":case"TetrahedronGeometry":case"TetrahedronBufferGeometry":o=new ju[s.type](s.radius,s.detail);break;case"RingGeometry":case"RingBufferGeometry":o=new ju[s.type](s.innerRadius,s.outerRadius,s.thetaSegments,s.phiSegments,s.thetaStart,s.thetaLength);break;case"TorusGeometry":case"TorusBufferGeometry":o=new ju[s.type](s.radius,s.tube,s.radialSegments,s.tubularSegments,s.arc);break;case"TorusKnotGeometry":case"TorusKnotBufferGeometry":o=new ju[s.type](s.radius,s.tube,s.tubularSegments,s.radialSegments,s.p,s.q);break;case"LatheGeometry":case"LatheBufferGeometry":o=new ju[s.type](s.points,s.segments,s.phiStart,s.phiLength);break;case"PolyhedronGeometry":case"PolyhedronBufferGeometry":o=new ju[s.type](s.vertices,s.indices,s.radius,s.details);break;case"ShapeGeometry":case"ShapeBufferGeometry":var u=[];for(var c=0,l=s.shapes.length;c<l;c++){var f=t[s.shapes[c]];u.push(f)}o=new ju[s.type](u,s.curveSegments);break;case"ExtrudeGeometry":case"ExtrudeBufferGeometry":var u=[];for(var c=0,l=s.shapes.length;c<l;c++){var f=t[s.shapes[c]];u.push(f)}var h=s.options.extrudePath;if(h!==undefined){s.options.extrudePath=(new Jc[h.type]).fromJSON(h)}o=new ju[s.type](u,s.options);break;case"BufferGeometry":o=n.parse(s);break;case"Geometry":if("THREE"in window&&"LegacyJSONLoader"in THREE){var d=new THREE.LegacyJSONLoader;o=d.parse(s,this.resourcePath).geometry}else{console.error('THREE.ObjectLoader: You have to import LegacyJSONLoader in order load geometry data of type "Geometry".')}break;default:console.warn('THREE.ObjectLoader: Unsupported geometry type "'+s.type+'"');continue}o.uuid=s.uuid;if(s.name!==undefined)o.name=s.name;if(o.isBufferGeometry===true&&s.userData!==undefined)o.userData=s.userData;r[s.uuid]=o}}return r},parseMaterials:function(e,t){var r={};var n={};if(e!==undefined){var i=new fl;i.setTextures(t);for(var a=0,o=e.length;a<o;a++){var s=e[a];if(s.type==="MultiMaterial"){var u=[];for(var c=0;c<s.materials.length;c++){var l=s.materials[c];if(r[l.uuid]===undefined){r[l.uuid]=i.parse(l)}u.push(r[l.uuid])}n[s.uuid]=u}else{n[s.uuid]=i.parse(s);r[s.uuid]=n[s.uuid]}}}return n},parseAnimations:function(e){var t=[];for(var r=0;r<e.length;r++){var n=e[r];var i=lc.parse(n);if(n.uuid!==undefined)i.uuid=n.uuid;t.push(i)}return t},parseImages:function(e,t){var r=this;var n={};function i(e){r.manager.itemStart(e);return o.load(e,(function(){r.manager.itemEnd(e)}),undefined,(function(){r.manager.itemError(e);r.manager.itemEnd(e)}))}if(e!==undefined&&e.length>0){var a=new pc(t);var o=new wc(a);o.setCrossOrigin(this.crossOrigin);for(var s=0,u=e.length;s<u;s++){var c=e[s];var l=c.url;if(Array.isArray(l)){n[c.uuid]=[];for(var f=0,h=l.length;f<h;f++){var d=l[f];var p=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(d)?d:r.resourcePath+d;n[c.uuid].push(i(p))}}else{var p=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(c.url)?c.url:r.resourcePath+c.url;n[c.uuid]=i(p)}}}return n},parseTextures:function(e,t){function r(e,t){if(typeof e==="number")return e;console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",e);return t[e]}var n={};if(e!==undefined){for(var i=0,a=e.length;i<a;i++){var o=e[i];if(o.image===undefined){console.warn('THREE.ObjectLoader: No "image" specified for',o.uuid)}if(t[o.image]===undefined){console.warn("THREE.ObjectLoader: Undefined image",o.image)}var s;if(Array.isArray(t[o.image])){s=new pa(t[o.image])}else{s=new Qt(t[o.image])}s.needsUpdate=true;s.uuid=o.uuid;if(o.name!==undefined)s.name=o.name;if(o.mapping!==undefined)s.mapping=r(o.mapping,ml);if(o.offset!==undefined)s.offset.fromArray(o.offset);if(o.repeat!==undefined)s.repeat.fromArray(o.repeat);if(o.center!==undefined)s.center.fromArray(o.center);if(o.rotation!==undefined)s.rotation=o.rotation;if(o.wrap!==undefined){s.wrapS=r(o.wrap[0],gl);s.wrapT=r(o.wrap[1],gl)}if(o.format!==undefined)s.format=o.format;if(o.minFilter!==undefined)s.minFilter=r(o.minFilter,yl);if(o.magFilter!==undefined)s.magFilter=r(o.magFilter,yl);if(o.anisotropy!==undefined)s.anisotropy=o.anisotropy;if(o.flipY!==undefined)s.flipY=o.flipY;n[o.uuid]=s}}return n},parseObject:function(e,t,r){var n;function i(e){if(t[e]===undefined){console.warn("THREE.ObjectLoader: Undefined geometry",e)}return t[e]}function a(e){if(e===undefined)return undefined;if(Array.isArray(e)){var t=[];for(var n=0,i=e.length;n<i;n++){var a=e[n];if(r[a]===undefined){console.warn("THREE.ObjectLoader: Undefined material",a)}t.push(r[a])}return t}if(r[e]===undefined){console.warn("THREE.ObjectLoader: Undefined material",e)}return r[e]}switch(e.type){case"Scene":n=new es;if(e.background!==undefined){if(Number.isInteger(e.background)){n.background=new xi(e.background)}}if(e.fog!==undefined){if(e.fog.type==="Fog"){n.fog=new $o(e.fog.color,e.fog.near,e.fog.far)}else if(e.fog.type==="FogExp2"){n.fog=new Zo(e.fog.color,e.fog.density)}}break;case"PerspectiveCamera":n=new Vo(e.fov,e.aspect,e.near,e.far);if(e.focus!==undefined)n.focus=e.focus;if(e.zoom!==undefined)n.zoom=e.zoom;if(e.filmGauge!==undefined)n.filmGauge=e.filmGauge;if(e.filmOffset!==undefined)n.filmOffset=e.filmOffset;if(e.view!==undefined)n.view=Object.assign({},e.view);break;case"OrthographicCamera":n=new ol(e.left,e.right,e.top,e.bottom,e.near,e.far);if(e.zoom!==undefined)n.zoom=e.zoom;if(e.view!==undefined)n.view=Object.assign({},e.view);break;case"AmbientLight":n=new cl(e.color,e.intensity);break;case"DirectionalLight":n=new ul(e.color,e.intensity);break;case"PointLight":n=new al(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":n=new ll(e.color,e.intensity,e.width,e.height);break;case"SpotLight":n=new il(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay);break;case"HemisphereLight":n=new tl(e.color,e.groundColor,e.intensity);break;case"SkinnedMesh":console.warn("THREE.ObjectLoader.parseObject() does not support SkinnedMesh yet.");case"Mesh":var o=i(e.geometry);var s=a(e.material);if(o.bones&&o.bones.length>0){n=new ss(o,s)}else{n=new ra(o,s)}break;case"LOD":n=new os;break;case"Line":n=new fs(i(e.geometry),a(e.material),e.mode);break;case"LineLoop":n=new ds(i(e.geometry),a(e.material));break;case"LineSegments":n=new hs(i(e.geometry),a(e.material));break;case"PointCloud":case"Points":n=new vs(i(e.geometry),a(e.material));break;case"Sprite":n=new as(a(e.material));break;case"Group":n=new ko;break;default:n=new Ci}n.uuid=e.uuid;if(e.name!==undefined)n.name=e.name;if(e.matrix!==undefined){n.matrix.fromArray(e.matrix);if(e.matrixAutoUpdate!==undefined)n.matrixAutoUpdate=e.matrixAutoUpdate;if(n.matrixAutoUpdate)n.matrix.decompose(n.position,n.quaternion,n.scale)}else{if(e.position!==undefined)n.position.fromArray(e.position);if(e.rotation!==undefined)n.rotation.fromArray(e.rotation);if(e.quaternion!==undefined)n.quaternion.fromArray(e.quaternion);if(e.scale!==undefined)n.scale.fromArray(e.scale)}if(e.castShadow!==undefined)n.castShadow=e.castShadow;if(e.receiveShadow!==undefined)n.receiveShadow=e.receiveShadow;if(e.shadow){if(e.shadow.bias!==undefined)n.shadow.bias=e.shadow.bias;if(e.shadow.radius!==undefined)n.shadow.radius=e.shadow.radius;if(e.shadow.mapSize!==undefined)n.shadow.mapSize.fromArray(e.shadow.mapSize);if(e.shadow.camera!==undefined)n.shadow.camera=this.parseObject(e.shadow.camera)}if(e.visible!==undefined)n.visible=e.visible;if(e.frustumCulled!==undefined)n.frustumCulled=e.frustumCulled;if(e.renderOrder!==undefined)n.renderOrder=e.renderOrder;if(e.userData!==undefined)n.userData=e.userData;if(e.layers!==undefined)n.layers.mask=e.layers;if(e.children!==undefined){var u=e.children;for(var c=0;c<u.length;c++){n.add(this.parseObject(u[c],t,r))}}if(e.type==="LOD"){var l=e.levels;for(var f=0;f<l.length;f++){var h=l[f];var d=n.getObjectByProperty("uuid",h.object);if(d!==undefined){n.addLevel(d,h.distance)}}}return n}});var ml={UVMapping:ue,CubeReflectionMapping:ce,CubeRefractionMapping:le,EquirectangularReflectionMapping:fe,EquirectangularRefractionMapping:he,SphericalReflectionMapping:de,CubeUVReflectionMapping:pe,CubeUVRefractionMapping:ve};var gl={RepeatWrapping:me,ClampToEdgeWrapping:ge,MirroredRepeatWrapping:ye};var yl={NearestFilter:be,NearestMipMapNearestFilter:xe,NearestMipMapLinearFilter:we,LinearFilter:Ae,LinearMipMapNearestFilter:Me,LinearMipMapLinearFilter:Ee};function bl(e){if(typeof createImageBitmap==="undefined"){console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported.")}if(typeof fetch==="undefined"){console.warn("THREE.ImageBitmapLoader: fetch() not supported.")}this.manager=e!==undefined?e:vc;this.options=undefined}bl.prototype={constructor:bl,setOptions:function e(t){this.options=t;return this},load:function(e,t,r,n){if(e===undefined)e="";if(this.path!==undefined)e=this.path+e;e=this.manager.resolveURL(e);var i=this;var a=dc.get(e);if(a!==undefined){i.manager.itemStart(e);setTimeout((function(){if(t)t(a);i.manager.itemEnd(e)}),0);return a}fetch(e).then((function(e){return e.blob()})).then((function(e){return createImageBitmap(e,i.options)})).then((function(r){dc.add(e,r);if(t)t(r);i.manager.itemEnd(e)})).catch((function(t){if(n)n(t);i.manager.itemError(e);i.manager.itemEnd(e)}))},setCrossOrigin:function(){return this},setPath:function(e){this.path=e;return this}};function xl(){this.type="ShapePath";this.color=new xi;this.subPaths=[];this.currentPath=null}Object.assign(xl.prototype,{moveTo:function(e,t){this.currentPath=new Zc;this.subPaths.push(this.currentPath);this.currentPath.moveTo(e,t)},lineTo:function(e,t){this.currentPath.lineTo(e,t)},quadraticCurveTo:function(e,t,r,n){this.currentPath.quadraticCurveTo(e,t,r,n)},bezierCurveTo:function(e,t,r,n,i,a){this.currentPath.bezierCurveTo(e,t,r,n,i,a)},splineThru:function(e){this.currentPath.splineThru(e)},toShapes:function(e,t){function r(e){var t=[];for(var r=0,n=e.length;r<n;r++){var i=e[r];var a=new $c;a.curves=i.curves;t.push(a)}return t}function n(e,t){var r=t.length;var n=false;for(var i=r-1,a=0;a<r;i=a++){var o=t[i];var s=t[a];var u=s.x-o.x;var c=s.y-o.y;if(Math.abs(c)>Number.EPSILON){if(c<0){o=t[a];u=-u;s=t[i];c=-c}if(e.y<o.y||e.y>s.y)continue;if(e.y===o.y){if(e.x===o.x)return true}else{var l=c*(e.x-o.x)-u*(e.y-o.y);if(l===0)return true;if(l<0)continue;n=!n}}else{if(e.y!==o.y)continue;if(s.x<=e.x&&e.x<=o.x||o.x<=e.x&&e.x<=s.x)return true}}return n}var i=pu.isClockWise;var a=this.subPaths;if(a.length===0)return[];if(t===true)return r(a);var o,s,u,c=[];if(a.length===1){s=a[0];u=new $c;u.curves=s.curves;c.push(u);return c}var l=!i(a[0].getPoints());l=e?!l:l;var f=[];var h=[];var d=[];var p=0;var v;h[p]=undefined;d[p]=[];for(var m=0,g=a.length;m<g;m++){s=a[m];v=s.getPoints();o=i(v);o=e?!o:o;if(o){if(!l&&h[p])p++;h[p]={s:new $c,p:v};h[p].s.curves=s.curves;if(l)p++;d[p]=[]}else{d[p].push({h:s,p:v[0]})}}if(!h[0])return r(a);if(h.length>1){var y=false;var b=[];for(var x=0,w=h.length;x<w;x++){f[x]=[]}for(var x=0,w=h.length;x<w;x++){var A=d[x];for(var M=0;M<A.length;M++){var E=A[M];var S=true;for(var T=0;T<h.length;T++){if(n(E.p,h[T].p)){if(x!==T)b.push({froms:x,tos:T,hole:M});if(S){S=false;f[T].push(E)}else{y=true}}}if(S){f[x].push(E)}}}if(b.length>0){if(!y)d=f}}var _;for(var m=0,P=h.length;m<P;m++){u=h[m].s;c.push(u);_=d[m];for(var C=0,O=_.length;C<O;C++){u.holes.push(_[C].h)}}return c}});function wl(e){this.type="Font";this.data=e}Object.assign(wl.prototype,{isFont:true,generateShapes:function(e,t){if(t===undefined)t=100;var r=[];var n=Al(e,t,this.data);for(var i=0,a=n.length;i<a;i++){Array.prototype.push.apply(r,n[i].toShapes())}return r}});function Al(e,t,r){var n=Array.from?Array.from(e):String(e).split("");var i=t/r.resolution;var a=(r.boundingBox.yMax-r.boundingBox.yMin+r.underlineThickness)*i;var o=[];var s=0,u=0;for(var c=0;c<n.length;c++){var l=n[c];if(l==="\n"){s=0;u-=a}else{var f=Ml(l,i,s,u,r);s+=f.offsetX;o.push(f.path)}}return o}function Ml(e,t,r,n,i){var a=i.glyphs[e]||i.glyphs["?"];if(!a)return;var o=new xl;var s,u,c,l,f,h,d,p;if(a.o){var v=a._cachedOutline||(a._cachedOutline=a.o.split(" "));for(var m=0,g=v.length;m<g;){var y=v[m++];switch(y){case"m":s=v[m++]*t+r;u=v[m++]*t+n;o.moveTo(s,u);break;case"l":s=v[m++]*t+r;u=v[m++]*t+n;o.lineTo(s,u);break;case"q":c=v[m++]*t+r;l=v[m++]*t+n;f=v[m++]*t+r;h=v[m++]*t+n;o.quadraticCurveTo(f,h,c,l);break;case"b":c=v[m++]*t+r;l=v[m++]*t+n;f=v[m++]*t+r;h=v[m++]*t+n;d=v[m++]*t+r;p=v[m++]*t+n;o.bezierCurveTo(f,h,d,p,c,l);break}}}return{offsetX:a.ha*t,path:o}}function El(e){this.manager=e!==undefined?e:vc}Object.assign(El.prototype,{load:function(e,t,r,n){var i=this;var a=new gc(this.manager);a.setPath(this.path);a.load(e,(function(e){var r;try{r=JSON.parse(e)}catch(t){console.warn("THREE.FontLoader: typeface.js support is being deprecated. Use typeface.json instead.");r=JSON.parse(e.substring(65,e.length-2))}var n=i.parse(r);if(t)t(n)}),r,n)},parse:function(e){return new wl(e)},setPath:function(e){this.path=e;return this}});function Sl(){}Sl.Handlers={handlers:[],add:function(e,t){this.handlers.push(e,t)},get:function(e){var t=this.handlers;for(var r=0,n=t.length;r<n;r+=2){var i=t[r];var a=t[r+1];if(i.test(e)){return a}}return null}};Object.assign(Sl.prototype,{crossOrigin:"anonymous",onLoadStart:function(){},onLoadProgress:function(){},onLoadComplete:function(){},initMaterials:function(e,t,r){var n=[];for(var i=0;i<e.length;++i){n[i]=this.createMaterial(e[i],t,r)}return n},createMaterial:function(){var e={NoBlending:M,NormalBlending:E,AdditiveBlending:S,SubtractiveBlending:T,MultiplyBlending:_,CustomBlending:P};var t=new xi;var r=new Mc;var n=new fl;return function i(a,o,s){var u={};function c(e,t,n,i,a){var c=o+e;var l=Sl.Handlers.get(c);var f;if(l!==null){f=l.load(c)}else{r.setCrossOrigin(s);f=r.load(c)}if(t!==undefined){f.repeat.fromArray(t);if(t[0]!==1)f.wrapS=me;if(t[1]!==1)f.wrapT=me}if(n!==undefined){f.offset.fromArray(n)}if(i!==undefined){if(i[0]==="repeat")f.wrapS=me;if(i[0]==="mirror")f.wrapS=ye;if(i[1]==="repeat")f.wrapT=me;if(i[1]==="mirror")f.wrapT=ye}if(a!==undefined){f.anisotropy=a}var h=jt.generateUUID();u[h]=f;return h}var l={uuid:jt.generateUUID(),type:"MeshLambertMaterial"};for(var f in a){var h=a[f];switch(f){case"DbgColor":case"DbgIndex":case"opticalDensity":case"illumination":break;case"DbgName":l.name=h;break;case"blending":l.blending=e[h];break;case"colorAmbient":case"mapAmbient":console.warn("THREE.Loader.createMaterial:",f,"is no longer supported.");break;case"colorDiffuse":l.color=t.fromArray(h).getHex();break;case"colorSpecular":l.specular=t.fromArray(h).getHex();break;case"colorEmissive":l.emissive=t.fromArray(h).getHex();break;case"specularCoef":l.shininess=h;break;case"shading":if(h.toLowerCase()==="basic")l.type="MeshBasicMaterial";if(h.toLowerCase()==="phong")l.type="MeshPhongMaterial";if(h.toLowerCase()==="standard")l.type="MeshStandardMaterial";break;case"mapDiffuse":l.map=c(h,a.mapDiffuseRepeat,a.mapDiffuseOffset,a.mapDiffuseWrap,a.mapDiffuseAnisotropy);break;case"mapDiffuseRepeat":case"mapDiffuseOffset":case"mapDiffuseWrap":case"mapDiffuseAnisotropy":break;case"mapEmissive":l.emissiveMap=c(h,a.mapEmissiveRepeat,a.mapEmissiveOffset,a.mapEmissiveWrap,a.mapEmissiveAnisotropy);break;case"mapEmissiveRepeat":case"mapEmissiveOffset":case"mapEmissiveWrap":case"mapEmissiveAnisotropy":break;case"mapLight":l.lightMap=c(h,a.mapLightRepeat,a.mapLightOffset,a.mapLightWrap,a.mapLightAnisotropy);break;case"mapLightRepeat":case"mapLightOffset":case"mapLightWrap":case"mapLightAnisotropy":break;case"mapAO":l.aoMap=c(h,a.mapAORepeat,a.mapAOOffset,a.mapAOWrap,a.mapAOAnisotropy);break;case"mapAORepeat":case"mapAOOffset":case"mapAOWrap":case"mapAOAnisotropy":break;case"mapBump":l.bumpMap=c(h,a.mapBumpRepeat,a.mapBumpOffset,a.mapBumpWrap,a.mapBumpAnisotropy);break;case"mapBumpScale":l.bumpScale=h;break;case"mapBumpRepeat":case"mapBumpOffset":case"mapBumpWrap":case"mapBumpAnisotropy":break;case"mapNormal":l.normalMap=c(h,a.mapNormalRepeat,a.mapNormalOffset,a.mapNormalWrap,a.mapNormalAnisotropy);break;case"mapNormalFactor":l.normalScale=h;break;case"mapNormalRepeat":case"mapNormalOffset":case"mapNormalWrap":case"mapNormalAnisotropy":break;case"mapSpecular":l.specularMap=c(h,a.mapSpecularRepeat,a.mapSpecularOffset,a.mapSpecularWrap,a.mapSpecularAnisotropy);break;case"mapSpecularRepeat":case"mapSpecularOffset":case"mapSpecularWrap":case"mapSpecularAnisotropy":break;case"mapMetalness":l.metalnessMap=c(h,a.mapMetalnessRepeat,a.mapMetalnessOffset,a.mapMetalnessWrap,a.mapMetalnessAnisotropy);break;case"mapMetalnessRepeat":case"mapMetalnessOffset":case"mapMetalnessWrap":case"mapMetalnessAnisotropy":break;case"mapRoughness":l.roughnessMap=c(h,a.mapRoughnessRepeat,a.mapRoughnessOffset,a.mapRoughnessWrap,a.mapRoughnessAnisotropy);break;case"mapRoughnessRepeat":case"mapRoughnessOffset":case"mapRoughnessWrap":case"mapRoughnessAnisotropy":break;case"mapAlpha":l.alphaMap=c(h,a.mapAlphaRepeat,a.mapAlphaOffset,a.mapAlphaWrap,a.mapAlphaAnisotropy);break;case"mapAlphaRepeat":case"mapAlphaOffset":case"mapAlphaWrap":case"mapAlphaAnisotropy":break;case"flipSided":l.side=m;break;case"doubleSided":l.side=g;break;case"transparency":console.warn("THREE.Loader.createMaterial: transparency has been renamed to opacity");l.opacity=h;break;case"depthTest":case"depthWrite":case"colorWrite":case"opacity":case"reflectivity":case"transparent":case"visible":case"wireframe":l[f]=h;break;case"vertexColors":if(h===true)l.vertexColors=A;if(h==="face")l.vertexColors=w;break;default:console.error("THREE.Loader.createMaterial: Unsupported",f,h);break}}if(l.type==="MeshBasicMaterial")delete l.emissive;if(l.type!=="MeshPhongMaterial")delete l.specular;if(l.opacity<1)l.transparent=true;n.setTextures(u);return n.parse(l)}}()});var Tl;var _l={getContext:function(){if(Tl===undefined){Tl=new(window.AudioContext||window.webkitAudioContext)}return Tl},setContext:function(e){Tl=e}};function Pl(e){this.manager=e!==undefined?e:vc}Object.assign(Pl.prototype,{load:function(e,t,r,n){var i=new gc(this.manager);i.setResponseType("arraybuffer");i.setPath(this.path);i.load(e,(function(e){var r=e.slice(0);var n=_l.getContext();n.decodeAudioData(r,(function(e){t(e)}))}),r,n)},setPath:function(e){this.path=e;return this}});function Cl(){this.type="StereoCamera";this.aspect=1;this.eyeSep=.064;this.cameraL=new Vo;this.cameraL.layers.enable(1);this.cameraL.matrixAutoUpdate=false;this.cameraR=new Vo;this.cameraR.layers.enable(2);this.cameraR.matrixAutoUpdate=false}Object.assign(Cl.prototype,{update:function(){var e,t,r,n,i,a,o,s;var u=new Nt;var c=new Nt;return function l(f){var h=e!==this||t!==f.focus||r!==f.fov||n!==f.aspect*this.aspect||i!==f.near||a!==f.far||o!==f.zoom||s!==this.eyeSep;if(h){e=this;t=f.focus;r=f.fov;n=f.aspect*this.aspect;i=f.near;a=f.far;o=f.zoom;var d=f.projectionMatrix.clone();s=this.eyeSep/2;var p=s*i/t;var v=i*Math.tan(jt.DEG2RAD*r*.5)/o;var m,g;c.elements[12]=-s;u.elements[12]=s;m=-v*n+p;g=v*n+p;d.elements[0]=2*i/(g-m);d.elements[8]=(g+m)/(g-m);this.cameraL.projectionMatrix.copy(d);m=-v*n-p;g=v*n-p;d.elements[0]=2*i/(g-m);d.elements[8]=(g+m)/(g-m);this.cameraR.projectionMatrix.copy(d)}this.cameraL.matrixWorld.copy(f.matrixWorld).multiply(c);this.cameraR.matrixWorld.copy(f.matrixWorld).multiply(u)}}()});function Ol(e,t,r,n){Ci.call(this);this.type="CubeCamera";var i=90,a=1;var o=new Vo(i,a,e,t);o.up.set(0,-1,0);o.lookAt(new Ht(1,0,0));this.add(o);var s=new Vo(i,a,e,t);s.up.set(0,-1,0);s.lookAt(new Ht(-1,0,0));this.add(s);var u=new Vo(i,a,e,t);u.up.set(0,0,1);u.lookAt(new Ht(0,1,0));this.add(u);var c=new Vo(i,a,e,t);c.up.set(0,0,-1);c.lookAt(new Ht(0,-1,0));this.add(c);var l=new Vo(i,a,e,t);l.up.set(0,-1,0);l.lookAt(new Ht(0,0,1));this.add(l);var f=new Vo(i,a,e,t);f.up.set(0,-1,0);f.lookAt(new Ht(0,0,-1));this.add(f);n=n||{format:Ge,magFilter:Ae,minFilter:Ae};this.renderTarget=new Kt(r,r,n);this.renderTarget.texture.name="CubeCamera";this.update=function(e,t){if(this.parent===null)this.updateMatrixWorld();var r=this.renderTarget;var n=r.texture.generateMipmaps;r.texture.generateMipmaps=false;r.activeCubeFace=0;e.render(t,o,r);r.activeCubeFace=1;e.render(t,s,r);r.activeCubeFace=2;e.render(t,u,r);r.activeCubeFace=3;e.render(t,c,r);r.activeCubeFace=4;e.render(t,l,r);r.texture.generateMipmaps=n;r.activeCubeFace=5;e.render(t,f,r);e.setRenderTarget(null)};this.clear=function(e,t,r,n){var i=this.renderTarget;for(var a=0;a<6;a++){i.activeCubeFace=a;e.setRenderTarget(i);e.clear(t,r,n)}e.setRenderTarget(null)}}Ol.prototype=Object.create(Ci.prototype);Ol.prototype.constructor=Ol;function Ll(e){this.autoStart=e!==undefined?e:true;this.startTime=0;this.oldTime=0;this.elapsedTime=0;this.running=false}Object.assign(Ll.prototype,{start:function(){this.startTime=(typeof performance==="undefined"?Date:performance).now();this.oldTime=this.startTime;this.elapsedTime=0;this.running=true},stop:function(){this.getElapsedTime();this.running=false;this.autoStart=false},getElapsedTime:function(){this.getDelta();return this.elapsedTime},getDelta:function(){var e=0;if(this.autoStart&&!this.running){this.start();return 0}if(this.running){var t=(typeof performance==="undefined"?Date:performance).now();e=(t-this.oldTime)/1e3;this.oldTime=t;this.elapsedTime+=e}return e}});function Rl(){Ci.call(this);this.type="AudioListener";this.context=_l.getContext();this.gain=this.context.createGain();this.gain.connect(this.context.destination);this.filter=null;this.timeDelta=0}Rl.prototype=Object.assign(Object.create(Ci.prototype),{constructor:Rl,getInput:function(){return this.gain},removeFilter:function(){if(this.filter!==null){this.gain.disconnect(this.filter);this.filter.disconnect(this.context.destination);this.gain.connect(this.context.destination);this.filter=null}return this},getFilter:function(){return this.filter},setFilter:function(e){if(this.filter!==null){this.gain.disconnect(this.filter);this.filter.disconnect(this.context.destination)}else{this.gain.disconnect(this.context.destination)}this.filter=e;this.gain.connect(this.filter);this.filter.connect(this.context.destination);return this},getMasterVolume:function(){return this.gain.gain.value},setMasterVolume:function(e){this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01);return this},updateMatrixWorld:function(){var e=new Ht;var t=new kt;var r=new Ht;var n=new Ht;var i=new Ll;return function a(o){Ci.prototype.updateMatrixWorld.call(this,o);var s=this.context.listener;var u=this.up;this.timeDelta=i.getDelta();this.matrixWorld.decompose(e,t,r);n.set(0,0,-1).applyQuaternion(t);if(s.positionX){var c=this.context.currentTime+this.timeDelta;s.positionX.linearRampToValueAtTime(e.x,c);s.positionY.linearRampToValueAtTime(e.y,c);s.positionZ.linearRampToValueAtTime(e.z,c);s.forwardX.linearRampToValueAtTime(n.x,c);s.forwardY.linearRampToValueAtTime(n.y,c);s.forwardZ.linearRampToValueAtTime(n.z,c);s.upX.linearRampToValueAtTime(u.x,c);s.upY.linearRampToValueAtTime(u.y,c);s.upZ.linearRampToValueAtTime(u.z,c)}else{s.setPosition(e.x,e.y,e.z);s.setOrientation(n.x,n.y,n.z,u.x,u.y,u.z)}}}()});function Bl(e){Ci.call(this);this.type="Audio";this.listener=e;this.context=e.context;this.gain=this.context.createGain();this.gain.connect(e.getInput());this.autoplay=false;this.buffer=null;this.detune=0;this.loop=false;this.startTime=0;this.offset=0;this.playbackRate=1;this.isPlaying=false;this.hasPlaybackControl=true;this.sourceType="empty";this.filters=[]}Bl.prototype=Object.assign(Object.create(Ci.prototype),{constructor:Bl,getOutput:function(){return this.gain},setNodeSource:function(e){this.hasPlaybackControl=false;this.sourceType="audioNode";this.source=e;this.connect();return this},setMediaElementSource:function(e){this.hasPlaybackControl=false;this.sourceType="mediaNode";this.source=this.context.createMediaElementSource(e);this.connect();return this},setBuffer:function(e){this.buffer=e;this.sourceType="buffer";if(this.autoplay)this.play();return this},play:function(){if(this.isPlaying===true){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===false){console.warn("THREE.Audio: this Audio has no playback control.");return}var e=this.context.createBufferSource();e.buffer=this.buffer;e.detune.value=this.detune;e.loop=this.loop;e.onended=this.onEnded.bind(this);e.playbackRate.setValueAtTime(this.playbackRate,this.startTime);this.startTime=this.context.currentTime;e.start(this.startTime,this.offset);this.isPlaying=true;this.source=e;return this.connect()},pause:function(){if(this.hasPlaybackControl===false){console.warn("THREE.Audio: this Audio has no playback control.");return}if(this.isPlaying===true){this.source.stop();this.source.onended=null;this.offset+=(this.context.currentTime-this.startTime)*this.playbackRate;this.isPlaying=false}return this},stop:function(){if(this.hasPlaybackControl===false){console.warn("THREE.Audio: this Audio has no playback control.");return}this.source.stop();this.source.onended=null;this.offset=0;this.isPlaying=false;return this},connect:function(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(var e=1,t=this.filters.length;e<t;e++){this.filters[e-1].connect(this.filters[e])}this.filters[this.filters.length-1].connect(this.getOutput())}else{this.source.connect(this.getOutput())}return this},disconnect:function(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(var e=1,t=this.filters.length;e<t;e++){this.filters[e-1].disconnect(this.filters[e])}this.filters[this.filters.length-1].disconnect(this.getOutput())}else{this.source.disconnect(this.getOutput())}return this},getFilters:function(){return this.filters},setFilters:function(e){if(!e)e=[];if(this.isPlaying===true){this.disconnect();this.filters=e;this.connect()}else{this.filters=e}return this},setDetune:function(e){this.detune=e;if(this.isPlaying===true){this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01)}return this},getDetune:function(){return this.detune},getFilter:function(){return this.getFilters()[0]},setFilter:function(e){return this.setFilters(e?[e]:[])},setPlaybackRate:function(e){if(this.hasPlaybackControl===false){console.warn("THREE.Audio: this Audio has no playback control.");return}this.playbackRate=e;if(this.isPlaying===true){this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01)}return this},getPlaybackRate:function(){return this.playbackRate},onEnded:function(){this.isPlaying=false},getLoop:function(){if(this.hasPlaybackControl===false){console.warn("THREE.Audio: this Audio has no playback control.");return false}return this.loop},setLoop:function(e){if(this.hasPlaybackControl===false){console.warn("THREE.Audio: this Audio has no playback control.");return}this.loop=e;if(this.isPlaying===true){this.source.loop=this.loop}return this},getVolume:function(){return this.gain.gain.value},setVolume:function(e){this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01);return this}});function Dl(e){Bl.call(this,e);this.panner=this.context.createPanner();this.panner.connect(this.gain)}Dl.prototype=Object.assign(Object.create(Bl.prototype),{constructor:Dl,getOutput:function(){return this.panner},getRefDistance:function(){return this.panner.refDistance},setRefDistance:function(e){this.panner.refDistance=e;return this},getRolloffFactor:function(){return this.panner.rolloffFactor},setRolloffFactor:function(e){this.panner.rolloffFactor=e;return this},getDistanceModel:function(){return this.panner.distanceModel},setDistanceModel:function(e){this.panner.distanceModel=e;return this},getMaxDistance:function(){return this.panner.maxDistance},setMaxDistance:function(e){this.panner.maxDistance=e;return this},setDirectionalCone:function(e,t,r){this.panner.coneInnerAngle=e;this.panner.coneOuterAngle=t;this.panner.coneOuterGain=r;return this},updateMatrixWorld:function(){var e=new Ht;var t=new kt;var r=new Ht;var n=new Ht;return function i(a){Ci.prototype.updateMatrixWorld.call(this,a);var o=this.panner;this.matrixWorld.decompose(e,t,r);n.set(0,0,1).applyQuaternion(t);if(o.positionX){var s=this.context.currentTime+this.listener.timeDelta;o.positionX.linearRampToValueAtTime(e.x,s);o.positionY.linearRampToValueAtTime(e.y,s);o.positionZ.linearRampToValueAtTime(e.z,s);o.orientationX.linearRampToValueAtTime(n.x,s);o.orientationY.linearRampToValueAtTime(n.y,s);o.orientationZ.linearRampToValueAtTime(n.z,s)}else{o.setPosition(e.x,e.y,e.z);o.setOrientation(n.x,n.y,n.z)}}}()});function Il(e,t){this.analyser=e.context.createAnalyser();this.analyser.fftSize=t!==undefined?t:2048;this.data=new Uint8Array(this.analyser.frequencyBinCount);e.getOutput().connect(this.analyser)}Object.assign(Il.prototype,{getFrequencyData:function(){this.analyser.getByteFrequencyData(this.data);return this.data},getAverageFrequency:function(){var e=0,t=this.getFrequencyData();for(var r=0;r<t.length;r++){e+=t[r]}return e/t.length}});function Fl(e,t,r){this.binding=e;this.valueSize=r;var n=Float64Array,i;switch(t){case"quaternion":i=this._slerp;break;case"string":case"bool":n=Array;i=this._select;break;default:i=this._lerp}this.buffer=new n(r*4);this._mixBufferRegion=i;this.cumulativeWeight=0;this.useCount=0;this.referenceCount=0}Object.assign(Fl.prototype,{accumulate:function(e,t){var r=this.buffer,n=this.valueSize,i=e*n+n,a=this.cumulativeWeight;if(a===0){for(var o=0;o!==n;++o){r[i+o]=r[o]}a=t}else{a+=t;var s=t/a;this._mixBufferRegion(r,i,0,s,n)}this.cumulativeWeight=a},apply:function(e){var t=this.valueSize,r=this.buffer,n=e*t+t,i=this.cumulativeWeight,a=this.binding;this.cumulativeWeight=0;if(i<1){var o=t*3;this._mixBufferRegion(r,n,o,1-i,t)}for(var s=t,u=t+t;s!==u;++s){if(r[s]!==r[s+t]){a.setValue(r,n);break}}},saveOriginalState:function(){var e=this.binding;var t=this.buffer,r=this.valueSize,n=r*3;e.getValue(t,n);for(var i=r,a=n;i!==a;++i){t[i]=t[n+i%r]}this.cumulativeWeight=0},restoreOriginalState:function(){var e=this.valueSize*3;this.binding.setValue(this.buffer,e)},_select:function(e,t,r,n,i){if(n>=.5){for(var a=0;a!==i;++a){e[t+a]=e[r+a]}}},_slerp:function(e,t,r,n){kt.slerpFlat(e,t,e,t,e,r,n)},_lerp:function(e,t,r,n,i){var a=1-n;for(var o=0;o!==i;++o){var s=t+o;e[s]=e[s]*a+e[r+o]*n}}});var Ul="\\[\\]\\.:\\/";function Gl(e,t,r){var n=r||jl.parseTrackName(t);this._targetGroup=e;this._bindings=e.subscribe_(t,n)}Object.assign(Gl.prototype,{getValue:function(e,t){this.bind();var r=this._targetGroup.nCachedObjects_,n=this._bindings[r];if(n!==undefined)n.getValue(e,t)},setValue:function(e,t){var r=this._bindings;for(var n=this._targetGroup.nCachedObjects_,i=r.length;n!==i;++n){r[n].setValue(e,t)}},bind:function(){var e=this._bindings;for(var t=this._targetGroup.nCachedObjects_,r=e.length;t!==r;++t){e[t].bind()}},unbind:function(){var e=this._bindings;for(var t=this._targetGroup.nCachedObjects_,r=e.length;t!==r;++t){e[t].unbind()}}});function jl(e,t,r){this.path=t;this.parsedPath=r||jl.parseTrackName(t);this.node=jl.findNode(e,this.parsedPath.nodeName)||e;this.rootNode=e}Object.assign(jl,{Composite:Gl,create:function(e,t,r){if(!(e&&e.isAnimationObjectGroup)){return new jl(e,t,r)}else{return new jl.Composite(e,t,r)}},sanitizeNodeName:function(){var e=new RegExp("["+Ul+"]","g");return function t(r){return r.replace(/\s/g,"_").replace(e,"")}}(),parseTrackName:function(){var e="[^"+Ul+"]";var t="[^"+Ul.replace("\\.","")+"]";var r=/((?:WC+[\/:])*)/.source.replace("WC",e);var n=/(WCOD+)?/.source.replace("WCOD",t);var i=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",e);var a=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",e);var o=new RegExp(""+"^"+r+n+i+a+"$");var s=["material","materials","bones"];return function e(t){var r=o.exec(t);if(!r){throw new Error("PropertyBinding: Cannot parse trackName: "+t)}var n={nodeName:r[2],objectName:r[3],objectIndex:r[4],propertyName:r[5],propertyIndex:r[6]};var i=n.nodeName&&n.nodeName.lastIndexOf(".");if(i!==undefined&&i!==-1){var a=n.nodeName.substring(i+1);if(s.indexOf(a)!==-1){n.nodeName=n.nodeName.substring(0,i);n.objectName=a}}if(n.propertyName===null||n.propertyName.length===0){throw new Error("PropertyBinding: can not parse propertyName from trackName: "+t)}return n}}(),findNode:function(e,t){if(!t||t===""||t==="root"||t==="."||t===-1||t===e.name||t===e.uuid){return e}if(e.skeleton){var r=e.skeleton.getBoneByName(t);if(r!==undefined){return r}}if(e.children){var n=function(e){for(var r=0;r<e.length;r++){var i=e[r];if(i.name===t||i.uuid===t){return i}var a=n(i.children);if(a)return a}return null};var i=n(e.children);if(i){return i}}return null}});Object.assign(jl.prototype,{_getValue_unavailable:function(){},_setValue_unavailable:function(){},BindingType:{Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Versioning:{None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},GetterByBindingType:[function e(t,r){t[r]=this.node[this.propertyName]},function e(t,r){var n=this.resolvedProperty;for(var i=0,a=n.length;i!==a;++i){t[r++]=n[i]}},function e(t,r){t[r]=this.resolvedProperty[this.propertyIndex]},function e(t,r){this.resolvedProperty.toArray(t,r)}],SetterByBindingTypeAndVersioning:[[function e(t,r){this.targetObject[this.propertyName]=t[r]},function e(t,r){this.targetObject[this.propertyName]=t[r];this.targetObject.needsUpdate=true},function e(t,r){this.targetObject[this.propertyName]=t[r];this.targetObject.matrixWorldNeedsUpdate=true}],[function e(t,r){var n=this.resolvedProperty;for(var i=0,a=n.length;i!==a;++i){n[i]=t[r++]}},function e(t,r){var n=this.resolvedProperty;for(var i=0,a=n.length;i!==a;++i){n[i]=t[r++]}this.targetObject.needsUpdate=true},function e(t,r){var n=this.resolvedProperty;for(var i=0,a=n.length;i!==a;++i){n[i]=t[r++]}this.targetObject.matrixWorldNeedsUpdate=true}],[function e(t,r){this.resolvedProperty[this.propertyIndex]=t[r]},function e(t,r){this.resolvedProperty[this.propertyIndex]=t[r];this.targetObject.needsUpdate=true},function e(t,r){this.resolvedProperty[this.propertyIndex]=t[r];this.targetObject.matrixWorldNeedsUpdate=true}],[function e(t,r){this.resolvedProperty.fromArray(t,r)},function e(t,r){this.resolvedProperty.fromArray(t,r);this.targetObject.needsUpdate=true},function e(t,r){this.resolvedProperty.fromArray(t,r);this.targetObject.matrixWorldNeedsUpdate=true}]],getValue:function e(t,r){this.bind();this.getValue(t,r)},setValue:function e(t,r){this.bind();this.setValue(t,r)},bind:function(){var e=this.node,t=this.parsedPath,r=t.objectName,n=t.propertyName,i=t.propertyIndex;if(!e){e=jl.findNode(this.rootNode,t.nodeName)||this.rootNode;this.node=e}this.getValue=this._getValue_unavailable;this.setValue=this._setValue_unavailable;if(!e){console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");return}if(r){var a=t.objectIndex;switch(r){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(var o=0;o<e.length;o++){if(e[o].name===a){a=o;break}}break;default:if(e[r]===undefined){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[r]}if(a!==undefined){if(e[a]===undefined){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[a]}}var s=e[n];if(s===undefined){var u=t.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+u+"."+n+" but it wasn't found.",e);return}var c=this.Versioning.None;this.targetObject=e;if(e.needsUpdate!==undefined){c=this.Versioning.NeedsUpdate}else if(e.matrixWorldNeedsUpdate!==undefined){c=this.Versioning.MatrixWorldNeedsUpdate}var l=this.BindingType.Direct;if(i!==undefined){if(n==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(e.geometry.isBufferGeometry){if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}for(var o=0;o<this.node.geometry.morphAttributes.position.length;o++){if(e.geometry.morphAttributes.position[o].name===i){i=o;break}}}else{if(!e.geometry.morphTargets){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphTargets.",this);return}for(var o=0;o<this.node.geometry.morphTargets.length;o++){if(e.geometry.morphTargets[o].name===i){i=o;break}}}}l=this.BindingType.ArrayElement;this.resolvedProperty=s;this.propertyIndex=i}else if(s.fromArray!==undefined&&s.toArray!==undefined){l=this.BindingType.HasFromToArray;this.resolvedProperty=s}else if(Array.isArray(s)){l=this.BindingType.EntireArray;this.resolvedProperty=s}else{this.propertyName=n}this.getValue=this.GetterByBindingType[l];this.setValue=this.SetterByBindingTypeAndVersioning[l][c]},unbind:function(){this.node=null;this.getValue=this._getValue_unbound;this.setValue=this._setValue_unbound}});Object.assign(jl.prototype,{_getValue_unbound:jl.prototype.getValue,_setValue_unbound:jl.prototype.setValue});function zl(){this.uuid=jt.generateUUID();this._objects=Array.prototype.slice.call(arguments);this.nCachedObjects_=0;var e={};this._indicesByUUID=e;for(var t=0,r=arguments.length;t!==r;++t){e[arguments[t].uuid]=t}this._paths=[];this._parsedPaths=[];this._bindings=[];this._bindingsIndicesByPath={};var n=this;this.stats={objects:{get total(){return n._objects.length},get inUse(){return this.total-n.nCachedObjects_}},get bindingsPerObject(){return n._bindings.length}}}Object.assign(zl.prototype,{isAnimationObjectGroup:true,add:function(){var e=this._objects,t=e.length,r=this.nCachedObjects_,n=this._indicesByUUID,i=this._paths,a=this._parsedPaths,o=this._bindings,s=o.length,u=undefined;for(var c=0,l=arguments.length;c!==l;++c){var f=arguments[c],h=f.uuid,d=n[h];if(d===undefined){d=t++;n[h]=d;e.push(f);for(var p=0,v=s;p!==v;++p){o[p].push(new jl(f,i[p],a[p]))}}else if(d<r){u=e[d];var m=--r,g=e[m];n[g.uuid]=d;e[d]=g;n[h]=m;e[m]=f;for(var p=0,v=s;p!==v;++p){var y=o[p],b=y[m],x=y[d];y[d]=b;if(x===undefined){x=new jl(f,i[p],a[p])}y[m]=x}}else if(e[d]!==u){console.error("THREE.AnimationObjectGroup: Different objects with the same UUID "+"detected. Clean the caches or recreate your infrastructure when reloading scenes.")}}this.nCachedObjects_=r},remove:function(){var e=this._objects,t=this.nCachedObjects_,r=this._indicesByUUID,n=this._bindings,i=n.length;for(var a=0,o=arguments.length;a!==o;++a){var s=arguments[a],u=s.uuid,c=r[u];if(c!==undefined&&c>=t){var l=t++,f=e[l];r[f.uuid]=c;e[c]=f;r[u]=l;e[l]=s;for(var h=0,d=i;h!==d;++h){var p=n[h],v=p[l],m=p[c];p[c]=v;p[l]=m}}}this.nCachedObjects_=t},uncache:function(){var e=this._objects,t=e.length,r=this.nCachedObjects_,n=this._indicesByUUID,i=this._bindings,a=i.length;for(var o=0,s=arguments.length;o!==s;++o){var u=arguments[o],c=u.uuid,l=n[c];if(l!==undefined){delete n[c];if(l<r){var f=--r,h=e[f],d=--t,p=e[d];n[h.uuid]=l;e[l]=h;n[p.uuid]=f;e[f]=p;e.pop();for(var v=0,m=a;v!==m;++v){var g=i[v],y=g[f],b=g[d];g[l]=y;g[f]=b;g.pop()}}else{var d=--t,p=e[d];n[p.uuid]=l;e[l]=p;e.pop();for(var v=0,m=a;v!==m;++v){var g=i[v];g[l]=g[d];g.pop()}}}}this.nCachedObjects_=r},subscribe_:function(e,t){var r=this._bindingsIndicesByPath,n=r[e],i=this._bindings;if(n!==undefined)return i[n];var a=this._paths,o=this._parsedPaths,s=this._objects,u=s.length,c=this.nCachedObjects_,l=new Array(u);n=i.length;r[e]=n;a.push(e);o.push(t);i.push(l);for(var f=c,h=s.length;f!==h;++f){var d=s[f];l[f]=new jl(d,e,t)}return l},unsubscribe_:function(e){var t=this._bindingsIndicesByPath,r=t[e];if(r!==undefined){var n=this._paths,i=this._parsedPaths,a=this._bindings,o=a.length-1,s=a[o],u=e[o];t[u]=r;a[r]=s;a.pop();i[r]=i[o];i.pop();n[r]=n[o];n.pop()}}});function Nl(e,t,r){this._mixer=e;this._clip=t;this._localRoot=r||null;var n=t.tracks,i=n.length,a=new Array(i);var o={endingStart:wt,endingEnd:wt};for(var s=0;s!==i;++s){var u=n[s].createInterpolant(null);a[s]=u;u.settings=o}this._interpolantSettings=o;this._interpolants=a;this._propertyBindings=new Array(i);this._cacheIndex=null;this._byClipCacheIndex=null;this._timeScaleInterpolant=null;this._weightInterpolant=null;this.loop=mt;this._loopCount=-1;this._startTime=null;this.time=0;this.timeScale=1;this._effectiveTimeScale=1;this.weight=1;this._effectiveWeight=1;this.repetitions=Infinity;this.paused=false;this.enabled=true;this.clampWhenFinished=false;this.zeroSlopeAtStart=true;this.zeroSlopeAtEnd=true}Object.assign(Nl.prototype,{play:function(){this._mixer._activateAction(this);return this},stop:function(){this._mixer._deactivateAction(this);return this.reset()},reset:function(){this.paused=false;this.enabled=true;this.time=0;this._loopCount=-1;this._startTime=null;return this.stopFading().stopWarping()},isRunning:function(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)},isScheduled:function(){return this._mixer._isActiveAction(this)},startAt:function(e){this._startTime=e;return this},setLoop:function(e,t){this.loop=e;this.repetitions=t;return this},setEffectiveWeight:function(e){this.weight=e;this._effectiveWeight=this.enabled?e:0;return this.stopFading()},getEffectiveWeight:function(){return this._effectiveWeight},fadeIn:function(e){return this._scheduleFading(e,0,1)},fadeOut:function(e){return this._scheduleFading(e,1,0)},crossFadeFrom:function(e,t,r){e.fadeOut(t);this.fadeIn(t);if(r){var n=this._clip.duration,i=e._clip.duration,a=i/n,o=n/i;e.warp(1,a,t);this.warp(o,1,t)}return this},crossFadeTo:function(e,t,r){return e.crossFadeFrom(this,t,r)},stopFading:function(){var e=this._weightInterpolant;if(e!==null){this._weightInterpolant=null;this._mixer._takeBackControlInterpolant(e)}return this},setEffectiveTimeScale:function(e){this.timeScale=e;this._effectiveTimeScale=this.paused?0:e;return this.stopWarping()},getEffectiveTimeScale:function(){return this._effectiveTimeScale},setDuration:function(e){this.timeScale=this._clip.duration/e;return this.stopWarping()},syncWith:function(e){this.time=e.time;this.timeScale=e.timeScale;return this.stopWarping()},halt:function(e){return this.warp(this._effectiveTimeScale,0,e)},warp:function(e,t,r){var n=this._mixer,i=n.time,a=this._timeScaleInterpolant,o=this.timeScale;if(a===null){a=n._lendControlInterpolant();this._timeScaleInterpolant=a}var s=a.parameterPositions,u=a.sampleValues;s[0]=i;s[1]=i+r;u[0]=e/o;u[1]=t/o;return this},stopWarping:function(){var e=this._timeScaleInterpolant;if(e!==null){this._timeScaleInterpolant=null;this._mixer._takeBackControlInterpolant(e)}return this},getMixer:function(){return this._mixer},getClip:function(){return this._clip},getRoot:function(){return this._localRoot||this._mixer._root},_update:function(e,t,r,n){if(!this.enabled){this._updateWeight(e);return}var i=this._startTime;if(i!==null){var a=(e-i)*r;if(a<0||r===0){return}this._startTime=null;t=r*a}t*=this._updateTimeScale(e);var o=this._updateTime(t);var s=this._updateWeight(e);if(s>0){var u=this._interpolants;var c=this._propertyBindings;for(var l=0,f=u.length;l!==f;++l){u[l].evaluate(o);c[l].accumulate(n,s)}}},_updateWeight:function(e){var t=0;if(this.enabled){t=this.weight;var r=this._weightInterpolant;if(r!==null){var n=r.evaluate(e)[0];t*=n;if(e>r.parameterPositions[1]){this.stopFading();if(n===0){this.enabled=false}}}}this._effectiveWeight=t;return t},_updateTimeScale:function(e){var t=0;if(!this.paused){t=this.timeScale;var r=this._timeScaleInterpolant;if(r!==null){var n=r.evaluate(e)[0];t*=n;if(e>r.parameterPositions[1]){this.stopWarping();if(t===0){this.paused=true}else{this.timeScale=t}}}}this._effectiveTimeScale=t;return t},_updateTime:function(e){var t=this.time+e;var r=this._clip.duration;var n=this.loop;var i=this._loopCount;var a=n===gt;if(e===0){if(i===-1)return t;return a&&(i&1)===1?r-t:t}if(n===vt){if(i===-1){this._loopCount=0;this._setEndings(true,true,false)}e:{if(t>=r){t=r}else if(t<0){t=0}else break e;if(this.clampWhenFinished)this.paused=true;else this.enabled=false;this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(i===-1){if(e>=0){i=0;this._setEndings(true,this.repetitions===0,a)}else{this._setEndings(this.repetitions===0,true,a)}}if(t>=r||t<0){var o=Math.floor(t/r);t-=r*o;i+=Math.abs(o);var s=this.repetitions-i;if(s<=0){if(this.clampWhenFinished)this.paused=true;else this.enabled=false;t=e>0?r:0;this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1})}else{if(s===1){var u=e<0;this._setEndings(u,!u,a)}else{this._setEndings(false,false,a)}this._loopCount=i;this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:o})}}if(a&&(i&1)===1){this.time=t;return r-t}}this.time=t;return t},_setEndings:function(e,t,r){var n=this._interpolantSettings;if(r){n.endingStart=At;n.endingEnd=At}else{if(e){n.endingStart=this.zeroSlopeAtStart?At:wt}else{n.endingStart=Mt}if(t){n.endingEnd=this.zeroSlopeAtEnd?At:wt}else{n.endingEnd=Mt}}},_scheduleFading:function(e,t,r){var n=this._mixer,i=n.time,a=this._weightInterpolant;if(a===null){a=n._lendControlInterpolant();this._weightInterpolant=a}var o=a.parameterPositions,s=a.sampleValues;o[0]=i;s[0]=t;o[1]=i+e;s[1]=r;return this}});function kl(e){this._root=e;this._initMemoryManager();this._accuIndex=0;this.time=0;this.timeScale=1}kl.prototype=Object.assign(Object.create(n.prototype),{constructor:kl,_bindAction:function(e,t){var r=e._localRoot||this._root,n=e._clip.tracks,i=n.length,a=e._propertyBindings,o=e._interpolants,s=r.uuid,u=this._bindingsByRootAndName,c=u[s];if(c===undefined){c={};u[s]=c}for(var l=0;l!==i;++l){var f=n[l],h=f.name,d=c[h];if(d!==undefined){a[l]=d}else{d=a[l];if(d!==undefined){if(d._cacheIndex===null){++d.referenceCount;this._addInactiveBinding(d,s,h)}continue}var p=t&&t._propertyBindings[l].binding.parsedPath;d=new Fl(jl.create(r,h,p),f.ValueTypeName,f.getValueSize());++d.referenceCount;this._addInactiveBinding(d,s,h);a[l]=d}o[l].resultBuffer=d.buffer}},_activateAction:function(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){var t=(e._localRoot||this._root).uuid,r=e._clip.uuid,n=this._actionsByClip[r];this._bindAction(e,n&&n.knownActions[0]);this._addInactiveAction(e,r,t)}var i=e._propertyBindings;for(var a=0,o=i.length;a!==o;++a){var s=i[a];if(s.useCount++===0){this._lendBinding(s);s.saveOriginalState()}}this._lendAction(e)}},_deactivateAction:function(e){if(this._isActiveAction(e)){var t=e._propertyBindings;for(var r=0,n=t.length;r!==n;++r){var i=t[r];if(--i.useCount===0){i.restoreOriginalState();this._takeBackBinding(i)}}this._takeBackAction(e)}},_initMemoryManager:function(){this._actions=[];this._nActiveActions=0;this._actionsByClip={};this._bindings=[];this._nActiveBindings=0;this._bindingsByRootAndName={};this._controlInterpolants=[];this._nActiveControlInterpolants=0;var e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}},_isActiveAction:function(e){var t=e._cacheIndex;return t!==null&&t<this._nActiveActions},_addInactiveAction:function(e,t,r){var n=this._actions,i=this._actionsByClip,a=i[t];if(a===undefined){a={knownActions:[e],actionByRoot:{}};e._byClipCacheIndex=0;i[t]=a}else{var o=a.knownActions;e._byClipCacheIndex=o.length;o.push(e)}e._cacheIndex=n.length;n.push(e);a.actionByRoot[r]=e},_removeInactiveAction:function(e){var t=this._actions,r=t[t.length-1],n=e._cacheIndex;r._cacheIndex=n;t[n]=r;t.pop();e._cacheIndex=null;var i=e._clip.uuid,a=this._actionsByClip,o=a[i],s=o.knownActions,u=s[s.length-1],c=e._byClipCacheIndex;u._byClipCacheIndex=c;s[c]=u;s.pop();e._byClipCacheIndex=null;var l=o.actionByRoot,f=(e._localRoot||this._root).uuid;delete l[f];if(s.length===0){delete a[i]}this._removeInactiveBindingsForAction(e)},_removeInactiveBindingsForAction:function(e){var t=e._propertyBindings;for(var r=0,n=t.length;r!==n;++r){var i=t[r];if(--i.referenceCount===0){this._removeInactiveBinding(i)}}},_lendAction:function(e){var t=this._actions,r=e._cacheIndex,n=this._nActiveActions++,i=t[n];e._cacheIndex=n;t[n]=e;i._cacheIndex=r;t[r]=i},_takeBackAction:function(e){var t=this._actions,r=e._cacheIndex,n=--this._nActiveActions,i=t[n];e._cacheIndex=n;t[n]=e;i._cacheIndex=r;t[r]=i},_addInactiveBinding:function(e,t,r){var n=this._bindingsByRootAndName,i=n[t],a=this._bindings;if(i===undefined){i={};n[t]=i}i[r]=e;e._cacheIndex=a.length;a.push(e)},_removeInactiveBinding:function(e){var t=this._bindings,r=e.binding,n=r.rootNode.uuid,i=r.path,a=this._bindingsByRootAndName,o=a[n],s=t[t.length-1],u=e._cacheIndex;s._cacheIndex=u;t[u]=s;t.pop();delete o[i];e:{for(var c in o)break e;delete a[n]}},_lendBinding:function(e){var t=this._bindings,r=e._cacheIndex,n=this._nActiveBindings++,i=t[n];e._cacheIndex=n;t[n]=e;i._cacheIndex=r;t[r]=i},_takeBackBinding:function(e){var t=this._bindings,r=e._cacheIndex,n=--this._nActiveBindings,i=t[n];e._cacheIndex=n;t[n]=e;i._cacheIndex=r;t[r]=i},_lendControlInterpolant:function(){var e=this._controlInterpolants,t=this._nActiveControlInterpolants++,r=e[t];if(r===undefined){r=new ec(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer);r.__cacheIndex=t;e[t]=r}return r},_takeBackControlInterpolant:function(e){var t=this._controlInterpolants,r=e.__cacheIndex,n=--this._nActiveControlInterpolants,i=t[n];e.__cacheIndex=n;t[n]=e;i.__cacheIndex=r;t[r]=i},_controlInterpolantsResultBuffer:new Float32Array(1),clipAction:function(e,t){var r=t||this._root,n=r.uuid,i=typeof e==="string"?lc.findByName(r,e):e,a=i!==null?i.uuid:e,o=this._actionsByClip[a],s=null;if(o!==undefined){var u=o.actionByRoot[n];if(u!==undefined){return u}s=o.knownActions[0];if(i===null)i=s._clip}if(i===null)return null;var c=new Nl(this,i,t);this._bindAction(c,s);this._addInactiveAction(c,a,n);return c},existingAction:function(e,t){var r=t||this._root,n=r.uuid,i=typeof e==="string"?lc.findByName(r,e):e,a=i?i.uuid:e,o=this._actionsByClip[a];if(o!==undefined){return o.actionByRoot[n]||null}return null},stopAllAction:function(){var e=this._actions,t=this._nActiveActions,r=this._bindings,n=this._nActiveBindings;this._nActiveActions=0;this._nActiveBindings=0;for(var i=0;i!==t;++i){e[i].reset()}for(var i=0;i!==n;++i){r[i].useCount=0}return this},update:function(e){e*=this.timeScale;var t=this._actions,r=this._nActiveActions,n=this.time+=e,i=Math.sign(e),a=this._accuIndex^=1;for(var o=0;o!==r;++o){var s=t[o];s._update(n,e,i,a)}var u=this._bindings,c=this._nActiveBindings;for(var o=0;o!==c;++o){u[o].apply(a)}return this},getRoot:function(){return this._root},uncacheClip:function(e){var t=this._actions,r=e.uuid,n=this._actionsByClip,i=n[r];if(i!==undefined){var a=i.knownActions;for(var o=0,s=a.length;o!==s;++o){var u=a[o];this._deactivateAction(u);var c=u._cacheIndex,l=t[t.length-1];u._cacheIndex=null;u._byClipCacheIndex=null;l._cacheIndex=c;t[c]=l;t.pop();this._removeInactiveBindingsForAction(u)}delete n[r]}},uncacheRoot:function(e){var t=e.uuid,r=this._actionsByClip;for(var n in r){var i=r[n].actionByRoot,a=i[t];if(a!==undefined){this._deactivateAction(a);this._removeInactiveAction(a)}}var o=this._bindingsByRootAndName,s=o[t];if(s!==undefined){for(var u in s){var c=s[u];c.restoreOriginalState();this._removeInactiveBinding(c)}}},uncacheAction:function(e,t){var r=this.existingAction(e,t);if(r!==null){this._deactivateAction(r);this._removeInactiveAction(r)}}});function Hl(e){if(typeof e==="string"){console.warn("THREE.Uniform: Type parameter is no longer needed.");e=arguments[1]}this.value=e}Hl.prototype.clone=function(){return new Hl(this.value.clone===undefined?this.value:this.value.clone())};function Vl(){Wi.call(this);this.type="InstancedBufferGeometry";this.maxInstancedCount=undefined}Vl.prototype=Object.assign(Object.create(Wi.prototype),{constructor:Vl,isInstancedBufferGeometry:true,copy:function(e){Wi.prototype.copy.call(this,e);this.maxInstancedCount=e.maxInstancedCount;return this},clone:function(){return(new this.constructor).copy(this)}});function Wl(e,t,r){ts.call(this,e,t);this.meshPerAttribute=r||1}Wl.prototype=Object.assign(Object.create(ts.prototype),{constructor:Wl,isInstancedInterleavedBuffer:true,copy:function(e){ts.prototype.copy.call(this,e);this.meshPerAttribute=e.meshPerAttribute;return this}});function Yl(e,t,r,n){if(typeof r==="number"){n=r;r=false;console.error("THREE.InstancedBufferAttribute: The constructor now expects normalized as the third argument.")}Ri.call(this,e,t,r);this.meshPerAttribute=n||1}Yl.prototype=Object.assign(Object.create(Ri.prototype),{constructor:Yl,isInstancedBufferAttribute:true,copy:function(e){Ri.prototype.copy.call(this,e);this.meshPerAttribute=e.meshPerAttribute;return this}});function Xl(e,t,r,n){this.ray=new $i(e,t);this.near=r||0;this.far=n||Infinity;this.params={Mesh:{},Line:{},LOD:{},Points:{threshold:1},Sprite:{}};Object.defineProperties(this.params,{PointCloud:{get:function(){console.warn("THREE.Raycaster: params.PointCloud has been renamed to params.Points.");return this.Points}}})}function Ql(e,t){return e.distance-t.distance}function ql(e,t,r,n){if(e.visible===false)return;e.raycast(t,r);if(n===true){var i=e.children;for(var a=0,o=i.length;a<o;a++){ql(i[a],t,r,true)}}}Object.assign(Xl.prototype,{linePrecision:1,set:function(e,t){this.ray.set(e,t)},setFromCamera:function(e,t){if(t&&t.isPerspectiveCamera){this.ray.origin.setFromMatrixPosition(t.matrixWorld);this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize()}else if(t&&t.isOrthographicCamera){this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t);this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld)}else{console.error("THREE.Raycaster: Unsupported camera type.")}},intersectObject:function(e,t,r){var n=r||[];ql(e,this,n,t);n.sort(Ql);return n},intersectObjects:function(e,t,r){var n=r||[];if(Array.isArray(e)===false){console.warn("THREE.Raycaster.intersectObjects: objects is not an Array.");return n}for(var i=0,a=e.length;i<a;i++){ql(e[i],this,n,t)}n.sort(Ql);return n}});function Jl(e,t,r){this.radius=e!==undefined?e:1;this.phi=t!==undefined?t:0;this.theta=r!==undefined?r:0;return this}Object.assign(Jl.prototype,{set:function(e,t,r){this.radius=e;this.phi=t;this.theta=r;return this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){this.radius=e.radius;this.phi=e.phi;this.theta=e.theta;return this},makeSafe:function(){var e=1e-6;this.phi=Math.max(e,Math.min(Math.PI-e,this.phi));return this},setFromVector3:function(e){return this.setFromCartesianCoords(e.x,e.y,e.z)},setFromCartesianCoords:function(e,t,r){this.radius=Math.sqrt(e*e+t*t+r*r);if(this.radius===0){this.theta=0;this.phi=0}else{this.theta=Math.atan2(e,r);this.phi=Math.acos(jt.clamp(t/this.radius,-1,1))}return this}});function Kl(e,t,r){this.radius=e!==undefined?e:1;this.theta=t!==undefined?t:0;this.y=r!==undefined?r:0;return this}Object.assign(Kl.prototype,{set:function(e,t,r){this.radius=e;this.theta=t;this.y=r;return this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){this.radius=e.radius;this.theta=e.theta;this.y=e.y;return this},setFromVector3:function(e){return this.setFromCartesianCoords(e.x,e.y,e.z)},setFromCartesianCoords:function(e,t,r){this.radius=Math.sqrt(e*e+r*r);this.theta=Math.atan2(e,r);this.y=t;return this}});function Zl(e,t){this.min=e!==undefined?e:new zt(+Infinity,+Infinity);this.max=t!==undefined?t:new zt(-Infinity,-Infinity)}Object.assign(Zl.prototype,{set:function(e,t){this.min.copy(e);this.max.copy(t);return this},setFromPoints:function(e){this.makeEmpty();for(var t=0,r=e.length;t<r;t++){this.expandByPoint(e[t])}return this},setFromCenterAndSize:function(){var e=new zt;return function t(r,n){var i=e.copy(n).multiplyScalar(.5);this.min.copy(r).sub(i);this.max.copy(r).add(i);return this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(e){this.min.copy(e.min);this.max.copy(e.max);return this},makeEmpty:function(){this.min.x=this.min.y=+Infinity;this.max.x=this.max.y=-Infinity;return this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y},getCenter:function(e){if(e===undefined){console.warn("THREE.Box2: .getCenter() target is now required");e=new zt}return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(e){if(e===undefined){console.warn("THREE.Box2: .getSize() target is now required");e=new zt}return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)},expandByPoint:function(e){this.min.min(e);this.max.max(e);return this},expandByVector:function(e){this.min.sub(e);this.max.add(e);return this},expandByScalar:function(e){this.min.addScalar(-e);this.max.addScalar(e);return this},containsPoint:function(e){return e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y?false:true},containsBox:function(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y},getParameter:function(e,t){if(t===undefined){console.warn("THREE.Box2: .getParameter() target is now required");t=new zt}return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))},intersectsBox:function(e){return e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y?false:true},clampPoint:function(e,t){if(t===undefined){console.warn("THREE.Box2: .clampPoint() target is now required");t=new zt}return t.copy(e).clamp(this.min,this.max)},distanceToPoint:function(){var e=new zt;return function t(r){var n=e.copy(r).clamp(this.min,this.max);return n.sub(r).length()}}(),intersect:function(e){this.min.max(e.min);this.max.min(e.max);return this},union:function(e){this.min.min(e.min);this.max.max(e.max);return this},translate:function(e){this.min.add(e);this.max.add(e);return this},equals:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)}});function $l(e,t){this.start=e!==undefined?e:new Ht;this.end=t!==undefined?t:new Ht}Object.assign($l.prototype,{set:function(e,t){this.start.copy(e);this.end.copy(t);return this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){this.start.copy(e.start);this.end.copy(e.end);return this},getCenter:function(e){if(e===undefined){console.warn("THREE.Line3: .getCenter() target is now required");e=new Ht}return e.addVectors(this.start,this.end).multiplyScalar(.5)},delta:function(e){if(e===undefined){console.warn("THREE.Line3: .delta() target is now required");e=new Ht}return e.subVectors(this.end,this.start)},distanceSq:function(){return this.start.distanceToSquared(this.end)},distance:function(){return this.start.distanceTo(this.end)},at:function(e,t){if(t===undefined){console.warn("THREE.Line3: .at() target is now required");t=new Ht}return this.delta(t).multiplyScalar(e).add(this.start)},closestPointToPointParameter:function(){var e=new Ht;var t=new Ht;return function r(n,i){e.subVectors(n,this.start);t.subVectors(this.end,this.start);var a=t.dot(t);var o=t.dot(e);var s=o/a;if(i){s=jt.clamp(s,0,1)}return s}}(),closestPointToPoint:function(e,t,r){var n=this.closestPointToPointParameter(e,t);if(r===undefined){console.warn("THREE.Line3: .closestPointToPoint() target is now required");r=new Ht}return this.delta(r).multiplyScalar(n).add(this.start)},applyMatrix4:function(e){this.start.applyMatrix4(e);this.end.applyMatrix4(e);return this},equals:function(e){return e.start.equals(this.start)&&e.end.equals(this.end)}});function ef(e){Ci.call(this);this.material=e;this.render=function(){}}ef.prototype=Object.create(Ci.prototype);ef.prototype.constructor=ef;ef.prototype.isImmediateRenderObject=true;function tf(e,t,r,n){this.object=e;this.size=t!==undefined?t:1;var i=r!==undefined?r:16711680;var a=n!==undefined?n:1;var o=0;var s=this.object.geometry;if(s&&s.isGeometry){o=s.faces.length*3}else if(s&&s.isBufferGeometry){o=s.attributes.normal.count}var u=new Wi;var c=new zi(o*2*3,3);u.addAttribute("position",c);hs.call(this,u,new ls({color:i,linewidth:a}));this.matrixAutoUpdate=false;this.update()}tf.prototype=Object.create(hs.prototype);tf.prototype.constructor=tf;tf.prototype.update=function(){var e=new Ht;var t=new Ht;var r=new Vt;return function n(){var i=["a","b","c"];this.object.updateMatrixWorld(true);r.getNormalMatrix(this.object.matrixWorld);var a=this.object.matrixWorld;var o=this.geometry.attributes.position;var s=this.object.geometry;if(s&&s.isGeometry){var u=s.vertices;var c=s.faces;var l=0;for(var f=0,h=c.length;f<h;f++){var d=c[f];for(var p=0,v=d.vertexNormals.length;p<v;p++){var m=u[d[i[p]]];var g=d.vertexNormals[p];e.copy(m).applyMatrix4(a);t.copy(g).applyMatrix3(r).normalize().multiplyScalar(this.size).add(e);o.setXYZ(l,e.x,e.y,e.z);l=l+1;o.setXYZ(l,t.x,t.y,t.z);l=l+1}}}else if(s&&s.isBufferGeometry){var y=s.attributes.position;var b=s.attributes.normal;var l=0;for(var p=0,v=y.count;p<v;p++){e.set(y.getX(p),y.getY(p),y.getZ(p)).applyMatrix4(a);t.set(b.getX(p),b.getY(p),b.getZ(p));t.applyMatrix3(r).normalize().multiplyScalar(this.size).add(e);o.setXYZ(l,e.x,e.y,e.z);l=l+1;o.setXYZ(l,t.x,t.y,t.z);l=l+1}}o.needsUpdate=true}}();function rf(e,t){Ci.call(this);this.light=e;this.light.updateMatrixWorld();this.matrix=e.matrixWorld;this.matrixAutoUpdate=false;this.color=t;var r=new Wi;var n=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(var i=0,a=1,o=32;i<o;i++,a++){var s=i/o*Math.PI*2;var u=a/o*Math.PI*2;n.push(Math.cos(s),Math.sin(s),1,Math.cos(u),Math.sin(u),1)}r.addAttribute("position",new zi(n,3));var c=new ls({fog:false});this.cone=new hs(r,c);this.add(this.cone);this.update()}rf.prototype=Object.create(Ci.prototype);rf.prototype.constructor=rf;rf.prototype.dispose=function(){this.cone.geometry.dispose();this.cone.material.dispose()};rf.prototype.update=function(){var e=new Ht;return function t(){this.light.updateMatrixWorld();var r=this.light.distance?this.light.distance:1e3;var n=r*Math.tan(this.light.angle);this.cone.scale.set(n,n,r);e.setFromMatrixPosition(this.light.target.matrixWorld);this.cone.lookAt(e);if(this.color!==undefined){this.cone.material.color.set(this.color)}else{this.cone.material.color.copy(this.light.color)}}}();function nf(e){var t=[];if(e&&e.isBone){t.push(e)}for(var r=0;r<e.children.length;r++){t.push.apply(t,nf(e.children[r]))}return t}function af(e){var t=nf(e);var r=new Wi;var n=[];var i=[];var a=new xi(0,0,1);var o=new xi(0,1,0);for(var s=0;s<t.length;s++){var u=t[s];if(u.parent&&u.parent.isBone){n.push(0,0,0);n.push(0,0,0);i.push(a.r,a.g,a.b);i.push(o.r,o.g,o.b)}}r.addAttribute("position",new zi(n,3));r.addAttribute("color",new zi(i,3));var c=new ls({vertexColors:A,depthTest:false,depthWrite:false,transparent:true});hs.call(this,r,c);this.root=e;this.bones=t;this.matrix=e.matrixWorld;this.matrixAutoUpdate=false}af.prototype=Object.create(hs.prototype);af.prototype.constructor=af;af.prototype.updateMatrixWorld=function(){var e=new Ht;var t=new Nt;var r=new Nt;return function n(i){var a=this.bones;var o=this.geometry;var s=o.getAttribute("position");r.getInverse(this.root.matrixWorld);for(var u=0,c=0;u<a.length;u++){var l=a[u];if(l.parent&&l.parent.isBone){t.multiplyMatrices(r,l.matrixWorld);e.setFromMatrixPosition(t);s.setXYZ(c,e.x,e.y,e.z);t.multiplyMatrices(r,l.parent.matrixWorld);e.setFromMatrixPosition(t);s.setXYZ(c+1,e.x,e.y,e.z);c+=2}}o.getAttribute("position").needsUpdate=true;Ci.prototype.updateMatrixWorld.call(this,i)}}();function of(e,t,r){this.light=e;this.light.updateMatrixWorld();this.color=r;var n=new Eu(t,4,2);var i=new ta({wireframe:true,fog:false});ra.call(this,n,i);this.matrix=this.light.matrixWorld;this.matrixAutoUpdate=false;this.update()}of.prototype=Object.create(ra.prototype);of.prototype.constructor=of;of.prototype.dispose=function(){this.geometry.dispose();this.material.dispose()};of.prototype.update=function(){if(this.color!==undefined){this.material.color.set(this.color)}else{this.material.color.copy(this.light.color)}};function sf(e,t){Ci.call(this);this.light=e;this.light.updateMatrixWorld();this.matrix=e.matrixWorld;this.matrixAutoUpdate=false;this.color=t;var r=new ls({fog:false});var n=new Wi;n.addAttribute("position",new Ri(new Float32Array(5*3),3));this.line=new fs(n,r);this.add(this.line);this.update()}sf.prototype=Object.create(Ci.prototype);sf.prototype.constructor=sf;sf.prototype.dispose=function(){this.children[0].geometry.dispose();this.children[0].material.dispose()};sf.prototype.update=function(){var e=this.light.width*.5;var t=this.light.height*.5;var r=this.line.geometry.attributes.position;var n=r.array;n[0]=e;n[1]=-t;n[2]=0;n[3]=e;n[4]=t;n[5]=0;n[6]=-e;n[7]=t;n[8]=0;n[9]=-e;n[10]=-t;n[11]=0;n[12]=e;n[13]=-t;n[14]=0;r.needsUpdate=true;if(this.color!==undefined){this.line.material.color.set(this.color)}else{this.line.material.color.copy(this.light.color)}};function uf(e,t,r){Ci.call(this);this.light=e;this.light.updateMatrixWorld();this.matrix=e.matrixWorld;this.matrixAutoUpdate=false;this.color=r;var n=new Ps(t);n.rotateY(Math.PI*.5);this.material=new ta({wireframe:true,fog:false});if(this.color===undefined)this.material.vertexColors=A;var i=n.getAttribute("position");var a=new Float32Array(i.count*3);n.addAttribute("color",new Ri(a,3));this.add(new ra(n,this.material));this.update()}uf.prototype=Object.create(Ci.prototype);uf.prototype.constructor=uf;uf.prototype.dispose=function(){this.children[0].geometry.dispose();this.children[0].material.dispose()};uf.prototype.update=function(){var e=new Ht;var t=new xi;var r=new xi;return function n(){var i=this.children[0];if(this.color!==undefined){this.material.color.set(this.color)}else{var a=i.geometry.getAttribute("color");t.copy(this.light.color);r.copy(this.light.groundColor);for(var o=0,s=a.count;o<s;o++){var u=o<s/2?t:r;a.setXYZ(o,u.r,u.g,u.b)}a.needsUpdate=true}i.lookAt(e.setFromMatrixPosition(this.light.matrixWorld).negate())}}();function cf(e,t,r,n){e=e||10;t=t||10;r=new xi(r!==undefined?r:4473924);n=new xi(n!==undefined?n:8947848);var i=t/2;var a=e/t;var o=e/2;var s=[],u=[];for(var c=0,l=0,f=-o;c<=t;c++,f+=a){s.push(-o,0,f,o,0,f);s.push(f,0,-o,f,0,o);var h=c===i?r:n;h.toArray(u,l);l+=3;h.toArray(u,l);l+=3;h.toArray(u,l);l+=3;h.toArray(u,l);l+=3}var d=new Wi;d.addAttribute("position",new zi(s,3));d.addAttribute("color",new zi(u,3));var p=new ls({vertexColors:A});hs.call(this,d,p)}cf.prototype=Object.create(hs.prototype);cf.prototype.constructor=cf;function lf(e,t,r,n,i,a){e=e||10;t=t||16;r=r||8;n=n||64;i=new xi(i!==undefined?i:4473924);a=new xi(a!==undefined?a:8947848);var o=[];var s=[];var u,c;var l,f,h,d,p;for(f=0;f<=t;f++){l=f/t*(Math.PI*2);u=Math.sin(l)*e;c=Math.cos(l)*e;o.push(0,0,0);o.push(u,0,c);p=f&1?i:a;s.push(p.r,p.g,p.b);s.push(p.r,p.g,p.b)}for(f=0;f<=r;f++){p=f&1?i:a;d=e-e/r*f;for(h=0;h<n;h++){l=h/n*(Math.PI*2);u=Math.sin(l)*d;c=Math.cos(l)*d;o.push(u,0,c);s.push(p.r,p.g,p.b);l=(h+1)/n*(Math.PI*2);u=Math.sin(l)*d;c=Math.cos(l)*d;o.push(u,0,c);s.push(p.r,p.g,p.b)}}var v=new Wi;v.addAttribute("position",new zi(o,3));v.addAttribute("color",new zi(s,3));var m=new ls({vertexColors:A});hs.call(this,v,m)}lf.prototype=Object.create(hs.prototype);lf.prototype.constructor=lf;function ff(e,t,r,n){this.object=e;this.size=t!==undefined?t:1;var i=r!==undefined?r:16776960;var a=n!==undefined?n:1;var o=0;var s=this.object.geometry;if(s&&s.isGeometry){o=s.faces.length}else{console.warn("THREE.FaceNormalsHelper: only THREE.Geometry is supported. Use THREE.VertexNormalsHelper, instead.")}var u=new Wi;var c=new zi(o*2*3,3);u.addAttribute("position",c);hs.call(this,u,new ls({color:i,linewidth:a}));this.matrixAutoUpdate=false;this.update()}ff.prototype=Object.create(hs.prototype);ff.prototype.constructor=ff;ff.prototype.update=function(){var e=new Ht;var t=new Ht;var r=new Vt;return function n(){this.object.updateMatrixWorld(true);r.getNormalMatrix(this.object.matrixWorld);var i=this.object.matrixWorld;var a=this.geometry.attributes.position;var o=this.object.geometry;var s=o.vertices;var u=o.faces;var c=0;for(var l=0,f=u.length;l<f;l++){var h=u[l];var d=h.normal;e.copy(s[h.a]).add(s[h.b]).add(s[h.c]).divideScalar(3).applyMatrix4(i);t.copy(d).applyMatrix3(r).normalize().multiplyScalar(this.size).add(e);a.setXYZ(c,e.x,e.y,e.z);c=c+1;a.setXYZ(c,t.x,t.y,t.z);c=c+1}a.needsUpdate=true}}();function hf(e,t,r){Ci.call(this);this.light=e;this.light.updateMatrixWorld();this.matrix=e.matrixWorld;this.matrixAutoUpdate=false;this.color=r;if(t===undefined)t=1;var n=new Wi;n.addAttribute("position",new zi([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));var i=new ls({fog:false});this.lightPlane=new fs(n,i);this.add(this.lightPlane);n=new Wi;n.addAttribute("position",new zi([0,0,0,0,0,1],3));this.targetLine=new fs(n,i);this.add(this.targetLine);this.update()}hf.prototype=Object.create(Ci.prototype);hf.prototype.constructor=hf;hf.prototype.dispose=function(){this.lightPlane.geometry.dispose();this.lightPlane.material.dispose();this.targetLine.geometry.dispose();this.targetLine.material.dispose()};hf.prototype.update=function(){var e=new Ht;var t=new Ht;var r=new Ht;return function n(){e.setFromMatrixPosition(this.light.matrixWorld);t.setFromMatrixPosition(this.light.target.matrixWorld);r.subVectors(t,e);this.lightPlane.lookAt(t);if(this.color!==undefined){this.lightPlane.material.color.set(this.color);this.targetLine.material.color.set(this.color)}else{this.lightPlane.material.color.copy(this.light.color);this.targetLine.material.color.copy(this.light.color)}this.targetLine.lookAt(t);this.targetLine.scale.z=r.length()}}();function df(e){var t=new Wi;var r=new ls({color:16777215,vertexColors:w});var n=[];var i=[];var a={};var o=new xi(16755200);var s=new xi(16711680);var u=new xi(43775);var c=new xi(16777215);var l=new xi(3355443);f("n1","n2",o);f("n2","n4",o);f("n4","n3",o);f("n3","n1",o);f("f1","f2",o);f("f2","f4",o);f("f4","f3",o);f("f3","f1",o);f("n1","f1",o);f("n2","f2",o);f("n3","f3",o);f("n4","f4",o);f("p","n1",s);f("p","n2",s);f("p","n3",s);f("p","n4",s);f("u1","u2",u);f("u2","u3",u);f("u3","u1",u);f("c","t",c);f("p","c",l);f("cn1","cn2",l);f("cn3","cn4",l);f("cf1","cf2",l);f("cf3","cf4",l);function f(e,t,r){h(e,r);h(t,r)}function h(e,t){n.push(0,0,0);i.push(t.r,t.g,t.b);if(a[e]===undefined){a[e]=[]}a[e].push(n.length/3-1)}t.addAttribute("position",new zi(n,3));t.addAttribute("color",new zi(i,3));hs.call(this,t,r);this.camera=e;if(this.camera.updateProjectionMatrix)this.camera.updateProjectionMatrix();this.matrix=e.matrixWorld;this.matrixAutoUpdate=false;this.pointMap=a;this.update()}df.prototype=Object.create(hs.prototype);df.prototype.constructor=df;df.prototype.update=function(){var e,t;var r=new Ht;var n=new Ho;function i(i,a,o,s){r.set(a,o,s).unproject(n);var u=t[i];if(u!==undefined){var c=e.getAttribute("position");for(var l=0,f=u.length;l<f;l++){c.setXYZ(u[l],r.x,r.y,r.z)}}}return function r(){e=this.geometry;t=this.pointMap;var a=1,o=1;n.projectionMatrix.copy(this.camera.projectionMatrix);i("c",0,0,-1);i("t",0,0,1);i("n1",-a,-o,-1);i("n2",a,-o,-1);i("n3",-a,o,-1);i("n4",a,o,-1);i("f1",-a,-o,1);i("f2",a,-o,1);i("f3",-a,o,1);i("f4",a,o,1);i("u1",a*.7,o*1.1,-1);i("u2",-a*.7,o*1.1,-1);i("u3",0,o*2,-1);i("cf1",-a,0,1);i("cf2",a,0,1);i("cf3",0,-o,1);i("cf4",0,o,1);i("cn1",-a,0,-1);i("cn2",a,0,-1);i("cn3",0,-o,-1);i("cn4",0,o,-1);e.getAttribute("position").needsUpdate=true}}();function pf(e,t){this.object=e;if(t===undefined)t=16776960;var r=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]);var n=new Float32Array(8*3);var i=new Wi;i.setIndex(new Ri(r,1));i.addAttribute("position",new Ri(n,3));hs.call(this,i,new ls({color:t}));this.matrixAutoUpdate=false;this.update()}pf.prototype=Object.create(hs.prototype);pf.prototype.constructor=pf;pf.prototype.update=function(){var e=new $t;return function t(r){if(r!==undefined){console.warn("THREE.BoxHelper: .update() has no longer arguments.")}if(this.object!==undefined){e.setFromObject(this.object)}if(e.isEmpty())return;var n=e.min;var i=e.max;var a=this.geometry.attributes.position;var o=a.array;o[0]=i.x;o[1]=i.y;o[2]=i.z;o[3]=n.x;o[4]=i.y;o[5]=i.z;o[6]=n.x;o[7]=n.y;o[8]=i.z;o[9]=i.x;o[10]=n.y;o[11]=i.z;o[12]=i.x;o[13]=i.y;o[14]=n.z;o[15]=n.x;o[16]=i.y;o[17]=n.z;o[18]=n.x;o[19]=n.y;o[20]=n.z;o[21]=i.x;o[22]=n.y;o[23]=n.z;a.needsUpdate=true;this.geometry.computeBoundingSphere()}}();pf.prototype.setFromObject=function(e){this.object=e;this.update();return this};pf.prototype.copy=function(e){hs.prototype.copy.call(this,e);this.object=e.object;return this};pf.prototype.clone=function(){return(new this.constructor).copy(this)};function vf(e,t){this.type="Box3Helper";this.box=e;var r=t!==undefined?t:16776960;var n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]);var i=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1];var a=new Wi;a.setIndex(new Ri(n,1));a.addAttribute("position",new zi(i,3));hs.call(this,a,new ls({color:r}));this.geometry.computeBoundingSphere()}vf.prototype=Object.create(hs.prototype);vf.prototype.constructor=vf;vf.prototype.updateMatrixWorld=function(e){var t=this.box;if(t.isEmpty())return;t.getCenter(this.position);t.getSize(this.scale);this.scale.multiplyScalar(.5);Ci.prototype.updateMatrixWorld.call(this,e)};function mf(e,t,r){this.type="PlaneHelper";this.plane=e;this.size=t===undefined?1:t;var n=r!==undefined?r:16776960;var i=[1,-1,1,-1,1,1,-1,-1,1,1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,0,0,1,0,0,0];var a=new Wi;a.addAttribute("position",new zi(i,3));a.computeBoundingSphere();fs.call(this,a,new ls({color:n}));var o=[1,1,1,-1,1,1,-1,-1,1,1,1,1,-1,-1,1,1,-1,1];var s=new Wi;s.addAttribute("position",new zi(o,3));s.computeBoundingSphere();this.add(new ra(s,new ta({color:n,opacity:.2,transparent:true,depthWrite:false})))}mf.prototype=Object.create(fs.prototype);mf.prototype.constructor=mf;mf.prototype.updateMatrixWorld=function(e){var t=-this.plane.constant;if(Math.abs(t)<1e-8)t=1e-8;this.scale.set(.5*this.size,.5*this.size,t);this.children[0].material.side=t<0?m:v;this.lookAt(this.plane.normal);Ci.prototype.updateMatrixWorld.call(this,e)};var gf,yf;function bf(e,t,r,n,i,a){Ci.call(this);if(e===undefined)e=new THREE.Vector3(0,0,1);if(t===undefined)t=new THREE.Vector3(0,0,0);if(r===undefined)r=1;if(n===undefined)n=16776960;if(i===undefined)i=.2*r;if(a===undefined)a=.2*i;if(gf===undefined){gf=new Wi;gf.addAttribute("position",new zi([0,0,0,0,1,0],3));yf=new Du(0,.5,1,5,1);yf.translate(0,-.5,0)}this.position.copy(t);this.line=new fs(gf,new ls({color:n}));this.line.matrixAutoUpdate=false;this.add(this.line);this.cone=new ra(yf,new ta({color:n}));this.cone.matrixAutoUpdate=false;this.add(this.cone);this.setDirection(e);this.setLength(r,i,a)}bf.prototype=Object.create(Ci.prototype);bf.prototype.constructor=bf;bf.prototype.setDirection=function(){var e=new Ht;var t;return function r(n){if(n.y>.99999){this.quaternion.set(0,0,0,1)}else if(n.y<-.99999){this.quaternion.set(1,0,0,0)}else{e.set(n.z,0,-n.x).normalize();t=Math.acos(n.y);this.quaternion.setFromAxisAngle(e,t)}}}();bf.prototype.setLength=function(e,t,r){if(t===undefined)t=.2*e;if(r===undefined)r=.2*t;this.line.scale.set(1,Math.max(0,e-t),1);this.line.updateMatrix();this.cone.scale.set(r,t,r);this.cone.position.y=e;this.cone.updateMatrix()};bf.prototype.setColor=function(e){this.line.material.color.copy(e);this.cone.material.color.copy(e)};bf.prototype.copy=function(e){Ci.prototype.copy.call(this,e,false);this.line.copy(e.line);this.cone.copy(e.cone);return this};bf.prototype.clone=function(){return(new this.constructor).copy(this)};function xf(e){e=e||1;var t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e];var r=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1];var n=new Wi;n.addAttribute("position",new zi(t,3));n.addAttribute("color",new zi(r,3));var i=new ls({vertexColors:A});hs.call(this,n,i)}xf.prototype=Object.create(hs.prototype);xf.prototype.constructor=xf;function wf(e,t,r,n,i,a,o){console.warn("THREE.Face4 has been removed. A THREE.Face3 will be created instead.");return new Si(e,t,r,i,a,o)}var Af=0;var Mf=1;function Ef(e){console.warn("THREE.MeshFaceMaterial has been removed. Use an Array instead.");return e}function Sf(e){if(e===undefined)e=[];console.warn("THREE.MultiMaterial has been removed. Use an Array instead.");e.isMultiMaterial=true;e.materials=e;e.clone=function(){return e.slice()};return e}function Tf(e,t){console.warn("THREE.PointCloud has been renamed to THREE.Points.");return new vs(e,t)}function _f(e){console.warn("THREE.Particle has been renamed to THREE.Sprite.");return new as(e)}function Pf(e,t){console.warn("THREE.ParticleSystem has been renamed to THREE.Points.");return new vs(e,t)}function Cf(e){console.warn("THREE.PointCloudMaterial has been renamed to THREE.PointsMaterial.");return new ps(e)}function Of(e){console.warn("THREE.ParticleBasicMaterial has been renamed to THREE.PointsMaterial.");return new ps(e)}function Lf(e){console.warn("THREE.ParticleSystemMaterial has been renamed to THREE.PointsMaterial.");return new ps(e)}function Rf(e,t,r){console.warn("THREE.Vertex has been removed. Use THREE.Vector3 instead.");return new Ht(e,t,r)}function Bf(e,t){console.warn("THREE.DynamicBufferAttribute has been removed. Use new THREE.BufferAttribute().setDynamic( true ) instead.");return new Ri(e,t).setDynamic(true)}function Df(e,t){console.warn("THREE.Int8Attribute has been removed. Use new THREE.Int8BufferAttribute() instead.");return new Bi(e,t)}function If(e,t){console.warn("THREE.Uint8Attribute has been removed. Use new THREE.Uint8BufferAttribute() instead.");return new Di(e,t)}function Ff(e,t){console.warn("THREE.Uint8ClampedAttribute has been removed. Use new THREE.Uint8ClampedBufferAttribute() instead.");return new Ii(e,t)}function Uf(e,t){console.warn("THREE.Int16Attribute has been removed. Use new THREE.Int16BufferAttribute() instead.");return new Fi(e,t)}function Gf(e,t){console.warn("THREE.Uint16Attribute has been removed. Use new THREE.Uint16BufferAttribute() instead.");return new Ui(e,t)}function jf(e,t){console.warn("THREE.Int32Attribute has been removed. Use new THREE.Int32BufferAttribute() instead.");return new Gi(e,t)}function zf(e,t){console.warn("THREE.Uint32Attribute has been removed. Use new THREE.Uint32BufferAttribute() instead.");return new ji(e,t)}function Nf(e,t){console.warn("THREE.Float32Attribute has been removed. Use new THREE.Float32BufferAttribute() instead.");return new zi(e,t)}function kf(e,t){console.warn("THREE.Float64Attribute has been removed. Use new THREE.Float64BufferAttribute() instead.");return new Ni(e,t)}Ec.create=function(e,t){console.log("THREE.Curve.create() has been deprecated");e.prototype=Object.create(Ec.prototype);e.prototype.constructor=e;e.prototype.getPoint=t;return e};Object.assign(Kc.prototype,{createPointsGeometry:function(e){console.warn("THREE.CurvePath: .createPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");var t=this.getPoints(e);return this.createGeometry(t)},createSpacedPointsGeometry:function(e){console.warn("THREE.CurvePath: .createSpacedPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");var t=this.getSpacedPoints(e);return this.createGeometry(t)},createGeometry:function(e){console.warn("THREE.CurvePath: .createGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");var t=new Li;for(var r=0,n=e.length;r<n;r++){var i=e[r];t.vertices.push(new Ht(i.x,i.y,i.z||0))}return t}});Object.assign(Zc.prototype,{fromPoints:function(e){console.warn("THREE.Path: .fromPoints() has been renamed to .setFromPoints().");this.setFromPoints(e)}});function Hf(e){console.warn("THREE.ClosedSplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead.");Rc.call(this,e);this.type="catmullrom";this.closed=true}Hf.prototype=Object.create(Rc.prototype);function Vf(e){console.warn("THREE.SplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead.");Rc.call(this,e);this.type="catmullrom"}Vf.prototype=Object.create(Rc.prototype);function Wf(e){console.warn("THREE.Spline has been removed. Use THREE.CatmullRomCurve3 instead.");Rc.call(this,e);this.type="catmullrom"}Wf.prototype=Object.create(Rc.prototype);Object.assign(Wf.prototype,{initFromArray:function(){console.error("THREE.Spline: .initFromArray() has been removed.")},getControlPointsArray:function(){console.error("THREE.Spline: .getControlPointsArray() has been removed.")},reparametrizeByArcLength:function(){console.error("THREE.Spline: .reparametrizeByArcLength() has been removed.")}});function Yf(e){console.warn("THREE.AxisHelper has been renamed to THREE.AxesHelper.");return new xf(e)}function Xf(e,t){console.warn("THREE.BoundingBoxHelper has been deprecated. Creating a THREE.BoxHelper instead.");return new pf(e,t)}function Qf(e,t){console.warn("THREE.EdgesHelper has been removed. Use THREE.EdgesGeometry instead.");return new hs(new Ru(e.geometry),new ls({color:t!==undefined?t:16777215}))}cf.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")};af.prototype.update=function(){console.error("THREE.SkeletonHelper: update() no longer needs to be called.")};function qf(e,t){console.warn("THREE.WireframeHelper has been removed. Use THREE.WireframeGeometry instead.");return new hs(new xs(e.geometry),new ls({color:t!==undefined?t:16777215}))}Object.assign(Sl.prototype,{extractUrlBase:function(e){console.warn("THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead.");return hl.extractUrlBase(e)}});function Jf(e){console.warn("THREE.XHRLoader has been renamed to THREE.FileLoader.");return new gc(e)}function Kf(e){console.warn("THREE.BinaryTextureLoader has been renamed to THREE.DataTextureLoader.");return new xc(e)}Object.assign(vl.prototype,{setTexturePath:function(e){console.warn("THREE.ObjectLoader: .setTexturePath() has been renamed to .setResourcePath().");return this.setResourcePath(e)}});Object.assign(Zl.prototype,{center:function(e){console.warn("THREE.Box2: .center() has been renamed to .getCenter().");return this.getCenter(e)},empty:function(){console.warn("THREE.Box2: .empty() has been renamed to .isEmpty().");return this.isEmpty()},isIntersectionBox:function(e){console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox().");return this.intersectsBox(e)},size:function(e){console.warn("THREE.Box2: .size() has been renamed to .getSize().");return this.getSize(e)}});Object.assign($t.prototype,{center:function(e){console.warn("THREE.Box3: .center() has been renamed to .getCenter().");return this.getCenter(e)},empty:function(){console.warn("THREE.Box3: .empty() has been renamed to .isEmpty().");return this.isEmpty()},isIntersectionBox:function(e){console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox().");return this.intersectsBox(e)},isIntersectionSphere:function(e){console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere().");return this.intersectsSphere(e)},size:function(e){console.warn("THREE.Box3: .size() has been renamed to .getSize().");return this.getSize(e)}});$l.prototype.center=function(e){console.warn("THREE.Line3: .center() has been renamed to .getCenter().");return this.getCenter(e)};Object.assign(jt,{random16:function(){console.warn("THREE.Math: .random16() has been deprecated. Use Math.random() instead.");return Math.random()},nearestPowerOfTwo:function(e){console.warn("THREE.Math: .nearestPowerOfTwo() has been renamed to .floorPowerOfTwo().");return jt.floorPowerOfTwo(e)},nextPowerOfTwo:function(e){console.warn("THREE.Math: .nextPowerOfTwo() has been renamed to .ceilPowerOfTwo().");return jt.ceilPowerOfTwo(e)}});Object.assign(Vt.prototype,{flattenToArrayOffset:function(e,t){console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead.");return this.toArray(e,t)},multiplyVector3:function(e){console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead.");return e.applyMatrix3(this)},multiplyVector3Array:function(){console.error("THREE.Matrix3: .multiplyVector3Array() has been removed.")},applyToBuffer:function(e){console.warn("THREE.Matrix3: .applyToBuffer() has been removed. Use matrix.applyToBufferAttribute( attribute ) instead.");return this.applyToBufferAttribute(e)},applyToVector3Array:function(){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")}});Object.assign(Nt.prototype,{extractPosition:function(e){console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition().");return this.copyPosition(e)},flattenToArrayOffset:function(e,t){console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead.");return this.toArray(e,t)},getPosition:function(){var e;return function t(){if(e===undefined)e=new Ht;console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead.");return e.setFromMatrixColumn(this,3)}}(),setRotationFromQuaternion:function(e){console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion().");return this.makeRotationFromQuaternion(e)},multiplyToArray:function(){console.warn("THREE.Matrix4: .multiplyToArray() has been removed.")},multiplyVector3:function(e){console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead.");return e.applyMatrix4(this)},multiplyVector4:function(e){console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead.");return e.applyMatrix4(this)},multiplyVector3Array:function(){console.error("THREE.Matrix4: .multiplyVector3Array() has been removed.")},rotateAxis:function(e){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead.");e.transformDirection(this)},crossVector:function(e){console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead.");return e.applyMatrix4(this)},translate:function(){console.error("THREE.Matrix4: .translate() has been removed.")},rotateX:function(){console.error("THREE.Matrix4: .rotateX() has been removed.")},rotateY:function(){console.error("THREE.Matrix4: .rotateY() has been removed.")},rotateZ:function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")},rotateByAxis:function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")},applyToBuffer:function(e){console.warn("THREE.Matrix4: .applyToBuffer() has been removed. Use matrix.applyToBufferAttribute( attribute ) instead.");return this.applyToBufferAttribute(e)},applyToVector3Array:function(){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")},makeFrustum:function(e,t,r,n,i,a){console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead.");return this.makePerspective(e,t,n,r,i,a)}});tr.prototype.isIntersectionLine=function(e){console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine().");return this.intersectsLine(e)};kt.prototype.multiplyVector3=function(e){console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead.");return e.applyQuaternion(this)};Object.assign($i.prototype,{isIntersectionBox:function(e){console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox().");return this.intersectsBox(e)},isIntersectionPlane:function(e){console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane().");return this.intersectsPlane(e)},isIntersectionSphere:function(e){console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere().");return this.intersectsSphere(e)}});Object.assign(ea.prototype,{area:function(){console.warn("THREE.Triangle: .area() has been renamed to .getArea().");return this.getArea()},barycoordFromPoint:function(e,t){console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord().");return this.getBarycoord(e,t)},midpoint:function(e){console.warn("THREE.Triangle: .midpoint() has been renamed to .getMidpoint().");return this.getMidpoint(e)},normal:function(e){console.warn("THREE.Triangle: .normal() has been renamed to .getNormal().");return this.getNormal(e)},plane:function(e){console.warn("THREE.Triangle: .plane() has been renamed to .getPlane().");return this.getPlane(e)}});Object.assign(ea,{barycoordFromPoint:function(e,t,r,n,i){console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord().");return ea.getBarycoord(e,t,r,n,i)},normal:function(e,t,r,n){console.warn("THREE.Triangle: .normal() has been renamed to .getNormal().");return ea.getNormal(e,t,r,n)}});Object.assign($c.prototype,{extractAllPoints:function(e){console.warn("THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead.");return this.extractPoints(e)},extrude:function(e){console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead.");return new gu(this,e)},makeGeometry:function(e){console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead.");return new Cu(this,e)}});Object.assign(zt.prototype,{fromAttribute:function(e,t,r){console.warn("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute().");return this.fromBufferAttribute(e,t,r)},distanceToManhattan:function(e){console.warn("THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo().");return this.manhattanDistanceTo(e)},lengthManhattan:function(){console.warn("THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength().");return this.manhattanLength()}});Object.assign(Ht.prototype,{setEulerFromRotationMatrix:function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},setEulerFromQuaternion:function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},getPositionFromMatrix:function(e){console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition().");return this.setFromMatrixPosition(e)},getScaleFromMatrix:function(e){console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale().");return this.setFromMatrixScale(e)},getColumnFromMatrix:function(e,t){console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn().");return this.setFromMatrixColumn(t,e)},applyProjection:function(e){console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead.");return this.applyMatrix4(e)},fromAttribute:function(e,t,r){console.warn("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute().");return this.fromBufferAttribute(e,t,r)},distanceToManhattan:function(e){console.warn("THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo().");return this.manhattanDistanceTo(e)},lengthManhattan:function(){console.warn("THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength().");return this.manhattanLength()}});Object.assign(qt.prototype,{fromAttribute:function(e,t,r){console.warn("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute().");return this.fromBufferAttribute(e,t,r)},lengthManhattan:function(){console.warn("THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength().");return this.manhattanLength()}});Object.assign(Li.prototype,{computeTangents:function(){console.error("THREE.Geometry: .computeTangents() has been removed.")},computeLineDistances:function(){console.error("THREE.Geometry: .computeLineDistances() has been removed. Use THREE.Line.computeLineDistances() instead.")}});Object.assign(Ci.prototype,{getChildByName:function(e){console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName().");return this.getObjectByName(e)},renderDepth:function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},translate:function(e,t){console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead.");return this.translateOnAxis(t,e)},getWorldRotation:function(){console.error("THREE.Object3D: .getWorldRotation() has been removed. Use THREE.Object3D.getWorldQuaternion( target ) instead.")}});Object.defineProperties(Ci.prototype,{eulerOrder:{get:function(){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order.");return this.rotation.order},set:function(e){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order.");this.rotation.order=e}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}});Object.defineProperties(os.prototype,{objects:{get:function(){console.warn("THREE.LOD: .objects has been renamed to .levels.");return this.levels}}});Object.defineProperty(us.prototype,"useVertexTexture",{get:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")},set:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")}});ss.prototype.initBones=function(){console.error("THREE.SkinnedMesh: initBones() has been removed.")};Object.defineProperty(Ec.prototype,"__arcLengthDivisions",{get:function(){console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions.");return this.arcLengthDivisions},set:function(e){console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions.");this.arcLengthDivisions=e}});Vo.prototype.setLens=function(e,t){console.warn("THREE.PerspectiveCamera.setLens is deprecated. "+"Use .setFocalLength and .filmGauge for a photographic setup.");if(t!==undefined)this.filmGauge=t;this.setFocalLength(e)};Object.defineProperties(el.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(e){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov.");this.shadow.camera.fov=e}},shadowCameraLeft:{set:function(e){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left.");this.shadow.camera.left=e}},shadowCameraRight:{set:function(e){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right.");this.shadow.camera.right=e}},shadowCameraTop:{set:function(e){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top.");this.shadow.camera.top=e}},shadowCameraBottom:{set:function(e){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom.");this.shadow.camera.bottom=e}},shadowCameraNear:{set:function(e){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near.");this.shadow.camera.near=e}},shadowCameraFar:{set:function(e){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far.");this.shadow.camera.far=e}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(e){console.warn("THREE.Light: .shadowBias is now .shadow.bias.");this.shadow.bias=e}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(e){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width.");this.shadow.mapSize.width=e}},shadowMapHeight:{set:function(e){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height.");this.shadow.mapSize.height=e}}});Object.defineProperties(Ri.prototype,{length:{get:function(){console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead.");return this.array.length}},copyIndicesArray:function(){console.error("THREE.BufferAttribute: .copyIndicesArray() has been removed.")}});Object.assign(Wi.prototype,{addIndex:function(e){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex().");this.setIndex(e)},addDrawCall:function(e,t,r){if(r!==undefined){console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset.")}console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup().");this.addGroup(e,t)},clearDrawCalls:function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups().");this.clearGroups()},computeTangents:function(){console.warn("THREE.BufferGeometry: .computeTangents() has been removed.")},computeOffsets:function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")}});Object.defineProperties(Wi.prototype,{drawcalls:{get:function(){console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups.");return this.groups}},offsets:{get:function(){console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups.");return this.groups}}});Object.assign(yu.prototype,{getArrays:function(){console.error("THREE.ExtrudeBufferGeometry: .getArrays() has been removed.")},addShapeList:function(){console.error("THREE.ExtrudeBufferGeometry: .addShapeList() has been removed.")},addShape:function(){console.error("THREE.ExtrudeBufferGeometry: .addShape() has been removed.")}});Object.defineProperties(Hl.prototype,{dynamic:{set:function(){console.warn("THREE.Uniform: .dynamic has been removed. Use object.onBeforeRender() instead.")}},onUpdate:{value:function(){console.warn("THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead.");return this}}});Object.defineProperties(Ki.prototype,{wrapAround:{get:function(){console.warn("THREE.Material: .wrapAround has been removed.")},set:function(){console.warn("THREE.Material: .wrapAround has been removed.")}},overdraw:{get:function(){console.warn("THREE.Material: .overdraw has been removed.")},set:function(){console.warn("THREE.Material: .overdraw has been removed.")}},wrapRGB:{get:function(){console.warn("THREE.Material: .wrapRGB has been removed.");return new xi}},shading:{get:function(){console.error("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.")},set:function(e){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.");this.flatShading=e===y}}});Object.defineProperties(Vu.prototype,{metal:{get:function(){console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead.");return false},set:function(){console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead")}}});Object.defineProperties(Zi.prototype,{derivatives:{get:function(){console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives.");return this.extensions.derivatives},set:function(e){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives.");this.extensions.derivatives=e}}});Object.assign(Ko.prototype,{clearTarget:function(e,t,r,n){console.warn("THREE.WebGLRenderer: .clearTarget() has been deprecated. Use .setRenderTarget() and .clear() instead.");this.setRenderTarget(e);this.clear(t,r,n)},animate:function(e){console.warn("THREE.WebGLRenderer: .animate() is now .setAnimationLoop().");this.setAnimationLoop(e)},getCurrentRenderTarget:function(){console.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget().");return this.getRenderTarget()},getMaxAnisotropy:function(){console.warn("THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy().");return this.capabilities.getMaxAnisotropy()},getPrecision:function(){console.warn("THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision.");return this.capabilities.precision},resetGLState:function(){console.warn("THREE.WebGLRenderer: .resetGLState() is now .state.reset().");return this.state.reset()},supportsFloatTextures:function(){console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' ).");return this.extensions.get("OES_texture_float")},supportsHalfFloatTextures:function(){console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' ).");return this.extensions.get("OES_texture_half_float")},supportsStandardDerivatives:function(){console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' ).");return this.extensions.get("OES_standard_derivatives")},supportsCompressedTextureS3TC:function(){console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' ).");return this.extensions.get("WEBGL_compressed_texture_s3tc")},supportsCompressedTexturePVRTC:function(){console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' ).");return this.extensions.get("WEBGL_compressed_texture_pvrtc")},supportsBlendMinMax:function(){console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' ).");return this.extensions.get("EXT_blend_minmax")},supportsVertexTextures:function(){console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures.");return this.capabilities.vertexTextures},supportsInstancedArrays:function(){console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' ).");return this.extensions.get("ANGLE_instanced_arrays")},enableScissorTest:function(e){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest().");this.setScissorTest(e)},initMaterial:function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},addPrePlugin:function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},addPostPlugin:function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},updateShadowMap:function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")},setFaceCulling:function(){console.warn("THREE.WebGLRenderer: .setFaceCulling() has been removed.")}});Object.defineProperties(Ko.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(e){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled.");this.shadowMap.enabled=e}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(e){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type.");this.shadowMap.type=e}},shadowMapCullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.");return undefined},set:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")}}});Object.defineProperties(Go.prototype,{cullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.");return undefined},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")}},renderReverseSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.");return undefined},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")}},renderSingleSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.");return undefined},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")}}});Object.defineProperties(Jt.prototype,{wrapS:{get:function(){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS.");return this.texture.wrapS},set:function(e){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS.");this.texture.wrapS=e}},wrapT:{get:function(){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT.");return this.texture.wrapT},set:function(e){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT.");this.texture.wrapT=e}},magFilter:{get:function(){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter.");return this.texture.magFilter},set:function(e){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter.");this.texture.magFilter=e}},minFilter:{get:function(){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter.");return this.texture.minFilter},set:function(e){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter.");this.texture.minFilter=e}},anisotropy:{get:function(){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy.");return this.texture.anisotropy},set:function(e){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy.");this.texture.anisotropy=e}},offset:{get:function(){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset.");return this.texture.offset},set:function(e){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset.");this.texture.offset=e}},repeat:{get:function(){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat.");return this.texture.repeat},set:function(e){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat.");this.texture.repeat=e}},format:{get:function(){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format.");return this.texture.format},set:function(e){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format.");this.texture.format=e}},type:{get:function(){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type.");return this.texture.type},set:function(e){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type.");this.texture.type=e}},generateMipmaps:{get:function(){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps.");return this.texture.generateMipmaps},set:function(e){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps.");this.texture.generateMipmaps=e}}});Object.defineProperties(qo.prototype,{standing:{set:function(){console.warn("THREE.WebVRManager: .standing has been removed.")}},userHeight:{set:function(){console.warn("THREE.WebVRManager: .userHeight has been removed.")}}});Bl.prototype.load=function(e){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");var t=this;var r=new Pl;r.load(e,(function(e){t.setBuffer(e)}));return this};Il.prototype.getData=function(){console.warn("THREE.AudioAnalyser: .getData() is now .getFrequencyData().");return this.getFrequencyData()};Ol.prototype.updateCubeMap=function(e,t){console.warn("THREE.CubeCamera: .updateCubeMap() is now .update().");return this.update(e,t)};var Zf={merge:function(e,t,r){console.warn("THREE.GeometryUtils: .merge() has been moved to Geometry. Use geometry.merge( geometry2, matrix, materialIndexOffset ) instead.");var n;if(t.isMesh){t.matrixAutoUpdate&&t.updateMatrix();n=t.matrix;t=t.geometry}e.merge(t,n,r)},center:function(e){console.warn("THREE.GeometryUtils: .center() has been moved to Geometry. Use geometry.center() instead.");return e.center()}};Yt.crossOrigin=undefined;Yt.loadTexture=function(e,t,r,n){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");var i=new Mc;i.setCrossOrigin(this.crossOrigin);var a=i.load(e,r,undefined,n);if(t)a.mapping=t;return a};Yt.loadTextureCube=function(e,t,r,n){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");var i=new Ac;i.setCrossOrigin(this.crossOrigin);var a=i.load(e,r,undefined,n);if(t)a.mapping=t;return a};Yt.loadCompressedTexture=function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")};Yt.loadCompressedTextureCube=function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")};function $f(){console.error("THREE.Projector has been moved to /examples/js/renderers/Projector.js.");this.projectVector=function(e,t){console.warn("THREE.Projector: .projectVector() is now vector.project().");e.project(t)};this.unprojectVector=function(e,t){console.warn("THREE.Projector: .unprojectVector() is now vector.unproject().");e.unproject(t)};this.pickingRay=function(){console.error("THREE.Projector: .pickingRay() is now raycaster.setFromCamera().")}}function eh(){console.error("THREE.CanvasRenderer has been removed")}function th(){console.error("THREE.JSONLoader has been removed.")}var rh={createMultiMaterialObject:function(){console.error("THREE.SceneUtils has been moved to /examples/js/utils/SceneUtils.js")},detach:function(){console.error("THREE.SceneUtils has been moved to /examples/js/utils/SceneUtils.js")},attach:function(){console.error("THREE.SceneUtils has been moved to /examples/js/utils/SceneUtils.js")}};function nh(){console.error("THREE.LensFlare has been moved to /examples/js/objects/Lensflare.js")}},828:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.EffectAttribute=t.Effect=void 0;var n=r(830);var i=r(1349);function a(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}function s(e,t,r){if(t)o(e.prototype,t);if(r)o(e,r);return e}var u=function(){function e(t,r){var o=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};a(this,e);var s=Object.assign({attributes:c.NONE,blendFunction:n.BlendFunction.SCREEN,defines:new Map,uniforms:new Map,vertexShader:null},o);this.name=t;this.attributes=s.attributes;this.fragmentShader=r;this.vertexShader=s.vertexShader;this.defines=s.defines;this.uniforms=s.uniforms;this.blendMode=new i.BlendMode(s.blendFunction)}s(e,[{key:"setDepthTexture",value:function e(t){var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0}},{key:"update",value:function e(t,r,n){}},{key:"setSize",value:function e(t,r){}},{key:"initialize",value:function e(t,r){}},{key:"dispose",value:function e(){for(var t=0,r=Object.keys(this);t<r.length;t++){var n=r[t];if(this[n]!==null&&typeof this[n].dispose==="function"){this[n].dispose();this[n]=null}}}}]);return e}();t.Effect=u;var c={CONVOLUTION:2,DEPTH:1,NONE:0};t.EffectAttribute=c},830:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.BlendFunction=void 0;var n={SKIP:0,ADD:1,ALPHA:2,AVERAGE:3,COLOR_BURN:4,COLOR_DODGE:5,DARKEN:6,DIFFERENCE:7,EXCLUSION:8,LIGHTEN:9,MULTIPLY:10,NEGATION:11,NORMAL:12,OVERLAY:13,REFLECT:14,SCREEN:15,SOFT_LIGHT:16,SUBTRACT:17};t.BlendFunction=n},866:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.Pass=void 0;var n=r(814);function i(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}function o(e,t,r){if(t)a(e.prototype,t);if(r)a(e,r);return e}var s=function(){function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"Pass";var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:new n.Scene;var a=arguments.length>2&&arguments[2]!==undefined?arguments[2]:new n.OrthographicCamera(-1,1,1,-1,0,1);i(this,e);this.name=t;this.scene=r;this.camera=a;this.quad=null;this.needsSwap=true;this.needsDepthTexture=false;this.renderToScreen=false;this.enabled=true}o(e,[{key:"getFullscreenMaterial",value:function e(){return this.quad!==null?this.quad.material:null}},{key:"setFullscreenMaterial",value:function e(t){var r=this.quad;if(r!==null){r.material=t}else{r=new n.Mesh(new n.PlaneBufferGeometry(2,2),t);r.frustumCulled=false;if(this.scene!==null){this.scene.add(r);this.quad=r}}}},{key:"getDepthTexture",value:function e(){return null}},{key:"setDepthTexture",value:function e(t){var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0}},{key:"render",value:function e(t,r,n,i,a){throw new Error("Render method not implemented!")}},{key:"setSize",value:function e(t,r){}},{key:"initialize",value:function e(t,r){}},{key:"dispose",value:function e(){var t=this.getFullscreenMaterial();if(t!==null){t.dispose()}for(var r=0,n=Object.keys(this);r<n.length;r++){var i=n[r];if(this[i]!==null&&typeof this[i].dispose==="function"){this[i].dispose();this[i]=null}}}}]);return e}();t.Pass=s},874:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});Object.defineProperty(t,"AdaptiveLuminanceMaterial",{enumerable:true,get:function e(){return n.AdaptiveLuminanceMaterial}});Object.defineProperty(t,"ColorEdgesMaterial",{enumerable:true,get:function e(){return i.ColorEdgesMaterial}});Object.defineProperty(t,"ConvolutionMaterial",{enumerable:true,get:function e(){return a.ConvolutionMaterial}});Object.defineProperty(t,"KernelSize",{enumerable:true,get:function e(){return a.KernelSize}});Object.defineProperty(t,"CopyMaterial",{enumerable:true,get:function e(){return o.CopyMaterial}});Object.defineProperty(t,"DepthComparisonMaterial",{enumerable:true,get:function e(){return s.DepthComparisonMaterial}});Object.defineProperty(t,"EffectMaterial",{enumerable:true,get:function e(){return u.EffectMaterial}});Object.defineProperty(t,"Section",{enumerable:true,get:function e(){return u.Section}});Object.defineProperty(t,"GodRaysMaterial",{enumerable:true,get:function e(){return c.GodRaysMaterial}});Object.defineProperty(t,"LuminanceMaterial",{enumerable:true,get:function e(){return l.LuminanceMaterial}});Object.defineProperty(t,"OutlineEdgesMaterial",{enumerable:true,get:function e(){return f.OutlineEdgesMaterial}});Object.defineProperty(t,"SMAAWeightsMaterial",{enumerable:true,get:function e(){return h.SMAAWeightsMaterial}});var n=r(1783);var i=r(1784);var a=r(1785);var o=r(1786);var s=r(1787);var u=r(1788);var c=r(1789);var l=r(1790);var f=r(1791);var h=r(1792)},896:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});Object.defineProperty(t,"BlurPass",{enumerable:true,get:function e(){return n.BlurPass}});Object.defineProperty(t,"ClearMaskPass",{enumerable:true,get:function e(){return i.ClearMaskPass}});Object.defineProperty(t,"ClearPass",{enumerable:true,get:function e(){return a.ClearPass}});Object.defineProperty(t,"DepthPass",{enumerable:true,get:function e(){return o.DepthPass}});Object.defineProperty(t,"EffectPass",{enumerable:true,get:function e(){return s.EffectPass}});Object.defineProperty(t,"MaskPass",{enumerable:true,get:function e(){return u.MaskPass}});Object.defineProperty(t,"NormalPass",{enumerable:true,get:function e(){return c.NormalPass}});Object.defineProperty(t,"Pass",{enumerable:true,get:function e(){return l.Pass}});Object.defineProperty(t,"RenderPass",{enumerable:true,get:function e(){return f.RenderPass}});Object.defineProperty(t,"SavePass",{enumerable:true,get:function e(){return h.SavePass}});Object.defineProperty(t,"ShaderPass",{enumerable:true,get:function e(){return d.ShaderPass}});var n=r(1782);var i=r(1793);var a=r(1347);var o=r(1794);var s=r(1795);var u=r(1796);var c=r(1797);var l=r(866);var f=r(1038);var h=r(1798);var d=r(1799)}}]);
//# sourceMappingURL=vendors-viz-02-escher.721fc398b4308b6cb53e.js.map