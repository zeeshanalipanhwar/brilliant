(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[106],{1061:function(e,a,n){var t=n(2152);if(typeof t==="string")t=[[e.i,t,""]];if(t.locals)e.exports=t.locals;var i=n(28).default;var s=i("75c7bdb4",t,false,{});if(false){}},2151:function(e,a,n){"use strict";var t=n(1061);var i=n.n(t);var s=i.a},2152:function(e,a,n){a=e.exports=n(27)(false);a.push([e.i,'@use "sass:map";\n.no-scroll[data-v-3bb56248] {\n  position: relative;\n  z-index: 100;\n  overflow: hidden;\n}\n.manage[data-v-3bb56248] {\n  position: relative;\n  width: 890px;\n  min-height: 600px;\n  margin: 48px auto;\n  padding: 40px 72px;\n  border: 1px solid #d4d4d4;\n  background: #FFFFFF;\n  border-radius: 4px;\n  box-shadow: 0 3px 5px rgba(0, 0, 0, 0.25);\n}\n.manage.mobile[data-v-3bb56248] {\n  width: 100%;\n  border: 0;\n  margin: 0;\n  padding: 20px 0 0;\n  box-shadow: none;\n}\n.manage.mobile .back-link[data-v-3bb56248] {\n    top: 20px;\n    left: 16px;\n}\n.manage.mobile header[data-v-3bb56248] {\n    padding: 0 16px;\n    margin-bottom: 24px;\n}\n.manage.mobile .seats[data-v-3bb56248] {\n    padding: 0 16px;\n    margin-bottom: 24px;\n}\n.manage.mobile footer[data-v-3bb56248] {\n    padding: 20px 16px;\n}\n.manage.mobile form[data-v-3bb56248] {\n    width: 100%;\n}\n.manage.mobile input[data-v-3bb56248] {\n    width: 100%;\n}\n.manage.mobile .btn[data-v-3bb56248] {\n    width: 100%;\n    height: 48px;\n}\n.manage.mobile .manage-one[data-v-3bb56248] {\n    padding: 0 16px;\n}\n.manage.mobile .manage-one p[data-v-3bb56248] {\n      display: flex;\n      justify-content: center;\n      align-items: center;\n      height: 48px;\n      margin-bottom: 16px;\n}\n.back-link[data-v-3bb56248] {\n  position: absolute;\n  display: flex;\n  align-items: center;\n  top: 40px;\n  left: 72px;\n  color: #1F1F1F;\n  opacity: 0.5;\n}\n.back-link[data-v-3bb56248]:hover {\n    opacity: 1;\n    color: #1F1F1F;\n}\n.back-link span[data-v-3bb56248] {\n    margin-right: 8px;\n}\n.manage-all[data-v-3bb56248] {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n}\n.manage-all header[data-v-3bb56248] {\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    margin-bottom: 40px;\n}\n.manage-all header span[data-v-3bb56248] {\n      margin-bottom: 24px;\n}\n.manage-all h1[data-v-3bb56248] {\n    margin-bottom: 12px;\n    font-size: 22px;\n}\n.manage-all h2[data-v-3bb56248] {\n    margin: 0;\n    font-size: 15px;\n    font-weight: bold;\n}\n.manage-all .seats[data-v-3bb56248] {\n    width: 100%;\n    padding: 0 72px;\n    margin-bottom: 40px;\n}\n.manage-all .seats li + li[data-v-3bb56248] {\n      margin-top: 24px;\n}\n.manage-all .seats button[data-v-3bb56248] {\n      display: flex;\n      align-items: center;\n      justify-content: space-evenly;\n      width: 100%;\n      height: 80px;\n      padding: 0 16px;\n      border: 1px solid #d4d4d4;\n      border-radius: 10px;\n      background: transparent;\n      cursor: default;\n}\n.manage-all .seats button.clickable[data-v-3bb56248] {\n        cursor: pointer;\n}\n.manage-all .seats button.clickable[data-v-3bb56248]:hover {\n          border-color: #899098;\n}\n.manage-all .seats .avatar[data-v-3bb56248] {\n      flex: none;\n      width: 48px;\n      height: 48px;\n      margin-right: 16px;\n      border-radius: 50%;\n      background-color: #ECEDEF;\n      background-size: cover;\n      background-position: center;\n}\n.manage-all .seats .text[data-v-3bb56248] {\n      flex: 1;\n      text-align: left;\n      width: calc(100% - 110px);\n}\n.manage-all .seats h4[data-v-3bb56248] {\n      margin: 0;\n      font-size: 17px;\n      overflow: hidden;\n      text-overflow: ellipsis;\n      white-space: nowrap;\n}\n.manage-all .seats p[data-v-3bb56248] {\n      margin: 0;\n      font-size: 15px;\n      color: #899098;\n}\n.manage-all .seats .chevron[data-v-3bb56248] {\n      flex: none;\n      margin-left: 16px;\n}\n.manage-all footer[data-v-3bb56248] {\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    width: 100%;\n    padding-top: 40px;\n    border-top: 1px solid #d4d4d4;\n}\n.manage-all footer h3[data-v-3bb56248] {\n      margin-bottom: 20px;\n      font-size: 17px;\n      font-weight: bold;\n}\n.manage-all form[data-v-3bb56248] {\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n}\n.manage-all form button[data-v-3bb56248] {\n      width: 168px;\n}\n.manage-all form p[data-v-3bb56248] {\n      margin: 24px 0 0;\n      color: #899098;\n}\n.manage-all input[data-v-3bb56248] {\n    width: 330px;\n    padding: 0 8px;\n    margin-bottom: 20px;\n}\n.manage-all input.error[data-v-3bb56248] {\n      color: #E91E63;\n}\n.manage-one[data-v-3bb56248] {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n}\n.manage-one header[data-v-3bb56248] {\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    margin-bottom: 24px;\n}\n.manage-one header p[data-v-3bb56248] {\n      margin: 0;\n}\n.manage-one .email-icon[data-v-3bb56248] {\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    width: 80px;\n    height: 80px;\n    margin-bottom: 24px;\n    border-radius: 50%;\n    background: #F7F7F8;\n}\n.manage-one h2[data-v-3bb56248] {\n    margin-bottom: 16px;\n    font-size: 28px;\n}\n.manage-one .btn[data-v-3bb56248],\n  .manage-one .resend[data-v-3bb56248] {\n    width: 168px;\n    height: 32px;\n    margin-bottom: 16px;\n}\n.manage-one p[data-v-3bb56248] {\n    display: block;\n    width: 300px;\n    text-align: center;\n    color: #899098;\n}\n',""])},2607:function(e,a,n){"use strict";n.r(a);var t=function(){var e=this;var a=e.$createElement;var n=e._self._c||a;return n("div",{class:{manage:true,mobile:e.isMobile(e.$mq)}},[n("transition",{attrs:{name:"fade-fast",mode:"out-in"}},[!e.activeSeat?n("div",{key:"manage-all",staticClass:"manage-all"},[n("router-link",{staticClass:"back-link",attrs:{to:{name:"payment_subscription_settings"}}},[n("span",{staticClass:"b-sprite-paywall-chevron"}),e._v("\n        Back\n      ")]),e._v(" "),n("header",[n("span",{staticClass:"b-sprite-paywall-people"}),e._v(" "),n("h1",[e._v("Manage your "+e._s(e.group_type)+" group plan")]),e._v(" "),n("h2",[e._v(e._s(e.seat_count.total-e.seat_count.open)+" of "+e._s(e.seat_count.total)+" available seats claimed")])]),e._v(" "),n("ul",{staticClass:"unstyled seats"},e._l(e.seats,(function(a){return n("li",{key:a.premium_group_seat_id},[n("button",{class:{clickable:!a.is_admin_seat},on:{click:function(n){e.activeSeatId=a.is_admin_seat?e.activeSeatId:a.premium_group_seat_id}}},[a.user&&a.user.avatar?n("span",{staticClass:"avatar",style:{backgroundImage:"url("+a.user.avatar.size_80+")"}}):n("span",{staticClass:"avatar"}),e._v(" "),n("div",{staticClass:"text"},[a.user?n("h4",[e._v(e._s(a.user.first_name)+" "+e._s(a.user.last_name))]):n("h4",[e._v(e._s(a.email_address))]),e._v(" "),a.is_admin_seat?n("p",[e._v("Group admin")]):a.state==="invited"?n("p",[e._v("Invite sent")]):e._e()]),e._v(" "),!a.is_admin_seat?n("span",{staticClass:"chevron b-sprite-paywall-chevron-right"}):e._e()])])})),0),e._v(" "),e.seat_count.open>0?n("footer",[n("h3",[e._v("Invite your friends")]),e._v(" "),n("form",{on:{submit:function(a){a.preventDefault();return e.handleSendInvite(a)}}},[n("input",{ref:"inviteInput",class:{error:e.inviteError.length>0},attrs:{type:"email",placeholder:"email address",disabled:e.disableSendInvite},domProps:{value:e.inviteEmail},on:{input:function(a){e.inviteEmail=a.target.value}}}),e._v(" "),n("button",{staticClass:"btn btn-accent",attrs:{disabled:e.disableSendInvite}},[e._v("\n            Send invite\n          ")]),e._v(" "),e.inviteError.length?n("p",[e._v(e._s(e.inviteError))]):e._e()])]):e._e()],1):n("div",{key:"manage-one",staticClass:"manage-one"},[n("button",{staticClass:"btn-link back-link",attrs:{href:"/premium/"},on:{click:e.handleActiveSeatBack}},[n("span",{staticClass:"b-sprite-paywall-chevron"}),e._v("\n        Back\n      ")]),e._v(" "),n("header",[n("span",{staticClass:"email-icon"},[n("span",{staticClass:"b-sprite-paywall-envelope"})]),e._v(" "),e.activeSeat.state==="invited"?n("h2",[e._v("Invite pending")]):e.activeSeat.state==="redeemed"?n("h2",[e._v(e._s(e.activeSeat.email_address))]):e._e(),e._v(" "),e.activeSeat.state==="invited"?n("p",[e._v(e._s(e.activeSeat.email_address))]):e.activeSeat.state==="redeemed"?n("p",[e._v("\n          If you remove this person from your plan, they will be downgraded to a free account.\n        ")]):e._e()]),e._v(" "),n("transition",{attrs:{name:"fade-fast",mode:"out-in"}},[e.wasResent?n("p",{staticClass:"resent"},[e._v("Invite sent!")]):e.activeSeat.state==="invited"?n("button",{directives:[{name:"track",rawName:"v-track:click",value:{axId:"clicked_groupsales_mgmt_seat_resend"},expression:"{ axId: 'clicked_groupsales_mgmt_seat_resend' }",arg:"click"}],staticClass:"btn btn-accent",attrs:{disabled:e.resendAndCancelDisabled||e.wasResent},on:{click:e.handleResendInvite}},[e._v("\n          Resend invite\n        ")]):e._e()]),e._v(" "),e.activeSeat.state==="invited"?n("button",{directives:[{name:"track",rawName:"v-track:click",value:{axId:"clicked_groupsales_mgmt_seat_cancel"},expression:"{ axId: 'clicked_groupsales_mgmt_seat_cancel' }",arg:"click"}],staticClass:"btn",attrs:{disabled:e.resendAndCancelDisabled},on:{click:e.handleRemoveInvite}},[e._v("\n        Cancel invite\n      ")]):e.activeSeat.state==="redeemed"?n("button",{directives:[{name:"track",rawName:"v-track:click",value:{axId:"clicked_groupsales_mgmt_seat_remove"},expression:"{ axId: 'clicked_groupsales_mgmt_seat_remove' }",arg:"click"}],staticClass:"btn",attrs:{disabled:e.resendAndCancelDisabled},on:{click:e.handleRemoveInvite}},[e._v("\n        Remove\n      ")]):e._e()],1)])],1)};var i=[];t._withStripped=true;var s=n(1);var r=n(5);var o=n(9);var l=n(6);var d=n(23);var c=n(50);var p=n(775);var m=n(259);const b="/premium/group-plans/seat-management-api/";let v=class e extends r["e"]{constructor(){super(...arguments);this.disableSendInvite=false;this.inviteEmail="";this.inviteError="";this.activeSeatId=null;this.resendAndCancelDisabled=false;this.wasResent=false}get activeSeat(){if(this.seats.length&&this.activeSeatId){const e=this.seats.find(e=>e.premium_group_seat_id===this.activeSeatId);if(e){return e}}return null}handleActiveSeatIdChanged(){if(this.activeSeatId){Object(c["e"])("ui",{action:"click",element_id:"clicked_groupsales_mgmt_seat_user"})}}handleActiveSeatBack(){this.activeSeatId=null;this.wasResent=false}handleSendInvite(){return Object(s["a"])(this,void 0,void 0,(function*(){if(this.inviteEmail.length===0){this.inviteError="Email address cannot be blank";if(this.isMobile(this.$mq)){Object(m["d"])(()=>Object(p["c"])(document.documentElement.scrollHeight))}return}this.disableSendInvite=true;const e={email_address:encodeURIComponent(this.inviteEmail),action:"invite"};let a;try{a=yield Object(l["b"])(Object(d["a"])(b,e))}catch(e){this.$store.dispatch("errorModal/showMessage");return}const{result:n,premium_group:t}=a.results;if(n.success){Object(c["e"])("ui",{action:"form",element_id:"groupsales_mgmt_send_invite"});this.$store.dispatch("premiumGroup/update",t);this.inviteEmail=""}else{this.$store.dispatch("errorModal/showMessage");console.error(n.reason)}this.disableSendInvite=false}))}handleResendInvite(){return Object(s["a"])(this,void 0,void 0,(function*(){if(this.activeSeat){this.resendAndCancelDisabled=true;const e={premium_group_seat_id:this.activeSeat.premium_group_seat_id,action:"resend"};let a;try{a=yield Object(l["b"])(Object(d["a"])(b,e))}catch(e){this.$store.dispatch("errorModal/showMessage");this.resendAndCancelDisabled=false;return}const{result:n}=a.results;if(n.success){this.wasResent=true;setTimeout(()=>{this.activeSeatId=null;this.wasResent=false},2e3)}else{this.$store.dispatch("errorModal/showMessage")}this.resendAndCancelDisabled=false}}))}handleRemoveInvite(){return Object(s["a"])(this,void 0,void 0,(function*(){if(this.activeSeat){this.resendAndCancelDisabled=true;const e={premium_group_seat_id:this.activeSeat.premium_group_seat_id,action:"remove"};let a;try{a=yield Object(l["b"])(Object(d["a"])(b,e))}catch(e){this.$store.dispatch("errorModal/showMessage");this.resendAndCancelDisabled=false;return}const{result:n,premium_group:t}=a.results;if(n.success){this.$store.dispatch("premiumGroup/update",t)}else{this.$store.dispatch("errorModal/showMessage");console.error(n.reason)}this.activeSeatId=null;this.resendAndCancelDisabled=false}}))}};Object(s["b"])([Object(r["f"])("activeSeatId")],v.prototype,"handleActiveSeatIdChanged",null);v=Object(s["b"])([Object(r["a"])({computed:Object.assign(Object.assign({},Object(o["mapState"])("premiumGroup",["group_type","seat_count","seats"])),Object(o["mapGetters"])("pageHeader",["isMobile"])),metaInfo(){return{title:"Manage group plan"}}})],v);var u=v;var g=u;var h=n(2151);var _=n(10);var f=Object(_["a"])(g,t,i,false,null,"3bb56248",null);if(false){var x}f.options.__file="frontend/views/premium/group-plans/ManageGroupPlan.vue";var w=a["default"]=f.exports},775:function(e,a,n){"use strict";n.d(a,"a",(function(){return s}));n.d(a,"c",(function(){return r}));n.d(a,"b",(function(){return o}));var t=n(1);var i=n(259);function s(e){Object(i["d"])(()=>{if(e){document.body.classList.add("locked")}else{document.body.classList.remove("locked")}})}function r(e,a){let n;if(typeof e==="number"){n=e}if(e instanceof HTMLElement){n=e.offsetTop}return new Promise(e=>{if(!a&&!window){e()}else{try{let t;if(a){a.scrollTo({top:n,behavior:"smooth"});t=a.scrollTop}else{window.scroll({top:n,behavior:"smooth"});t=window.pageYOffset}const i=setInterval(()=>{const n=a?a.scrollTop:window.pageYOffset;if(n===t){clearInterval(i);e()}else{t=n}},50)}catch(t){if(a){a.scrollTop=n}else{window.scroll(0,n)}e()}}})}function o(e){return Object(t["a"])(this,void 0,void 0,(function*(){const a=document.querySelector(`[name="${e}"]`);if(a){const e=a.getBoundingClientRect();yield r(e.top+window.pageYOffset)}}))}}}]);
//# sourceMappingURL=ManageGroupPlan.b903f64260dff0860115.js.map