(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[76],{1013:function(e,t,s){"use strict";var n=function(){var e=this;var t=e.$createElement;var s=e._self._c||t;return s("div",{staticClass:"sidebar"},[e.options&&e.options.length?[s("ul",{staticClass:"options-list"},e._l(e.options,(function(t,n){return s("li",{key:"option-"+n,class:{selected:e.selectedOptionIndex===n,hidden:!e.matchesFilter(t)},on:{click:function(){return e.$emit("select-option",n)}}},[e._t("default",null,{option:t})],2)})),0)]:e._e()],2)};var a=[];n._withStripped=true;var i=s(0);var r=s(1);function o(e){return true}let l=class e extends r["e"]{};Object(i["b"])([Object(r["c"])(Array)],l.prototype,"options",void 0);Object(i["b"])([Object(r["c"])(Number)],l.prototype,"selectedOptionIndex",void 0);Object(i["b"])([Object(r["c"])(Boolean)],l.prototype,"editable",void 0);Object(i["b"])([Object(r["c"])({type:Function,default:o})],l.prototype,"matchesFilter",void 0);l=Object(i["b"])([Object(r["a"])({})],l);var c=l;var d=c;var v=s(1145);var p=s(5);var u=Object(p["a"])(d,n,a,false,null,"507492c1",null);if(false){var f}u.options.__file="frontend/components/SidebarSelector.vue";var b=t["a"]=u.exports},1145:function(e,t,s){"use strict";var n=s(909);var a=s.n(n);var i=a.a},1146:function(e,t,s){t=e.exports=s(14)(false);t.push([e.i,'@use "sass:map";\n.no-scroll[data-v-507492c1] {\n  position: relative;\n  z-index: 100;\n  overflow: hidden;\n}\n.sidebar[data-v-507492c1] {\n  display: flex;\n  flex-direction: column;\n  justify-content: space-around;\n  float: left;\n  height: 100%;\n  width: 250px;\n  position: relative;\n  z-index: 1;\n  background: #F8F7F6;\n  border-right: 1px solid #C2C4CF;\n}\n.sidebar .empty-display[data-v-507492c1] {\n    flex: 1 1 auto;\n    text-align: center;\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    align-items: center;\n}\n.sidebar .empty-display h2[data-v-507492c1], .sidebar .empty-display p[data-v-507492c1] {\n      color: #899098;\n}\n.sidebar .empty-display p[data-v-507492c1] {\n      font-size: 19px;\n}\n.sidebar .filter-form[data-v-507492c1] {\n    display: flex;\n    flex-direction: column;\n    padding: 4px 0;\n    border-bottom: 1px solid #C2C4CF;\n}\n.sidebar .filter-form section[data-v-507492c1] {\n      display: flex;\n      flex-direction: row;\n      align-items: center;\n      padding: 4px 8px;\n}\n.sidebar .filter-form section span[data-v-507492c1] {\n        margin-right: 8px;\n        color: #899098;\n        font-size: 12px;\n}\n.sidebar .filter-form section select[data-v-507492c1], .sidebar .filter-form section input[data-v-507492c1] {\n        flex: 1;\n        border-color: #161616;\n        border-radius: 7px;\n        height: 24px;\n        line-height: 1em;\n        margin-bottom: 0;\n        font-size: 12px;\n}\n.sidebar .options-list[data-v-507492c1] {\n    list-style-type: none;\n    margin: 0;\n    overflow-y: auto;\n    flex: 1 1 auto;\n}\n.sidebar .options-list > li[data-v-507492c1] {\n      padding: 8px 8px;\n      border-bottom: 1px solid #C2C4CF;\n      cursor: pointer;\n}\n.sidebar .options-list > li[data-v-507492c1]:hover {\n        background: #ECEDEF;\n}\n.sidebar .options-list > li.selected[data-v-507492c1], .sidebar .options-list > li.selected[data-v-507492c1]:hover {\n        background: #E7E7E9;\n        cursor: default;\n}\n.sidebar .options-list > li.hidden[data-v-507492c1] {\n        display: none;\n}\n.sidebar .btn-link[data-v-507492c1] {\n    color: #899098;\n}\n',""])},1147:function(e,t,s){"use strict";var n=s(910);var a=s.n(n);var i=a.a},1148:function(e,t,s){t=e.exports=s(14)(false);t.push([e.i,'@use "sass:map";\n.no-scroll[data-v-18d66281] {\n  position: relative;\n  z-index: 100;\n  overflow: hidden;\n}\n.assets-sidebar[data-v-18d66281] {\n  display: flex;\n  flex-direction: column;\n  justify-content: space-around;\n  float: left;\n  height: 100%;\n  width: 250px;\n  position: relative;\n  z-index: 1;\n  background: #F8F7F6;\n  border-right: 1px solid #C2C4CF;\n}\n.assets-sidebar .empty-display[data-v-18d66281] {\n    flex: 1 1 auto;\n    text-align: center;\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    align-items: center;\n}\n.assets-sidebar .empty-display h2[data-v-18d66281], .assets-sidebar .empty-display p[data-v-18d66281] {\n      color: #899098;\n}\n.assets-sidebar .empty-display p[data-v-18d66281] {\n      font-size: 19px;\n}\n.assets-sidebar .filter-form[data-v-18d66281] {\n    display: flex;\n    flex-direction: column;\n    padding: 4px 0;\n    border-bottom: 1px solid #C2C4CF;\n}\n.assets-sidebar .filter-form section[data-v-18d66281] {\n      display: flex;\n      flex-direction: row;\n      align-items: center;\n      padding: 4px 8px;\n}\n.assets-sidebar .filter-form section span[data-v-18d66281] {\n        margin-right: 8px;\n        color: #899098;\n        font-size: 12px;\n}\n.assets-sidebar .filter-form section select[data-v-18d66281], .assets-sidebar .filter-form section input[data-v-18d66281] {\n        flex: 1;\n        border-color: #161616;\n        border-radius: 7px;\n        height: 24px;\n        line-height: 1em;\n        margin-bottom: 0;\n        font-size: 12px;\n}\n.assets-sidebar[data-v-18d66281] .sidebar-selector .asset-name {\n    margin-bottom: 0;\n    font-size: 14px;\n    line-height: 1.4em;\n}\n.assets-sidebar[data-v-18d66281] .sidebar-selector .asset-type {\n    margin-bottom: 0;\n    color: #899098;\n    font-size: 12px;\n    line-height: 1.4em;\n}\n.assets-sidebar .btn-link[data-v-18d66281] {\n    color: #899098;\n}\n',""])},1154:function(e,t,s){var n=s(2244);if(typeof n==="string")n=[[e.i,n,""]];if(n.locals)e.exports=n.locals;var a=s(15).default;var i=a("e17bbf2e",n,false,{});if(false){}},1307:function(e,t,s){"use strict";var n=function(){var e=this;var t=e.$createElement;var s=e._self._c||t;return s("div",{staticClass:"assets-sidebar"},[e.lessonAssets.length?[s("div",{staticClass:"filter-form"},[s("section",{staticClass:"category-filter"},[s("span",[e._v("Show")]),e._v(" "),s("select",{directives:[{name:"model",rawName:"v-model",value:e.assetTypeFilter,expression:"assetTypeFilter"}],on:{change:function(t){var s=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.assetTypeFilter=t.target.multiple?s:s[0]}}},e._l(e.filterOptions,(function(t){return s("option",{key:t,domProps:{value:t}},[e._v("\n            "+e._s(t)+"\n          ")])})),0)]),e._v(" "),s("section",{staticClass:"alias-filter"},[s("span",[e._v("Filter")]),e._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.assetAliasFilter,expression:"assetAliasFilter"}],ref:"filterBox",attrs:{type:"text"},domProps:{value:e.assetAliasFilter},on:{input:function(t){if(t.target.composing){return}e.assetAliasFilter=t.target.value}}})])]),e._v(" "),s("SidebarSelector",{staticClass:"sidebar-selector",attrs:{options:e.lessonAssets,selectedOptionIndex:e.selectedAssetIndex,matchesFilter:e.matchesFilter},on:{"select-option":function(t){return e.$emit("select-asset",t)}},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.option;return[s("h3",{staticClass:"asset-name"},[e._v(e._s(n.alias))]),e._v(" "),s("p",{staticClass:"asset-type"},[e._v(e._s(e.getTypeDisplay(n.type)))])]}}],null,false,3962884346)})]:s("div",{staticClass:"empty-display"},[s("h2",[e._v("Assets can include images, interactives, and diagrams.")]),e._v(" "),e.editable?[s("p",[e._v("Use the button below to create a new asset")]),e._v(" "),s("img",{attrs:{src:"/site_media/version-0/images/lessons/down-arrow.png"}})]:e._e()],2),e._v(" "),e._t("default")],2)};var a=[];n._withStripped=true;var i=s(0);var r=s(1);var o=s(1013);let l=class e extends r["e"]{constructor(){super(...arguments);this.assetTypeFilter="All";this.assetAliasFilter="";this.filterOptions=["All","Images","Videos","Diagrammars","Interactives"]}focusFilterBox(){this.$refs.filterBox.focus()}getTypeDisplay(e){if(e==="image"){return"Image"}if(e==="video"){return"Video"}if(e==="diagrammar"){return"Diagrammar"}return"Interactive"}matchesTypeFilter(e){switch(this.assetTypeFilter){case"Images":return e.type==="image";case"Videos":return e.type==="video";case"Diagrammars":return e.type==="diagrammar";case"Interactives":return this.getTypeDisplay(e.type)==="Interactive";case"All":default:return true}}matchesAliasFilter(e){if(this.assetAliasFilter){return!!e.alias.toLowerCase().match(this.assetAliasFilter.toLowerCase())}return true}matchesFilter(e){return this.matchesTypeFilter(e)&&this.matchesAliasFilter(e)}};Object(i["b"])([Object(r["c"])(Array)],l.prototype,"lessonAssets",void 0);Object(i["b"])([Object(r["c"])(Number)],l.prototype,"selectedAssetIndex",void 0);Object(i["b"])([Object(r["c"])(Boolean)],l.prototype,"editable",void 0);l=Object(i["b"])([Object(r["a"])({components:{SidebarSelector:o["a"]}})],l);var c=l;var d=c;var v=s(1147);var p=s(5);var u=Object(p["a"])(d,n,a,false,null,"18d66281",null);if(false){var f}u.options.__file="frontend/views/lessons/editor/AssetSelector.vue";var b=t["a"]=u.exports},2243:function(e,t,s){"use strict";var n=s(1154);var a=s.n(n);var i=a.a},2244:function(e,t,s){t=e.exports=s(14)(false);t.push([e.i,'@use "sass:map";\n.no-scroll[data-v-27c45032] {\n  position: relative;\n  z-index: 100;\n  overflow: hidden;\n}\nmain[data-v-27c45032] {\n  display: flex;\n  flex-direction: column;\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100vw;\n  height: 100vh;\n  overflow: hidden;\n  background: #FFFFFF;\n}\nmain header.header[data-v-27c45032] {\n    display: flex;\n    flex-direction: column;\n    border-bottom: 1px solid #C2C4CF;\n}\nmain header.header .nav-bar[data-v-27c45032] {\n      display: flex;\n      align-items: center;\n      padding: 16px;\n}\nmain header.header .nav-bar[data-v-27c45032]  .nav-btn {\n        display: flex;\n        align-items: center;\n        padding: 4px 8px;\n}\nmain header.header .nav-bar[data-v-27c45032]  .nav-btn + .nav-btn {\n          margin-left: 8px;\n}\nmain header.header .nav-bar .title-block[data-v-27c45032] {\n        flex: 1;\n        padding: 0 16px;\n}\nmain header.header .nav-bar .title-block h2[data-v-27c45032] {\n          margin: 0;\n}\n.page-body[data-v-27c45032] {\n  display: flex;\n  flex-direction: row;\n  overflow-y: auto;\n  height: 100%;\n}\n.page-body[data-v-27c45032] .version-selector .version-name {\n    margin-bottom: 0;\n    font-size: 14px;\n    line-height: 1.4em;\n}\n.page-body[data-v-27c45032] .version-selector .version-author {\n    margin-bottom: 0;\n    color: #899098;\n    font-size: 12px;\n    line-height: 1.4em;\n}\n.page-body .assets-content[data-v-27c45032] {\n    display: flex;\n    height: 100%;\n    width: 100%;\n    overflow-y: auto;\n    justify-content: center;\n    padding: 8px 16px;\n}\n.page-body .assets-content .versions-display[data-v-27c45032] {\n      display: flex;\n      flex-direction: column;\n      margin: 16px 0;\n}\n.page-body .assets-content .versions-display .version-card p[data-v-27c45032], .page-body .assets-content .versions-display .version-card h2[data-v-27c45032] {\n        margin-bottom: 0;\n}\n.page-body .assets-content .versions-display .asset-preview[data-v-27c45032] {\n        width: 602px;\n}\n.page-body .assets-content .versions-display .asset-preview img[data-v-27c45032], .page-body .assets-content .versions-display .asset-preview video[data-v-27c45032] {\n          max-width: 100%;\n}\n[data-v-27c45032] .btn {\n  height: 38px;\n  border-radius: 6px;\n  font-size: 18px;\n}\n[data-v-27c45032] .btn:not(.btn-accent) {\n    border-color: #c4c4c4;\n    color: #000000;\n    background: #FFFFFF;\n}\n[data-v-27c45032] .btn:not(.btn-accent):hover {\n      border-color: #000000;\n      color: #000000;\n}\n[data-v-27c45032] .btn:not(.btn-accent):disabled:hover {\n      border-color: #c4c4c4;\n}\n[data-v-27c45032] .btn.btn-accent {\n    border: 0;\n    background: #000000;\n    color: #FFFFFF;\n}\n[data-v-27c45032] .btn.btn-outline {\n    background: transparent;\n    border-color: #000000;\n}\n',""])},2597:function(e,t,s){"use strict";s.r(t);var n=function(){var e=this;var t=e.$createElement;var s=e._self._c||t;return s("main",[s("header",{staticClass:"header"},[s("div",{staticClass:"nav-bar"},[s("router-link",{staticClass:"nav-btn btn",attrs:{to:e.backButtonInfo.url,title:e.backButtonInfo.title}},[e._v("\n        ←\n      ")]),e._v(" "),!e.isSandboxLesson?s("AuthoringHomeButton"):e._e(),e._v(" "),s("div",{staticClass:"title-block"},[s("h2",[e._v("Lesson: "+e._s(this.$route.params.lessonSlug))])])],1)]),e._v(" "),s("div",{staticClass:"page-body"},[s("AssetSelector",{attrs:{lessonAssets:e.rawAssetList,selectedAssetIndex:e.selectedAssetIndex},on:{"select-asset":function(t){return e.handleAssetSelect(t)}}}),e._v(" "),s("SidebarSelector",{staticClass:"version-selector",attrs:{options:e.selectedAssetVersions,selectedOptionIndex:e.selectedVersionIndex},on:{"select-option":function(t){return e.handleVersionSelect(t)}},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.option;return[s("h3",{staticClass:"version-name"},[e._v("\n        "+e._s(n.lessonVersion)+"\n        ("+e._s(""+n.state[0]+n.state.slice(1).toLowerCase())+")\n      ")]),e._v(" "),s("p",{staticClass:"version-author"},[e._v(e._s(n.createdByName))])]}}])}),e._v(" "),s("div",{staticClass:"assets-content"},[e.selectedAssetVersions&&e.selectedAssetVersions.length?s("div",{staticClass:"versions-display"},[e.selectedVersion?s("div",{staticClass:"version-card"},[s("h2",[e._v(e._s(e.selectedVersion.lessonVersion))]),e._v(" "),s("p",[e._v(e._s(e.selectedVersion.internalChangeReason))]),s("br"),e._v(" "),s("p",[e._v("Lesson version created: "+e._s(e.formatTimestamp(e.selectedVersion.createdTs)))]),e._v(" "),s("p",[e._v("Lesson version last edited: "+e._s(e.formatTimestamp(e.selectedVersion.lastModifiedTs)))]),e._v(" "),s("div",{staticClass:"asset-preview"},[e.selectedAssetVersion.type=="image"?s("img",{attrs:{src:e.selectedAssetVersion.url,alt:e.selectedAssetVersion.alias}}):e.selectedAssetVersion.type=="video"?s("video",e._b({},"video",e.videoPreviewAttrs,false),[s("source",{attrs:{src:e.selectedAssetVersion.url}})]):e.selectedAssetVersion.type=="diagrammar"?s("DiagrammarPreview",{ref:"bigPreview",attrs:{asset:e.selectedAssetVersion,"interactive-key":"bigPreview"}}):s("InteractivePreview",{ref:"bigPreview",attrs:{interactive:e.selectedAssetVersion,"interactive-key":"bigPreview"}})],1)]):e._e()]):e._e()])],1)])};var a=[];n._withStripped=true;var i=s(0);var r=s(1);var o=s(9);var l=s(302);var c=s(1307);var d=s(1013);var v=s(963);var p=s(1308);var u=s(1309);let f=class e extends r["e"]{constructor(){super(...arguments);this.selectedAssetIndex=0;this.selectedVersionIndex=0}get rawAssetList(){return Object.values(this.lessonAssets).map(e=>e[0].asset)}get selectedAssetAlias(){return Object.keys(this.lessonAssets)[this.selectedAssetIndex]}get selectedAssetVersions(){return this.lessonAssets[this.selectedAssetAlias]}get selectedVersion(){return this.selectedAssetVersions[this.selectedVersionIndex]}get selectedAssetVersion(){var e;return(e=this.selectedVersion)===null||e===void 0?void 0:e.asset}get isSandboxLesson(){return["sandbox","none"].includes(this.$route.params.courseSlug)&&this.user.is_external_lesson_author}get backButtonInfo(){if(this.isSandboxLesson){return{title:"Authoring home",url:this.$router.resolve({name:"authors_dashboard"}).href}}return{title:"Back to versions page",url:this.$router.resolve({name:"lesson_versions",params:Object(l["h"])(this.$route)}).href}}get currentViewFromHash(){const e=this.$route.hash.split("/")[1];if(e){return decodeURIComponent(e.trim())}return""}formatTimestamp(e){return Object(l["e"])(e)}updatePathForSelectedAsset(){const e=this.currentViewFromHash;if(e!==this.selectedAssetAlias){const e=Object.assign(Object.assign({},this.$route),{hash:`#/${this.selectedAssetAlias}/`});this.$router.push(e)}}handleAssetSelect(e){this.selectedAssetIndex=e<Object.keys(this.lessonAssets).length?e:0;this.handleVersionSelect(0);this.updatePathForSelectedAsset()}handleVersionSelect(e){this.selectedVersionIndex=e}syncPathWithSelectedAsset(){if(Object.keys(this.lessonAssets).length===0){return}const e=this.currentViewFromHash;if(e){const t=Object.keys(this.lessonAssets).indexOf(e);if(t>=0){this.handleAssetSelect(t);return}}this.updatePathForSelectedAsset();this.handleVersionSelect(0)}mounted(){this.syncPathWithSelectedAsset()}};f=Object(i["b"])([Object(r["a"])({components:{AssetSelector:c["a"],AuthoringHomeButton:v["a"],DiagrammarPreview:p["a"],InteractivePreview:u["a"],SidebarSelector:d["a"]},computed:Object.assign(Object.assign(Object.assign({},Object(o["mapState"])("lessonVersions",["lessonVersions"])),Object(o["mapGetters"])("lessonVersions",["lessonAssets"])),Object(o["mapState"])("globals",["user"])),metaInfo:{title:"Lesson Assets"}})],f);var b=f;var h=b;var m=s(2243);var g=s(5);var x=Object(g["a"])(h,n,a,false,null,"27c45032",null);if(false){var y}x.options.__file="frontend/views/lessons/editor/LessonAssetsVersionsList.vue";var _=t["default"]=x.exports},871:function(e,t,s){var n=s(956);if(typeof n==="string")n=[[e.i,n,""]];if(n.locals)e.exports=n.locals;var a=s(15).default;var i=a("0146e0f4",n,false,{});if(false){}},909:function(e,t,s){var n=s(1146);if(typeof n==="string")n=[[e.i,n,""]];if(n.locals)e.exports=n.locals;var a=s(15).default;var i=a("240f90b0",n,false,{});if(false){}},910:function(e,t,s){var n=s(1148);if(typeof n==="string")n=[[e.i,n,""]];if(n.locals)e.exports=n.locals;var a=s(15).default;var i=a("44f5c995",n,false,{});if(false){}},955:function(e,t,s){"use strict";var n=s(871);var a=s.n(n);var i=a.a},956:function(e,t,s){t=e.exports=s(14)(false);t.push([e.i,"",""])},963:function(e,t,s){"use strict";var n=function(){var e=this;var t=e.$createElement;var s=e._self._c||t;return s("router-link",{staticClass:"btn nav-btn",attrs:{to:{name:"authors_dashboard"},title:"Authoring home"}},[s("span",{staticClass:"b-sprite-quiz-v3-home"})])};var a=[];n._withStripped=true;var i=s(0);var r=s(1);let o=class e extends r["e"]{};o=Object(i["b"])([r["a"]],o);var l=o;var c=l;var d=s(955);var v=s(5);var p=Object(v["a"])(c,n,a,false,null,"c9ca534c",null);if(false){var u}p.options.__file="frontend/views/lessons/editor/AuthoringHomeButton.vue";var f=t["a"]=p.exports}}]);
//# sourceMappingURL=LessonAssetsVersionsList.c2084b91331bf40a80db.js.map