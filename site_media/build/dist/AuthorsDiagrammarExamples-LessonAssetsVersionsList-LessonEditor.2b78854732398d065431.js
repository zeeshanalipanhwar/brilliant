(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[20],{1145:function(e,t,n){var i=n(2230);if(typeof i==="string")i=[[e.i,i,""]];if(i.locals)e.exports=i.locals;var r=n(15).default;var a=r("31c835e6",i,false,{});if(false){}},1146:function(e,t,n){var i=n(2232);if(typeof i==="string")i=[[e.i,i,""]];if(i.locals)e.exports=i.locals;var r=n(15).default;var a=r("c1002eb6",i,false,{});if(false){}},1147:function(e,t,n){var i=n(2234);if(typeof i==="string")i=[[e.i,i,""]];if(i.locals)e.exports=i.locals;var r=n(15).default;var a=r("0ff287ca",i,false,{});if(false){}},1148:function(e,t,n){var i=n(2236);if(typeof i==="string")i=[[e.i,i,""]];if(i.locals)e.exports=i.locals;var r=n(15).default;var a=r("6f597dee",i,false,{});if(false){}},1149:function(e,t,n){var i=n(2238);if(typeof i==="string")i=[[e.i,i,""]];if(i.locals)e.exports=i.locals;var r=n(15).default;var a=r("7180f80f",i,false,{});if(false){}},128:function(e,t,n){var i=n(434);if(typeof i==="string")i=[[e.i,i,""]];if(i.locals)e.exports=i.locals;var r=n(15).default;var a=r("6163b12e",i,false,{});if(false){}},1304:function(e,t,n){"use strict";var i=function(){var e=this;var t=e.$createElement;var n=e._self._c||t;return n("InteractivePreview",{ref:"preview",class:{preview:true,dim:e.isLoadingPreview},attrs:{interactive:e.interactive,"interactive-key":e.interactiveKey},on:{"interactive-error":e.handleInteractiveError}})};var r=[];i._withStripped=true;var a=n(0);var o=n(1);var s=n(299);var l=n(919);var c=n(932);var d=n(931);var m=n(1305);var u=n(301);let h=class e extends o["e"]{constructor(){super(...arguments);this.compilationErrors=[];this.previewJavascript="";this.isLoadingPreview=false;this.hasBeenEditedSinceRemotePreview=false;this.cursorPosition={line:0,ch:0};this.showFigmaModal=false}get interactive(){return Object.assign(Object.assign({},this.asset),{generatedData:{javascript:this.staticJavascript||this.previewJavascript}})}assetChanged(){this.handleIncomingData()}reloadInteractive(){this.$refs.preview.reloadInteractive()}updateDiagrammarPreview(){return Object(a["a"])(this,void 0,void 0,(function*(){this.setIsLoadingPreview(true);const e={elm_code:this.asset.elm};try{const t=yield fetch("/courses/interactives/diagrammar/compile/",{body:JSON.stringify(e),method:"POST",headers:{"Content-Type":"application/json","X-CSRFToken":Object(s["a"])()}});const{results:n}=yield t.json();const{errors:i,javascript:r}=n.elmer_result;if(!i){this.previewJavascript=r;this.reloadInteractive()}else{let e;if(i.type==="compile-errors"){e=i.errors.map(e=>e.problems.map(e=>Object(u["a"])(e.message))).flat().join("\n------------------------\n");const t=i.errors.filter(({path:e})=>e.endsWith("Main.elm"))[0];if(t){this.compilationErrors=t.problems.map(u["b"])}}else if(Array.isArray(i.message)&&i.message.length>0){e=Object(u["a"])(i.message);if(i.title){e=`${i.title}\n\n${e}`}}else{e=`${i}`}this.sendInteractiveErrorMessage(e)}this.setIsLoadingPreview(false);this.hasBeenEditedSinceRemotePreview=false}catch(e){this.sendInteractiveErrorMessage(e.stack)}}))}sendInteractiveErrorMessage(e){this.$emit("interactive-error",e)}setIsLoadingPreview(e){this.isLoadingPreview=e;this.$emit("is-loading-preview",this.isLoadingPreview)}handleInteractiveError(e){this.sendInteractiveErrorMessage(`${e.message}\n${e.stack}`)}handleIncomingData(){if(this.staticJavascript){this.reloadInteractive()}else{this.updateDiagrammarPreview()}}mounted(){this.handleIncomingData()}};Object(a["b"])([Object(o["c"])(Object)],h.prototype,"asset",void 0);Object(a["b"])([Object(o["c"])(String)],h.prototype,"staticJavascript",void 0);Object(a["b"])([Object(o["c"])(String)],h.prototype,"interactiveKey",void 0);Object(a["b"])([Object(o["f"])("asset",{deep:true})],h.prototype,"assetChanged",null);h=Object(a["b"])([Object(o["a"])({components:{AssetsUploader:l["a"],CodeEditor:d["a"],FigmaImportModal:c["a"],InteractivePreview:m["a"]}})],h);var f=h;var p=f;var v=n(2237);var b=n(5);var g=Object(b["a"])(p,i,r,false,null,"47f0b12f",null);if(false){var w}g.options.__file="frontend/views/lessons/editor/DiagrammarPreview.vue";var y=t["a"]=g.exports},1305:function(e,t,n){"use strict";var i=function(){var e=this;var t=e.$createElement;var n=e._self._c||t;return n("div",{staticClass:"viz-wrapper clearfix",attrs:{"data-interactivekey":e.interactiveKey}},[n("div",{attrs:{id:e.interactiveKey}})])};var r=[];i._withStripped=true;var a=n(0);var o=n(1);let s=class e extends o["e"]{constructor(){super(...arguments);this.debounceTimer=null;this.interactiveError=null;this.interactiveInstance=null}reloadInteractive(){clearTimeout(this.debounceTimer);this.debounceTimer=setTimeout(()=>{try{this.getModuleForInteractiveType().then(e=>{if(e===undefined){return null}if(this.interactiveInstance&&this.interactiveInstance.kill){this.interactiveInstance.kill()}try{this.interactiveInstance=e.default.createInteractive({visualizationKey:this.interactiveKey,slug:this.interactive.alias,authoredData:this.authoredData,generatedData:this.interactive.generatedData,onError:e=>{this.$emit("interactive-error",e);this.interactiveError=e},location:"v2-editor"})}catch(e){this.$emit("interactive-error",e);throw e}})}catch(e){this.interactiveError=e;throw e}},100)}interactiveChanged(e,t){if(this.interactive.type!=="diagrammar"&&JSON.stringify(e.json||{})!==JSON.stringify(t.json||{})){this.reloadInteractive()}}mounted(){this.$root.$on("pull-from-viz-requested",e=>{if(this.interactiveInstance&&this.interactiveKey==="bigPreview"){this.interactiveInstance.getConfigValue(e).then(t=>{if(t){this.$root.$emit("pull-from-viz-succeeded",{path:e,value:t})}})}})}getModuleForInteractiveType(){return Object(a["a"])(this,void 0,void 0,(function*(){switch(this.interactive.type){case"diagrammar":return yield Promise.all([n.e(1),n.e(3),n.e(2),n.e(6),n.e(12),n.e(25),n.e(5),n.e(11),n.e(177)]).then(n.bind(null,338));case"calcdoku":return yield Promise.all([n.e(1),n.e(3),n.e(2),n.e(6),n.e(4),n.e(5),n.e(172)]).then(n.bind(null,332));case"gridfill":return yield Promise.all([n.e(1),n.e(3),n.e(2),n.e(6),n.e(4),n.e(5),n.e(181)]).then(n.bind(null,329));case"hotcold":return yield Promise.all([n.e(1),n.e(3),n.e(2),n.e(6),n.e(4),n.e(5),n.e(183)]).then(n.bind(null,314));case"neuralnetworks":return yield Promise.all([n.e(1),n.e(3),n.e(2),n.e(6),n.e(4),n.e(5),n.e(187)]).then(n.bind(null,334));case"numberbunchers":return yield Promise.all([n.e(1),n.e(3),n.e(2),n.e(6),n.e(4),n.e(5),n.e(188)]).then(n.bind(null,331));case"orderlogic":return yield Promise.all([n.e(1),n.e(3),n.e(2),n.e(6),n.e(4),n.e(5),n.e(190)]).then(n.bind(null,330));case"parson":return yield Promise.all([n.e(1),n.e(3),n.e(2),n.e(6),n.e(4),n.e(5),n.e(191)]).then(n.bind(null,335));case"toggletags":return yield Promise.all([n.e(1),n.e(3),n.e(2),n.e(6),n.e(4),n.e(5),n.e(194)]).then(n.bind(null,337));case"elmconfig":return;default:throw new Error(`Unknown interactive type '${this.interactive.type}'`)}}))}get authoredData(){if(this.interactive.type==="diagrammar"){return this.interactive.elm}try{return JSON.parse(this.interactive.json)}catch(e){throw new Error(`Invalid JSON: ${e}`)}}};Object(a["b"])([Object(o["c"])(Object)],s.prototype,"interactive",void 0);Object(a["b"])([Object(o["c"])(String)],s.prototype,"interactiveKey",void 0);Object(a["b"])([Object(o["f"])("interactive")],s.prototype,"interactiveChanged",null);s=Object(a["b"])([o["a"]],s);var l=s;var c=l;var d=n(2235);var m=n(5);var u=Object(m["a"])(c,i,r,false,null,"034bd9e4",null);if(false){var h}u.options.__file="frontend/views/lessons/editor/InteractivePreview.vue";var f=t["a"]=u.exports},2229:function(e,t,n){"use strict";var i=n(1145);var r=n.n(i);var a=r.a},2230:function(e,t,n){t=e.exports=n(14)(false);t.push([e.i,'@use "sass:map";\n.no-scroll[data-v-3dda27ef] {\n  position: relative;\n  z-index: 100;\n  overflow: hidden;\n}\n.assets[data-v-3dda27ef] {\n  position: relative;\n}\n.assets ul[data-v-3dda27ef] {\n    margin: -4px -8px 24px;\n    list-style: none;\n}\n.assets li[data-v-3dda27ef] {\n    margin-bottom: 2px;\n}\n.assets input[data-v-3dda27ef] {\n    display: none;\n}\n.assets form p[data-v-3dda27ef] {\n    margin: 0;\n    line-height: 1.4em;\n}\n.btn[data-v-3dda27ef] {\n  min-width: 120px;\n}\n.btn > .loading-anim[data-v-3dda27ef] {\n    margin: auto;\n}\n.empty[data-v-3dda27ef] {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  width: 100%;\n  height: 100px;\n  color: rgba(0, 0, 0, 0.5);\n  background: rgba(0, 0, 0, 0.05);\n}\n.error[data-v-3dda27ef] {\n  color: tomato;\n}\n.success[data-v-3dda27ef] {\n  color: mediumseagreen;\n}\n',""])},2231:function(e,t,n){"use strict";var i=n(1146);var r=n.n(i);var a=r.a},2232:function(e,t,n){t=e.exports=n(14)(false);t.push([e.i,'@use "sass:map";\n.no-scroll[data-v-5afe4ba4] {\n  position: relative;\n  z-index: 100;\n  overflow: hidden;\n}\n.figma-modal header[data-v-5afe4ba4] {\n  margin-bottom: 40px;\n}\n.figma-modal h2[data-v-5afe4ba4],\n.figma-modal h3[data-v-5afe4ba4] {\n  margin: 0;\n}\n.figma-modal p[data-v-5afe4ba4] {\n  margin: 0;\n  color: #899098;\n}\n.figma-modal input[type=text][data-v-5afe4ba4] {\n  width: 100%;\n  margin-bottom: 24px;\n  border-color: #161616;\n  border-radius: 7px;\n}\n.figma-modal .preview-container[data-v-5afe4ba4] {\n  min-height: 150px;\n}\n.figma-modal .preview-container .error[data-v-5afe4ba4] {\n    color: tomato;\n    line-height: 1.4em;\n    font-size: 14px;\n}\n.figma-modal .preview-container .loading-anim[data-v-5afe4ba4] {\n    top: 40px;\n    left: 30px;\n}\n.figma-modal .image-preview[data-v-5afe4ba4] {\n  max-width: 100%;\n  margin-bottom: 20px;\n}\n.figma-modal .form-footer[data-v-5afe4ba4] {\n  margin-top: 40px;\n}\n',""])},2233:function(e,t,n){"use strict";var i=n(1147);var r=n.n(i);var a=r.a},2234:function(e,t,n){t=e.exports=n(14)(false);t.push([e.i,'@charset "UTF-8";\n@use "sass:map";\n.no-scroll[data-v-00b49118] {\n  position: relative;\n  z-index: 100;\n  overflow: hidden;\n}\n.editor[data-v-00b49118] {\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n}\n.editor[data-v-00b49118] .CodeMirror {\n    height: 100%;\n    font-size: 0.9em;\n    line-height: 1.6em;\n    font-family: "Source Code Pro", monospace;\n}\n.editor .lang[data-v-00b49118] {\n    display: flex;\n    align-items: center;\n    width: 100%;\n    height: 20px;\n    padding: 0 16px;\n    border-bottom: 1px solid #ccc;\n    font-size: 12px;\n    color: rgba(0, 0, 0, 0.5);\n}\n.editor .editor-container[data-v-00b49118] {\n    flex: 1;\n    overflow: hidden;\n}\n.editor .editor-container.y-scroll[data-v-00b49118] {\n      overflow-y: scroll;\n}\n.editor .error-container[data-v-00b49118] {\n    display: flex;\n    flex-direction: column;\n    flex: none;\n    max-height: 50%;\n}\n.editor .error-container .error-toggle[data-v-00b49118] {\n      display: flex;\n      align-items: center;\n      background: #F8F7F6;\n      border-top: 1px solid #C2C4CF;\n      padding: 0 8px;\n      cursor: pointer;\n}\n.editor .error-container .error-toggle[data-v-00b49118]:hover {\n        opacity: 0.7;\n}\n.editor .error-container .error-toggle small[data-v-00b49118] {\n        color: #899098;\n}\n.editor .error-container .error-toggle span[data-v-00b49118] {\n        margin-right: 4px;\n        -webkit-transform: scale(0.6);\n                transform: scale(0.6);\n        opacity: 0.6;\n}\n.editor .error-container .error-toggle span.hidden[data-v-00b49118] {\n          -webkit-transform: rotate(-90deg) scale(0.6);\n                  transform: rotate(-90deg) scale(0.6);\n}\n.editor .errors[data-v-00b49118] {\n    overflow: auto;\n    padding: 8px 16px;\n    border-top: 1px solid #ccc;\n    color: tomato;\n    background: #FFFFFF;\n}\n.editor .errors h3[data-v-00b49118] {\n      margin: 12px 0 4px;\n      font-size: 14px;\n      color: tomato;\n}\n.editor .errors ul[data-v-00b49118] {\n      margin: 0;\n      list-style: none;\n      font-size: 14px;\n}\n.editor .errors pre[data-v-00b49118] {\n      margin: 0;\n      font-size: 14px;\n}\n.editor .interactives[data-v-00b49118] {\n    justify-content: center;\n    align-items: center;\n}\n.editor .elm[data-v-00b49118] {\n    font-size: 14px;\n    line-height: 1.5em;\n}\n.editor .elm pre[data-v-00b49118] {\n      margin: 0;\n      padding: 12px 16px;\n      overflow: auto;\n}\n.editor-container[data-v-00b49118] .CodeMirror-dialog {\n  font-size: 0.9em;\n}\n.editor-container[data-v-00b49118] .CodeMirror-dialog input {\n    margin-bottom: 0;\n}\n.editor-container[data-v-00b49118] .CodeMirror-foldmarker {\n  text-shadow: none;\n  color: rgba(0, 0, 0, 0.3);\n}\n.editor-container[data-v-00b49118] .CodeMirror-merge-copy {\n  color: transparent;\n}\n.editor-container[data-v-00b49118] .CodeMirror-merge-copy:hover:after {\n    color: #000000;\n}\n.editor-container[data-v-00b49118] .CodeMirror-merge-copy:after {\n    content: \'←\';\n    margin-top: 2px;\n    color: rgba(0, 0, 0, 0.5);\n}\n.editor-container[data-v-00b49118] .cm-s-ttcn .cm-comment {\n  color: rgba(0, 0, 0, 0.4);\n}\n.editor-container[data-v-00b49118] .cm-s-ttcn .cm-camp-block,\n.editor-container[data-v-00b49118] .cm-s-ttcn .cm-camp-step {\n  color: #000000;\n  font-weight: bold;\n}\n.editor-container[data-v-00b49118] .cm-s-ttcn .cm-camp-bold {\n  font-weight: bold;\n  opacity: 0.7;\n}\n.editor-container[data-v-00b49118] .cm-s-ttcn .cm-camp-italic {\n  font-style: oblique;\n}\n.editor-container[data-v-00b49118] .cm-s-ttcn .cm-camp-line-block {\n  background: rgba(72, 209, 204, 0.3);\n}\n.editor-container[data-v-00b49118] .cm-s-ttcn .cm-camp-line-step {\n  background: rgba(72, 209, 204, 0.1);\n}\n.editor-container[data-v-00b49118]  .cm-indent {\n  position: relative;\n}\n.editor-container[data-v-00b49118]  .cm-indent:before {\n    content: \'\';\n    position: absolute;\n    top: -1px;\n    left: 0;\n    bottom: -1px;\n    border-left: 1px dashed rgba(0, 0, 0, 0.1);\n}\n.editor-container[data-v-00b49118]  .cm-indent:first-child:before {\n    display: none;\n}\n.editor-container[data-v-00b49118] .CodeMirror .syntax-warning-highlight {\n  border-bottom: 1px dotted tomato;\n}\n.editor-container[data-v-00b49118] .CodeMirror .syntax-warning-gutter {\n  width: 6px;\n}\n.editor-container[data-v-00b49118] .CodeMirror .syntax-warning-gutter-mark {\n  display: inline-block;\n  width: 7px;\n  height: 1.6em;\n  border-right: 4px solid tomato;\n}\n.editor-container[data-v-00b49118] {\n  display: flex;\n}\n.editor-container[data-v-00b49118]  .CodeMirror {\n    flex: 1;\n    height: auto;\n}\n.editor-toolbar[data-v-00b49118] {\n  display: flex;\n  flex-wrap: wrap;\n  padding: 8px 8px;\n  border-top: 1px solid #ccc;\n  font-size: 14px;\n}\n.editor-toolbar > *[data-v-00b49118] {\n    margin-right: 8px;\n}\n.editor-toolbar > div[data-v-00b49118] {\n    margin: 4px;\n}\n.editor-toolbar .find-section[data-v-00b49118] {\n    display: flex;\n}\n.editor-toolbar .find-section .find-buttons[data-v-00b49118] {\n      display: flex;\n      margin-right: 16px;\n}\n.editor-toolbar .find-section .find-buttons .btn[data-v-00b49118] {\n        padding: 0 8px;\n        margin-right: 4px;\n}\n.editor-toolbar .find-section .find-buttons .btn[data-v-00b49118]:last-child {\n          margin-right: 0;\n}\n.editor-toolbar .find-section input[data-v-00b49118] {\n      margin-right: 8px;\n}\n.editor-toolbar .btn[data-v-00b49118],\n  .editor-toolbar input[data-v-00b49118] {\n    display: inline-flex;\n    align-items: center;\n    height: 30px;\n    margin: 0;\n    font-size: 14px;\n}\n.editor-toolbar .btn[data-v-00b49118] {\n    justify-content: center;\n}\n.editor-toolbar .replace-section[data-v-00b49118] {\n    display: flex;\n}\n.editor-toolbar .replace-section input[data-v-00b49118] {\n      margin-right: 8px;\n}\n',""])},2235:function(e,t,n){"use strict";var i=n(1148);var r=n.n(i);var a=r.a},2236:function(e,t,n){t=e.exports=n(14)(false);t.push([e.i,'@use "sass:map";\n.no-scroll[data-v-034bd9e4] {\n  position: relative;\n  z-index: 100;\n  overflow: hidden;\n}\n.viz-wrapper[data-v-034bd9e4] {\n  margin: 40px 0 64px;\n}\n',""])},2237:function(e,t,n){"use strict";var i=n(1149);var r=n.n(i);var a=r.a},2238:function(e,t,n){t=e.exports=n(14)(false);t.push([e.i,".preview.dim[data-v-47f0b12f] {\n  opacity: 0.5;\n}\n",""])},297:function(e,t,n){"use strict";var i=function(){var e;var t=this;var n=t.$createElement;var i=t._self._c||n;return i("span",{class:(e={"b-loader":true},e["b-"+t.type]=true,e["b-"+t.color]=true,e["b-"+t.size]=true,e)},[i("span")])};var r=[];i._withStripped=true;var a=n(0);var o=n(1);const s="light";const l="dark";const c="small";const d="medium";const m="large";const u="spinner";const h="dots";let f=class e extends o["e"]{};Object(a["b"])([Object(o["c"])({type:String,default:u})],f.prototype,"type",void 0);Object(a["b"])([Object(o["c"])({type:String,default:l})],f.prototype,"color",void 0);Object(a["b"])([Object(o["c"])({type:String,default:d})],f.prototype,"size",void 0);f=Object(a["b"])([o["a"]],f);var p=f;var v=p;var b=n(433);var g=n(5);var w=Object(g["a"])(v,i,r,false,null,"c230b09c",null);if(false){var y}w.options.__file="frontend/components/LoadingAnimation.vue";var x=t["a"]=w.exports},300:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));function i(e){throw new Error("Unreachable case")}},433:function(e,t,n){"use strict";var i=n(128);var r=n.n(i);var a=r.a},434:function(e,t,n){t=e.exports=n(14)(false);t.push([e.i,".b-loader[data-v-c230b09c] {\n  display: block;\n}\n.b-dots[data-v-c230b09c] {\n  position: relative;\n  width: 8px;\n  height: 8px;\n}\n.b-dots span[data-v-c230b09c], .b-dots[data-v-c230b09c]:before, .b-dots[data-v-c230b09c]:after {\n    display: block;\n    position: absolute;\n    width: 100%;\n    height: 100%;\n    border-radius: 50%;\n    background: rgba(0, 0, 0, 0.5);\n}\n.b-dots[data-v-c230b09c]:before, .b-dots[data-v-c230b09c]:after {\n    content: '';\n}\n.b-dots span[data-v-c230b09c] {\n    -webkit-animation: bdots-data-v-c230b09c 1s 0.4s infinite linear;\n            animation: bdots-data-v-c230b09c 1s 0.4s infinite linear;\n}\n.b-dots[data-v-c230b09c]:before {\n    left: -16px;\n    -webkit-animation: bdots-data-v-c230b09c 1s 0.2s infinite linear;\n            animation: bdots-data-v-c230b09c 1s 0.2s infinite linear;\n}\n.b-dots[data-v-c230b09c]:after {\n    right: -16px;\n    -webkit-animation: bdots-data-v-c230b09c 1s 0.6s infinite linear;\n            animation: bdots-data-v-c230b09c 1s 0.6s infinite linear;\n}\n.b-dots.b-light span[data-v-c230b09c], .b-dots.b-light[data-v-c230b09c]:before, .b-dots.b-light[data-v-c230b09c]:after {\n    background: rgba(255, 255, 255, 0.6);\n}\n.b-dots.b-medium[data-v-c230b09c] {\n    width: 12px;\n    height: 12px;\n}\n.b-dots.b-medium[data-v-c230b09c]:before {\n      left: -22px;\n}\n.b-dots.b-medium[data-v-c230b09c]:after {\n      right: -22px;\n}\n.b-dots.b-large[data-v-c230b09c] {\n    width: 18px;\n    height: 18px;\n}\n.b-dots.b-large[data-v-c230b09c]:before {\n      left: -32px;\n}\n.b-dots.b-large[data-v-c230b09c]:after {\n      right: -32px;\n}\n@-webkit-keyframes bdots-data-v-c230b09c {\n0%, 80% {\n    opacity: 1;\n}\n50% {\n    opacity: 0.2;\n}\n}\n@keyframes bdots-data-v-c230b09c {\n0%, 80% {\n    opacity: 1;\n}\n50% {\n    opacity: 0.2;\n}\n}\n.b-spinner[data-v-c230b09c] {\n  font-size: 20px;\n  width: 1em;\n  height: 1em;\n  border-radius: 50%;\n  position: relative;\n  text-indent: -9999em;\n  -webkit-animation: bspinner-data-v-c230b09c 1.3s infinite linear;\n          animation: bspinner-data-v-c230b09c 1.3s infinite linear;\n  -webkit-transform: translateZ(0);\n          transform: translateZ(0);\n}\n.b-spinner.b-small[data-v-c230b09c] {\n    font-size: 4px;\n}\n.b-spinner.b-medium[data-v-c230b09c] {\n    font-size: 6px;\n}\n.b-spinner.b-large[data-v-c230b09c] {\n    font-size: 10px;\n}\n.b-spinner.b-light[data-v-c230b09c] {\n    color: rgba(255, 255, 255, 0.6);\n}\n.b-spinner.b-dark[data-v-c230b09c] {\n    color: rgba(0, 0, 0, 0.5);\n}\n@-webkit-keyframes bspinner-data-v-c230b09c {\n0%, 100% {\n    box-shadow: 0 -3em 0 0.2em, 2em -2em 0 0em, 3em 0 0 -1em, 2em 2em 0 -1em, 0 3em 0 -1em, -2em 2em 0 -1em, -3em 0 0 -1em, -2em -2em 0 0;\n}\n12.5% {\n    box-shadow: 0 -3em 0 0, 2em -2em 0 0.2em, 3em 0 0 0, 2em 2em 0 -1em, 0 3em 0 -1em, -2em 2em 0 -1em, -3em 0 0 -1em, -2em -2em 0 -1em;\n}\n25% {\n    box-shadow: 0 -3em 0 -0.5em, 2em -2em 0 0, 3em 0 0 0.2em, 2em 2em 0 0, 0 3em 0 -1em, -2em 2em 0 -1em, -3em 0 0 -1em, -2em -2em 0 -1em;\n}\n37.5% {\n    box-shadow: 0 -3em 0 -1em, 2em -2em 0 -1em, 3em 0em 0 0, 2em 2em 0 0.2em, 0 3em 0 0em, -2em 2em 0 -1em, -3em 0em 0 -1em, -2em -2em 0 -1em;\n}\n50% {\n    box-shadow: 0 -3em 0 -1em, 2em -2em 0 -1em, 3em 0 0 -1em, 2em 2em 0 0em, 0 3em 0 0.2em, -2em 2em 0 0, -3em 0em 0 -1em, -2em -2em 0 -1em;\n}\n62.5% {\n    box-shadow: 0 -3em 0 -1em, 2em -2em 0 -1em, 3em 0 0 -1em, 2em 2em 0 -1em, 0 3em 0 0, -2em 2em 0 0.2em, -3em 0 0 0, -2em -2em 0 -1em;\n}\n75% {\n    box-shadow: 0em -3em 0 -1em, 2em -2em 0 -1em, 3em 0em 0 -1em, 2em 2em 0 -1em, 0 3em 0 -1em, -2em 2em 0 0, -3em 0em 0 0.2em, -2em -2em 0 0;\n}\n87.5% {\n    box-shadow: 0em -3em 0 0, 2em -2em 0 -1em, 3em 0 0 -1em, 2em 2em 0 -1em, 0 3em 0 -1em, -2em 2em 0 0, -3em 0em 0 0, -2em -2em 0 0.2em;\n}\n}\n@keyframes bspinner-data-v-c230b09c {\n0%, 100% {\n    box-shadow: 0 -3em 0 0.2em, 2em -2em 0 0em, 3em 0 0 -1em, 2em 2em 0 -1em, 0 3em 0 -1em, -2em 2em 0 -1em, -3em 0 0 -1em, -2em -2em 0 0;\n}\n12.5% {\n    box-shadow: 0 -3em 0 0, 2em -2em 0 0.2em, 3em 0 0 0, 2em 2em 0 -1em, 0 3em 0 -1em, -2em 2em 0 -1em, -3em 0 0 -1em, -2em -2em 0 -1em;\n}\n25% {\n    box-shadow: 0 -3em 0 -0.5em, 2em -2em 0 0, 3em 0 0 0.2em, 2em 2em 0 0, 0 3em 0 -1em, -2em 2em 0 -1em, -3em 0 0 -1em, -2em -2em 0 -1em;\n}\n37.5% {\n    box-shadow: 0 -3em 0 -1em, 2em -2em 0 -1em, 3em 0em 0 0, 2em 2em 0 0.2em, 0 3em 0 0em, -2em 2em 0 -1em, -3em 0em 0 -1em, -2em -2em 0 -1em;\n}\n50% {\n    box-shadow: 0 -3em 0 -1em, 2em -2em 0 -1em, 3em 0 0 -1em, 2em 2em 0 0em, 0 3em 0 0.2em, -2em 2em 0 0, -3em 0em 0 -1em, -2em -2em 0 -1em;\n}\n62.5% {\n    box-shadow: 0 -3em 0 -1em, 2em -2em 0 -1em, 3em 0 0 -1em, 2em 2em 0 -1em, 0 3em 0 0, -2em 2em 0 0.2em, -3em 0 0 0, -2em -2em 0 -1em;\n}\n75% {\n    box-shadow: 0em -3em 0 -1em, 2em -2em 0 -1em, 3em 0em 0 -1em, 2em 2em 0 -1em, 0 3em 0 -1em, -2em 2em 0 0, -3em 0em 0 0.2em, -2em -2em 0 0;\n}\n87.5% {\n    box-shadow: 0em -3em 0 0, 2em -2em 0 -1em, 3em 0 0 -1em, 2em 2em 0 -1em, 0 3em 0 -1em, -2em 2em 0 0, -3em 0em 0 0, -2em -2em 0 0.2em;\n}\n}\n",""])},816:function(e,t,n){"use strict";(function(e){var i=n(0);var r=n(3);var a=n(1);var o=n(130);var s=n.n(o);var l=n(29);var c=n(98);let d=class t extends r["default"]{constructor(){super(...arguments);this.initialModalTop=null;this.SCROLL_TO_ELEMENTS=["INPUT","SELECT"]}scrollToFormElement(e){if(!this.needsPreciseScrollHandling||!this.modalIsOverflowing()||!this.modal){return}const t=e.getBoundingClientRect().top;const n=e.clientHeight;const i=window.innerHeight;const r=i/2-n/2;const a=parseInt(this.modal.style.top||"0",10);const o=a+(r-t);this.modal.style.top=`${o}px`}isMobile(){try{return this.$store.getters["pageHeader/isMobile"](this.$mq)}catch(t){if(e.env.VUE_ENV==="server"){return false}return Boolean(document.body.dataset.isMobile)}}onClick(e){const t=e.target;const n=this.$refs.container;if(t===n){this.$emit("close")}}handleKeyDown(e){if(e.which===27){this.$emit("close")}}get needsPreciseScrollHandling(){return navigator.userAgent.toLowerCase().includes("android")}modalIsOverflowing(){if(!this.modal){return false}return this.modal.clientHeight>window.innerHeight}windowResizeHandler(){if(!this.needsPreciseScrollHandling||!this.modal||e.env.VUE_ENV==="server"){return}if(this.modalIsOverflowing()){const e=document.activeElement;if(e&&this.SCROLL_TO_ELEMENTS.includes(e.tagName)){this.scrollToFormElement(e)}}else if(this.initialModalTop){this.modal.style.top=this.initialModalTop}}updated(){this.$nextTick(()=>{if(this.needsPreciseScrollHandling&&this.modal){this.modal.querySelectorAll(this.SCROLL_TO_ELEMENTS.join(",")).forEach(e=>{e.addEventListener("focus",()=>{this.scrollToFormElement(e)})})}})}mounted(){return Object(i["a"])(this,void 0,void 0,(function*(){if(this.axId){Object(l["e"])("ui",{action:"modal",element_type:"modal",element_id:this.axId})}Object(c["a"])(true);window.addEventListener("keydown",this.handleKeyDown);if(this.needsPreciseScrollHandling){this.modal=this.$refs.modal;this.initialModalTop=this.modal.style.top;window.addEventListener("resize",Object(o["debounce"])(this.windowResizeHandler,50))}}))}destroyed(){return Object(i["a"])(this,void 0,void 0,(function*(){Object(c["a"])(false);window.removeEventListener("keydown",this.handleKeyDown);if(this.needsPreciseScrollHandling){window.removeEventListener("resize",Object(o["debounce"])(this.windowResizeHandler,50))}}))}};Object(i["b"])([Object(a["c"])(String)],d.prototype,"axId",void 0);Object(i["b"])([Object(a["c"])({type:Boolean,default:false})],d.prototype,"scrollable",void 0);d=Object(i["b"])([a["a"]],d);t["a"]=d}).call(this,n(19))},817:function(e,t,n){var i=n(835);if(typeof i==="string")i=[[e.i,i,""]];if(i.locals)e.exports=i.locals;var r=n(15).default;var a=r("6b6735ae",i,false,{});if(false){}},819:function(e,t,n){"use strict";var i=function(){var e=this;var t=e.$createElement;var n=e._self._c||t;return n("transition",{attrs:{name:"fade-fast",appear:""}},[n("div",{ref:"container",class:{"b-modal":true,mobile:e.isMobile(),scrollable:e.scrollable},on:{click:e.onClick}},[n("div",{ref:"modal",staticClass:"b-modal-content"},[e._t("default")],2)])])};var r=[];i._withStripped=true;var a=n(816);var o=a["a"];var s=n(834);var l=n(5);var c=Object(l["a"])(o,i,r,false,null,"2f703693",null);if(false){var d}c.options.__file="frontend/components/Modal.vue";var m=t["a"]=c.exports},834:function(e,t,n){"use strict";var i=n(817);var r=n.n(i);var a=r.a},835:function(e,t,n){t=e.exports=n(14)(false);t.push([e.i,'@use "sass:map";\n.no-scroll[data-v-2f703693] {\n  position: relative;\n  z-index: 100;\n  overflow: hidden;\n}\n.b-modal[data-v-2f703693] {\n  position: fixed;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  background: rgba(0, 0, 0, 0.5);\n  z-index: 700;\n}\n.b-modal .b-modal-content[data-v-2f703693] {\n    position: relative;\n    width: 500px;\n    padding: 24px 24px;\n    border-radius: 10px;\n    background: #FFFFFF;\n    overflow: hidden;\n    top: 0;\n    transition: top 200ms linear;\n}\n.b-modal.mobile .b-modal-content[data-v-2f703693] {\n  border-radius: 4px;\n}\n.b-modal.scrollable[data-v-2f703693] {\n  padding: 5% 24px;\n  align-items: flex-start;\n  overflow: auto;\n  -webkit-overflow-scrolling: touch;\n}\n.b-modal.scrollable.mobile[data-v-2f703693] {\n    padding: 8px 8px;\n}\n',""])},919:function(e,t,n){"use strict";var i=function(){var e=this;var t=e.$createElement;var n=e._self._c||t;return n("div",{staticClass:"assets"},[n("form",{ref:"form",on:{submit:function(t){t.preventDefault();return e.handleUploadForm(t)}}},[n("input",{ref:"fileUpload",attrs:{name:"files",type:"file",accept:e.validFileTypes.join(","),multiple:""},on:{change:e.handleUploadInputChanged}}),e._v(" "),e.buttonStyle==="link"?n("button",{staticClass:"btn-link",attrs:{disabled:e.isUploading||e.lessonIsSaving},on:{click:function(t){t.preventDefault();return e.handleUploadButton(t)}}},[e.isUploading?n("LoadingAnimation",{staticClass:"loading-anim",attrs:{type:"spinner",size:"small",color:"dark"}}):n("span",[e._v(e._s(e.buttonText||"Upload new files"))])],1):n("button",{staticClass:"btn",attrs:{disabled:e.isUploading||e.lessonIsSaving},on:{click:function(t){t.preventDefault();return e.handleUploadButton(t)}}},[e.isUploading?n("LoadingAnimation",{staticClass:"loading-anim",attrs:{type:"dots",size:"small",color:"dark"}}):n("span",[e._v(e._s(e.buttonText||"Upload new files"))])],1),e._v(" "),e.uploadError?n("p",{staticClass:"error"},[e._v(e._s(e.uploadError))]):e._e()]),e._v(" "),n("transition",{attrs:{name:"fade-fast"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:e.enableDropArea,expression:"enableDropArea"}],on:{dragover:e.handleDragOver,dragleave:e.handleDragLeave,drop:e.handleDrop}},[e._t("default")],2)])],1)};var r=[];i._withStripped=true;var a=n(0);var o=n(1);var s=n(9);var l=n(297);let c=class e extends o["e"]{constructor(){super(...arguments);this.isUploading=false;this.isDragging=false;this.uploadError=null;this.validFileTypes=["image/png","image/gif","image/jpeg","image/svg+xml","video/mp4"]}handleUploadButton(){this.$refs.fileUpload.click()}handleUploadForm(){return Object(a["a"])(this,void 0,void 0,(function*(){const e=new FormData(this.$refs.form);this.uploadFiles(e)}))}handleUploadInputChanged(){this.handleUploadForm()}handleDragEnter(e){e.preventDefault();this.isDragging=true}handleDragOver(e){e.preventDefault();this.isDragging=true}handleDragLeave(e){e.preventDefault();this.isDragging=false;this.$emit("dragged-outside")}handleDrop(e){var t;return Object(a["a"])(this,void 0,void 0,(function*(){e.preventDefault();const n=(t=e.dataTransfer)===null||t===void 0?void 0:t.files;this.isDragging=false;this.$emit("dropped");if(n){const e=new FormData;Array.from(n).forEach(t=>{e.append("files",t)});yield this.uploadFiles(e)}}))}isVideoUrl(e){return e.trim().endsWith(".mp4")}validateFiles(e){let t=true;e.getAll("files").forEach(e=>{if(!this.validFileTypes.includes(e.type)){this.uploadError=`File type ${e.type} not allowed for upload`;t=false}});return t}uploadFiles(e){return Object(a["a"])(this,void 0,void 0,(function*(){this.uploadError=null;if(!this.validateFiles(e)){return}this.isUploading=true;this.$emit("is-uploading",true);const t={data:e};const{data:n}=yield this.$store.dispatch("lessonEditor/uploadAssets",t);if(n&&n.length){const e=n.map(e=>{const t=e.split(/\//g);const n=t[t.length-1].replace(/\-\w+\.(png|gif|jpe?g|svg|mp4)$/,"");const i=e;if(this.isVideoUrl(e)){const e={alias:n,url:i,type:"video",behavior:"gif",poster:undefined};return e}const r={alias:n,url:i,type:"image",width:"300",altText:""};return r});this.$emit("assets-added",e)}this.isUploading=false;this.$emit("is-uploading",false)}))}};Object(a["b"])([Object(o["c"])(Boolean)],c.prototype,"enableDropArea",void 0);Object(a["b"])([Object(o["c"])(String)],c.prototype,"buttonStyle",void 0);Object(a["b"])([Object(o["c"])(String)],c.prototype,"buttonText",void 0);c=Object(a["b"])([Object(o["a"])({components:{LoadingAnimation:l["a"]},computed:Object.assign({},Object(s["mapState"])("lessonEditor",["lessonIsSaving"]))})],c);var d=c;var m=d;var u=n(2229);var h=n(5);var f=Object(h["a"])(m,i,r,false,null,"3dda27ef",null);if(false){var p}f.options.__file="frontend/views/lessons/editor/AssetsUploader.vue";var v=t["a"]=f.exports},931:function(e,t,n){"use strict";var i=function(){var e=this;var t=e.$createElement;var n=e._self._c||t;return n("div",{staticClass:"editor"},[e.showLangHeader?n("div",{staticClass:"lang"},[e._v("\n    "+e._s(e.language)+"\n  ")]):e._e(),e._v(" "),n("div",{ref:"editor",class:{"editor-container":true,"y-scroll":e.withScroll}}),e._v(" "),n("div",{class:{"editor-toolbar":true}},[n("div",{staticClass:"find-section"},[n("label",[e._v("\n        Find:\n        "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.findQuery,expression:"findQuery"}],attrs:{type:"text"},domProps:{value:e.findQuery},on:{input:[function(t){if(t.target.composing){return}e.findQuery=t.target.value},e.handleFindQueryChange]}})]),e._v(" "),n("div",{staticClass:"find-buttons"},[n("button",{staticClass:"btn",on:{click:e.handleFindNextClick}},[e._v("\n          Find\n        ")]),e._v(" "),n("button",{staticClass:"btn",on:{click:e.handleFindAllClick}},[e._v("\n          Find all\n        ")])])]),e._v(" "),!e.readOnly?n("div",{staticClass:"replace-section"},[n("label",[e._v("\n        Replace:\n        "),n("input",{directives:[{name:"model",rawName:"v-model.lazy",value:e.findReplacement,expression:"findReplacement",modifiers:{lazy:true}}],attrs:{type:"text"},domProps:{value:e.findReplacement},on:{change:function(t){e.findReplacement=t.target.value}}})]),e._v(" "),n("button",{staticClass:"btn",attrs:{disabled:!e.searchState.selectedOccurenceCount},on:{click:e.handleReplaceClick}},[e._v("\n        "+e._s(e.replaceButtonText)+"\n      ")])]):e._e()]),e._v(" "),e.camperdownWarnings&&e.camperdownWarnings.length?n("div",{staticClass:"error-container"},[n("div",{staticClass:"error-toggle",on:{click:e.toggleCamperdownWarnings}},[n("span",{staticClass:"b-sprite-courses-chevron-3 inline",class:{hidden:!e.showCamperdownWarnings}}),e._v(" "),n("small",[e._v("Camperdown warnings")])]),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:e.showCamperdownWarnings,expression:"showCamperdownWarnings"}],staticClass:"errors"},[n("ul",e._l(e.camperdownWarnings,(function(t){return n("li",{key:JSON.stringify(t)},[t.start.line-t.end.line?n("span",[e._v("\n            Lines "+e._s(t.start.line)+" - "+e._s(t.end.line)+": "+e._s(t.message)+"\n          ")]):t.start.ch-t.end.ch?n("span",[e._v("\n            Line "+e._s(t.start.line)+", cols "+e._s(t.start.ch)+"-"+e._s(t.end.ch)+": "+e._s(t.message)+"\n          ")]):n("span",[e._v("\n            Line "+e._s(t.start.line)+", col "+e._s(t.start.ch)+": "+e._s(t.message)+"\n          ")])])})),0)])]):e._e(),e._v(" "),e.elmErrors&&e.elmErrors.length?n("div",{staticClass:"error-container"},[n("div",{staticClass:"error-toggle",on:{click:e.toggleElmErrors}},[n("span",{staticClass:"b-sprite-courses-chevron-3 inline",class:{hidden:!e.showElmErrors}}),e._v(" "),n("small",[e._v("Elm Errors")])]),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:e.showElmErrors,expression:"showElmErrors"}],staticClass:"errors"},e._l(e.elmErrors,(function(t){return n("pre",{key:t},[e._v("        "+e._s(t)+"\n      ")])})),0)]):e._e()])};var r=[];i._withStripped=true;var a=n(0);var o=n(1);var s=n(9);var l=n(87);var c=n(60);var d=n(300);function m(e){switch(e){case"diagram":case"image":case"video":case"embed":case"embeddedSolution":return e;default:return null}}function u(e,t){const[n,i,r]=e.split(" ").map(e=>e.trim()).filter(e=>e.length>0);const a=m(i);if(a&&r){const n=e.indexOf(r)+1;const i=r.endsWith('"')&&r.length>1?n+r.length-2:Math.max(n,n+r.length-1);const o=e.substring(n,t);return{tokenName:a,partialArg:o,argStart:n,argEnd:i}}return null}function h(e,{tokenName:t,partialArg:n}){return e.filter(e=>{switch(t){case"image":return e.type==="image";case"video":return e.type==="video";case"diagram":return e.type==="diagrammar";case"embed":case"embeddedSolution":return Object(l["h"])(e);default:Object(d["a"])(t)}}).map(e=>e.alias).filter(e=>e.startsWith(n)).sort()}function f(e,t){return n=>{return new Promise(i=>{setTimeout(()=>{const r=n.getCursor();const a=n.getLine(r.line);const o=u(a,r.ch);if(o){i({list:h(t(),o),from:e.Pos(r.line,o.argStart),to:e.Pos(r.line,o.argEnd)})}i(null)},100)})}}function p(e,t){const n=e.length;if(t.somethingSelected()){const i=t.getSelections();const r=i.map(t=>{if(t.length>=2*n&&t.startsWith(e)&&t.endsWith(e)){return t.substr(n,t.length-2*n)}return e+t+e});t.replaceSelections(r,"around")}else{const{line:i,ch:r}=t.getCursor();const a=t.getLine(i);const o=a.substr(0,r);const s=a.substr(r,n);if(o.endsWith(e)&&s===e){t.replaceRange("",{line:i,ch:r-n},{line:i,ch:r+n})}else{t.replaceRange(e+e,{line:i,ch:r});t.setCursor(i,r+n)}}}const v="variable-2";const b="meta";const g="variable";const w="status";function y(e,t,n=-1){e.state[e.state.length-1]=t;if(n>=0){e.indentation=n}}function x(e,t){e.state.push(t)}function O(e){e.state.pop()}function _(e){const t=e.match(/^\s+/);if(t&&typeof t[0]==="string"){return t[0].length}return 0}function C(e,t){const n=e.lookAhead(1);if(n!==undefined){return _(n)>t||n.trim().length===0}return false}function j(e,t){e.eatSpace();e.eatWhile(/[a-z]/);y(t,e.eol()?"normal":"argument");return"keyword"}function k(e,t,n){if(t.indentation<e.indentation()){e.skipToEnd();if(!C(e,t.indentation)){y(t,"normal")}return n}y(t,"normal");return null}function E(e,t,n=true){e.eatWhile(/[^"]/);e.next();if(n&&e.eol()){y(t,"normal")}return"string"}function S(e,t,n,i){if(e.match(i.character.repeat(2))){e.skipToEnd();if(C(e,n)){y(t,i.modeName,n)}return i.token}e.eatWhile(new RegExp(`[^\\${i.character}]`));if(e.eat(i.character)){return i.token}return null}function F(e,t){const n=e.next();const i=e.indentation();if(n==="%"&&e.match("%%")){e.skipToEnd();if(C(e,i)){y(t,"comment",i)}return"comment"}if(n==="$"){return S(e,t,i,{character:"$",modeName:"blockmath",token:v})}if(n==="`"){return S(e,t,i,{character:"`",modeName:"blockcode",token:w})}if(n==="#"&&i===0){if(e.peek()==="#"){e.skipToEnd();return"camp-step"}e.skipToEnd();return"camp-block"}if(n==="!"&&e.column()===0){e.eatWhile(/\s/);e.eatWhile(/[a-z0-9]/i);if(!e.eol()){y(t,"command")}return"keyword"}if(n==="?"&&e.column()===0){e.eatWhile(/[a-z ]/i);if(!e.eol()){y(t,"option")}return"keyword"}if(n==="|"&&e.column()===0&&e.eat(">")){return j(e,t)}if(n==="*"){if(!!e.eat("*")){if(!!e.match(/.*?\*\*/)){return"camp-bold"}return null}if(!!e.match(/.*?\*/)){return"camp-bold"}return null}if(n==="_"){if(!!e.eat("_")){if(!!e.match(/.*?__/)){return"camp-bold"}return null}if(!!e.match(/.*?_/)){return"camp-italic"}return null}if(n==="["){y(t,"annotation");x(t,"normal");return b}if(n==="]"){O(t);if(e.eol()){y(t,"normal")}return b}if(n===":"&&e.column()===0){return"keyword"}return null}function L(e,t){if(e.eat('"')){return E(e,t)}if(e.match("|>")){return j(e,t)}if(e.eat("[")){x(t,"normal");return b}if(e.eat("]")){O(t);return b}if(e.match(">>")){y(t,"normal");return b}if(e.match("vv")){e.skipToEnd();y(t,"normal");return b}if(e.match("->")){e.eat(">");y(t,"divert");return b}if(e.eol()){e.skipToEnd();y(t,"normal");return null}e.next();y(t,"normal");return null}function I(e,t){if(e.eat('"')){return E(e,t)}if(e.eat("[")){x(t,"normal");return b}if(e.eat("]")){O(t);return b}if(e.match("|>")){return j(e,t)}if(e.match(">>")){y(t,"normal");e.next();return b}if(e.match("vv")){y(t,"normal");e.skipToEnd();return b}if(e.eat("->")){e.eat(">");y(t,"divert");return b}if(e.eol()){y(t,"normal");return null}e.next();y(t,"normal");return null}function P(e,t){if(e.eat('"')){return E(e,t)}if(e.match("|>")){return j(e,t)}if(e.eat("[")){x(t,"normal");return b}if(e.eat("]")){O(t);return b}if(e.match(">>")){y(t,"normal");e.next();return b}if(e.match("vv")){y(t,"normal");e.skipToEnd();return b}e.next();y(t,"normal");return null}function T(e,t){return k(e,t,"comment")}function $(e,t){return k(e,t,v)}function M(e,t){return k(e,t,w)}function D(e,t){e.skipToEnd();y(t,"normal");return g}function A(e,t){if(e.eat("(")){return b}if(e.eat('"')){return E(e,t,false)}if(e.eat(")")){y(t,"normal");return b}e.next();return null}function U(){return{startState:()=>{return{state:["normal"],indentation:0}},token:(e,t)=>{e.eatSpace();const n=t.state[t.state.length-1]||"normal";switch(n){case"normal":return F(e,t);case"command":return L(e,t);case"option":return I(e,t);case"comment":return T(e,t);case"argument":return P(e,t);case"blockmath":return $(e,t);case"divert":return D(e,t);case"annotation":return A(e,t);case"blockcode":return M(e,t);default:Object(d["a"])(n)}},lineComment:"%%%"}}function z(e){e.defineMode("camperdown",U)}function R(e,t,n){const i=t.getLine(n);const r=i.search(/\S/);const a=t.getTokenTypeAt(e.Pos(n,r+1));if(r===-1||/\bcomment\b/.test(a)){return-1}return e.countColumn(i,null,t.getOption("tabSize"))}function N(e){const t=(t,n)=>{const i=R(e,t,n.line);if(i<0){return}let r=null;for(let a=n.line+1,o=t.lastLine();a<=o;a+=1){const n=R(e,t,a);if(n===-1){}else if(n>i){r=a}else{break}}if(r){return{from:e.Pos(n.line,t.getLine(n.line).length),to:e.Pos(r,t.getLine(r).length)}}return undefined};e.registerGlobalHelper("fold","indent",()=>true,t)}function W(e){const t=/^#[^#].*?$/;const n=/^##.*?$/;e.registerGlobalHelper("fold","camperdown",()=>true,(i,r)=>{const a=i.getLine(r.line);const o=t.test(a);const s=n.test(a);if(o||s){const a=i.lastLine();for(let o=r.line+1;o<=a;o+=1){const l=i.getLine(o);const c=o===a;if(t.test(l)||n.test(l)&&s||c){if(!c||i.getLine(o).trim()===""){do{o-=1}while(i.getLine(o).trim()==="")}return{from:e.Pos(r.line,i.getLine(r.line).length),to:e.Pos(o,i.getLine(o).length)}}}}return undefined})}function B(e){switch(e){case"block":return"cm-camp-line-block";case"step":return"cm-camp-line-step";default:Object(d["a"])(e)}}function q(e,t,n){e.addLineClass(t,"background",B(n))}function V(e,t,n){if(!n||n==="block"){e.removeLineClass(t,"background",B("block"))}if(!n||n==="step"){e.removeLineClass(t,"background",B("step"))}}function H(e){const t=B("block");const n=B("step");if(!e){return}let i=0;e.eachLine(({text:r})=>{var a;const o=((a=e.lineInfo(i))===null||a===void 0?void 0:a.bgClass)||"";const s=o===t;const l=o===n;if(r.startsWith("##")){if(s){V(e,i,"block")}if(!l){q(e,i,"step")}}else if(r.startsWith("#")){if(l){V(e,i,"step")}if(!s){q(e,i,"block")}}else if(s||l){V(e,i)}i+=1})}function J(e){return{line:e.line-1,ch:e.ch-1}}function Q([e,t],[n,i]){if(n>=e&&i<=t){return true}if(e>=n&&t<=i){return true}if(n>=e&&n<=t){return true}if(i>=e&&i<=t){return true}return false}function K(e){return e?[e.from.line,e.to.line]:undefined}function G(e,t,n){e.getAllMarks().forEach(e=>{var i;if((i=e.className)===null||i===void 0?void 0:i.includes(t)){if(n){const t=e.find();const i=[t.from.line,t.to.line];if(Q(n,i)){e.clear()}}else{e.clear()}}})}function Z(e,t){if(!e){return}const n="syntax-warning-highlight";G(e,n);e.clearGutter(l["c"]);t.forEach(t=>{e.markText(Object.assign({},J(t.start)),Object.assign({},J(t.end)),{className:n,title:t.message});const i=document.createElement("span");i.classList.add("syntax-warning-gutter-mark");i.title=t.message;e.setGutterMarker(J(t.start).line,l["c"],i)})}function X(e,t){if(!e){return}const n="cm-indent";const i=e.getOption("indentUnit")||4;const r=K(t);G(e,n,r);let a=0;e.eachLine(t=>{const o=t.text.split("");let s=0;if(!r||Q(r,[a,a])){while(o[s]&&o[s]===" "){s+=1;if(s%i===0){e.markText({ch:s-i,line:a},{ch:s,line:a},{className:n})}}}a+=1})}function Y(e){const t=e.global?e:new RegExp(e.source,e.ignoreCase?"gi":"g");return{token(e){t.lastIndex=e.pos;const n=t.exec(e.string);if(n){if(n.index===e.pos){e.pos+=n[0].length||1;return"searching"}e.pos=n.index}else{e.skipToEnd()}}}}function ee(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function te(e){const t=e.match(/^\/(.*)\/([a-z]*)$/);let n=new RegExp("");if(t){try{n=new RegExp(t[1],t[2].indexOf("i")===-1?"":"i")}catch(e){}}else{const t=ee(e);n=new RegExp(t,e===e.toLowerCase()?"i":"")}if(n.test("")){n=/x^/}return n}var ne=n(301);function ie(e,t){const n=t.length%e.options.indentUnit===0;const i=t.trim().length===0;return n&&i}let re=class e extends o["e"]{constructor(){super(...arguments);this.showCamperdownWarnings=true;this.showElmErrors=true;this.findQuery="";this.findReplacement="";this.searchState={queryString:"",query:new RegExp(/x^/),selectedOccurenceCount:0}}scrollInfo(){if(this.editor){return this.editor.getScrollInfo()}return null}refreshEditor(){if(this.isVisible&&this.editor){this.editor.refresh()}}valueChanged(){var e,t;if(this.editor){const n=((t=(e=this.editor)===null||e===void 0?void 0:e.right)===null||t===void 0?void 0:t.edit.getValue)?this.editor.right.edit.getValue():this.editor.getValue();if(this.value!==n){this.editor.setValue(this.value)}}}originalChanged(){if(this.editor&&this.editor.right){this.editor.rightOriginal().setValue(this.original)}}visibilityChanged(e,t){this.refreshEditor()}camperdownWarningsChanged(){this.updateCamperdownWarnings()}initEditor(){return Object(a["a"])(this,void 0,void 0,(function*(){const e=yield n.e(0).then(n.t.bind(null,129,7));yield Promise.all([Promise.all([n.e(0),n.e(241)]).then(n.t.bind(null,2515,7)),Promise.all([n.e(0),n.e(240)]).then(n.t.bind(null,2516,7)),n.e(220).then(n.t.bind(null,2517,7)),n.e(221).then(n.t.bind(null,2518,7)),Promise.all([n.e(0),n.e(239)]).then(n.t.bind(null,1397,7)),Promise.all([n.e(0),n.e(237)]).then(n.t.bind(null,1398,7)),Promise.all([n.e(0),n.e(238)]).then(n.t.bind(null,2519,7)),Promise.all([n.e(0),n.e(211)]).then(n.t.bind(null,2520,7)),Promise.all([n.e(0),n.e(213)]).then(n.t.bind(null,2521,7)),n.e(219).then(n.t.bind(null,2522,7)),n.e(218).then(n.t.bind(null,2523,7)),Promise.all([n.e(0),n.e(233)]).then(n.t.bind(null,1399,7)),Promise.all([n.e(0),n.e(214)]).then(n.t.bind(null,2524,7)),n.e(215).then(n.t.bind(null,2525,7)),Promise.all([n.e(0),n.e(235)]).then(n.t.bind(null,2526,7)),n.e(217).then(n.t.bind(null,2527,7)),Promise.all([n.e(0),n.e(234)]).then(n.t.bind(null,2528,7)),n.e(216).then(n.t.bind(null,2529,7)),Promise.all([n.e(0),n.e(232)]).then(n.t.bind(null,2530,7)),Promise.all([n.e(0),n.e(236)]).then(n.t.bind(null,435,7)),Promise.all([n.e(0),n.e(231)]).then(n.t.bind(null,2531,7))]);N(e);const t=this.language==="camperdown";if(t){W(e);z(e.default)}const i=this.original!=null;let r={};if(t){r={"Cmd-B":e=>{p("**",e)},"Cmd-I":e=>{p("_",e)}};if(!Object(ne["i"])(navigator)){r=Object.assign(Object.assign({},r),{"Ctrl-B":e=>{p("**",e)},"Ctrl-I":e=>{p("_",e)}})}}const a={value:this.value,mode:this.language,lineNumbers:true,lineWrapping:true,scrollbarStyle:"simple",indentUnit:4,theme:"ttcn",readOnly:this.readOnly,foldGutter:true,inputStyle:"contenteditable",spellcheck:t,autoCloseBrackets:true,gutters:["CodeMirror-linenumbers","CodeMirror-foldgutter",l["c"]],extraKeys:Object.assign({Tab:e=>{if(e.somethingSelected()){e.indentSelection("add");return}e.execCommand("insertSoftTab")},"Shift-Tab":e=>{e.indentSelection("subtract")},Backspace:t=>{const{line:n,ch:i}=t.getCursor();const r=t.getSelection();const a=t.doc.getLine(n).substr(0,i);if(!r&&i>0&&ie(t,a)){const e=i-t.options.indentUnit;t.doc.replaceRange("",{line:n,ch:e},{line:n,ch:i})}else{return e.default.Pass}},Left:t=>{const{line:n,ch:i}=t.getCursor();const r=t.doc.getLine(n).substr(0,i);if(i>0&&ie(t,r)){t.setCursor({line:n,ch:i-t.options.indentUnit})}else{return e.default.Pass}},Right:t=>{const{line:n,ch:i}=t.getCursor();const r=t.doc.getLine(n);const a=r.substr(0,i);const o=r.substr(i,t.options.indentUnit);if(r.length>0&&ie(t,o)&&o.length>0&&o.trim().length===0){t.setCursor({line:n,ch:i+t.options.indentUnit})}else{return e.default.Pass}},"Alt-Up":e=>{Object(ne["g"])(e,-1)},"Alt-Down":e=>{Object(ne["g"])(e,1)},"Ctrl-/":e=>e.toggleComment({indent:true}),"Cmd-/":e=>e.toggleComment({indent:true})},r)};if(i){yield this.loadPatchIntoGlobalNamespace();const t=Object.assign(Object.assign({},a),{orig:this.original,showDifferences:true,panes:2,revertButtons:!this.readOnly});this.editor=e.MergeView(this.$refs.editor,t)}else{this.editor=e.default(this.$refs.editor,a)}if(i){this.editor.right.edit.doc.on("change",()=>{this.$emit("value-updated",this.editor.right.edit.getValue())})}else{this.editor.setOption("foldOptions",{widget:" [...]"});this.editor.doc.on("change",(e,n)=>{Object(c["d"])(()=>{const e=/\t/g;let i=this.editor.getValue();if(e.test(i)){const t=this.editor.getCursor();i=i.replace(e,"    ");this.editor.setValue(i);this.editor.setCursor(t)}else{this.$emit("value-updated",i)}if(t){H(this.editor)}X(this.editor,n)})});this.editor.doc.on("cursorActivity",()=>{Object(c["d"])(()=>{this.$emit("cursor-updated",this.editor.getCursor())})});this.editor.on("viewportChange",this.triggerScrollChanged);this.editor.on("scroll",this.triggerScrollChanged)}if(t){if(!i){this.applyCamperdownOptions(e);this.updateCamperdownWarnings()}H(this.editor)}X(this.editor);this.editor.on("beforeSelectionChange",this.handleBeforeSelectionChangeEvent)}))}updateCamperdownWarnings(){Z(this.editor,this.camperdownWarnings)}triggerScrollChanged(){this.$emit("scroll-changed",this.scrollInfo())}applyCamperdownOptions(e){this.editor.setOption("hintOptions",{hint:f(e,()=>this.lessonAssets)});this.editor.on("keyup",(t,n)=>{const i=[13,37,38,39,40];const r=n.keyCode||n.which||0;if(!i.includes(r)){e.commands.autocomplete(this.editor,null,{completeSingle:false})}})}toggleCamperdownWarnings(){this.showCamperdownWarnings=!this.showCamperdownWarnings}toggleElmErrors(){this.showElmErrors=!this.showElmErrors}clearSearchOverlay(){if(this.searchState.overlay){this.editor.removeOverlay(this.searchState.overlay);this.searchState.overlay=undefined}if(this.searchState.scrollbarAnnotations){this.searchState.scrollbarAnnotations.clear();this.searchState.scrollbarAnnotations=undefined}}refreshSearchOverlay(){this.clearSearchOverlay();this.searchState.overlay=Y(this.searchState.query);this.editor.addOverlay(this.searchState.overlay);if(this.editor.showMatchesOnScrollbar){this.searchState.scrollbarAnnotations=this.editor.showMatchesOnScrollbar(this.searchState.query)}}handleFindQueryChange(){this.clearFind();this.populateQuery();this.refreshSearchOverlay();this.refreshEditor()}populateQuery(){this.searchState.queryString=this.findQuery;this.searchState.query=te(this.findQuery)}clearFind(){this.searchState.queryString="";this.searchState.query=new RegExp(/x^/);this.searchState.selectedOccurenceCount=0;this.clearSearchOverlay()}handleBeforeSelectionChangeEvent(e,t){if(t.origin!=="camperdownFind"&&this.searchState.selectedOccurenceCount!==0){this.searchState.selectedOccurenceCount=0}}findOne(e){const t=this.editor.getSearchCursor(this.searchState.query,this.editor.getCursor(e?"from":"to"));this.editor.focus();if(e?t.findPrevious():t.findNext()){this.editor.setSelection(t.from(),t.to(),{origin:"camperdownFind"});this.searchState.selectedOccurenceCount=1;this.editor.scrollIntoView({from:t.from(),to:t.to()},20)}else{this.editor.setCursor(this.editor.getCursor(e?"from":"to"),{origin:"camperdownFind"});this.searchState.selectedOccurenceCount=0}this.refreshEditor()}handleFindNextClick(){this.findOne(false)}handleFindAllClick(){this.editor.focus();const e=[];const t=this.editor.getSearchCursor(this.searchState.query);while(t.findNext()){e.push({anchor:t.from(),head:t.to()})}this.searchState.selectedOccurenceCount=e.length;if(e.length){this.editor.setSelections(e,0,{origin:"camperdownFind"})}this.refreshEditor()}handleReplaceClick(){const e=this.editor.listSelections();this.editor.replaceSelections(e.map(()=>this.findReplacement),"around");this.editor.focus();this.refreshEditor()}get replaceButtonText(){const e=this.searchState.selectedOccurenceCount;return`Replace ${e} selected occurrence${e!==1?"s":""}`}loadPatchIntoGlobalNamespace(){return Object(a["a"])(this,void 0,void 0,(function*(){const e=yield n.e(242).then(n.t.bind(null,2532,7));const{diff_match_patch:t,DIFF_INSERT:i,DIFF_DELETE:r,DIFF_EQUAL:a}=e.default;Object.assign(window,{diff_match_patch:t,DIFF_INSERT:i,DIFF_DELETE:r,DIFF_EQUAL:a})}))}mounted(){this.initEditor()}};Object(a["b"])([Object(o["c"])(String)],re.prototype,"value",void 0);Object(a["b"])([Object(o["c"])(String)],re.prototype,"language",void 0);Object(a["b"])([Object(o["c"])(Array)],re.prototype,"camperdownWarnings",void 0);Object(a["b"])([Object(o["c"])(Array)],re.prototype,"elmErrors",void 0);Object(a["b"])([Object(o["c"])(String)],re.prototype,"original",void 0);Object(a["b"])([Object(o["c"])({type:Boolean,default:false})],re.prototype,"readOnly",void 0);Object(a["b"])([Object(o["c"])({type:Boolean,default:true})],re.prototype,"showLangHeader",void 0);Object(a["b"])([Object(o["c"])({type:Boolean,default:false})],re.prototype,"withScroll",void 0);Object(a["b"])([Object(o["c"])({type:Boolean,default:false})],re.prototype,"isVisible",void 0);Object(a["b"])([Object(o["f"])("value")],re.prototype,"valueChanged",null);Object(a["b"])([Object(o["f"])("original")],re.prototype,"originalChanged",null);Object(a["b"])([Object(o["f"])("isVisible")],re.prototype,"visibilityChanged",null);Object(a["b"])([Object(o["f"])("camperdownWarnings")],re.prototype,"camperdownWarningsChanged",null);re=Object(a["b"])([Object(o["a"])({computed:Object.assign(Object.assign({},Object(s["mapGetters"])("lessonEditor",["lessonAssets"])),Object(s["mapGetters"])("globals",["featureSwitches"]))})],re);var ae=re;var oe=ae;var se=n(2233);var le=n(5);var ce=Object(le["a"])(oe,i,r,false,null,"00b49118",null);if(false){var de}ce.options.__file="frontend/views/lessons/editor/CodeEditor.vue";var me=t["a"]=ce.exports},932:function(e,t,n){"use strict";var i=function(){var e=this;var t=e.$createElement;var n=e._self._c||t;return n("Modal",{staticClass:"figma-modal",on:{close:e.handleClose}},[n("header",[n("h2",[e._v("Import from Figma")]),e._v(" "),n("p",[e._v(e._s(e.text.subtitle))])]),e._v(" "),n("h3",[e._v("Figma link")]),e._v(" "),n("p",[e._v("The link must have "),n("code",[e._v("?node-id=...")]),e._v(" in the URL to work")]),e._v(" "),n("input",{attrs:{type:"text",placeholder:"https://www.figma.com/file/...?node-id=...",disabled:e.isLoading},on:{input:e.fetchFigmaAsset}}),e._v(" "),e.errorMessage||e.isLoading||e.isAssetLoaded?n("div",{staticClass:"preview-container"},[n("h3",[e._v("Preview")]),e._v(" "),e.errorMessage?n("p",{staticClass:"error",domProps:{innerHTML:e._s(e.errorMessage)}},[e._v("\n      "+e._s(e.errorMessage)+"\n    ")]):e.isLoading?n("LoadingAnimation",{staticClass:"loading-anim",attrs:{type:"spinner",color:"dark"}}):e.isAssetLoaded?n("img",{staticClass:"image-preview",attrs:{src:e.asset.url,width:e.asset.width}}):e._e()],1):e._e(),e._v(" "),n("div",{staticClass:"form-footer"},[n("button",{staticClass:"btn btn-accent",attrs:{disabled:!e.isAssetLoaded},on:{click:e.handleCreateAsset}},[e._v("\n      "+e._s(e.text.button)+"\n    ")])])])};var r=[];i._withStripped=true;var a=n(0);var o=n(1);var s=n(300);var l=n(25);var c=n(8);var d=n(819);var m=n(297);var u=n(18);let h=class e extends o["e"]{constructor(){super(...arguments);this.isLoading=false;this.errorMessage=null;this.asset=null}get text(){switch(this.useCase){case"create-asset":return{subtitle:"Create a new asset from a Figma link",button:"Create asset"};case"add-image":return{subtitle:"Import an image from a Figma link",button:"Import image"};case"replace-asset":return{subtitle:"Update this asset by importing a new one",button:"Update asset"};default:Object(s["a"])(this.useCase)}}get isAssetLoaded(){return this.asset!==null}handleClose(){this.$emit("close")}handleRequestError(e){var t,n;const i=(n=(t=e.response)===null||t===void 0?void 0:t.status)!==null&&n!==void 0?n:"unknown";this.errorMessage=`Request error (${i})`;this.isLoading=false}startFigmaImport(e){var t;return Object(a["a"])(this,void 0,void 0,(function*(){let n;try{n=yield Object(c["c"])(Object(u["b"])({name:"figma_import_start"}).href,Object(l["c"])({figma_url:e}))}catch(e){this.handleRequestError(e);return null}return((t=n.results)===null||t===void 0?void 0:t.figma_import_results)||null}))}checkFigmaImport(e){var t;return Object(a["a"])(this,void 0,void 0,(function*(){let n;try{n=yield Object(c["c"])(Object(u["b"])({name:"figma_import_status"}).href,Object(l["c"])({figma_import_id:e}))}catch(e){this.handleRequestError(e);return null}return((t=n.results)===null||t===void 0?void 0:t.figma_import_results)||null}))}figmaImportStatusPoll(e){return new Promise(t=>{const n=()=>Object(a["a"])(this,void 0,void 0,(function*(){setTimeout(()=>Object(a["a"])(this,void 0,void 0,(function*(){try{const i=yield this.checkFigmaImport(e);if(i===null||i===void 0?void 0:i.processing){n()}else{t(i)}}catch(e){this.handleRequestError(e);t(null)}})),1e3)}));n()})}fetchFigmaAsset(e){return Object(a["a"])(this,void 0,void 0,(function*(){const t=e.target.value;this.errorMessage=null;this.asset=null;if(!t){return}this.isLoading=true;const n=yield this.startFigmaImport(t);if(!n||!n.success){this.errorMessage=(n===null||n===void 0?void 0:n.error)||"Unexpected error starting import";this.isLoading=false;return}if(!n.import_id){throw new Error("Figma import initial request returned success but didn't have an import_id.")}else{const e=yield this.figmaImportStatusPoll(n.import_id);if(e===null){this.errorMessage="Unexpected error while checking import status"}else if(e.error){this.errorMessage=e.error}else{this.asset={slug:e.image_slug||"",url:e.image_url||"",width:e.image_width||300,height:e.image_height||300}}}this.isLoading=false}))}handleCreateAsset(){this.$emit("asset-added",this.asset);this.asset=null;this.handleClose()}};Object(a["b"])([Object(o["c"])(String)],h.prototype,"useCase",void 0);h=Object(a["b"])([Object(o["a"])({components:{Modal:d["a"],LoadingAnimation:m["a"]}})],h);var f=h;var p=f;var v=n(2231);var b=n(5);var g=Object(b["a"])(p,i,r,false,null,"5afe4ba4",null);if(false){var w}g.options.__file="frontend/views/lessons/editor/FigmaImportModal.vue";var y=t["a"]=g.exports}}]);
//# sourceMappingURL=AuthorsDiagrammarExamples-LessonAssetsVersionsList-LessonEditor.2b78854732398d065431.js.map