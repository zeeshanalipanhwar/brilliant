(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[37],{122:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.default=u;t.renderExpressionIntoElement=c;var n=s(r(44));r(179);r(180);r(181);var i=s(r(182));var a=s(r(183));var o=s(r(185));function s(e){return e&&e.__esModule?e:{default:e}}function u(e){var t=a.default.inline;Object.assign(t,{delimiters:[{left:"\\(",right:"\\)",display:false},{left:"\\[",right:"\\]",display:true}],ignoredTags:["script","noscript","style","textarea","pre","code"],ignoredClasses:[],preProcess:i.default.replace,errorCallback:console.error});(0,o.default)(e,t)}function c(e,t){n.default.render(i.default.replace(e),t,a.default.inline)}},1304:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;function n(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}function a(e,t,r){if(t)i(e.prototype,t);if(r)i(e,r);return e}var o=function(){function e(){n(this,e)}a(e,[{key:"convertPositionsToPixels",value:function e(t){return{x:this.x(t.x),y:this.y(t.y)}}}]);return e}();t.default=o},1305:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var n=r(2566);function i(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}function o(e,t,r){if(t)a(e.prototype,t);if(r)a(e,r);return e}var s=3;function u(e){return"".concat(e," not implemented for coordinate system object")}var c=function(){function e(t){i(this,e);this.svg=t.svg;this.width=t.width;this.height=t.height;this.scales=t.scales;this.axisLabels=t.axisLabels;this.graphLabel=t.graphLabel;this.originX=this.scales.x(0);this.originY=this.scales.y(0);this.showAxes=t.showAxes;this.showTicks=t.showTicks;this.showAxisLabels=t.showAxisLabels;this.isBarGraph=t.isBarGraph;this.xRange=this.scales.x.range();this.yRange=this.scales.y.range();this.CLASS_NAMES={AXIS:"viz-axis",GRID:"viz-grid",LABEL:"viz-label"};this.group=this.svg.append("g");if(t.gridStep.h&&t.gridStep.v){this.gridStep=t.gridStep}else{this.gridStep={h:t.gridStep||1,v:t.gridStep||1}}var r=this.getTickFormatter("x");var a=this.getTickFormatter("y");this.xAxis=(0,n.axisTop)(this.scales.x);if(this.showTicks.h){this.xTickValues=this.getTickValues(this.scales.x,this.gridStep.h);this.xAxis.tickSizeInner([s]).tickSizeOuter([0]).tickValues(this.xTickValues).tickFormat(r)}else{this.xTickValues=[];this.xAxis.tickSizeInner([0]).tickSizeOuter([0]).tickValues(this.xTickValues).tickFormat((function(){return""}))}this.yAxis=(0,n.axisLeft)(this.scales.y);if(this.showTicks.v){this.yTickValues=this.getTickValues(this.scales.y,this.gridStep.v);this.yAxis.tickSizeInner([s]).tickSizeOuter([0]).tickValues(this.yTickValues).tickFormat(a)}else{this.yTickValues=[];this.yAxis.tickSizeInner([0]).tickSizeOuter([0]).tickValues(this.yTickValues).tickFormat((function(){return""}))}}o(e,[{key:"getTickFormatter",value:function e(t){throw new Error(u("getTickFormatter"))}},{key:"getTickValues",value:function e(t,r){var n=t.domain();var i=[];for(var a=Math.ceil(n[0]/r);a<=Math.floor(n[1]/r);a++){if(a!==0){i.push(a*r)}}return i}},{key:"draw",value:function e(){this.drawGrid();if(this.showAxes){this.drawAxes();this.putLabels()}}},{key:"drawAxes",value:function e(){throw new Error(u("drawAxes"))}},{key:"drawGrid",value:function e(){throw new Error(u("drawGrid"))}},{key:"putLabels",value:function e(){throw new Error(u("putLabels"))}}]);return e}();t.default=c},1306:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var n=c(r(799));var i=r(802);var a=r(828);var o=u(r(833));var s=c(r(901));function u(e){if(e&&e.__esModule){return e}else{var t={};if(e!=null){for(var r in e){if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};if(n.get||n.set){Object.defineProperty(t,r,n)}else{t[r]=e[r]}}}}t.default=e;return t}}function c(e){return e&&e.__esModule?e:{default:e}}function l(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};var n=Object.keys(r);if(typeof Object.getOwnPropertySymbols==="function"){n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))}n.forEach((function(t){f(e,t,r[t])}))}return e}function f(e,t,r){if(t in e){Object.defineProperty(e,t,{value:r,enumerable:true,configurable:true,writable:true})}else{e[t]=r}return e}function p(e,t){return v(e)||d(e,t)||h()}function h(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function d(e,t){var r=[];var n=true;var i=false;var a=undefined;try{for(var o=e[Symbol.iterator](),s;!(n=(s=o.next()).done);n=true){r.push(s.value);if(t&&r.length===t)break}}catch(e){i=true;a=e}finally{try{if(!n&&o["return"]!=null)o["return"]()}finally{if(i)throw a}}return r}function v(e){if(Array.isArray(e))return e}function y(e){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){y=function e(t){return typeof t}}else{y=function e(t){return t&&typeof Symbol==="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t}}return y(e)}function m(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function b(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}function g(e,t,r){if(t)b(e.prototype,t);if(r)b(e,r);return e}function x(e,t){if(t&&(y(t)==="object"||typeof t==="function")){return t}return w(e)}function w(e){if(e===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}function S(e){S=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)};return S(e)}function O(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function")}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:true,configurable:true}});if(t)_(e,t)}function _(e,t){_=Object.setPrototypeOf||function e(t,r){t.__proto__=r;return t};return _(e,t)}var E="viz-expression";function j(e){if(e.isOperatorNode&&e.args.length<=2){var t=j(e.args[0]);var r=e.args[1]&&j(e.args[1]);if(e.op==="+"){if(e.args.length===1){return e.args[0]}if(e.args.length===2&&r.isOperatorNode&&r.op==="-"&&r.fn==="unaryMinus"){return new n.default.expression.node.OperatorNode("-","subtract",[t,r.args[0]])}return new n.default.expression.node.OperatorNode(e.op,e.fn,r?[t,r]:[t])}}return e}var P=[{l:"-n*n1",r:"-(n*n1)"},j,{l:"n--n1",r:"n+n1"},{l:"-(n*n1)",r:"-n*n1"}];var k=function(e){O(t,e);function t(e,r){var n;m(this,t);n=x(this,S(t).call(this,e,r));n.customColor=null;return n}g(t,[{key:"clone",value:function e(){var r=new t(this.value);r.customColor=this.customColor;return r}}]);return t}(n.default.expression.node.ConstantNode);function A(e,t){return"{\\color{".concat(e,"}").concat(t,"}")}function T(e){e.traverse((function(e){if(e.isConstantNode&&e.valueType==="number"&&e.value.substr(-1)!=="0"){e.value=parseFloat(parseFloat(e.value).toFixed(6)).toString()}}))}function C(e,t,r,i){var a=e.transform((function(e){if(e.isSymbolNode){var a;var o;if(e.name in t){a=t[e.name]}else{var s=Object.values(t).find((function(t){var r=t.latex;return r&&e.name===r}));if(s){a=s}else if(e.name.indexOf("\\")>=0){o=e.name.replace(/\\/g,"");a=t[o]||{}}else if(r.has(e.name)){var u=i.get(e.name);if(u!==undefined){a=Object.assign({},r.get(e.name),{value:u})}}}if(a&&"value"in a){var c=o||e.name;var l=i.get(c);var f=l===0?"0":Math.abs(l).toFixed(a.precision);if(l>=0){var p=new k(f,"number");if(a.color){p.customColor=a.color}return p}var h=new k(f,"number");if(a.color){h.customColor=a.color}return new n.default.expression.node.OperatorNode("-","unaryMinus",[h])}}return e}));var o=function e(t){if(t.isConstantNode&&parseFloat(t.value)===1){t.value="1"}if(t.isOperatorNode&&t.fn==="unaryMinus"){e(t.args[0])}};a.traverse((function(e){if(e.isOperatorNode){if(e.fn==="multiply"){e.args.forEach(o)}else if(e.fn==="divide"){o(e.args[1])}}}));return a}var M=function(){function e(t,r){m(this,e);this.isExpression=true;this.params=t;this.globalArgs=r;this.sharedVariables=this.globalArgs.sharedVariables;if(typeof this.params.template==="string"){this.expressionKey=this.params.template;this.nodeTree=n.default.parse(this.params.template);this.code=this.nodeTree.compile()}else if(this.params.template.function){this.expressionKey=this.params.template.function;var a=(0,i.createFunctionFromString)(this.params.template.function);this.code={eval:a};if(!this.params.displayTemplate){this.hidden=true}}this.noVisibleExpressions=this.params.hidden||this.params.hideStaticExpression&&this.params.hideDynamicExpression;this.variables=this.params.variables||{};this.scopeManager=(0,s.default)(this.globalArgs.visualizationKey,this.expressionKey);if(this.params.displayTemplate){var u=/#\{(.*?)\}/g;var c=/^(.*?)(<=|>=|=|<|>)(.*?)$/;var l=this.params.displayTemplate;var f=l.match(u);if(f){f.forEach((function(e,t){l=l.replace(e,"__LATEX_".concat(t,"__"))}))}var h=function e(t){var r=t;if(f){var n=function e(t,r,n){return t.replace("__LATEX_".concat(n,"__"),r.substring(2,r.length-1))};f.forEach((function(t,i){if(r.args){r.args.forEach((function(t){return e(t)}))}else if(r.name){r.name=n(r.name,t,i)}}))}return r};var d=l.match(c),v=p(d,4),y=v[1],b=v[2],g=v[3];this.displayNodes={left:h(n.default.parse(y.trim())),equality:b.trim(),right:h(n.default.parse(g.trim()))}}if(!this.hidden&&!(this.params.hideStaticExpression&&this.params.hideDynamicExpression)){this.private_createElements();if(this.elements&&this.elements.toggleButton){o.bindExpressionToggleEvents(this.elements)}}if(this.params.transform&&this.params.transform.function){this.transform=(0,i.createFunctionFromString)(this.params.transform.function)}if(this.params.domain&&this.params.domain.function){this.domain=(0,i.createFunctionFromString)(this.params.domain.function)}}g(e,[{key:"private_createElements",value:function e(){var t={};this.elements=t;if(this.noVisibleExpressions){return}if(!this.params.hideStaticExpression){t.static=document.createElement("div");t.static.className="".concat(E," static ").concat(o.RENDERING_CLASS)}if(!this.params.hideDynamicExpression){t.dynamic=document.createElement("div");t.dynamic.className="".concat(E," dynamic ").concat(o.RENDERING_CLASS)}var r=o.createExpressionWrapper(t),n=r.wrapper,i=r.toggleButton;t.wrapper=n;if(i){t.toggleButton=i}}},{key:"protected_draw",value:function e(t,r,n){var i=o.draw(t,r);if(n){i.then((function(){return n()}))}}},{key:"protected_reDraw",value:function e(t,r,n){var i=o.reDraw(t,r);if(n){i.then((function(){return n()}))}}},{key:"private_getTexColorHandler",value:function e(t){var r=this;return function(e){if(e.isSymbolNode){var n=(0,i.applyLatexReplacements)(e.name);if(!r.params.colorlessExpressions){var a=e.name.replace("\\","");if(a in t){var o=t[a].color;if(o){n=A(o,n)}}else{var s=Object.values(t).find((function(t){var r=t.latex,n=t.color;return r&&n&&e.name===r}));if(s){n=A(s.color,n)}}}return" ".concat(n)}return undefined}}},{key:"draw",value:function e(t){var r=this;var n=t.dynamic;return new Promise((function(e){if(!r.elements){e();return}var t=n?r.elements.dynamic:r.elements.static;if(!t){e();return}var i=r.getLatex(n);r.protected_draw(t,i,e)}))}},{key:"reDraw",value:function e(t){var r=t.dynamic;if(!this.elements){return}var n=r?this.elements.dynamic:this.elements.static;if(!n){return}var i=this.getLatex(r);this.protected_reDraw(n,i)}},{key:"getLatex",value:function e(t){if(this.noVisibleExpressions){return""}if(this.displayNodes){return this.getCustomDisplayLatex(t)}var r=this.globalArgs.axisLabels.v;if(!this.params.colorlessExpressions){var n=this.params.color;if(n){r=A(n,r)}}var i=this.getExprLatex(t);var a="=";if(this.params.eq){switch(this.params.eq){case"<=":a="\\leq";break;case">=":a="\\geq";break;case"<":case">":a=this.params.eq;break;default:throw new Error("Unexpected equality symbol '".concat(this.params.eq,"'"))}}return"".concat(r," ").concat(a," ").concat(i)}},{key:"getExprLatex",value:function e(t){return this.getNodeTreeLatex({nodeTree:this.nodeTree,dynamic:t})}},{key:"getNodeTreeLatex",value:function e(t){var r=t.nodeTree,i=t.dynamic;var o=l({},this.variables,(0,a.convertMapToObject)(this.sharedVariables));if(i){var s=C(r,o,this.sharedVariables,this.scopeManager);var u=n.default.simplify(s,P);T(u);return u.toTex({handler:function e(t){if(t.customColor&&t.isConstantNode){return A(t.customColor,t.value)}return t.value}})}return r.toTex({handler:this.private_getTexColorHandler(o)})}},{key:"getCustomDisplayLatex",value:function e(t){var r=this.variables;if(t){var i=C(this.displayNodes.left,r,this.sharedVariables,this.scopeManager);var a=C(this.displayNodes.right,r,this.sharedVariables,this.scopeManager);var o=n.default.simplify(i,P);var s=n.default.simplify(a,P);T(o);T(s);var u={handler:function e(t){if(t.isSymbolNode){return" ".concat(t.name.replace("\\","\\")," ")}if(t.customColor){return A(t.customColor,t.value)}return t.value}};var c=o.toTex(u);var l=s.toTex(u);return"".concat(c," ").concat(this.displayNodes.equality," ").concat(l)}var f={handler:this.private_getTexColorHandler(r)};var p=this.displayNodes.left.toTex(f);var h=this.displayNodes.right.toTex(f);return"".concat(p," ").concat(this.displayNodes.equality," ").concat(h)}}]);return e}();t.default=M},1336:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var n=r(1287);var i=a(r(847));function a(e){return e&&e.__esModule?e:{default:e}}function o(e){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){o=function e(t){return typeof t}}else{o=function e(t){return t&&typeof Symbol==="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t}}return o(e)}function s(e){return l(e)||c(e)||u()}function u(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function c(e){if(Symbol.iterator in Object(e)||Object.prototype.toString.call(e)==="[object Arguments]")return Array.from(e)}function l(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++){r[t]=e[t]}return r}}function f(e,t){return d(e)||h(e,t)||p()}function p(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function h(e,t){var r=[];var n=true;var i=false;var a=undefined;try{for(var o=e[Symbol.iterator](),s;!(n=(s=o.next()).done);n=true){r.push(s.value);if(t&&r.length===t)break}}catch(e){i=true;a=e}finally{try{if(!n&&o["return"]!=null)o["return"]()}finally{if(i)throw a}}return r}function d(e){if(Array.isArray(e))return e}function v(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function y(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}function m(e,t,r){if(t)y(e.prototype,t);if(r)y(e,r);return e}function b(e,t){if(t&&(o(t)==="object"||typeof t==="function")){return t}return g(e)}function g(e){if(e===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}function x(e){x=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)};return x(e)}function w(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function")}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:true,configurable:true}});if(t)S(e,t)}function S(e,t){S=Object.setPrototypeOf||function e(t,r){t.__proto__=r;return t};return S(e,t)}var O="viz-graph";var _="viz-graph-inequality";var E=function(e){w(t,e);function t(){v(this,t);return b(this,x(t).apply(this,arguments))}m(t,[{key:"processArgs",value:function e(t){this.isInequality=this.expression.params.eq||null;this.xScaleDomain=this.scales.x.domain();this.line=(0,n.line)().x((function(e){return t.scales.x(e.x)})).y((function(e){return t.scales.y(e.y)})).curve(n.curveBasis);this.clipInequality=t.clipInequality}},{key:"draw",value:function e(){var t=this;var r=this.expression.params.color;var i=this.getData();if(this.isInequality){var a=this.scales.y.range();var o=this.isInequality.indexOf("<")>=0;var s=(0,n.area)().x((function(e){return t.scales.x(e.x)})).y0(o?a[0]:a[1]).y1((function(e){return t.scales.y(e.y)}));this.getData(true).forEach((function(e){var n=e.slice();if(n.length===0){return}if(!t.clipInequality){var i=n[0];var a=t.xScaleDomain[0];if(i.x!==a){n.unshift({x:a,y:i.y})}var o=n[n.length-1];var u=t.xScaleDomain[1];if(o.x!==u){n.push({x:u,y:o.y})}}var c=t.group.append("path").datum(n).attr("d",s).attr("clip-path","url(#".concat(t.maskId,")")).attr("class",_);if(r){c.style("fill",r)}}))}i.forEach((function(e){var n=t.group.append("path");n.datum(e).attr("class",(function(){var e=O;if(t.isInequality&&t.isInequality.indexOf("=")<0){e+=" dashed"}return e})).attr("clip-path","url(#".concat(t.maskId,")")).attr("d",t.line);if(r){n.style("stroke",r)}}))}},{key:"getData",value:function e(t){var r=this.getScope();var n=this.getPointSets(this.xScaleDomain[0],this.xScaleDomain[1],this.expression.code,r);if(t){return[n.reduce((function(e,t){return e.concat(t)}),[])]}return n}},{key:"getPointSets",value:function e(t,r,n,i){var a=this;var o=arguments.length>4&&arguments[4]!==undefined?arguments[4]:0;var u=this.expression.transform?this.expression.animatedTransform||this.expression.transform(i):{x:0,y:0};u.x=u.x||0;u.y=u.y||0;var c=t-u.x;var l=r-u.x;var p=15;var h=this.xScaleDomain.map((function(e){return e-u.x}));var d=this.scales.y.domain().map((function(e){return e-u.y}));var v=(h[1]-h[0])/this.width;var y=(d[1]-d[0])/this.height;var m=v/y;var b=function e(t){return{x:t.x,y:t.y._data[o]}};var g=function e(t){return{x:t.x+u.x,y:t.y+u.y}};var x=function e(t){if(!a.expression.domain){return true}var r=a.expression.animatedDomain||a.expression.domain(i,0);var n=true;Object.keys(r).filter((function(e){return e!=="t"})).forEach((function(e){if(!n){return}if(e==="radial"){var i=r[e].origin||[0,0],a=f(i,2),o=a[0],s=a[1];o-=u.x;s-=u.y;var c=r[e].angle;var l=Math.atan2(t.y-s,t.x-o);if(c<=Math.PI){n=l>0&&l<=c}else{l=l<0?2*Math.PI+l:l;n=l<=c}}else{var p=t[e];Object.entries(r[e]).forEach((function(t){var r=f(t,2),i=r[0],a=r[1];if(!n){return}var o=a-u[e];if(i===">"){n=p>o}else if(i===">="){n=p>=o}else if(i==="<"){n=p<o}else if(i==="<="){n=p<=o}}))}}));return n};var w=function e(t){return t.y>=d[0]&&t.y<=d[1]&&x(t)};var S=function e(t,r,a){if(a===0){return w(t)?t:r}var o=(t.x+r.x)/2;i.x=o;var s;try{s=n.eval(i)}catch(e){s=0}var u={x:o,y:s};if(u.y._data){u=b(u)}if(w(t)===w(u)){return e(u,r,a-1)}return e(t,u,a-1)};var O=v;var _=O/50;var E;var j=[];var P=[];var k;var A=false;var T=false;var C=c;var M=false;var L=0;var D=function e(){j.push(P);P=[]};while(C<=l){i.x=C;var R=void 0;try{R=n.eval(i)}catch(e){R=0}var F={x:C,y:R};if(F.y._data){L=F.y._data.length;M=true;F=b(F)}var N=w(F);if(N!==A&&k&&!T){var I=S(k,F,p);if(I!==k){C=I.x;F=I;N=true;T=true}}else{T=false}if(N){var z=P.length;var V=z>=2&&P[z-1].y===P[z-2].y&&P[z-1].y!==F.y;if(V){D()}P.push(g(F))}else if(A){D()}if(C===l){if(P.length>1){D()}break}if(!N){E=O}else if(!A){E=_}else{var B=Math.abs((F.x-k.x)/(F.y-k.y));E=v/m*B;E=E<_?_:E;E=E>O?O:E}C+=E;if(C>l){C=l}k=F;A=N}if(M&&o<L-1){return[].concat(j,s(this.getPointSets(c,l,n,i,o+1)))}return j}},{key:"reDrawDynamicExpression",value:function e(){this.expression.reDraw({dynamic:true})}}]);return t}(i.default);t.default=E},1406:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.default=A;var n=r(828);var i=r(852);var a=O(r(1408));var o=O(r(1409));var s=O(r(1410));var u=O(r(1411));var c=O(r(1412));var l=O(r(1415));var f=O(r(1418));var p=O(r(1730));var h=O(r(1732));var d=O(r(1734));var v=O(r(1736));var y=O(r(1738));var m=O(r(1740));var b=O(r(1742));var g=O(r(1744));var x=O(r(1751));var w=O(r(1752));var S=O(r(891));function O(e){return e&&e.__esModule?e:{default:e}}function _(e){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_=function e(t){return typeof t}}else{_=function e(t){return t&&typeof Symbol==="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t}}return _(e)}function E(e){return k(e)||P(e)||j()}function j(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function P(e){if(Symbol.iterator in Object(e)||Object.prototype.toString.call(e)==="[object Arguments]")return Array.from(e)}function k(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++){r[t]=e[t]}return r}}function A(e){var t=(0,n.deepFreeze)((0,a.default)(e));(0,o.default)(t);var r=document.getElementById(t.visualizationKey);if(!r||r.classList.contains("inited")&&!t.visualizationKey.includes("Preview")){return}var O=t.secondarySettings&&Object.keys(t.secondarySettings).length>0;var j=Object.freeze({isSplitGraph:O,isPolarGraph:t.type===i.GRAPH_TYPES.POLAR,isBarGraph:t.type===i.GRAPH_TYPES.BARCHART,primaryWidth:O?t.width/2-t.graphSpacing/2:t.width});var P=Object.freeze({root:r,controlsContainer:document.createElement("div"),secondaryObjects:j.isSplitGraph?{}:null});P.controlsContainer.classList.add("viz-graph-controls");if(t.type===i.GRAPH_TYPES.GRAPH3D){var k=(0,s.default)(t,P,{onSliderChanged:e.onSliderChanged}),A=k.sliders;(0,w.default)(P,A);return}var T=(0,u.default)(t,P,j),C=T.svg,M=T.height;P=(0,n.extendFrozenObject)(P,{svg:C});j=(0,n.extendFrozenObject)(j,{height:M});var L=(0,c.default)(t,j),D=L.scales,R=L.secondaryScales;P=(0,n.extendFrozenObject)(P,{scales:D});if(R){P.secondaryObjects.scales=R}(0,l.default)(t,P,j);var F=[];var N=[];if(t.functions.length){var I=(0,f.default)(t,P,j),z=I.graphs,V=I.controlsObjects;F.push.apply(F,E(z));N.push.apply(N,E(V))}var B=t.secondarySettings&&t.secondarySettings.bars&&t.secondarySettings.bars.length;if(t.bars.length||B){var G=(0,h.default)(t,P,j,N),H=G.barcharts;F.push.apply(F,E(H));N.filter((function(e){return e&&e.slider!==undefined})).forEach((function(e){return e.addEntities(H)}))}if(t.points.length){var q=(0,p.default)(t,P),K=q.points,Y=q.controlsObjects;F.push.apply(F,E(K));N.push.apply(N,E(Y))}if(t.lines&&t.lines.length){var W=(0,d.default)(t,P),U=W.lines;F.push.apply(F,E(U));N.push.apply(N,E(U.map((function(e){return e.expressionWrapper}))))}if(t.vectorField){var X=(0,y.default)(t,P),$=X.vectorField,J=X.controlsObjects;F.push($);N.push.apply(N,E(J))}if(t.vectors){var Z=(0,m.default)(t,P),Q=Z.vectors,ee=Z.controlsObjects;F.push.apply(F,E(Q));N.push.apply(N,E(ee))}if(t.contourPlot){var te=(0,b.default)(t,P),re=te.contourPlot,ne=te.controlsObjects;F.push(re);N.push.apply(N,[re.expressionWrapper].concat(E(ne)))}if(t.parametricEquations.length){var ie=(0,v.default)(t,P),ae=ie.parametricEquations,oe=ie.controlsObjects;F.push.apply(F,E(ae));N.push.apply(N,E(oe))}if(t.sharedVariables){var se=true;var ue=(0,S.default)(t,P,F,{variables:t.sharedVariables},se),ce=ue.sliders;N.push.apply(N,E(ce))}if(t.legend){var le=(0,x.default)(t,P),fe=le.legendElement;r.childNodes[0].insertBefore(fe,r.childNodes[0].childNodes[0])}F.forEach((function(e){e.reDraw();if(!e.isPoint){e.drawStaticExpression();e.drawDynamicExpression()}}));N.forEach((function(e){if(e){if(e.slider){P.controlsContainer.appendChild(e.wrapper);e.draw()}else if(e.isExpression){if(e.params.hidden||!e.elements){return}P.controlsContainer.appendChild(e.elements.wrapper);if(typeof e.params.template==="string"||_(e.params.template.function)){e.draw({dynamic:false});e.draw({dynamic:true})}else{e.draw()}}else if(e.tagName){P.controlsContainer.appendChild(e)}}}));if(t.animations){var pe=(0,g.default)(t,P,F,N),he=pe.animationGroup;r.children[0].appendChild(he.getToggleButton())}(0,w.default)(P,N)}},1408:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.default=y;var n=r(852);var i=r(828);var a;function o(e){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){o=function e(t){return typeof t}}else{o=function e(t){return t&&typeof Symbol==="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t}}return o(e)}function s(e){return l(e)||c(e)||u()}function u(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function c(e){if(Symbol.iterator in Object(e)||Object.prototype.toString.call(e)==="[object Arguments]")return Array.from(e)}function l(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++){r[t]=e[t]}return r}}function f(e,t,r){if(t in e){Object.defineProperty(e,t,{value:r,enumerable:true,configurable:true,writable:true})}else{e[t]=r}return e}var p=(a={},f(a,n.GRAPH_TYPES.BARCHART,(function(e){e.bounds.xLeft=e.bounds.xLeft||0;e.bounds.yBottom=e.bounds.yBottom||0;e.axisLabels=e.axisLabels||{h:"",v:"y"};e.showTicks=e.showTicks||{h:false,v:true};e.showAxisLabels=e.showAxisLabels!==false;return e})),f(a,n.GRAPH_TYPES.POLAR,(function(e){e.axisLabels=e.axisLabels||{h:"",v:"r"};return e})),a);function h(e){e.functions.forEach((function(e){if(e.variables){Object.values(e.variables).forEach((function(e){e.precision=(0,i.getVariablePrecision)(e)}))}}));if(e.parametricEquations.length){e.parametricEquations.forEach((function(e){if(e.variables){Object.values(e.variables).forEach((function(e){e.precision=(0,i.getVariablePrecision)(e)}))}}))}if(e.sharedVariables){e.sharedVariables.forEach((function(t,r){t.precision=(0,i.getVariablePrecision)(t);e.sharedVariables.set(r,t)}))}}function d(e){var t=e.functions.slice();Array.prototype.push.apply(t,e.points);Array.prototype.push.apply(t,e.bars);Array.prototype.push.apply(t,e.animations);Array.prototype.push.apply(t,e.vectors);Array.prototype.push.apply(t,e.lines);if(e.vectorField){t.push(e.vectorField)}if(e.contourPlot){t.push(e.contourPlot)}Array.prototype.push.apply(t,e.parametricEquations);if(e.secondarySettings&&e.secondarySettings.bars){t.push.apply(t,s(e.secondarySettings.bars))}if(e.sharedVariables){t.push({variables:e.sharedVariables})}var r=n.DEFAULT_COLORS.map((function(e){return(0,i.getCSSColor)(e)}));var a=[];t.forEach((function(e){if(e.color&&!e.color.function){e.color=(0,i.getCSSColor)(e.color);a.push(e.color)}if(e.variables){if(e.variables.size){e.variables.forEach((function(t,r){if(t.color){t.color=(0,i.getCSSColor)(t.color);a.push(t.color);e.variables.set(r,t)}}))}else{Object.values(e.variables).forEach((function(e){if(e.color){e.color=(0,i.getCSSColor)(e.color);a.push(e.color)}}))}}if(e.secondaryFunction){var t=e.secondaryFunction&&e.secondaryFunction.params&&e.secondaryFunction.params.color;if(t){var r=e.secondaryFunction.params.color;r=(0,i.getCSSColor)(r);a.push(r);e.secondaryFunction.params.color=r}}}));a.forEach((function(e){var t=r.indexOf(e);if(t>-1){r.splice(t,1)}}));t.forEach((function(e){if(!e.color){e.color=r.shift()||n.FALLBACK_COLOR}if(e.variables){if(e.variables.size){e.variables.forEach((function(t,i){if(!t.color){t.color=r.shift()||n.FALLBACK_COLOR;e.variables.set(i,t)}}))}else{Object.values(e.variables).forEach((function(e){if(!e.color){e.color=r.shift()||n.FALLBACK_COLOR}}))}}}));var o="default";t.forEach((function(e){if(e.color===o){delete e.color}if(e.variables){Object.values(e.variables).forEach((function(e){if(e.color===o){delete e.color}}))}}))}function v(e){if(Array.isArray(e)){return new Map(e.map((function(e){return[e.variableName,e]})))}if(o(e)==="object"){return new Map(Object.entries(e))}return new Map}function y(e){var t=(0,i.deepCopy)(e);t.parametricEquations=t.parametricEquations||[];t.functions=t.functions||[];t.points=t.points||[];t.bars=t.bars||[];t.graphSpacing=e.graphSpacing||20;t.showAxes=e.showAxes!==false;t.showAxisLabels=t.showAxisLabels!==false;t.axisLabels=t.axisLabels||{h:"x",v:"y"};t.showTicks=Object.assign({h:true,v:true},t.showTicks||{});if(t.secondarySettings&&!t.secondarySettings.bounds){t.secondarySettings.bounds=t.bounds}t.sharedVariables=v(t.sharedVariables);var r=p[t.type];if(r){r(t)}if(t.secondarySettings){var n=p[t.secondarySettings.type];if(n){n(t.secondarySettings)}}d(t);h(t);return t}},1409:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.default=o;var n=r(852);function i(e,t,r){if(t in e){Object.defineProperty(e,t,{value:r,enumerable:true,configurable:true,writable:true})}else{e[t]=r}return e}var a=i({},n.GRAPH_TYPES.POLAR,(function(e){if(e.bounds&&!e.bounds.radius){var t="Polar graphs expect bounds to specify a radius, e.g. bounds: { radius: 10 }";throw new Error(t)}}));function o(e){var t=a[e.type];if(t){t(e)}}},1410:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.default=s;var n=o(r(976));var i=a(r(833));function a(e){if(e&&e.__esModule){return e}else{var t={};if(e!=null){for(var r in e){if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};if(n.get||n.set){Object.defineProperty(t,r,n)}else{t[r]=e[r]}}}}t.default=e;return t}}function o(e){return e&&e.__esModule?e:{default:e}}function s(e,t,r){var a=t.root,o=t.controlsContainer;var s=document.createElement("div");s.classList.add("viz-content");s.style.width="100%";s.style.maxWidth="".concat(e.width,"px");var u=document.createElement("div");u.setAttribute("id","graph-3d-".concat(e.visualization));s.appendChild(u);a.appendChild(s);e.latexExpressions.forEach((function(e){var t=i.createContainer();o.append(t);i.draw(t,e)}));var c=[];e.sliders.forEach((function(t){var i=new n.default({params:t,entities:[],container:o,globalArgs:e});o.appendChild(i.wrapper);i.draw();i.slider.noUiSlider.on("update",(function(e,n){r.onSliderChanged(t.latex,e[n])}));c.push(i)}));return{sliders:c}}},1411:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.default=i;var n=r(761);function i(e,t,r){var i=t.root;var a=r.isPolarGraph;if(!i){throw new Error("Cannot find available root element")}var o=navigator.userAgent.indexOf("Android")>=0&&navigator.userAgent.indexOf("Chrome")<0;var s=navigator.userAgent.indexOf("MSIE")>=0||navigator.userAgent.indexOf("Trident/")>=0;var u=null;if(o){var c=/Android ([\d.]*)/;var l=c.exec(navigator.userAgent);if(l.length&&l[1]<"4.4"){u=document.createElement("div");u.innerHTML="\n                A visualization should appear here, but it requires Android OS v4.4 or greater.\n                Your device is running Android OS v".concat(l[1],". If possible, please\n                upgrade your device.")}}else if(s){u=document.createElement("div");u.innerHTML='\n            A visualization should appear here, but it requires a modern browser. \n            You are using Internet Explorer, which is unsupported. Please use\n            <a href="https://www.mozilla.org/en-US/firefox/new/" target="_blank">Firefox</a> or\n            <a href="https://www.google.com/chrome/browser/desktop/index.html" target="_blank">Chrome</a>.\n        '}if(u!==null){u.classList.add("viz-error");this.rootElement.appendChild(u);return{}}var f=e.width;var p=e.height;if(!p){if(a){p=f}else{p=f*(e.bounds.yTop-e.bounds.yBottom);p/=e.bounds.xRight-e.bounds.xLeft}}var h=document.createElement("div");h.classList.add("viz-content");h.style.width="".concat(Math.min(f,i.offsetWidth),"px");h.style.maxWidth="100%";var d=document.createElementNS("http://www.w3.org/2000/svg","svg");d.setAttribute("width",f.toString());d.setAttribute("height",p.toString());d.classList.add("viz-svg-root");d.style.maxWidth="100%";var v=document.createElementNS("http://www.w3.org/2000/svg","g");i.innerHTML="";d.appendChild(v);h.appendChild(d);i.appendChild(h);var y=function e(t){var r=Math.min(t,f);var n=r/f;v.setAttribute("transform","matrix(".concat(n,", 0, 0, ").concat(n,", 0, 0)"));d.setAttribute("width",f*n);d.setAttribute("height",p*n);h.style.width="".concat(r,"px")};y(i.offsetWidth);window.addEventListener("resize",(function(){if(v){y(i.offsetWidth)}window.dispatchEvent(new CustomEvent("screenResized",{detail:{screenWidth:i.offsetWidth}}))}));return{svg:(0,n.select)(v),height:p}}},1412:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.default=s;t.GRAPH_LABEL_HEIGHT=void 0;var n=a(r(1413));var i=a(r(1414));function a(e){return e&&e.__esModule?e:{default:e}}var o=22;t.GRAPH_LABEL_HEIGHT=o;function s(e,t){var r=t.primaryWidth,a=t.height,s=t.isPolarGraph,u=t.isBarGraph,c=t.isSplitGraph;var l={};var f=s?i.default:n.default;var p=u&&e.showAxisLabels;l.scales=new f({width:r,height:p?a-o:a,bounds:e.bounds,offset:{h:0,v:e.graphLabel?o:0}});if(c){var h=e.secondarySettings;var d=s?i.default:n.default;l.secondaryScales=new d({width:r,height:a,bounds:h.bounds,adjacentScales:h.alignAxes?l.scales:null,offset:{h:r+e.graphSpacing,v:h.graphLabel?o:0}})}return l}},1413:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var n=r(759);var i=a(r(1304));function a(e){return e&&e.__esModule?e:{default:e}}function o(e){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){o=function e(t){return typeof t}}else{o=function e(t){return t&&typeof Symbol==="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t}}return o(e)}function s(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function u(e,t){if(t&&(o(t)==="object"||typeof t==="function")){return t}return c(e)}function c(e){if(e===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}function l(e){l=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)};return l(e)}function f(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function")}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:true,configurable:true}});if(t)p(e,t)}function p(e,t){p=Object.setPrototypeOf||function e(t,r){t.__proto__=r;return t};return p(e,t)}var h=24;var d=function(e){f(t,e);function t(e){var r;s(this,t);r=u(this,l(t).call(this));var i=Object.assign({},e.bounds);i.yTop="yTop"in i?i.yTop:0;i.yBottom="yBottom"in i?i.yBottom:0;var a=h*(i.xRight-i.xLeft)/e.width;var o=h*(i.yTop-i.yBottom)/e.height;var c=e.offset||{h:0,v:0};r.x=(0,n.scaleLinear)().range([c.h,c.h+e.width]).domain([i.xLeft-a,i.xRight+a]);var f=i.yTop+o;var p=i.yBottom-o;var d=e.adjacentScales||null;if(d){var v=d.y(0);if(i.yTop){var y=c.v===0?1.5:1.8;p=-(e.height-v)/(v-c.v)*i.yTop-o*y}else{var m=c.v===0?.7:.5;f=-(v-c.v)/(e.height-v)*i.yBottom+o*m}}r.y=(0,n.scaleLinear)().range([e.height,c.v]).domain([p,f]);return r}return t}(i.default);t.default=d},1414:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var n=r(759);var i=a(r(1304));function a(e){return e&&e.__esModule?e:{default:e}}function o(e){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){o=function e(t){return typeof t}}else{o=function e(t){return t&&typeof Symbol==="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t}}return o(e)}function s(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function u(e,t){if(t&&(o(t)==="object"||typeof t==="function")){return t}return c(e)}function c(e){if(e===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}function l(e){l=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)};return l(e)}function f(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function")}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:true,configurable:true}});if(t)p(e,t)}function p(e,t){p=Object.setPrototypeOf||function e(t,r){t.__proto__=r;return t};return p(e,t)}var h=24;var d=function(e){f(t,e);function t(e){var r;s(this,t);r=u(this,l(t).call(this));r.radius=e.bounds.radius;var i=h*r.radius/e.width;var a=h*r.radius/e.height;var o=e.offset||{h:0,v:0};r.x=(0,n.scaleLinear)().range([o.h,o.h+e.width]).domain([-r.radius-i,r.radius+i]);var c=r.radius+a;var f=-r.radius-a;r.y=(0,n.scaleLinear)().range([e.height,o.v]).domain([f,c]);r.r=(0,n.scaleLinear)().range([r.x(0),o.h+e.width]).domain([0,r.radius+i]);return r}return t}(i.default);t.default=d},1415:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.default=o;var n=a(r(1416));var i=a(r(1417));function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t,r){var a=t.svg,o=t.scales,s=t.secondaryObjects;var u=r.isPolarGraph,c=r.isBarGraph,l=r.isSplitGraph,f=r.primaryWidth,p=r.height;var h=u?i.default:n.default;var d=new h({svg:a,width:f,height:p,scales:o,gridStep:e.gridStep,axisLabels:e.axisLabels,showTicks:e.showTicks,showAxes:e.showAxes,showAxisLabels:e.showAxisLabels,isBarGraph:c,graphLabel:e.graphLabel||null});d.draw();if(l){var v=e.secondarySettings;var y=new h({svg:a,width:f,height:p,scales:s.scales,gridStep:v.gridStep||e.gridStep,axisLabels:v.axisLabels||e.axisLabels,showAxes:v.showAxes||e.showAxes,showTicks:v.showTicks||e.showTicks,showAxisLabels:"showAxisLabels"in v?v.showAxisLabels:e.showAxisLabels,graphLabel:v.graphLabel||null});y.draw()}}},1416:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var n=a(r(1305));var i=r(802);function a(e){return e&&e.__esModule?e:{default:e}}function o(e){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){o=function e(t){return typeof t}}else{o=function e(t){return t&&typeof Symbol==="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t}}return o(e)}function s(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function u(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}function c(e,t,r){if(t)u(e.prototype,t);if(r)u(e,r);return e}function l(e,t){if(t&&(o(t)==="object"||typeof t==="function")){return t}return f(e)}function f(e){if(e===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}function p(e){p=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)};return p(e)}function h(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function")}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:true,configurable:true}});if(t)d(e,t)}function d(e,t){d=Object.setPrototypeOf||function e(t,r){t.__proto__=r;return t};return d(e,t)}var v=function(e){h(t,e);function t(){s(this,t);return l(this,p(t).apply(this,arguments))}c(t,[{key:"getTickFormatter",value:function e(t){var r=t==="x"||t==="h"?this.gridStep.h:this.gridStep.v;return function(e){return parseFloat(e.toFixed((0,i.getPrecision)(r)))}}},{key:"drawAxes",value:function e(){if(this.xAxis){this.group.append("g").attr("class",this.CLASS_NAMES.AXIS).attr("transform","translate(0, ".concat(this.originY,")")).call(this.xAxis)}if(this.yAxis){this.group.append("g").attr("class",this.CLASS_NAMES.AXIS).attr("transform","translate(".concat(this.originX," ,0)")).call(this.yAxis)}}},{key:"drawGrid",value:function e(){var t=this;this.xTickValues.forEach((function(e){var r=t.scales.x(e);t.group.append("line").attr("class",t.CLASS_NAMES.GRID).attr("x1",r).attr("y1",t.yRange[1]).attr("x2",r).attr("y2",t.height-1)}));this.yTickValues.forEach((function(e){var r=t.scales.y(e);t.group.append("line").attr("class",t.CLASS_NAMES.GRID).attr("x1",t.xRange[0]).attr("y1",r).attr("x2",t.xRange[1]-1).attr("y2",r)}))}},{key:"putLabels",value:function e(){var t=this;var r=16;var n=4;var i=this.axisLabels;var a=[];if(this.showAxisLabels&&!this.isBarGraph){a.push({text:"0",x:this.originX+n,y:this.originY+r,anchor:"start"})}if(this.graphLabel){a.push({text:this.graphLabel,x:(this.xRange[1]+this.xRange[0])/2,y:r,anchor:"middle"})}if(this.showAxisLabels&&"h"in i){a.push({text:i.h,x:this.xRange[1]-n,y:this.originY+(this.isBarGraph?r*2:r),anchor:"end"})}if(this.showAxisLabels&&"v"in i){a.push({text:i.v,x:this.originX+n,y:this.yRange[1]+r,anchor:"start"})}a.forEach((function(e){t.group.append("text").attr("x",e.x).attr("y",e.y).attr("text-anchor",e.anchor).attr("class",t.CLASS_NAMES.LABEL).text(e.text)}))}}]);return t}(n.default);t.default=v},1417:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var n=a(r(1305));var i=r(802);function a(e){return e&&e.__esModule?e:{default:e}}function o(e){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){o=function e(t){return typeof t}}else{o=function e(t){return t&&typeof Symbol==="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t}}return o(e)}function s(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function u(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}function c(e,t,r){if(t)u(e.prototype,t);if(r)u(e,r);return e}function l(e,t){if(t&&(o(t)==="object"||typeof t==="function")){return t}return f(e)}function f(e){if(e===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}function p(e){p=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)};return p(e)}function h(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function")}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:true,configurable:true}});if(t)d(e,t)}function d(e,t){d=Object.setPrototypeOf||function e(t,r){t.__proto__=r;return t};return d(e,t)}var v=function(e){h(t,e);function t(){s(this,t);return l(this,p(t).apply(this,arguments))}c(t,[{key:"getTickFormatter",value:function e(t){var r=t==="x"||t==="h"?this.gridStep.h:this.gridStep.v;return function(e){return parseFloat(Math.abs(e).toFixed((0,i.getPrecision)(r)))}}},{key:"drawAxes",value:function e(){var t=this;var r=1.25;var n=Math.PI/6;var i=n*2;var a=this.scales.x(0);var o=this.scales.y(0);var s=this.scales.x.domain();var u=this.scales.x(s[0]*r)-a;var c=this.scales.x(s[1]*r)-a;[n,i,-n,-i].forEach((function(e){var r=u*Math.cos(e)+a;var n=u*Math.sin(e)+o;var i=c*Math.cos(e)+a;var s=c*Math.sin(e)+o;t.group.append("line").attr("class",t.CLASS_NAMES.GRID).attr("x1",r).attr("y1",n).attr("x2",i).attr("y2",s)}));this.group.append("g").attr("class",this.CLASS_NAMES.AXIS).attr("transform","translate(0, ".concat(this.originY,")")).call(this.xAxis);this.group.append("g").attr("class",this.CLASS_NAMES.AXIS).attr("transform","translate(".concat(this.originX," ,0)")).call(this.yAxis)}},{key:"drawGrid",value:function e(){var t=this;var r=this.scales.radius*1.5;var n=this.gridStep.h;var i=[];for(var a=n;a<=r;a+=n){i.push(a)}var o=this.scales.x(0);i.forEach((function(e){var r=t.scales.x(e)-o;t.group.append("circle").attr("class",t.CLASS_NAMES.GRID).attr("cx",t.scales.x(0)).attr("cy",t.scales.y(0)).attr("r",r)}))}},{key:"putLabels",value:function e(){var t=this;var r=16;var n=4;var i="π";var a=[];if(this.showAxisLabels){a.push({text:"0",x:this.originX+n,y:this.originY+r,anchor:"start"})}if(this.graphLabel){a.push({text:this.graphLabel,x:(this.xRange[1]+this.xRange[0])/2,y:r,anchor:"middle"})}if(this.showAxisLabels){a.push({text:"2".concat(i),x:this.xRange[1]-n,y:this.originY+r,anchor:"end"});a.push({text:i,x:this.xRange[0]+n,y:this.originY+r,anchor:"start"});a.push({text:"3".concat(i,"/2"),x:this.originX+n,y:this.yRange[0]-r/2,anchor:"start"});a.push({text:"".concat(i,"/2"),x:this.originX+n,y:this.yRange[1]+r,anchor:"start"})}a.forEach((function(e){t.group.append("text").attr("x",e.x).attr("y",e.y).attr("text-anchor",e.anchor).attr("class",t.CLASS_NAMES.LABEL).text(e.text)}))}}]);return t}(n.default);t.default=v},1418:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.default=b;var n=f(r(1306));var i=f(r(1727));var a=f(r(1336));var o=f(r(1728));var s=f(r(1729));var u=r(802);var c=r(852);var l=f(r(891));function f(e){return e&&e.__esModule?e:{default:e}}function p(e){return v(e)||d(e)||h()}function h(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function d(e){if(Symbol.iterator in Object(e)||Object.prototype.toString.call(e)==="[object Arguments]")return Array.from(e)}function v(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++){r[t]=e[t]}return r}}function y(e,t){if(typeof t.template==="string"||t.template.function){return new n.default(t,e)}return new i.default(t,e)}function m(e,t,r,n,i){var l=t.svg,f=t.scales,p=t.secondaryObjects;var h=r.primaryWidth,d=r.height,v=r.isSplitGraph;var y=i.clipInequality;var m;var b={svg:l,width:h,height:d,scales:f,expression:n,clipInequality:y};if(e.type===c.GRAPH_TYPES.POLAR){m=new s.default(e.visualizationKey,b)}else if(e.type===c.GRAPH_TYPES.BASIC||!e.type){m=typeof i.template==="string"||i.template.function?new a.default(e.visualizationKey,b):new o.default(e.visualizationKey,b)}var g;var x=e.secondarySettings;if(v&&x.type!==c.GRAPH_TYPES.BARCHART){var w=Object.assign({},i.secondaryFunction.params,{variables:i.variables});var S={svg:l,width:h,height:d,scales:p.scales};var O={expressionKey:n.expressionKey,params:w,reDraw:function e(){},code:{eval:(0,u.createFunctionFromString)(i.secondaryFunction.value.function,"secondary settings expression")}};S.expression=O;g=new a.default(e.visualizationKey,S)}return{graph:m,secondaryGraph:g}}function b(e,t,r){var n=[];var i=[];e.functions.forEach((function(a){var o=y(e,a);i.push(o);var s=m(e,t,r,o,a),u=s.graph,c=s.secondaryGraph;if(u){n.push(u)}if(c){n.push(c)}var f=(0,l.default)(e,t,[u,c],a),h=f.sliders;i.push.apply(i,p(h))}));return{graphs:n,controlsObjects:i}}},1727:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var n=a(r(799));var i=a(r(1306));function a(e){return e&&e.__esModule?e:{default:e}}function o(e){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){o=function e(t){return typeof t}}else{o=function e(t){return t&&typeof Symbol==="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t}}return o(e)}function s(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function u(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}function c(e,t,r){if(t)u(e.prototype,t);if(r)u(e,r);return e}function l(e,t){if(t&&(o(t)==="object"||typeof t==="function")){return t}return f(e)}function f(e){if(e===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}function p(e){p=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)};return p(e)}function h(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function")}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:true,configurable:true}});if(t)d(e,t)}function d(e,t){d=Object.setPrototypeOf||function e(t,r){t.__proto__=r;return t};return d(e,t)}var v="viz-expression";var y=function(e){h(t,e);function t(e,r){var i;s(this,t);i=l(this,p(t).call(this,e,r));i.params=Object.assign({},i.params);i.params.template=i.params.template.map((function(e){var t=n.default.parse(e.expression);var r=t.compile();return Object.assign({},e,{nodeTree:t,code:r})}));return i}c(t,[{key:"_createElements",value:function e(){this.element=document.createElement("div");this.element.className=v;this.element.style.display="none"}},{key:"draw",value:function e(){var t=this;return new Promise((function(e){if(!t.element){e();return}var r=t.getLatex();t.protected_draw(t.element,r,e)}))}},{key:"reDraw",value:function e(){if(!this.element){return}var t=this.getLatex();this.protected_reDraw(this.element,t)}},{key:"getExprLatex",value:function e(){var t=this;var r="";this.params.template.forEach((function(e){var n=e.domain.replace(/<=/g,"\\leq").replace(/>=/g,"\\geq");var i="".concat(n);if(!t.params.hideStaticExpression){var a=t.getNodeTreeLatex({nodeTree:e.nodeTree,dynamic:false});i+=", & ".concat(a)}if(!t.params.hideDynamicExpression){var o=t.getNodeTreeLatex({nodeTree:e.nodeTree,dynamic:true});i+=", & \\Big[ ".concat(o," \\Big]")}r=r===""?i:"".concat(r," \\\\ ").concat(i)}));r="\\left\\{\\begin{matrix}".concat(r,"\\end{matrix}\\right.");return r}}]);return t}(i.default);t.default=y},1728:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var n=i(r(1336));function i(e){return e&&e.__esModule?e:{default:e}}function a(e){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){a=function e(t){return typeof t}}else{a=function e(t){return t&&typeof Symbol==="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t}}return a(e)}function o(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}function u(e,t,r){if(t)s(e.prototype,t);if(r)s(e,r);return e}function c(e,t){if(t&&(a(t)==="object"||typeof t==="function")){return t}return l(e)}function l(e){if(e===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}function f(e,t,r){if(typeof Reflect!=="undefined"&&Reflect.get){f=Reflect.get}else{f=function e(t,r,n){var i=p(t,r);if(!i)return;var a=Object.getOwnPropertyDescriptor(i,r);if(a.get){return a.get.call(n)}return a.value}}return f(e,t,r||e)}function p(e,t){while(!Object.prototype.hasOwnProperty.call(e,t)){e=h(e);if(e===null)break}return e}function h(e){h=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)};return h(e)}function d(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function")}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:true,configurable:true}});if(t)v(e,t)}function v(e,t){v=Object.setPrototypeOf||function e(t,r){t.__proto__=r;return t};return v(e,t)}var y=/\s*([\d+-.]*)?\s*([<>]=?)?\s*[a-zA-Z]*\s*([<>]=?)?\s*([\d+-.]*)?/;var m=function(e){d(t,e);function t(){o(this,t);return c(this,h(t).apply(this,arguments))}u(t,[{key:"processArgs",value:function e(r){f(h(t.prototype),"processArgs",this).call(this,r);this.domains=this.getDomains()}},{key:"getDomains",value:function e(){var t=this;var r={};this.expression.params.template.forEach((function(e){var n=t.getDomainRange(e.domain);if(!n){throw new Error("Invalid domain: ".concat(e.domain))}r[e.domain]=n}));return r}},{key:"getDomainRange",value:function e(t){var r=t.match(y);var n=parseInt(r[1],10);var i=r[2];var a=r[3];var o=parseInt(r[4],10);var s=i&&Number.isNaN(n);var u=a&&Number.isNaN(o);if(s||u||!i&&!a){return undefined}if(!i){if(a[0]==="<"){return{start:this.xScaleDomain[0],end:o}}return{start:o,end:this.xScaleDomain[1]}}if(!a){if(i[0]==="<"){return{start:n,end:this.xScaleDomain[1]}}return{start:this.xScaleDomain[0],end:n}}if(i[0]==="<"&&a[0]==="<"){return{start:n,end:o}}if(i[0]===">"&&a[0]===">"){return{start:o,end:n}}return undefined}},{key:"getData",value:function e(t){var r=this;var n=this.getScope();var i=[];this.expression.params.template.forEach((function(e){var t=r.domains[e.domain];if(t){var a=r.getPointSets(t.start,t.end,e.code,n);Array.prototype.push.apply(i,a)}}));if(t===true){return[i.reduce((function(e,t){return e.concat(t)}),[])]}return i}}]);return t}(n.default);t.default=m},1729:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var n=r(1287);var i=a(r(847));function a(e){return e&&e.__esModule?e:{default:e}}function o(e){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){o=function e(t){return typeof t}}else{o=function e(t){return t&&typeof Symbol==="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t}}return o(e)}function s(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function u(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}function c(e,t,r){if(t)u(e.prototype,t);if(r)u(e,r);return e}function l(e,t){if(t&&(o(t)==="object"||typeof t==="function")){return t}return f(e)}function f(e){if(e===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}function p(e){p=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)};return p(e)}function h(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function")}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:true,configurable:true}});if(t)d(e,t)}function d(e,t){d=Object.setPrototypeOf||function e(t,r){t.__proto__=r;return t};return d(e,t)}var v="viz-graph";var y=function(e){h(t,e);function t(){s(this,t);return l(this,p(t).apply(this,arguments))}c(t,[{key:"processArgs",value:function e(t){var r=this;this.rScaleDomain=this.scales.r.domain();this.xScaleDomain=this.scales.x.domain();this.width=t.width;this.line=(0,n.radialLine)().radius((function(e){return r.getRadiusPosition(e)})).angle((function(e){return-e[0]}))}},{key:"draw",value:function e(){var t=this;var r=this.expression.params.color;var n=this.getData();var i=this.width/2;n.forEach((function(e){var n=t.group.append("path");n.datum(e).attr("class",(function(){var e=v;if(t.eq&&t.eq.indexOf("=")<0){e+=" dashed"}return e})).attr("transform","translate(".concat(i," ").concat(i,") rotate(90)")).attr("d",t.line);if(r){n.style("stroke",r)}}));this.group.attr("clip-path","url(#".concat(this.maskId,")"))}},{key:"getData",value:function e(){return this.getPointSets()}},{key:"getPointSets",value:function e(){var t=this;var r=this.scales.r(this.scales.radius)*1.5;var n=Math.PI*.015;var i=[];var a=this.getScope();var o=[];var s=0;var u=0;var c=1e4;var l=0;var f=10;var p={};var h=0;var d=10;var v=0;var y=function e(n){return Math.abs(t.getRadiusPosition(n))<=r};var m=function e(t){var r=10;var n=t[1];var i=s[1];if(n>0&&i<0||n<0&&i>0){return Math.abs(n-i)>=r}return false};var b=function e(t){var r=12;var n=(t[0]%(2*Math.PI)).toFixed(r);var i=t[1].toFixed(r);var a="".concat(n,"__").concat(i);if(p[a]){return true}p[a]=[];return false};while(true){a.theta=u;var g=[u,this.expression.code.eval(a)];if(m(g)&&o.length){i.push(o);o=[]}if(y(g)){v=0;if(b(g)){h++;if(h>=f){break}}else{h=0}o.push(g)}else{v++;if(v>=d){break}}l++;if(l>=c){break}u+=n;s=g}if(o.length){i.push(o)}return i}},{key:"getRadiusPosition",value:function e(t){return this.scales.r(t[1]-this.rScaleDomain[1])}},{key:"reDrawDynamicExpression",value:function e(){this.expression.reDraw({dynamic:true})}}]);return t}(i.default);t.default=y},1730:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.default=u;var n=o(r(976));var i=o(r(1731));var a=r(828);function o(e){return e&&e.__esModule?e:{default:e}}function s(e){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){s=function e(t){return typeof t}}else{s=function e(t){return t&&typeof Symbol==="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t}}return s(e)}function u(e,t){var r=t.svg,o=t.scales,u=t.coordinateSystem,c=t.controlsContainer;var l=[];var f=[];e.points.forEach((function(t){var p=new i.default({visualizationKey:e.visualizationKey,svg:r,params:t,globalArgs:e,scales:o});l.push(p);["x","y"].forEach((function(r){var i=(0,a.deepCopy)(t[r]);if(s(i)!=="object"||Object.keys(i).length===0){return}if(i.shared){return}var o=i===t.x;i.color=t.color;i.name=r;if(i.latex===undefined){i.latex=o?"x":"y"}if(i.min===undefined){i.min=o?e.bounds.xLeft:e.bounds.yBottom}if(i.max===undefined){i.max=o?e.bounds.xRight:e.bounds.yTop}i.precision=(0,a.getVariablePrecision)(i);var l=new n.default({params:i,entities:[p],coordinateSystem:u,globalArgs:e,container:c});f.push(l)}))}));return{points:l,controlsObjects:f}}},1731:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var n=o(r(799));var i=r(802);var a=o(r(901));function o(e){return e&&e.__esModule?e:{default:e}}function s(e){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){s=function e(t){return typeof t}}else{s=function e(t){return t&&typeof Symbol==="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t}}return s(e)}function u(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function c(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}function l(e,t,r){if(t)c(e.prototype,t);if(r)c(e,r);return e}var f="viz-point";var p=6;var h=function(){function e(t){var r=this;var i=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"__point__";u(this,e);this.svg=t.svg;this.scales=t.scales;this.params=t.params;this.code={};this.imageScale=t.params.imageScale||1;this.expressionKey=i;this.scopeManager=(0,a.default)(t.visualizationKey,this.expressionKey);this.isPoint=true;if(this.imageScale>1){throw Error("Warning: images should only scale down in size rather than up to avoid a grainy look")}var o=this.params;["x","y"].forEach((function(e){var t=o[e];if(typeof t==="string"){r.code[t]=n.default.parse(t).compile()}}))}l(e,[{key:"draw",value:function e(){var t=this;var r=this.params.image;if(r){this.image=this.svg.append("image");(0,i.getImageSize)(r,this.svg).then((function(e){var r=e.imageSize,n=e.imageUrl;t.imageSize=r;t.imageSize.width=r.width*t.imageScale;t.imageSize.height=r.height*t.imageScale;t.image.attr("xlink:href",n).attr("width",t.imageSize.width).attr("height",t.imageSize.height);t.updateCoordinates()}))}else{this.circle=this.svg.append("circle").attr("r",p).attr("class",f);var n=this.params.color;if(n){this.circle.style("fill",n)}}this.updateCoordinates()}},{key:"reDraw",value:function e(){if(this.circle||this.image){this.updateCoordinates()}else{this.draw()}}},{key:"updateCoordinates",value:function e(){var t=this;var r={};var n;["x","y"].forEach((function(e){var i=t.params[e];var a=s(i);switch(a){case"number":r[e]=i;break;case"object":{var o=t.scopeManager.get(e);r[e]=o!==undefined?o:i.value;break}case"string":if(!n){n=t.getScope()}try{r[e]=t.code[i].eval(n)}catch(t){r[e]=0}break;default:throw new Error("Unexpected type ".concat(a," for value ").concat(e))}}));if(this.circle){this.circle.attr("cx",this.scales.x(r.x)).attr("cy",this.scales.y(r.y))}else if(this.image&&this.imageSize){var i=this.imageSize.width/2;var a=this.imageSize.height/2;this.image.attr("x",this.scales.x(r.x)-i).attr("y",this.scales.y(r.y)-a)}}},{key:"getScope",value:function e(){return this.scopeManager.getScope()}}]);return e}();t.default=h},1732:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.default=o;var n=r(852);var i=a(r(1733));function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t,r,a){var o=t.svg,s=t.scales,u=t.secondaryObjects;var c=r.isSplitGraph,l=r.primaryWidth,f=r.height;var p=[];var h=a.filter((function(e){return e.isExpression===true}));if(e.bars.length){var d=new i.default(e.visualizationKey,{svg:o,width:l,height:f,scales:s,bars:e.bars,expressions:h});p.push(d)}var v=e.secondarySettings;if(c&&v.type===n.GRAPH_TYPES.BARCHART){var y=new i.default(e.visualizationKey,{svg:o,width:l,height:f,scales:u.scales,bars:v.bars,expressions:h});p.push(y)}return{barcharts:p}}},1733:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var n=r(759);var i=r(802);var a=o(r(847));function o(e){return e&&e.__esModule?e:{default:e}}function s(e){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){s=function e(t){return typeof t}}else{s=function e(t){return t&&typeof Symbol==="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t}}return s(e)}function u(e,t){return f(e)||l(e,t)||c()}function c(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function l(e,t){var r=[];var n=true;var i=false;var a=undefined;try{for(var o=e[Symbol.iterator](),s;!(n=(s=o.next()).done);n=true){r.push(s.value);if(t&&r.length===t)break}}catch(e){i=true;a=e}finally{try{if(!n&&o["return"]!=null)o["return"]()}finally{if(i)throw a}}return r}function f(e){if(Array.isArray(e))return e}function p(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function h(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}function d(e,t,r){if(t)h(e.prototype,t);if(r)h(e,r);return e}function v(e,t){if(t&&(s(t)==="object"||typeof t==="function")){return t}return y(e)}function y(e){if(e===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}function m(e){m=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)};return m(e)}function b(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function")}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:true,configurable:true}});if(t)g(e,t)}function g(e,t){g=Object.setPrototypeOf||function e(t,r){t.__proto__=r;return t};return g(e,t)}var x="viz-graph-bar-item";var w="viz-graph-bar-text";var S=function(e){b(t,e);function t(){p(this,t);return v(this,m(t).apply(this,arguments))}d(t,[{key:"processArgs",value:function e(t){var r=t.bars||null;if(r===null||r.length===0){throw new Error("Missing bars argument for bar chart")}this.scales=t.scales;this.expressions=t.expressions;this.bars=r.map((function(e){var t=Object.assign({},e);if(t.value.function){t.value=(0,i.createFunctionFromString)(t.value.function,"<bar chart item>.value")}return t}));var a=this.scales.x.domain();var o=this.scales.x(0);var s=this.scales.x(a[1]);var u=(a[1]-a[0])*.01;this.scales.x=(0,n.scaleBand)().rangeRound([o,s]).domain(this.bars.map((function(e){return e.label}))).paddingInner(u).paddingOuter(u*2)}},{key:"draw",value:function e(){var t=this;var r=this.scales.x.bandwidth();var n=this.scales.y(0);var i=this.getData();this.group.selectAll(".".concat(x)).data(i).enter().append("rect").attr("class",x).attr("x",(function(e){return t.scales.x(e.label)})).attr("y",(function(e){return t.scales.y(e.y)})).attr("width",r).attr("height",(function(e){return Math.max(n-t.scales.y(e.y),0)})).attr("clip-path","url(#".concat(this.maskId,")")).style("fill",(function(e){return e.color||""}));this.group.selectAll(".".concat(w)).data(i).enter().append("text").attr("class",w).attr("x",(function(e){return t.scales.x(e.label)+r/2})).attr("y",n+15).attr("text-anchor","middle").attr("clip-path","url(#".concat(this.maskId,")")).text((function(e){return e.label}))}},{key:"getData",value:function e(){var t=this;var r=this.getScope();return this.bars.map((function(e){return{y:e.value(r,t),label:e.label,color:e.color}}))}},{key:"getScope",value:function e(){var t=this;var r={};this.expressions.forEach((function(e,n){Object.entries(e.params.variables).forEach((function(e){var i=u(e,2),a=i[0],o=i[1];var s=t.scopeManagers[n].get(a);r[a]=s!==undefined?s:o.value}))}));if(this.scopeManagers.length){r=Object.assign({},r,this.scopeManagers[0].getSharedScope())}return r}}]);return t}(a.default);t.default=S},1734:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.default=o;var n=a(r(1735));var i=r(828);function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){var r=t.svg,a=t.scales;var o=[];var s={width:e.width,height:e.height,svg:r,scales:a};e.lines.forEach((function(t){var r=Object.assign({},t,s,{variables:(0,i.convertMapToObject)(e.sharedVariables)});o.push(new n.default(e.visualizationKey,r))}));return{lines:o}}},1735:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var n=u(r(910));var i=s(r(847));var a=u(r(833));var o=r(802);function s(e){return e&&e.__esModule?e:{default:e}}function u(e){if(e&&e.__esModule){return e}else{var t={};if(e!=null){for(var r in e){if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};if(n.get||n.set){Object.defineProperty(t,r,n)}else{t[r]=e[r]}}}}t.default=e;return t}}function c(e,t){return p(e)||f(e,t)||l()}function l(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function f(e,t){var r=[];var n=true;var i=false;var a=undefined;try{for(var o=e[Symbol.iterator](),s;!(n=(s=o.next()).done);n=true){r.push(s.value);if(t&&r.length===t)break}}catch(e){i=true;a=e}finally{try{if(!n&&o["return"]!=null)o["return"]()}finally{if(i)throw a}}return r}function p(e){if(Array.isArray(e))return e}function h(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function d(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}function v(e,t,r){if(t)d(e.prototype,t);if(r)d(e,r);return e}function y(e,t){if(t&&(w(t)==="object"||typeof t==="function")){return t}return m(e)}function m(e){if(e===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}function b(e){b=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)};return b(e)}function g(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function")}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:true,configurable:true}});if(t)x(e,t)}function x(e,t){x=Object.setPrototypeOf||function e(t,r){t.__proto__=r;return t};return x(e,t)}function w(e){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){w=function e(t){return typeof t}}else{w=function e(t){return t&&typeof Symbol==="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t}}return w(e)}var S=.2;var O="viz-line";function _(e){return w(e)==="object"}function E(e){var t=n.generateSingleFunction(e.x);var r=n.generateSingleFunction(e.y);return function(e){return{x:t(e),y:r(e)}}}var j=function(e){g(t,e);function t(){h(this,t);return y(this,b(t).apply(this,arguments))}v(t,[{key:"processArgs",value:function e(t){this.svg=t.svg;this.group=this.svg.append("g").attr("id",O);this.arrowHeadScale=(t.arrowHeadScale||1)*S;this.variables=t.variables||{};this.color=t.color;this.lineStyle=t.lineStyle;this.scales=t.scales;this.expression={expressionKey:"__vector__"};this.createContainersForExpressions(t);if(this.expressionToggleButton){a.bindExpressionToggleEvents({wrapper:this.expressionWrapper,toggleButton:this.expressionToggleButton})}if(t.start.function){this.start=(0,o.createFunctionFromString)(t.start.function)}else if(_(t.start)){this.start=E(t.start)}else{this.start=t.start}if(t.end.function){this.end=(0,o.createFunctionFromString)(t.end.function)}else if(_(t.end)){this.end=E(t.end)}else{this.end=t.end}}},{key:"createContainersForExpressions",value:function e(t){if(!t.hidden&&!t.hideStaticExpression&&t.staticExpression){this.staticExpression=t.staticExpression;this.staticContainer=a.createContainer()}if(!t.hidden&&!t.hideDynamicExpression&&t.dynamicExpression){this.dynamicExpression=(0,o.createFunctionFromString)(t.dynamicExpression,"line constructor");this.dynamicContainer=a.createContainer()}var r=a.createExpressionWrapper({static:this.staticContainer,dynamic:this.dynamicContainer}),n=r.wrapper,i=r.toggleButton;this.expressionWrapper=n;if(i){this.expressionToggleButton=i}}},{key:"draw",value:function e(){this.reDraw()}},{key:"getScope",value:function e(){var t=this;var r={};Object.entries(this.variables).forEach((function(e){var n=c(e,2),i=n[0],a=n[1];var o=t.scopeManager.get(i);r[i]=o!==undefined?o:a.value}));return r}},{key:"reDraw",value:function e(){var t=this.getData();var r=this.group.selectAll("line").data([t]);var n=this.lineStyle==="thick"?2:1;r.exit().remove();r.enter().append("line").attr("stroke-width",n).attr("stroke",this.color).merge(r).attr("x1",(function(e){return e.x1})).attr("x2",(function(e){return e.x2})).attr("y1",(function(e){return e.y1})).attr("y2",(function(e){return e.y2}));if(this.lineStyle==="dashed"){this.group.attr("stroke-dasharray","5, 5")}}},{key:"getData",value:function e(){var t=this.getScope();var r=this.start(t);var n=this.end(t);var i=this.scales.convertPositionsToPixels({x:r.x,y:r.y});var a=this.scales.convertPositionsToPixels({x:n.x,y:n.y});return{x1:i.x,x2:a.x,y1:i.y,y2:a.y}}}]);return t}(i.default);t.default=j},1736:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.default=f;var n=o(r(1737));var i=o(r(891));var a=r(828);function o(e){return e&&e.__esModule?e:{default:e}}function s(e){return l(e)||c(e)||u()}function u(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function c(e){if(Symbol.iterator in Object(e)||Object.prototype.toString.call(e)==="[object Arguments]")return Array.from(e)}function l(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++){r[t]=e[t]}return r}}function f(e,t){var r=t.svg,o=t.scales;var u={width:e.width,height:e.height,svg:r,scales:o};var c=[];var l=[];e.parametricEquations.forEach((function(r){var o=Object.assign({},r,u);var f=Object.assign({},r.variables,(0,a.convertMapToObject)(e.sharedVariables));var p=Object.assign({},o,{variables:f});var h=new n.default(e.visualizationKey,p);l.push(h.expressionWrapper);var d=(0,i.default)(e,t,[h],o),v=d.sliders;c.push(h);l.push.apply(l,s(v))}));return{parametricEquations:c,controlsObjects:l}}},1737:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var n=r(1287);var i=c(r(847));var a=r(802);var o=u(r(910));var s=u(r(833));function u(e){if(e&&e.__esModule){return e}else{var t={};if(e!=null){for(var r in e){if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};if(n.get||n.set){Object.defineProperty(t,r,n)}else{t[r]=e[r]}}}}t.default=e;return t}}function c(e){return e&&e.__esModule?e:{default:e}}function l(e){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){l=function e(t){return typeof t}}else{l=function e(t){return t&&typeof Symbol==="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t}}return l(e)}function f(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};var n=Object.keys(r);if(typeof Object.getOwnPropertySymbols==="function"){n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))}n.forEach((function(t){p(e,t,r[t])}))}return e}function p(e,t,r){if(t in e){Object.defineProperty(e,t,{value:r,enumerable:true,configurable:true,writable:true})}else{e[t]=r}return e}function h(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function d(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}function v(e,t,r){if(t)d(e.prototype,t);if(r)d(e,r);return e}function y(e,t){if(t&&(l(t)==="object"||typeof t==="function")){return t}return m(e)}function m(e){if(e===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}function b(e){b=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)};return b(e)}function g(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function")}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:true,configurable:true}});if(t)x(e,t)}function x(e,t){x=Object.setPrototypeOf||function e(t,r){t.__proto__=r;return t};return x(e,t)}var w=.01;function S(e){return Array.isArray(e)}function O(e){var t=o.generateSingleFunction(e[0]);var r=o.generateSingleFunction(e[1]);return function(e){return{x:t(e),y:r(e)}}}var _=function(e){g(t,e);function t(){h(this,t);return y(this,b(t).apply(this,arguments))}v(t,[{key:"processArgs",value:function e(t){var r=this;this.isParametric=true;this.variables=t.variables||{};if(t.color.function){var i=(0,a.createFunctionFromString)(t.color.function);this.getColor=function(){return i(r.getScope())}}else{this.getColor=function(){return t.color}}this.expression={expressionKey:"__vector__"};this.drawParameter=(0,a.processExecutableParams)(t.drawParameter,["start","stop"]);this.drawParameter.latex=this.drawParameter.latex||"t";this.line=(0,n.line)().x((function(e){return e.x})).y((function(e){return e.y})).curve(n.curveBasis);this.lineStyle=t.lineStyle;this.createContainersForExpressions(t);if(this.expressionToggleButton){s.bindExpressionToggleEvents({wrapper:this.expressionWrapper,toggleButton:this.expressionToggleButton})}if(S(t.template)){this.eval=O(t.template)}else{this.eval=(0,a.createFunctionFromString)(t.template.function)}}},{key:"createContainersForExpressions",value:function e(t){if(!t.hidden&&!t.hideStaticExpression){if(t.staticExpression){this.staticExpression=t.staticExpression;this.staticContainer=s.createContainer()}else if(S(t.template)){this.staticExpression=this.generateStaticExpressionFromTemplate(t.template,t.colorlessExpression,t.matrixNotation);this.staticContainer=s.createContainer()}}if(!t.hidden&&!t.hideDynamicExpression){if(t.dynamicExpression){this.dynamicExpression=(0,a.createFunctionFromString)(t.dynamicExpression,"parametric eq constructor");this.dynamicContainer=s.createContainer()}else if(S(t.template)){this.dynamicExpression=this.generateDynamicExpressionFromTemplate(t.template,t.colorlessExpression,t.matrixNotation);this.dynamicContainer=s.createContainer()}}var r=s.createExpressionWrapper({static:this.staticContainer,dynamic:this.dynamicContainer}),n=r.wrapper,i=r.toggleButton;this.expressionWrapper=n;if(i){this.expressionToggleButton=i}}},{key:"draw",value:function e(){var t=this.getData();this.group.append("path").attr("d",this.line(t)).attr("stroke",this.getColor()).attr("clip-path","url(#".concat(this.maskId,")")).attr("stroke-width",2).attr("fill","none");if(this.lineStyle==="dashed"){this.group.attr("stroke-dasharray","5, 5")}}},{key:"reDraw",value:function e(){var t=this.group.select("path");if(t.empty()){this.draw();return}var r=this.getData();t.datum(r).attr("d",this.line).attr("stroke",this.getColor())}},{key:"getData",value:function e(){var t=[];var r=this.getScope();var n=this.drawParameter.step||w;var i=f({},r);var a=this.drawParameter.latex;for(var o=this.drawParameter.start;o<=this.drawParameter.stop;o+=n){i[a]=o;var s=this.eval(i);var u=this.scales.convertPositionsToPixels(s);t.push({x:u.x,y:u.y})}return t}},{key:"getScope",value:function e(){return this.scopeManager.getScope()}},{key:"generateStaticExpressionFromTemplate",value:function e(t,r,n){var i=o.generateSingleStaticExpression(t[0],this.variables,r);var a=o.generateSingleStaticExpression(t[1],this.variables,r);if(n){return this.toMatrixNotation(i,a)}return this.toCaseNotation(i,a,r)}},{key:"generateDynamicExpressionFromTemplate",value:function e(t,r,n){var i=this;var a=o.generateSingleDynamicExpression(t[0],this.variables);var s=o.generateSingleDynamicExpression(t[1],this.variables);if(n){return function(e){return i.toMatrixNotation(a(e),s(e))}}return function(e){return i.toCaseNotation(a(e),s(e),r)}}},{key:"toCaseNotation",value:function e(t,r,n){var i=this.drawParameter.latex;var a="x";var o="y";if(!n){a="{\\color{".concat(this.getColor(),"}").concat(a,"}");o="{\\color{".concat(this.getColor(),"}").concat(o,"}")}return"\\begin{cases}".concat(a,"(").concat(i,") =").concat(t," \\\\ ").concat(o,"(").concat(i,") = ").concat(r," \\end{cases}")}},{key:"toMatrixNotation",value:function e(t,r){return"\\begin{bmatrix} ".concat(t," \\\\").concat(r,"\\\\\\end{bmatrix}")}}]);return t}(i.default);t.default=_},1738:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.default=f;var n=o(r(1739));var i=o(r(891));var a=r(828);function o(e){return e&&e.__esModule?e:{default:e}}function s(e){return l(e)||c(e)||u()}function u(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function c(e){if(Symbol.iterator in Object(e)||Object.prototype.toString.call(e)==="[object Arguments]")return Array.from(e)}function l(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++){r[t]=e[t]}return r}}function f(e,t){var r=t.svg,o=t.scales;var u=[];var c=Object.assign({},e.vectorField.variables,(0,a.convertMapToObject)(e.sharedVariables));var l=Object.assign({},e.vectorField,{width:e.width,height:e.height,svg:r,scales:o,variables:c});var f=new n.default(e.visualizationKey,l);u.push(f.expressionWrapper);if(e.vectorField.variables){var p=(0,i.default)(e,t,[f],e.vectorField),h=p.sliders;u.push.apply(u,s(h))}return{vectorField:f,controlsObjects:u}}},1739:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var n=u(r(910));var i=s(r(847));var a=u(r(833));var o=r(802);function s(e){return e&&e.__esModule?e:{default:e}}function u(e){if(e&&e.__esModule){return e}else{var t={};if(e!=null){for(var r in e){if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};if(n.get||n.set){Object.defineProperty(t,r,n)}else{t[r]=e[r]}}}}t.default=e;return t}}function c(e){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){c=function e(t){return typeof t}}else{c=function e(t){return t&&typeof Symbol==="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t}}return c(e)}function l(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function f(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}function p(e,t,r){if(t)f(e.prototype,t);if(r)f(e,r);return e}function h(e,t){if(t&&(c(t)==="object"||typeof t==="function")){return t}return d(e)}function d(e){if(e===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}function v(e){v=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)};return v(e)}function y(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function")}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:true,configurable:true}});if(t)m(e,t)}function m(e,t){m=Object.setPrototypeOf||function e(t,r){t.__proto__=r;return t};return m(e,t)}var b=10;var g=.2;var x=.1;function w(e){var t=n.generateSingleFunction(e[0]);var r=n.generateSingleFunction(e[1]);return function(e,n,i){i.x=e;i.y=n;return{x:t(i),y:r(i)}}}function S(e){return Array.isArray(e)}var O=function(e){y(t,e);function t(){l(this,t);return h(this,v(t).apply(this,arguments))}p(t,[{key:"processArgs",value:function e(t){if(t.numVectorsDrawn){this.numX=t.numVectorsDrawn.x;this.numY=t.numVectorsDrawn.y}else{this.numX=b;this.numY=b}this.arrowHeadScale=(t.arrowHeadScale||1)*g;this.arrowLengthScale=(t.arrowLengthScale||1)*x;this.variables=t.variables||{};this.color=t.color;this.scales=t.scales;this.expression={expressionKey:"__vectorfield__"};this.createContainersForExpressions(t);if(this.expressionToggleButton){a.bindExpressionToggleEvents({wrapper:this.expressionWrapper,toggleButton:this.expressionToggleButton})}if(S(t.template)){this.eval=w(t.template)}else{this.eval=t.template}}},{key:"createContainersForExpressions",value:function e(t){if(!t.hidden&&!t.hideStaticExpression){if(t.staticExpression){this.staticExpression=t.staticExpression;this.staticContainer=a.createContainer()}else if(S(t.template)){this.staticExpression=this.generateStaticExpressionFromStringTemplate(t.template,t.colorlessExpression,t.matrixNotation);this.staticContainer=a.createContainer()}}if(!t.hidden&&!t.hideDynamicExpression){if(t.dynamicExpression){this.dynamicExpression=(0,o.createFunctionFromString)(t.dynamicExpression,"vectorField constructor");this.dynamicContainer=a.createContainer()}else if(S(t.template)){this.dynamicExpression=this.generateDynamicExpressionFromStringTemplate(t.template,t.colorlessExpression,t.matrixNotation);this.dynamicContainer=a.createContainer()}}var r=a.createExpressionWrapper({static:this.staticContainer,dynamic:this.dynamicContainer}),n=r.wrapper,i=r.toggleButton;this.expressionWrapper=n;if(i){this.expressionToggleButton=i}}},{key:"draw",value:function e(){this.reDraw()}},{key:"reDraw",value:function e(){var t=this.getData();var r=this.group.selectAll("line").data(t);r.exit().remove();r.enter().append("line").attr("stroke-width",1).attr("stroke",this.color).merge(r).attr("x1",(function(e){return e.x1})).attr("x2",(function(e){return e.x2})).attr("y1",(function(e){return e.y1})).attr("y2",(function(e){return e.y2}))}},{key:"getData",value:function e(){var t=this.getScope();var r=[];for(var n=0;n<this.numX;n++){for(var i=0;i<this.numY;i++){var a=this.getPosition(n,i);var o=this.eval(a.x,a.y,t);var s={x:a.x-o.x*this.arrowLengthScale/2,y:a.y-o.y*this.arrowLengthScale/2};var u={x:a.x+o.x*this.arrowLengthScale/2,y:a.y+o.y*this.arrowLengthScale/2};var c=this.getLineDataToDrawArrow(s,u);Object.values(c).forEach((function(e){return r.push(e)}))}}return r}},{key:"getScope",value:function e(){return this.scopeManager.getScope()}},{key:"getPosition",value:function e(t,r){return{x:(this.scales.x.domain()[1]-this.scales.x.domain()[0])/this.numX*t+this.scales.x.domain()[0]*(1-1/this.numX),y:(this.scales.y.domain()[1]-this.scales.y.domain()[0])/this.numY*r+this.scales.y.domain()[0]*(1-1/this.numY)}}},{key:"getLineDataToDrawArrow",value:function e(t,r){var n={x:t.x-r.x,y:t.y-r.y};var i=Math.sqrt(n.x*n.x+n.y*n.y);if(i===0){n.x=0;n.y=0;i=1}var a={x:Math.sqrt(3)/2*n.x-1/2*n.y,y:1/2*n.x+Math.sqrt(3)/2*n.y};var o={x:Math.sqrt(3)/2*n.x+1/2*n.y,y:-1/2*n.x+Math.sqrt(3)/2*n.y};var s={x:a.x/i*this.arrowHeadScale+r.x,y:a.y/i*this.arrowHeadScale+r.y};var u={x:o.x/i*this.arrowHeadScale+r.x,y:o.y/i*this.arrowHeadScale+r.y};var c=this.scales.convertPositionsToPixels(t);var l=this.scales.convertPositionsToPixels(r);u=this.scales.convertPositionsToPixels(u);s=this.scales.convertPositionsToPixels(s);return{line:{x1:c.x,x2:l.x,y1:c.y,y2:l.y},arrowHeadClockwise:{x1:l.x,x2:s.x,y1:l.y,y2:s.y},arrowHeadCounterCLockwise:{x1:l.x,x2:u.x,y1:l.y,y2:u.y}}}},{key:"generateStaticExpressionFromStringTemplate",value:function e(t,r,i){var a=n.generateSingleStaticExpression(t[0],this.variables,r);var o=n.generateSingleStaticExpression(t[1],this.variables,r);if(i){return this.toMatrixNotation(a,o,r)}return this.toVectorNotation(a,o,r)}},{key:"generateDynamicExpressionFromStringTemplate",value:function e(t,r,i){var a=this;var o=n.generateSingleDynamicExpression(t[0],this.variables);var s=n.generateSingleDynamicExpression(t[1],this.variables);if(i){return function(e){return a.toMatrixNotation(o(e),s(e),r)}}return function(e){return a.toVectorNotation(o(e),s(e),r)}}},{key:"toMatrixNotation",value:function e(t,r,n){var i;if(n){i="\\vec{f}(x, y)"}else{i="{\\color{".concat(this.color,"}\\vec{f}}(x, y)")}return"".concat(i," = \\begin{bmatrix} ").concat(t," \\\\").concat(r,"\\\\\\end{bmatrix}")}},{key:"toVectorNotation",value:function e(t,r,n){var i;if(n){i="\\vec{f}(x, y)"}else{i="{\\color{".concat(this.color$,"}\\vec{f}}(x, y)")}return"".concat(i," = ").concat(t,"\\mathbf{\\hat{i}} + ").concat(r,"\\mathbf{\\hat{j}}")}}]);return t}(i.default);t.default=O},1740:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.default=f;var n=o(r(1741));var i=o(r(891));var a=r(828);function o(e){return e&&e.__esModule?e:{default:e}}function s(e){return l(e)||c(e)||u()}function u(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function c(e){if(Symbol.iterator in Object(e)||Object.prototype.toString.call(e)==="[object Arguments]")return Array.from(e)}function l(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++){r[t]=e[t]}return r}}function f(e,t){var r=t.svg,o=t.scales;var u={width:e.width,height:e.height,svg:r,scales:o};var c=[];var l=[];e.vectors.forEach((function(r){var o=Object.assign({},r,u,{variables:(0,a.convertMapToObject)(e.sharedVariables)});var f=new n.default(e.visualizationKey,o);l.push(f.expressionWrapper);if(r.variables){var p=(0,i.default)(e,t,[f],r),h=p.sliders;l.push.apply(l,s(h))}c.push(f)}));return{vectors:c,controlsObjects:l}}},1741:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var n=u(r(910));var i=s(r(847));var a=u(r(833));var o=r(802);function s(e){return e&&e.__esModule?e:{default:e}}function u(e){if(e&&e.__esModule){return e}else{var t={};if(e!=null){for(var r in e){if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};if(n.get||n.set){Object.defineProperty(t,r,n)}else{t[r]=e[r]}}}}t.default=e;return t}}function c(e,t){return p(e)||f(e,t)||l()}function l(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function f(e,t){var r=[];var n=true;var i=false;var a=undefined;try{for(var o=e[Symbol.iterator](),s;!(n=(s=o.next()).done);n=true){r.push(s.value);if(t&&r.length===t)break}}catch(e){i=true;a=e}finally{try{if(!n&&o["return"]!=null)o["return"]()}finally{if(i)throw a}}return r}function p(e){if(Array.isArray(e))return e}function h(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function d(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}function v(e,t,r){if(t)d(e.prototype,t);if(r)d(e,r);return e}function y(e,t){if(t&&(w(t)==="object"||typeof t==="function")){return t}return m(e)}function m(e){if(e===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}function b(e){b=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)};return b(e)}function g(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function")}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:true,configurable:true}});if(t)x(e,t)}function x(e,t){x=Object.setPrototypeOf||function e(t,r){t.__proto__=r;return t};return x(e,t)}function w(e){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){w=function e(t){return typeof t}}else{w=function e(t){return t&&typeof Symbol==="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t}}return w(e)}var S=.2;function O(e){var t=n.generateSingleFunction(e.x);var r=n.generateSingleFunction(e.y);return function(e){return{x:t(e),y:r(e)}}}function _(e){return w(e)==="object"}var E=function(e){g(t,e);function t(){h(this,t);return y(this,b(t).apply(this,arguments))}v(t,[{key:"processArgs",value:function e(t){this.arrowHeadScale=(t.arrowHeadScale||1)*S;this.variables=t.variables||{};this.color=t.color;this.expression={expressionKey:"__vector__"};this.createContainersForExpressions(t);if(this.expressionToggleButton){a.bindExpressionToggleEvents({wrapper:this.expressionWrapper,toggleButton:this.expressionToggleButton})}if(!t.tail){this.tail=function(){return{x:0,y:0}}}else if(_(t.tail)){this.tail=O(t.tail)}else{this.tail=(0,o.createFunctionFromString)(t.tail)}if(_(t.tip)){this.tip=O(t.tip)}else{this.tip=(0,o.createFunctionFromString)(t.tip)}}},{key:"createContainersForExpressions",value:function e(t){if(!t.hidden&&!t.hideStaticExpression&&t.staticExpression){this.staticExpression=t.staticExpression;this.staticContainer=a.createContainer()}if(!t.hidden&&!t.hideDynamicExpression&&t.dynamicExpression){this.dynamicExpression=(0,o.createFunctionFromString)(t.dynamicExpression,"vector:dynamicExpression");this.dynamicContainer=a.createContainer()}var r=a.createExpressionWrapper({static:this.staticContainer,dynamic:this.dynamicContainer}),n=r.wrapper,i=r.toggleButton;this.expressionWrapper=n;if(i){this.expressionToggleButton=i}}},{key:"draw",value:function e(){this.reDraw()}},{key:"getScope",value:function e(){var t=this;var r={};var n=this.variables;Object.entries(n).forEach((function(e){var n=c(e,2),i=n[0],a=n[1];var o=t.scopeManager.get(i);r[i]=o!==undefined?o:a.value}));return r}},{key:"reDraw",value:function e(){var t=this.getData();var r=this.group.selectAll("line").data(t);r.exit().remove();r.enter().append("line").attr("stroke-width",2).attr("stroke",this.color).merge(r).attr("x1",(function(e){return e.x1})).attr("x2",(function(e){return e.x2})).attr("y1",(function(e){return e.y1})).attr("y2",(function(e){return e.y2}))}},{key:"getData",value:function e(){var t=this.getScope();var r=this.tail(t);var n=this.tip(t);var i=this.getLineDataToDrawArrow(r,n);return Object.values(i)}},{key:"getLineDataToDrawArrow",value:function e(t,r){var n={x:t.x-r.x,y:t.y-r.y};var i=Math.sqrt(n.x*n.x+n.y*n.y);if(i===0){n.x=0;n.y=0;i=1}var a={x:Math.sqrt(3)/2*n.x-1/2*n.y,y:1/2*n.x+Math.sqrt(3)/2*n.y};var o={x:Math.sqrt(3)/2*n.x+1/2*n.y,y:-1/2*n.x+Math.sqrt(3)/2*n.y};var s={x:a.x/i*this.arrowHeadScale+r.x,y:a.y/i*this.arrowHeadScale+r.y};var u={x:o.x/i*this.arrowHeadScale+r.x,y:o.y/i*this.arrowHeadScale+r.y};var c=this.scales.convertPositionsToPixels(t);var l=this.scales.convertPositionsToPixels(r);u=this.scales.convertPositionsToPixels(u);s=this.scales.convertPositionsToPixels(s);return{line:{x1:c.x,x2:l.x,y1:c.y,y2:l.y},arrowHeadClockwise:{x1:l.x,x2:s.x,y1:l.y,y2:s.y},arrowHeadCounterCLockwise:{x1:l.x,x2:u.x,y1:l.y,y2:u.y}}}}]);return t}(i.default);t.default=E},1742:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.default=f;var n=o(r(1743));var i=o(r(891));var a=r(828);function o(e){return e&&e.__esModule?e:{default:e}}function s(e){return l(e)||c(e)||u()}function u(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function c(e){if(Symbol.iterator in Object(e)||Object.prototype.toString.call(e)==="[object Arguments]")return Array.from(e)}function l(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++){r[t]=e[t]}return r}}function f(e,t){var r=t.svg,o=t.scales;var u=[];var c=Object.assign({},e.contourPlot,{width:e.width,height:e.height,svg:r,scales:o,variables:(0,a.convertMapToObject)(e.sharedVariables)});var l=new n.default(e.visualizationKey,c);l.draw();if(e.contourPlot.variables){var f=(0,i.default)(e,t,[l],e.contourPlot),p=f.sliders;u.push.apply(u,s(p))}return{contourPlot:l,controlsObjects:u}}},1743:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var n=u(r(910));var i=s(r(847));var a=u(r(833));var o=r(802);function s(e){return e&&e.__esModule?e:{default:e}}function u(e){if(e&&e.__esModule){return e}else{var t={};if(e!=null){for(var r in e){if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};if(n.get||n.set){Object.defineProperty(t,r,n)}else{t[r]=e[r]}}}}t.default=e;return t}}function c(e){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){c=function e(t){return typeof t}}else{c=function e(t){return t&&typeof Symbol==="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t}}return c(e)}function l(e,t){return h(e)||p(e,t)||f()}function f(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function p(e,t){var r=[];var n=true;var i=false;var a=undefined;try{for(var o=e[Symbol.iterator](),s;!(n=(s=o.next()).done);n=true){r.push(s.value);if(t&&r.length===t)break}}catch(e){i=true;a=e}finally{try{if(!n&&o["return"]!=null)o["return"]()}finally{if(i)throw a}}return r}function h(e){if(Array.isArray(e))return e}function d(e,t){if(t&&(c(t)==="object"||typeof t==="function")){return t}return v(e)}function v(e){if(e===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}function y(e){y=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)};return y(e)}function m(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function")}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:true,configurable:true}});if(t)b(e,t)}function b(e,t){b=Object.setPrototypeOf||function e(t,r){t.__proto__=r;return t};return b(e,t)}function g(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function x(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}function w(e,t,r){if(t)x(e.prototype,t);if(r)x(e,r);return e}var S=30;var O=150;function _(e,t,r){return{x:(r-e.sample)/(t.sample-e.sample)*(t.x-e.x)+e.x,y:(r-e.sample)/(t.sample-e.sample)*(t.y-e.y)+e.y}}function E(e,t,r,n,i){var a=_(e,t,i);var o=_(r,n,i);return{first:{x:a.x,y:a.y},second:{x:o.x,y:o.y}}}function j(e){return!Array.isArray(e)}function P(e){return typeof e==="string"}function k(e){var t=[];for(var r=e.min;r<=e.max;r+=e.step){t.push(r)}return t}var A=function(){function e(t){g(this,e);this.points=t}w(e,[{key:"getMarchingSquaresConfiguration",value:function e(t,r,n){var i=0;Object.values(this.points).forEach((function(e){i*=2;if(e.sample<t){i+=1}}));if(i===5||i===10){var a=(this.points.lowerLeft.x+this.points.upperRight.x)/2;var o=(this.points.lowerLeft.y+this.points.upperRight.y)/2;var s=n(a,o,r);if(s<t){i=15-i}}else if(i>=8){i=15-i}return i}},{key:"getLinesToDraw",value:function e(t,r){switch(r){case 0:return[];case 1:return[E(this.points.lowerRight,this.points.upperRight,this.points.lowerRight,this.points.lowerLeft,t)];case 2:return[E(this.points.upperRight,this.points.lowerRight,this.points.upperRight,this.points.upperLeft,t)];case 4:return[E(this.points.upperLeft,this.points.upperRight,this.points.upperLeft,this.points.lowerLeft,t)];case 7:return[E(this.points.lowerLeft,this.points.upperLeft,this.points.lowerLeft,this.points.lowerRight,t)];case 3:return[E(this.points.upperLeft,this.points.upperRight,this.points.lowerLeft,this.points.lowerRight,t)];case 6:return[E(this.points.upperLeft,this.points.lowerLeft,this.points.upperRight,this.points.lowerRight,t)];case 5:return[E(this.points.lowerRight,this.points.upperRight,this.points.lowerRight,this.points.lowerLeft,t),E(this.points.upperLeft,this.points.upperRight,this.points.upperLeft,this.points.lowerLeft,t)];case 10:return[E(this.points.upperRight,this.points.lowerRight,this.points.upperRight,this.points.upperLeft,t),E(this.points.lowerLeft,this.points.upperLeft,this.points.lowerLeft,this.points.lowerRight,t)];default:throw new Error("Unexpected marching square configuration")}}}]);return e}();var T=function(){function e(t){g(this,e);this.x=t.x;this.y=t.y}w(e,[{key:"setSample",value:function e(t,r){this.sample=r(this.x,this.y,t)}}]);return e}();var C=function(e){m(t,e);function t(){g(this,t);return d(this,y(t).apply(this,arguments))}w(t,[{key:"processArgs",value:function e(t){this.variables=t.variables;if(j(t.contourValues)){this.contourValues=k(t.contourValues)}else{this.contourValues=t.contourValues}this.color=t.color;this.expression={expressionKey:"__contourplot__"};this.createContainersForExpressions(t);if(this.expressionToggleButton){a.bindExpressionToggleEvents({wrapper:this.expressionWrapper,toggleButton:this.expressionToggleButton})}if(P(t.template)){var r=n.generateSingleFunction(t.template);this.eval=function(e,t,n){n.x=e;n.y=t;return r(n)}}else{this.eval=new Function("x","y","scope",t.template.function)}this.setUpSquaresAndPointsForMarchingSquares(this.scales.x.domain()[0],this.scales.x.domain()[1],this.scales.y.domain()[0],this.scales.y.domain()[1])}},{key:"createContainersForExpressions",value:function e(t){if(!t.hidden&&!t.hideStaticExpression){if(t.staticExpression){this.staticExpression=t.staticExpression;this.staticContainer=a.createContainer()}else if(P(t.template)){this.staticExpression=this.generateStaticExpressionFromStringTemplate(t.template,t.colorLessExpression);this.staticContainer=a.createContainer()}}if(!t.hidden&&!t.hideDynamicExpression){if(t.dynamicExpression){this.dynamicExpression=(0,o.createFunctionFromString)(t.dynamicExpression,"contourPlot constructor");this.dynamicContainer=a.createContainer()}else if(P(t.template)){this.dynamicExpression=this.generateDynamicExpressionFromStringTemplate(t.template,t.colorLessExpression);this.dynamicContainer=a.createContainer()}}var r=a.createExpressionWrapper({static:this.staticContainer,dynamic:this.dynamicContainer}),n=r.wrapper,i=r.toggleButton;this.expressionWrapper=n;if(i){this.expressionToggleButton=i}}},{key:"doesNotDependOnExternalVariables",value:function e(){try{var t=.001;var r=.001;this.eval(t,r);return true}catch(e){return false}}},{key:"setUpSquaresAndPointsForMarchingSquares",value:function e(t,r,n,i){var a=S;if(this.doesNotDependOnExternalVariables()){a=O}var o=[];var s=[];var u=[];var c={x:(r-t)/a,y:(i-n)/a};for(var l=t;l<=r;l+=c.x){var f=[];for(var p=n;p<=i;p+=c.y){var h=new T({x:l,y:p});f.push(h);s.push(h)}o.push(f)}for(var d=0;d<o.length-1;d++){for(var v=0;v<o[d].length-1;v++){var y={lowerLeft:o[d][v],upperLeft:o[d][v+1],upperRight:o[d+1][v+1],lowerRight:o[d+1][v]};var m=new A(y);u.push(m)}}this.points=s;this.squares=u}},{key:"draw",value:function e(){this.reDraw()}},{key:"reDraw",value:function e(){var t=this;var r=this.getData();r.forEach((function(e){e.first=t.scales.convertPositionsToPixels(e.first);e.second=t.scales.convertPositionsToPixels(e.second)}));var n=this.group.selectAll("line").data(r);n.exit().remove();n.enter().append("line").attr("clip-path","url(#".concat(this.maskId,")")).attr("stroke-width",1).attr("stroke",this.color).merge(n).attr("x1",(function(e){return e.first.x})).attr("x2",(function(e){return e.second.x})).attr("y1",(function(e){return e.first.y})).attr("y2",(function(e){return e.second.y}))}},{key:"getData",value:function e(){var t=this;var r=this.getScope();var n=[];this.points.forEach((function(e){e.setSample(r,t.eval)}));this.contourValues.forEach((function(e){n=n.concat(t.getDataForContourValue(e,r))}));return n}},{key:"getDataForContourValue",value:function e(t,r){var n=this;var i=[];this.squares.forEach((function(e){var a=e.getMarchingSquaresConfiguration(t,r,n.eval);var o=e.getLinesToDraw(t,a);if(o){i=i.concat(o)}}));return i}},{key:"getScope",value:function e(){var t=this;var r={};if(this.variables){Object.entries(this.variables).forEach((function(e){var n=l(e,2),i=n[0],a=n[1];var o=t.scopeManager.get(i);r[i]=o!==undefined?o:a.value}))}return r}},{key:"generateStaticExpressionFromStringTemplate",value:function e(t,r){var i=n.generateSingleStaticExpression(t,this.variables,r);return this.toExpressionNotation(i,r)}},{key:"generateDynamicExpressionFromStringTemplate",value:function e(t,r){var i=this;var a=n.generateSingleDynamicExpression(t,this.variables);return function(e){return i.toExpressionNotation(a(e),r)}}},{key:"toExpressionNotation",value:function e(t,r){var n;if(r){n="f(x, y)"}else{n="{\\color{".concat(this.color,"}f}(x, y)")}return"".concat(n," = ").concat(t)}}]);return t}(i.default);t.default=C},1744:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.default=a;var n=i(r(1745));function i(e){return e&&e.__esModule?e:{default:e}}function a(e,t,r,i){var a=t.svg,o=t.scales;var s=[];var u=[];i.forEach((function(e){if(e){if(e.slider){s.push(e)}else if(e.isExpression){u.push(e)}}}));var c=new n.default({visualizationKey:e.visualizationKey,svg:a,scales:o,sliders:s,entities:r,functions:u,params:e.animations,bounds:e.bounds});return{animationGroup:c}}},1745:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var n=c(r(1746));var i=c(r(1747));var a=c(r(1748));var o=c(r(1749));var s=u(r(1750));function u(e){if(e&&e.__esModule){return e}else{var t={};if(e!=null){for(var r in e){if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};if(n.get||n.set){Object.defineProperty(t,r,n)}else{t[r]=e[r]}}}}t.default=e;return t}}function c(e){return e&&e.__esModule?e:{default:e}}function l(e,t){return h(e)||p(e,t)||f()}function f(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function p(e,t){var r=[];var n=true;var i=false;var a=undefined;try{for(var o=e[Symbol.iterator](),s;!(n=(s=o.next()).done);n=true){r.push(s.value);if(t&&r.length===t)break}}catch(e){i=true;a=e}finally{try{if(!n&&o["return"]!=null)o["return"]()}finally{if(i)throw a}}return r}function h(e){if(Array.isArray(e))return e}function d(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function v(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}function y(e,t,r){if(t)v(e.prototype,t);if(r)v(e,r);return e}var m=0;var b=[-10,10];var g=10;var x=s.ANIMATION_FPS*2;var w=function(){function e(t){var r=this;d(this,e);this.params=t.params;this.isAnimating=false;this.loop=this.params.loop!==false;var u=[];this.t=this.params.t||m;this.tRange=this.params.tRange||b;var c=this.tRange[1]-this.tRange[0];var l=(this.params.duration||g)*1e3;this.animationTiming=1e3/x;this.step=c/l*this.animationTiming;var f=this.params.animations.slice().sort((function(e,t){return t.type-e.type}));var p={visualizationKey:t.visualizationKey,svg:t.svg,scales:t.scales,stepSize:this.step,x:this.t,bounds:t.bounds,sliders:t.sliders,entities:t.entities,domain:t.domain};f.forEach((function(e){var c=Object.assign({},e,{type:s[e.type]});t.functions.forEach((function(e){var t;var l=c.target&&(!e.params.name||e.params.name!==c.target);if(l){return}p.params=c;p.expression=e;switch(c.type){case s.ANIMATION_TYPE_POINT:t=new n.default(p);break;case s.ANIMATION_TYPE_LINE:t=new i.default(p);break;case s.ANIMATION_TYPE_DOMAIN:t=new a.default(p);break;case s.ANIMATION_TYPE_TRANSFORM:t=new o.default(p);break;default:throw new Error("Missing or unknown animation type: ".concat(c.type))}t.draw();t.tick(r.t);u.push(t)}))}));this.animationObjects=u;t.sliders.forEach((function(e){e.slider.noUiSlider.on("update",(function(){r.animationObjects.forEach((function(e){e.tick(r.t);e.reDraw()}))}))}))}y(e,[{key:"start",value:function e(){var t=this;this.animationInterval=setInterval((function(){t.t+=t.step;if(t.t>=t.tRange[1]){if(t.loop){var e=l(t.tRange,1);t.t=e[0]}else{t.step*=-1}}else if(t.t<=t.tRange[0]&&!t.loop){t.step*=-1}t.animationObjects.forEach((function(e){return e.tick(t.t)}))}),this.animationTiming)}},{key:"stop",value:function e(){clearInterval(this.animationInterval)}},{key:"getToggleButton",value:function e(){var t=this;var r=document.createElement("button");r.setAttribute("class","viz-anim-toggle viz-anim-toggle-main");r.addEventListener("click",(function(e){e.preventDefault();t.isAnimating=!t.isAnimating;var n="active";if(t.isAnimating){t.start();r.classList.add(n)}else{t.stop();r.classList.remove(n)}}));return r}}]);return e}();t.default=w},1746:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var n=a(r(946));var i=r(802);function a(e){return e&&e.__esModule?e:{default:e}}function o(e){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){o=function e(t){return typeof t}}else{o=function e(t){return t&&typeof Symbol==="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t}}return o(e)}function s(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function u(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}function c(e,t,r){if(t)u(e.prototype,t);if(r)u(e,r);return e}function l(e,t){if(t&&(o(t)==="object"||typeof t==="function")){return t}return f(e)}function f(e){if(e===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}function p(e){p=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)};return p(e)}function h(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function")}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:true,configurable:true}});if(t)d(e,t)}function d(e,t){d=Object.setPrototypeOf||function e(t,r){t.__proto__=r;return t};return d(e,t)}var v=function e(t,r){return{x:r}};var y=function(e){h(t,e);function t(){s(this,t);return l(this,p(t).apply(this,arguments))}c(t,[{key:"getTickHandler",value:function e(t){return t.params.tickHandler||v}},{key:"draw",value:function e(){var t=this;var r=this.params.image;if(r){(0,i.getImageSize)(r,this.svg).then((function(e){var r=e.imageSize,n=e.imageUrl;t.imageSize=r;t.image=t.svg.append("image").attr("xlink:href",n).attr("width",r.width).attr("height",r.height);t.updateCoordinates()}))}else{this.circle=this.svg.append("circle").attr("r",6).attr("class","viz-point");if(this.params.color){this.circle.style("fill",this.params.color)}}}},{key:"reDraw",value:function e(){this.updateCoordinates()}},{key:"updateCoordinates",value:function e(){var t=this.tickData.x;var r=this.valueOrNull(this.tickData.y);if(r===null){r=this.yValueForX(t.toFixed(2))}if(this.circle){this.circle.attr("cx",this.scales.x(t)).attr("cy",this.scales.y(r))}else if(this.image){var n=0;var i=0;if(this.imageSize){n=this.imageSize.width/2;i=this.imageSize.height/2}this.image.attr("x",this.scales.x(t)-n).attr("y",this.scales.y(r)-i)}}}]);return t}(n.default);t.default=y},1747:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var n=i(r(946));function i(e){return e&&e.__esModule?e:{default:e}}function a(e){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){a=function e(t){return typeof t}}else{a=function e(t){return t&&typeof Symbol==="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t}}return a(e)}function o(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}function u(e,t,r){if(t)s(e.prototype,t);if(r)s(e,r);return e}function c(e,t){if(t&&(a(t)==="object"||typeof t==="function")){return t}return l(e)}function l(e){if(e===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}function f(e){f=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)};return f(e)}function p(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function")}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:true,configurable:true}});if(t)h(e,t)}function h(e,t){h=Object.setPrototypeOf||function e(t,r){t.__proto__=r;return t};return h(e,t)}var d=function e(t,r){if(t.horizontal){return{}}return{x1:r,x2:r}};var v=function(e){p(t,e);function t(e){var r;o(this,t);r=c(this,f(t).call(this,e));r.horizontal=e.params.horizontal===true;return r}u(t,[{key:"getTickHandler",value:function e(t){return t.params.tickHandler||d}},{key:"draw",value:function e(){this.line=this.svg.append("line").attr("class","viz-line");if(this.params.color){this.line.style("stroke",this.params.color)}}},{key:"reDraw",value:function e(){this.updateCoordinates()}},{key:"updateCoordinates",value:function e(){var t=this.valueOrNull(this.tickData.x1);var r=this.valueOrNull(this.tickData.y1);var n=this.valueOrNull(this.tickData.x2);var i=this.valueOrNull(this.tickData.y2);if(this.horizontal){var a=this.yValueForX(this.tickData.t);if(t===null){t=this.bounds.xLeft-10}if(n===null){n=this.bounds.xRight+10}if(r===null){r=a}if(i===null){i=a}}else{if(r===null){r=this.bounds.yTop+10}if(i===null){i=this.bounds.yBottom-10}}this.line.attr("x1",this.scales.x(t)).attr("y1",this.scales.y(r)).attr("x2",this.scales.x(n)).attr("y2",this.scales.y(i))}}]);return t}(n.default);t.default=v},1748:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var n=i(r(946));function i(e){return e&&e.__esModule?e:{default:e}}function a(e){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){a=function e(t){return typeof t}}else{a=function e(t){return t&&typeof Symbol==="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t}}return a(e)}function o(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}function u(e,t,r){if(t)s(e.prototype,t);if(r)s(e,r);return e}function c(e,t){if(t&&(a(t)==="object"||typeof t==="function")){return t}return l(e)}function l(e){if(e===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}function f(e){f=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)};return f(e)}function p(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function")}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:true,configurable:true}});if(t)h(e,t)}function h(e,t){h=Object.setPrototypeOf||function e(t,r){t.__proto__=r;return t};return h(e,t)}var d=function e(){return{}};var v=function(e){p(t,e);function t(){o(this,t);return c(this,f(t).apply(this,arguments))}u(t,[{key:"getTickHandler",value:function e(t){return t.params.tickHandler||d}},{key:"draw",value:function e(){}},{key:"reDraw",value:function e(){this.updateCoordinates()}},{key:"updateCoordinates",value:function e(){if(!this.expression.domain){return}this.expression.animatedDomain=this.expression.domain(this.getScope(),this.tickData.t);this.getEntities().forEach((function(e){return e.reDraw()}))}}]);return t}(n.default);t.default=v},1749:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var n=i(r(946));function i(e){return e&&e.__esModule?e:{default:e}}function a(e){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){a=function e(t){return typeof t}}else{a=function e(t){return t&&typeof Symbol==="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t}}return a(e)}function o(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}function u(e,t,r){if(t)s(e.prototype,t);if(r)s(e,r);return e}function c(e,t){if(t&&(a(t)==="object"||typeof t==="function")){return t}return l(e)}function l(e){if(e===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}function f(e){f=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)};return f(e)}function p(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function")}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:true,configurable:true}});if(t)h(e,t)}function h(e,t){h=Object.setPrototypeOf||function e(t,r){t.__proto__=r;return t};return h(e,t)}var d=function e(){return{}};var v=function(e){p(t,e);function t(){o(this,t);return c(this,f(t).apply(this,arguments))}u(t,[{key:"getTickHandler",value:function e(t){return t.params.tickHandler||d}},{key:"draw",value:function e(){}},{key:"reDraw",value:function e(){this.updateCoordinates()}},{key:"updateCoordinates",value:function e(){if(!this.expression.transform){return}this.expression.animatedTransform=this.expression.transform(this.getScope(),this.tickData.t);this.getEntities().forEach((function(e){return e.reDraw()}))}}]);return t}(n.default);t.default=v},1750:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.ANIMATION_FPS=t.ANIMATION_TYPE_TRANSFORM=t.ANIMATION_TYPE_DOMAIN=t.ANIMATION_TYPE_LINE=t.ANIMATION_TYPE_POINT=void 0;var n=0;t.ANIMATION_TYPE_POINT=n;var i=1;t.ANIMATION_TYPE_LINE=i;var a=2;t.ANIMATION_TYPE_DOMAIN=a;var o=3;t.ANIMATION_TYPE_TRANSFORM=o;var s=25;t.ANIMATION_FPS=s},1751:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.default=i;var n=r(828);function i(e){var t=document.createElement("ul");t.classList.add("viz-graph-legend");t.innerHTML=e.legend.map((function(e){var t=(0,n.getCSSColor)(e.color);return'<li><span style="background-color:'.concat(t,'"></span> ').concat(e.text,"</li>")})).join("");return{legendElement:t}}},1752:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.default=o;var n=a(r(1753));var i=r(852);function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){var r=t.filter((function(e){return e&&e.slider!==undefined}));if(r.length>=i.SLIDER_TOGGLE_CUTOFF){(0,n.default)(r,e.controlsContainer)}e.root.children[0].appendChild(e.controlsContainer);e.root.classList.add("inited")}},1753:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.default=w;var n=s(r(779));var i=s(r(816));var a=s(r(1762));var o=s(r(1763));function s(e){return e&&e.__esModule?e:{default:e}}function u(e){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){u=function e(t){return typeof t}}else{u=function e(t){return t&&typeof Symbol==="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t}}return u(e)}function c(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function l(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}function f(e,t,r){if(t)l(e.prototype,t);if(r)l(e,r);return e}function p(e,t){if(t&&(u(t)==="object"||typeof t==="function")){return t}return d(e)}function h(e){h=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)};return h(e)}function d(e){if(e===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}function v(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function")}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:true,configurable:true}});if(t)y(e,t)}function y(e,t){y=Object.setPrototypeOf||function e(t,r){t.__proto__=r;return t};return y(e,t)}var m=i.default.div.withConfig({displayName:"SliderGroup__EvenSpacedRow",componentId:"o1mafn-0"})(["grid-column:1/-1;justify-content:center;flex-wrap:wrap;display:flex;"]);var b=i.default.span.withConfig({displayName:"SliderGroup__ToggleBreak",componentId:"o1mafn-1"})(["flex-basis:100%;"]);var g=function(e){v(t,e);function t(e){var r;c(this,t);r=p(this,h(t).call(this,e));Object.defineProperty(d(r),"selectSlider",{configurable:true,enumerable:true,writable:true,value:function e(t){r.setState({selectedSlider:t})}});r.state={selectedSlider:0,breakIndexes:[]};r.toggleElements=[];r.numRenderedElements=0;return r}f(t,[{key:"render",value:function e(t,r){var i=this;return n.default.createElement("div",null,n.default.createElement(x,null,t.sliders.map((function(e,t){return n.default.createElement("div",{style:{flexGrow:"1",display:"flex",justifyContent:"center"}},n.default.createElement(o.default,{onClick:i.selectSlider,id:t,slider:e,selected:t===r.selectedSlider}))}))),n.default.createElement(a.default,{children:[t.sliders[r.selectedSlider].wrapper]}))}}]);return t}(n.default.Component);var x=i.default.div.withConfig({displayName:"SliderGroup__ToggleGrid",componentId:"o1mafn-2"})(["display:flex;flex-wrap:wrap;"]);function w(e,t){var r=document.createElement("div");r.style.display="block";t.appendChild(r);e.forEach((function(e){return e.wrapper.remove()}));e.forEach((function(e){e.wrapper.style.display="grid"}));n.default.render(n.default.createElement(g,{sliders:e}),r)}},1762:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var n=i(r(779));function i(e){return e&&e.__esModule?e:{default:e}}function a(e){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){a=function e(t){return typeof t}}else{a=function e(t){return t&&typeof Symbol==="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t}}return a(e)}function o(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}function u(e,t,r){if(t)s(e.prototype,t);if(r)s(e,r);return e}function c(e,t){if(t&&(a(t)==="object"||typeof t==="function")){return t}return l(e)}function l(e){if(e===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}function f(e){f=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)};return f(e)}function p(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function")}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:true,configurable:true}});if(t)h(e,t)}function h(e,t){h=Object.setPrototypeOf||function e(t,r){t.__proto__=r;return t};return h(e,t)}var d=function(e){p(t,e);function t(){o(this,t);return c(this,f(t).apply(this,arguments))}u(t,[{key:"update",value:function e(){var t=document.createDocumentFragment();this.props.children.forEach((function(e){return t.appendChild(e)}));this.el.innerHTML="";this.el.appendChild(t)}},{key:"componentDidMount",value:function e(){this.update()}},{key:"componentDidUpdate",value:function e(){this.update()}},{key:"render",value:function e(){var t=this;return n.default.createElement("div",{ref:function e(r){t.el=r}})}}]);return t}(n.default.Component);t.default=d},1763:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var n=u(r(779));var i=s(r(816));var a=u(r(1764));var o=s(r(999));function s(e){if(e&&e.__esModule){return e}else{var t={};if(e!=null){for(var r in e){if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};if(n.get||n.set){Object.defineProperty(t,r,n)}else{t[r]=e[r]}}}}t.default=e;return t}}function u(e){return e&&e.__esModule?e:{default:e}}function c(e){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){c=function e(t){return typeof t}}else{c=function e(t){return t&&typeof Symbol==="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t}}return c(e)}function l(e,t){return h(e)||p(e,t)||f()}function f(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function p(e,t){var r=[];var n=true;var i=false;var a=undefined;try{for(var o=e[Symbol.iterator](),s;!(n=(s=o.next()).done);n=true){r.push(s.value);if(t&&r.length===t)break}}catch(e){i=true;a=e}finally{try{if(!n&&o["return"]!=null)o["return"]()}finally{if(i)throw a}}return r}function h(e){if(Array.isArray(e))return e}function d(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function v(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}function y(e,t,r){if(t)v(e.prototype,t);if(r)v(e,r);return e}function m(e,t){if(t&&(c(t)==="object"||typeof t==="function")){return t}return g(e)}function b(e){b=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)};return b(e)}function g(e){if(e===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}function x(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function")}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:true,configurable:true}});if(t)w(e,t)}function w(e,t){w=Object.setPrototypeOf||function e(t,r){t.__proto__=r;return t};return w(e,t)}var S=function(e){x(t,e);function t(e){var r;d(this,t);r=m(this,b(t).call(this,e));Object.defineProperty(g(r),"handleClick",{configurable:true,enumerable:true,writable:true,value:function e(){r.props.onClick(r.props.id)}});r.state={currentSliderValue:e.slider.slider.noUiSlider.get()};e.slider.slider.noUiSlider.on("update",(function(e){var t=l(e,1),n=t[0];return r.setState({currentSliderValue:n})}));return r}y(t,[{key:"shouldComponentUpdate",value:function e(t,r){return this.state.currentSliderValue!==r.currentSliderValue||this.props.selected!==t.selected}},{key:"render",value:function e(t,r){var i=r.currentSliderValue;var o=Math.abs(i).toFixed(t.slider.params.precision);var s=i<0?"-":"";var u="".concat(t.slider.params.latex,"=").concat(s).concat(o);return n.default.createElement(O,{onClick:this.handleClick,selected:t.selected,color:t.slider.params.color},n.default.createElement("div",{style:{pointerEvents:"none"}},n.default.createElement(a.default,{latex:u,onMathjaxRendered:t.onMathjaxRendered})))}}]);return t}(n.default.Component);t.default=S;var O=i.default.div.withConfig({displayName:"SliderToggle__ToggleContainer",componentId:"r6xnrg-0"})(["min-width:fit-content;height:32px;display:flex;flex-basis:0;align-items:baseline;padding:0 10px;margin:0 "," "," 0;border:2px solid ",";border-radius:",";cursor:pointer;user-select:none;font-size:",";white-space:nowrap;"," ","::after{content:'';display:inline-block;height:calc(100% - 10px);}:hover{opacity:0.5;}"],o.paddingSmall,o.paddingSmall,o.lightMediumGray,o.borderRadiusMedium,o.fontSizeSmall,(function(e){return(0,i.css)(["color:",";background:",";"],e.color,e.selected?o.lightMediumGray:o.white)}),(function(e){return e.selected&&(0,i.css)([".viz-rendering .math-content::before{background:",";}"],o.lightMediumGray)}))},1764:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var n=o(r(779));var i=a(r(833));function a(e){if(e&&e.__esModule){return e}else{var t={};if(e!=null){for(var r in e){if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};if(n.get||n.set){Object.defineProperty(t,r,n)}else{t[r]=e[r]}}}}t.default=e;return t}}function o(e){return e&&e.__esModule?e:{default:e}}function s(e){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){s=function e(t){return typeof t}}else{s=function e(t){return t&&typeof Symbol==="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t}}return s(e)}function u(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function c(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}function l(e,t,r){if(t)c(e.prototype,t);if(r)c(e,r);return e}function f(e,t){if(t&&(s(t)==="object"||typeof t==="function")){return t}return p(e)}function p(e){if(e===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}function h(e){h=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)};return h(e)}function d(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function")}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:true,configurable:true}});if(t)v(e,t)}function v(e,t){v=Object.setPrototypeOf||function e(t,r){t.__proto__=r;return t};return v(e,t)}var y=function(e){d(t,e);function t(){u(this,t);return f(this,h(t).apply(this,arguments))}l(t,[{key:"componentDidMount",value:function e(){var t=this;i.draw(this.container,this.props.latex).then((function(){if(t.props.onMathjaxRendered){t.props.onMathjaxRendered()}}))}},{key:"componentWillReceiveProps",value:function e(t){i.reDraw(this.container,t.latex)}},{key:"render",value:function e(){var t=this;return n.default.createElement("div",{className:i.RENDERING_CLASS,ref:function e(r){t.container=r}})}}]);return t}(n.default.Component);t.default=y},282:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var n=i(r(1406));function i(e){return e&&e.__esModule?e:{default:e}}var a={createInteractive:function e(t){var r=Object.assign({},{visualizationKey:t.visualizationKey,interactiveSlug:t.slug},t.authoredData);return(0,n.default)(r)},createInteractiveSolvable:function e(){throw new Error("Interactive solvables not supported for 2D graphs")}};t.default=a},789:function(e,t,r){"use strict";r.r(t);r.d(t,"COLORS",(function(){return a}));r.d(t,"setSliderColor",(function(){return o}));r.d(t,"getAssetUrl",(function(){return c}));r.d(t,"getImageUrl",(function(){return l}));var n=r(900);var i=r.n(n);const a={red:"#e01f1f",orange:"#f59b0a",yellow:"#f5e10a",green:"#41d606",blue:"#0630d6",indigo:"#6e06d6",violet:"#cf06d6"};function o(e,t){const r=t[0]==="#"?t:a[t]||t;const n=e.querySelectorAll(".noUi-handle");n.forEach(e=>{e.style.backgroundColor=r});e.style.backgroundColor=r}const s=true?"https://ds055uzetaobb.cloudfront.net":undefined;function u(e){return e.startsWith("http")}function c(e){let t=e;if(!u(e)){t=s+t}if(false){}return t}function l(e){if(!u(e)){return c(`/site_media/version-1/images/visualizations/${e}`)}return c(e)}},799:function(e,t,r){"use strict";var n=i(r(927));function i(e){return e&&e.__esModule?e:{default:e}}var a=n.default.create();a.config({predictable:true});a.import(r(929));a.import(r(936));a.import(r(937));a.import(r(938));a.import(r(940));a.import(r(941));a.import(r(942));a.import(r(943));a.import(r(944));a.import(r(945));e.exports=a},802:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getImageSize=getImageSize;exports.applyLatexReplacements=applyLatexReplacements;exports.getPrecision=getPrecision;exports.createFunctionFromString=createFunctionFromString;exports.processExecutableParams=processExecutableParams;var _utils=__webpack_require__(789);var GREEK_LETTERS_RE=new RegExp(["^(alpha|beta|gamma|Gamma|delta|Delta|epsilon|varepsilon|","zeta|eta|theta|Theta|vartheta|iota|kappa|lambda|Lambda|mu|nu|xi|Xi|omicron|pi|Pi|varpi|","rho|varrho|sigma|Sigma|varsigma|tau|upsilon|Upsilon|phi|varphi|chi|psi|Psi|omega|Omega)$"].join(""));function getImageSize(e,t){return new Promise((function(r){var n=(0,_utils.getImageUrl)(e);var i=new Image;i.src=n;i.style.visibility="hidden";i.addEventListener("load",(function(){r({imageSize:{width:i.width/2,height:i.height/2},imageUrl:n});i.remove()}));t.node().parentNode.appendChild(i)}))}function applyLatexReplacements(e){return e.replace(GREEK_LETTERS_RE,"\\$1")}function getPrecision(e){var t=e.toString();var r=t.indexOf(".");return r>-1?t.length-r-1:0}function createFunctionFromString(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"unknown context";try{return new Function("scope","t",e)}catch(e){throw new Error("Error (".concat(t,"): ").concat(e.message))}}function processExecutableParams(paramsObj,executableParams){var localParams=Object.assign({},paramsObj);executableParams.forEach((function(param){if(paramsObj[param]&&paramsObj[param].exec){localParams[param]=eval(paramsObj[param].exec)}}));return localParams}},828:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.deepFreeze=d;t.deepCopy=v;t.extendFrozenObject=y;t.getCSSColor=m;t.getVariablePrecision=b;t.convertMapToObject=g;var n=r(802);var i=r(789);function a(e,t){return u(e)||s(e,t)||o()}function o(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function s(e,t){var r=[];var n=true;var i=false;var a=undefined;try{for(var o=e[Symbol.iterator](),s;!(n=(s=o.next()).done);n=true){r.push(s.value);if(t&&r.length===t)break}}catch(e){i=true;a=e}finally{try{if(!n&&o["return"]!=null)o["return"]()}finally{if(i)throw a}}return r}function u(e){if(Array.isArray(e))return e}function c(e){return p(e)||f(e)||l()}function l(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function f(e){if(Symbol.iterator in Object(e)||Object.prototype.toString.call(e)==="[object Arguments]")return Array.from(e)}function p(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++){r[t]=e[t]}return r}}function h(e){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){h=function e(t){return typeof t}}else{h=function e(t){return t&&typeof Symbol==="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t}}return h(e)}function d(e){var t=Object.getOwnPropertyNames(e);t.forEach((function(t){var r=e[t];e[t]=r&&h(r)==="object"?d(r):r}));return Object.freeze(e)}function v(e){if(e){return JSON.parse(JSON.stringify(e))}return{}}function y(e,t){return Object.freeze(Object.assign({},e,t))}function m(e){if(e in i.COLORS){return i.COLORS[e].toLowerCase()}return e.toLowerCase()}function b(e){var t=[e.min,e.max,e.step].map((function(e){return e?(0,n.getPrecision)(e):0}));return Math.max.apply(Math,c(t))}function g(e){var t={};return c(e.entries()).reduce((function(e,t){var r=a(t,2),n=r[0],i=r[1];e[n]=i;return e}),t)}},833:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.createExpressionWrapper=l;t.bindExpressionToggleEvents=f;t.createContainer=p;t.draw=h;t.reDraw=d;t.RENDERED_CLASS=t.RENDERING_CLASS=void 0;var n=r(122);var i=r(789);var a=(0,i.getImageUrl)("Graph2D/viz-toggle-icon.png");var o="viz-expression";var s="viz-expression-rendered";var u="viz-rendering";t.RENDERING_CLASS=u;var c="viz-rendered";t.RENDERED_CLASS=c;function l(e){if(!e.static&&!e.dynamic){return{}}var t=document.createElement("div");var r;t.className="".concat(o,"-wrapper");if(e.static){e.static.classList.add("static");t.appendChild(e.static)}if(e.dynamic){e.dynamic.classList.add("dynamic");t.appendChild(e.dynamic)}if(e.static&&e.dynamic){r=document.createElement("div");r.className="".concat(o,"-toggle");var n=document.createElement("span");n.className="tooltip-container";n.innerText="Toggle to view substitutions";r.appendChild(n);var i=document.createElement("span");i.className="icon";i.style.backgroundImage="url(".concat(a,")");r.appendChild(i);t.appendChild(r);t.className+=" ".concat(o,"-toggle-wrapper");var u=function t(){setTimeout((function(){e.static.style.height="auto";e.dynamic.style.height="auto";var t="".concat(Math.max(e.static.offsetHeight,e.dynamic.offsetHeight),"px");e.static.style.height=t;e.dynamic.style.height=t}),1)};e.static.addEventListener(s,u);e.dynamic.addEventListener(s,u);u()}return{wrapper:t,toggleButton:r}}function f(e){var t=e.wrapper,r=e.toggleButton;var n=false;r.addEventListener("click",(function(){var e="active";if(n){t.classList.remove(e)}else{t.classList.add(e)}n=!n}))}function p(){var e=document.createElement("div");e.className="".concat(o," ").concat(u);return e}function h(e,t){var r=function t(){e.classList.add(c);e.classList.remove(u);e.dispatchEvent(new Event(s))};return new Promise((function(i){(0,n.renderExpressionIntoElement)(t,e);r();i()}))}function d(e,t){this.draw(e,t)}},847:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var n=r(761);var i=s(r(833));var a=o(r(901));function o(e){return e&&e.__esModule?e:{default:e}}function s(e){if(e&&e.__esModule){return e}else{var t={};if(e!=null){for(var r in e){if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};if(n.get||n.set){Object.defineProperty(t,r,n)}else{t[r]=e[r]}}}}t.default=e;return t}}function u(e,t){return f(e)||l(e,t)||c()}function c(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function l(e,t){var r=[];var n=true;var i=false;var a=undefined;try{for(var o=e[Symbol.iterator](),s;!(n=(s=o.next()).done);n=true){r.push(s.value);if(t&&r.length===t)break}}catch(e){i=true;a=e}finally{try{if(!n&&o["return"]!=null)o["return"]()}finally{if(i)throw a}}return r}function f(e){if(Array.isArray(e))return e}function p(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function h(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}function d(e,t,r){if(t)h(e.prototype,t);if(r)h(e,r);return e}function v(e){return"".concat(e," not implemented for graph object")}var y=0;var m=function(){function e(t,r){var n=this;p(this,e);this.private_processAllGraphArgs(r);this.private_createMask();if(this.expressions){this.scopeManagers=[];this.expressions.forEach((function(e){n.scopeManagers.push((0,a.default)(t,e.expressionKey))}))}else{this.scopeManager=(0,a.default)(t,this.expression.expressionKey)}}d(e,[{key:"private_processAllGraphArgs",value:function e(t){this.graphId=y++;this.svg=t.svg;this.width=t.width;this.height=t.height;this.expression=t.expression;this.group=t.svg.append("g");this.scales=t.scales;this.processArgs(t)}},{key:"processArgs",value:function e(t){}},{key:"private_createMask",value:function e(){this.maskId="graph-mask-".concat(this.graphId);var t=this.scales.x.range();var r=this.scales.y.range();var i=(0,n.select)(this.svg.node().parentNode).select("defs");i.append("clipPath").attr("id",this.maskId).append("rect").attr("x",t[0]).attr("y",r[1]).attr("width",this.width).attr("height",r[0]-r[1]).style("fill","#000")}},{key:"draw",value:function e(){throw new Error(v("draw"))}},{key:"getData",value:function e(){throw new Error(v("draw"))}},{key:"reDraw",value:function e(){this.group.html("");this.draw()}},{key:"getScope",value:function e(){var t=this;var r={};if(this.scopeManager&&this.expression.params.variables){Object.entries(this.expression.params.variables).forEach((function(e){var n=u(e,2),i=n[0],a=n[1];var o=t.scopeManager.get(i);r[i]=o!==undefined?o:a.value}))}return Object.assign({},r,this.scopeManager.getSharedScope())}},{key:"drawStaticExpression",value:function e(){if(!this.staticContainer){return}i.draw(this.staticContainer,this.staticExpression)}},{key:"drawDynamicExpression",value:function e(){if(!this.dynamicContainer){return}var t=this.getScope();i.draw(this.dynamicContainer,this.dynamicExpression(t))}},{key:"reDrawDynamicExpression",value:function e(){var t=this.getScope();if(!this.dynamicContainer){return Promise.resolve()}return i.reDraw(this.dynamicContainer,this.dynamicExpression(t))}}]);return e}();t.default=m},852:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.FALLBACK_COLOR=t.DEFAULT_COLORS=t.GRAPH_TYPES=t.SLIDER_TOGGLE_CUTOFF=void 0;var n=4;t.SLIDER_TOGGLE_CUTOFF=n;var i={BASIC:"basic",BARCHART:"barchart",POLAR:"polar",GRAPH3D:"3d"};t.GRAPH_TYPES=i;var a=["#0C6AC7","#D51F06","#20A900","#EC7300","#E81990","#69047E","#1E92A5"];t.DEFAULT_COLORS=a;var o="#777";t.FALLBACK_COLOR=o},891:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.default=f;var n=o(r(976));var i=r(802);var a=r(828);function o(e){return e&&e.__esModule?e:{default:e}}function s(e,t){return l(e)||c(e,t)||u()}function u(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function c(e,t){var r=[];var n=true;var i=false;var a=undefined;try{for(var o=e[Symbol.iterator](),s;!(n=(s=o.next()).done);n=true){r.push(s.value);if(t&&r.length===t)break}}catch(e){i=true;a=e}finally{try{if(!n&&o["return"]!=null)o["return"]()}finally{if(i)throw a}}return r}function l(e){if(Array.isArray(e))return e}function f(e,t,r,o){var u=arguments.length>4&&arguments[4]!==undefined?arguments[4]:false;var c=t.coordinateSystem,l=t.controlsContainer;var f=[];var p=Object.assign({},o,{instances:r});if(p.variables){var h=[];if(p.variables.size){p.variables.forEach((function(e,t){return h.push([t,e])}))}else{h=Object.entries(p.variables)}h.forEach((function(t){var o=s(t,2),p=o[0],h=o[1];var d=Object.assign({},h);if(d.shared){return}d.name=p;d.precision=(0,a.getVariablePrecision)(d);if(d.latex===undefined){d.latex=(0,i.applyLatexReplacements)(p)}var v=new n.default({params:d,entities:r.filter((function(e){return e!==undefined})),coordinateSystem:c,globalArgs:e,isSharedVariable:u,container:l});f.push(v)}))}return{sliders:f}}},901:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.default=u;function n(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}function a(e,t,r){if(t)i(e.prototype,t);if(r)i(e,r);return e}var o={};var s=function(){function e(t){n(this,e);this.$scope={};this.visualizationKey=t}a(e,[{key:"get",value:function e(t){return this.$scope[t]!==undefined?this.$scope[t]:o[this.visualizationKey].$shared.$scope[t]}},{key:"set",value:function e(t,r){this.$scope[t]=r}},{key:"getScope",value:function e(){return Object.assign({},this.$scope,o[this.visualizationKey].$shared.$scope)}},{key:"getSharedScope",value:function e(){return o[this.visualizationKey].$shared.$scope}}]);return e}();function u(e,t,r){if(!o[e]){o[e]={}}if(!o[e].$shared){o[e].$shared=new s(e)}if(r){return o[e].$shared}if(!o[e][t]){o[e][t]=new s(e)}return o[e][t]}},910:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.generateSingleDynamicExpression=u;t.generateSingleFunction=c;t.generateSingleStaticExpression=f;var n=a(r(799));var i=r(802);function a(e){return e&&e.__esModule?e:{default:e}}var o=[{l:"n/1",r:"n"},{l:"(-c)*n",r:"-(c*n)"},{l:"(-c)/n",r:"-(c/n)"},{l:"n/(-c)",r:"-(n/c)"},{l:"(-n)^2",r:"n^2"},{l:"-(c*v)",r:"(-c)*v"},n.default.simplify.simplifyCore];function s(e){e.traverse((function(e){if(e.isConstantNode&&e.valueType==="number"&&e.value.substr(-1)!=="0"){e.value=parseFloat(parseFloat(e.value).toFixed(6)).toString()}}))}function u(e,t){return function(r){var i=n.default.parse(e);var a=i.transform((function(e){if(e.isSymbolNode&&e.name in r){var i=r[e.name];var a=i===0?"0":Math.abs(i).toFixed(t[e.name].precision);var o=new n.default.expression.node.ConstantNode(a,"number");if(i>=0){return new n.default.expression.node.ConstantNode(a,"number")}return new n.default.expression.node.OperatorNode("-","unaryMinus",[o])}return e}));var u=function e(t){if(t.isConstantNode&&parseFloat(t.value)===1){t.value="1"}if(t.isOperatorNode&&t.fn==="unaryMinus"){e(t.args[0])}};a.traverse((function(e){if(e.isOperatorNode){if(e.fn==="multiply"){e.args.forEach(u)}else if(e.fn==="divide"){u(e.args[1])}}}));var c=n.default.simplify(a,o);s(c);return c.toTex()}}function c(e){var t=n.default.parse(e);var r=t.compile();return r.eval}function l(e){return function(t){if(t.isSymbolNode){var r=(0,i.applyLatexReplacements)(t.name);if(t.name in e){var n=e[t.name].color;if(n){r="{\\color{".concat(n,"}").concat(r,"}")}}return" ".concat(r)}return undefined}}function f(e,t,r){var i=n.default.parse(e);if(!r){return i.toTex({handler:l(t)})}return i.toTex()}},946:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var n=r(802);var i=a(r(901));function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}function u(e,t,r){if(t)s(e.prototype,t);if(r)s(e,r);return e}function c(e){return"".concat(e," not implemented for animation object")}var l=function(){function e(t){o(this,e);this.svg=t.svg;this.scales=t.scales;this.params=t.params;this.expression=t.expression;this.sliders=t.sliders;this.entities=t.entities||[];this.bounds=t.bounds;this.scopeManager=(0,i.default)(t.visualizationKey,this.expression.expressionKey);if(t.params.tickHandler&&t.params.tickHandler.function){t.params.tickHandler=(0,n.createFunctionFromString)(t.params.tickHandler.function,"animation object")}this.tickHandler=this.getTickHandler(t);this.processOptionalArgs(t)}u(e,[{key:"processOptionalArgs",value:function e(t){}},{key:"getTickHandler",value:function e(){throw new Error(c("getTickHandler"))}},{key:"draw",value:function e(){throw new Error(c("draw"))}},{key:"reDraw",value:function e(){throw new Error(c("reDraw"))}},{key:"updateCoordinates",value:function e(){throw new Error(c("updateCoordinates"))}},{key:"tick",value:function e(t){this.tickData=this.tickHandler(this,t);this.tickData.t=t;this.updateCoordinates()}},{key:"getScope",value:function e(){return this.scopeManager.getScope()}},{key:"yValueForX",value:function e(t){var r=this.getScope();r.x=t;return this.expression.code.eval(r)}},{key:"valueOrNull",value:function e(t){if(!t&&t!==0){return null}return t}},{key:"getEntities",value:function e(){var t=this;return this.entities.filter((function(e){var r=e.expression?e.expression.params:null;if(!r){return false}if(t.params.target&&(!r.name||r.name!==t.params.target)){return false}return true}))}}]);return e}();t.default=l},976:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var n=l(r(977));var i=r(789);var a=r(833);var o=r(852);var s=l(r(901));var u=r(122);var c=r(13);function l(e){return e&&e.__esModule?e:{default:e}}function f(e){return d(e)||h(e)||p()}function p(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function h(e){if(Symbol.iterator in Object(e)||Object.prototype.toString.call(e)==="[object Arguments]")return Array.from(e)}function d(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++){r[t]=e[t]}return r}}function v(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function y(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}function m(e,t,r){if(t)y(e.prototype,t);if(r)y(e,r);return e}var b=function(){function e(t){var r=this;v(this,e);Object.defineProperty(this,"nextFrame",{configurable:true,enumerable:true,writable:true,value:function e(t){var n=t-r.timeOfLastFrame;r.timeOfLastFrame=t;var i=r.animationDuration*1e3;var a=r.params.max-r.params.min;var o=r.scopeManager?r.scopeManager.get(r.params.name):undefined;var e=o!==undefined?o:parseFloat(r.value);e+=n/i*a*r.animationDirection;if(e>r.params.max){r.animationDirection=-1;e=r.params.max}else if(e<r.params.min){r.animationDirection=1;e=r.params.min}r.slider.noUiSlider.set(e);r.updateVariableValue(parseFloat(e.toFixed(4)));r.animationRAF=requestAnimationFrame(r.nextFrame)}});this.params=t.params;this.value=this.params.value||0;this.entities=t.entities;this.coordinateSystem=t.coordinateSystem;this.globalArgs=t.globalArgs;this.wrapper=document.createElement("div");this.wrapper.className="viz-slider-wrapper viz-clearfix android-draggable";this.setupScopeManager(t);if(!this.params.hideLabel){this.label=document.createElement("div");this.label.className="viz-slider-label ".concat(a.RENDERING_CLASS);this.wrapper.appendChild(this.label)}this.slider=document.createElement("div");this.wrapper.appendChild(this.slider);if(this.params.animated){this.isAnimating=false;this.animationDirection=1;this.animationDuration=this.params.animationDuration||10;this.animationToggleBtn=document.createElement("button");this.animationToggleBtn.setAttribute("class","viz-anim-toggle viz-anim-toggle-var");this.animationToggleBtn.style.backgroundColor=this.params.color;this.wrapper.appendChild(this.animationToggleBtn);this.animationToggleBtn.addEventListener("click",(function(e){e.preventDefault();r.startStopAnimation()}))}}m(e,[{key:"setupScopeManager",value:function e(t){var r=this;var n=this.globalArgs.visualizationKey;if(t.isSharedVariable===true){this.scopeManager=(0,s.default)(n,null,t.isSharedVariable);this.scopeManager.set(this.params.name,this.value)}else if(this.entities.length){if(this.entities[0].expressions){this.scopeManagers=[];this.entities[0].expressions.forEach((function(e){var t=(0,s.default)(n,e.expressionKey);t.set(r.params.name,r.value);r.scopeManagers.push(t)}))}else{var i=this.entities[0].expressionKey||this.entities[0].expression.expressionKey;this.scopeManager=(0,s.default)(n,i);this.scopeManager.set(this.params.name,this.value)}}}},{key:"formatValue",value:function e(t){return parseFloat(t.toFixed(this.params.precision))}},{key:"draw",value:function e(){var t=this;return new Promise((function(e){var r=t.params;var a={start:t.value,step:r.step,range:{min:r.min,max:r.max},format:{from:function e(t){return parseFloat(t)},to:t.formatValue.bind(t)},animate:false};if(!r.hideScale){t.slider.className+=" has-scale";var o=r.hideSteps?-1:100/(r.max-r.min)*r.step;var s=Math.max(2,o);var u;if(r.scaleStep){u=[];var c=r.min;while(c<r.max){u.push(c);c+=r.scaleStep}u.push(r.max)}else if(r.scaleValues){u=r.scaleValues}a.pips={mode:u?"values":"count",values:u||2,stepped:true,density:s,format:{to:function e(t){return parseFloat(t.toFixed(r.precision))}}}}n.default.create(t.slider,a);t.setEventHandlers();if(!t.params.hideScale){t.createTooltip()}if(r.color){(0,i.setSliderColor)(t.slider,r.color)}if(!t.params.hideLabel){t.drawLabel().then(e)}else{e()}}))}},{key:"createTooltip",value:function e(){var t=this.slider.querySelector(".noUi-handle");var r=document.createElement("div");t.appendChild(r);r.classList.add("tooltip-container");var n=document.createElement("div");r.appendChild(n);n.classList.add("tooltip-contents");this.tooltipValue=document.createElement("span");n.appendChild(this.tooltipValue);this.tooltipValue.classList.add("tooltip-variable-value");this.updateTooltipValue(this.value);this.tooltip=n}},{key:"updateTooltipValue",value:function e(t){var r="";if(!this.params.hideLabel){r+=" : "}r+=this.formatValue(t);this.tooltipValue.innerHTML=r}},{key:"setEventHandlers",value:function e(){var t=this;this.slider.addEventListener("touchstart",(function(e){return e.preventDefault()}),{capture:true,passive:false});this.slider.noUiSlider.on("update",(function(e,r){if(!t.isAnimating){requestAnimationFrame((function(){return t.updateVariableValue(e[r])}))}}));var r=function e(r,n){if(t.isAnimating){t.updateVariableValue(r[n]);t.startStopAnimation()}};this.slider.noUiSlider.on("start",r);this.slider.noUiSlider.on("start",this.trackInteractionEvent.bind(this));this.slider.noUiSlider.on("change",r)}},{key:"trackInteractionEvent",value:function e(){var t=this.globalArgs.type===o.GRAPH_TYPES.GRAPH3D?"escher":"graph";(0,c.track)("ui",{action:"slider_dragged",visualization_type:t,visualization_name:this.globalArgs.interactiveSlug})}},{key:"drawLabel",value:function e(){var t=this;var r=function e(){var r=t.params.color;var n=t.params.latex;if(r){return"{\\color{".concat(r,"}").concat(n,"}")}return n};var n=function e(){if(!t.params.hideScale){var r=t.label.cloneNode(true);t.tooltip.insertAdjacentElement("afterbegin",r);r.className="tooltip-variable-name";r.style.display="inline"}t.label.classList.add(a.RENDERED_CLASS);t.label.classList.remove(a.RENDERING_CLASS)};return new Promise((function(e){var i=r();(0,u.renderExpressionIntoElement)(i,t.label);n();e()}))}},{key:"updateVariableValue",value:function e(t){var r=this;var n=parseFloat(t);if(this.scopeManager){this.scopeManager.set(this.params.name,n)}this.entities.forEach((function(e){e.reDraw();if(e.expressions){e.expressions.forEach((function(e,t){var i=r.scopeManager||r.scopeManagers[t];i.set(r.params.name,n);e.reDraw({dynamic:true})}))}else if(e.reDrawDynamicExpression){e.reDrawDynamicExpression()}}));if(this.tooltip){this.updateTooltipValue(n)}this.value=n}},{key:"startStopAnimation",value:function e(){var t="active";this.isAnimating=!this.isAnimating;if(this.isAnimating){this.animationToggleBtn.classList.add(t);this.timeOfLastFrame=performance.now();this.nonSteppedValue=parseFloat(this.value);this.animationRAF=requestAnimationFrame(this.nextFrame)}else{this.animationToggleBtn.classList.remove(t);cancelAnimationFrame(this.animationRAF)}}},{key:"addEntities",value:function e(t){var r;(r=this.entities).push.apply(r,f(t));this.setupScopeManager({})}}]);return e}();t.default=b},999:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.black=t.purple=t.yellow=t.magenta=t.orange=t.green=t.red=t.blue=t.borderRadiusMedium=t.paddingLarge=t.paddingMedium=t.paddingSmall=t.fontSizeSmall=t.fontSizeDefault=t.white=t.lightMediumGray=void 0;var n="#f0f0f0";t.lightMediumGray=n;var i="#fff";t.white=i;var a="15px";t.fontSizeDefault=a;var o="13px";t.fontSizeSmall=o;var s="8px";t.paddingSmall=s;var u="16px";t.paddingMedium=u;var c="24px";t.paddingLarge=c;var l="4px";t.borderRadiusMedium=l;var f="#0C6AC7";t.blue=f;var p="#D61F06";t.red=p;var h="#20A900";t.green=h;var d="#EC7300";t.orange=d;var v="#E81990";t.magenta=v;var y="#FEDF53";t.yellow=y;var m="#302B94";t.purple=m;var b="#000000";t.black=b}}]);
//# sourceMappingURL=viz-02-graph.57932e4e30264363ec01.js.map